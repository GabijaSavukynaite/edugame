function _defineProperty(e,t,i){if(t in e){Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0})}else{e[t]=i}return e}function _typeof(e){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(e){return typeof e}}else{_typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return _typeof(e)}(function(e,t){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module)))module.exports=t();else if("function"==typeof define&&define.amd)define ("mod_edugame/phaser","Phaser",[],t);else if("object"===("undefined"==typeof exports?"undefined":_typeof(exports)))exports.Phaser=t();else e.Phaser=t()})(window,function(){return function(e){var i={};function t(a){if(i[a]){return i[a].exports}var n=i[a]={i:a,l:!1,exports:{}};e[a].call(n.exports,n,n.exports,t);n.l=!0;return n.exports}t.m=e;t.c=i;t.d=function(e,i,a){if(!t.o(e,i)){Object.defineProperty(e,i,{enumerable:!0,get:a})}};t.r=function(e){if("undefined"!=typeof Symbol&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:!0})};t.t=function(e,i){if(1&i)e=t(e);if(8&i)return e;if(4&i&&"object"===_typeof(e)&&e&&e.__esModule)return e;var a=Object.create(null);t.r(a);Object.defineProperty(a,"default",{enumerable:!0,value:e});if(2&i&&"string"!=typeof e)for(var n in e){t.d(a,n,function(t){return e[t]}.bind(null,n))}return a};t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};t.d(i,"a",i);return i};t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};t.p="";return t(t.s=1387)}([function(e){function t(e){return!!e.get&&"function"==typeof e.get||!!e.set&&"function"==typeof e.set}function i(e,i,a){var n=a?e[i]:Object.getOwnPropertyDescriptor(e,i);if(!a&&n.value&&"object"===_typeof(n.value)){n=n.value}if(n&&t(n)){if("undefined"==typeof n.enumerable){n.enumerable=!0}if("undefined"==typeof n.configurable){n.configurable=!0}return n}else{return!1}}function a(e,t){var i=Object.getOwnPropertyDescriptor(e,t);if(!i){return!1}if(i.value&&"object"===_typeof(i.value)){i=i.value}if(!1===i.configurable){return!0}return!1}function n(e,t,n,r){for(var s in t){if(!t.hasOwnProperty(s)){continue}var l=i(t,s,n);if(!1!==l){if(a((r||e).prototype,s)){if(o.ignoreFinals){continue}throw new Error("cannot override final property '"+s+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(e.prototype,s,l)}else{e.prototype[s]=t[s]}}}function r(e,t){if(!t){return}if(!Array.isArray(t)){t=[t]}for(var a=0;a<t.length;a++){n(e,t[a].prototype||t[a])}}function o(e){if(!e){e={}}var t,i;if(e.initialize){if("function"!=typeof e.initialize){throw new Error("initialize must be a function")}t=e.initialize;delete e.initialize}else if(e.Extends){var a=e.Extends;t=function(){a.apply(this,arguments)}}else{t=function(){}}if(e.Extends){t.prototype=Object.create(e.Extends.prototype);t.prototype.constructor=t;i=e.Extends;delete e.Extends}else{t.prototype.constructor=t}var o=null;if(e.Mixins){o=e.Mixins;delete e.Mixins}r(t,o);n(t,e,!0,i);return t}o.extend=n;o.mixin=r;o.ignoreFinals=!1;e.exports=o},function(e){e.exports=function NOOP(){}},function(e){var t=function(e,i,a){var n=_typeof(e);if(!e||"number"===n||"string"===n){return a}else if(e.hasOwnProperty(i)&&e[i]!==void 0){return e[i]}else{return a}};e.exports=t},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t){this.x=0;this.y=0;if("object"===_typeof(e)){this.x=e.x||0;this.y=e.y||0}else{if(t===void 0){t=e}this.x=e||0;this.y=t||0}},clone:function clone(){return new n(this.x,this.y)},copy:function copy(e){this.x=e.x||0;this.y=e.y||0;return this},setFromObject:function setFromObject(e){this.x=e.x||0;this.y=e.y||0;return this},set:function set(e,t){if(t===void 0){t=e}this.x=e;this.y=t;return this},setTo:function setTo(e,t){return this.set(e,t)},setToPolar:function setToPolar(e,t){if(null==t){t=1}this.x=Math.cos(e)*t;this.y=Math.sin(e)*t;return this},equals:function equals(e){return this.x===e.x&&this.y===e.y},angle:function(){var e=Math.atan2(this.y,this.x);if(0>e){e+=2*Math.PI}return e},add:function add(e){this.x+=e.x;this.y+=e.y;return this},subtract:function subtract(e){this.x-=e.x;this.y-=e.y;return this},multiply:function multiply(e){this.x*=e.x;this.y*=e.y;return this},scale:function scale(e){if(isFinite(e)){this.x*=e;this.y*=e}else{this.x=0;this.y=0}return this},divide:function divide(e){this.x/=e.x;this.y/=e.y;return this},negate:function negate(){this.x=-this.x;this.y=-this.y;return this},distance:function distance(e){var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},distanceSq:function distanceSq(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},length:function length(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},lengthSq:function lengthSq(){var e=this.x,t=this.y;return e*e+t*t},normalize:function normalize(){var e=this.x,t=this.y,i=e*e+t*t;if(0<i){i=1/Math.sqrt(i);this.x=e*i;this.y=t*i}return this},normalizeRightHand:function normalizeRightHand(){var e=this.x;this.x=-1*this.y;this.y=e;return this},dot:function dot(e){return this.x*e.x+this.y*e.y},cross:function cross(e){return this.x*e.y-this.y*e.x},lerp:function lerp(e,i){if(i===void 0){i=0}var a=this.x,n=this.y;this.x=a+i*(e.x-a);this.y=n+i*(e.y-n);return this},transformMat3:function transformMat3(e){var t=this.x,i=this.y,a=e.val;this.x=a[0]*t+a[3]*i+a[6];this.y=a[1]*t+a[4]*i+a[7];return this},transformMat4:function transformMat4(e){var t=this.x,i=this.y,a=e.val;this.x=a[0]*t+a[4]*i+a[12];this.y=a[1]*t+a[5]*i+a[13];return this},reset:function reset(){this.x=0;this.y=0;return this}});n.ZERO=new n;n.RIGHT=new n(1,0);n.LEFT=new n(-1,0);n.UP=new n(0,-1);n.DOWN=new n(0,1);n.ONE=new n(1,1);e.exports=n},function(e,t,i){var a=i(0),n=i(46),r=new a({initialize:function(e,t){if(e===void 0){e=0}if(t===void 0){t=e}this.type=n.POINT;this.x=e;this.y=t},setTo:function setTo(e,t){if(e===void 0){e=0}if(t===void 0){t=e}this.x=e;this.y=t;return this}});e.exports=r},function(e,t,i){var a=i(0),n=i(23),r=i(19),o=new a({initialize:function(e){this.scene=e;this.systems=e.sys;this.displayList;this.updateList;e.sys.events.once(r.BOOT,this.boot,this);e.sys.events.on(r.START,this.start,this)},boot:function boot(){this.displayList=this.systems.displayList;this.updateList=this.systems.updateList;this.systems.events.once(r.DESTROY,this.destroy,this)},start:function start(){this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},existing:function existing(e){if(e.renderCanvas||e.renderWebGL){this.displayList.add(e)}if(e.preUpdate){this.updateList.add(e)}return e},shutdown:function shutdown(){this.systems.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown();this.scene.sys.events.off(r.START,this.start,this);this.scene=null;this.systems=null;this.displayList=null;this.updateList=null}});o.register=function(e,t){if(!o.prototype.hasOwnProperty(e)){o.prototype[e]=t}};o.remove=function(e){if(o.prototype.hasOwnProperty(e)){delete o.prototype[e]}};n.register("GameObjectFactory",o,"add");e.exports=o},function(e){e.exports=function GetValue(e,t,a){if(!e||"number"==typeof e){return a}else if(e.hasOwnProperty(t)){return e[t]}else if(-1!==t.indexOf(".")){for(var n=t.split("."),r=e,o=a,s=0;s<n.length;s++){if(r.hasOwnProperty(n[s])){o=r[n[s]];r=r[n[s]]}else{o=a;break}}return o}else{return a}}},function(e){var t=function(e){if("object"!==_typeof(e)||e.nodeType||e===e.window){return!1}try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf")){return!1}}catch(t){return!1}return!0};e.exports=t},function(e){var t={};e.exports={install:function install(e){for(var i in t){e[i]=t[i]}},register:function register(e,i){t[e]=i},destroy:function destroy(){t={}}}},function(e){"use strict";var o=Object.prototype.hasOwnProperty,s="~";function t(){}if(Object.create){t.prototype=Object.create(null);if(!new t().__proto__)s=!1}function i(e,t,i){this.fn=e;this.context=t;this.once=i||!1}function a(e,t,a,n,r){if("function"!=typeof a){throw new TypeError("The listener must be a function")}var o=new i(a,n||e,r),l=s?s+t:t;if(!e._events[l])e._events[l]=o,e._eventsCount++;else if(!e._events[l].fn)e._events[l].push(o);else e._events[l]=[e._events[l],o];return e}function n(e,i){if(0==--e._eventsCount)e._events=new t;else delete e._events[i]}function r(){this._events=new t;this._eventsCount=0}r.prototype.eventNames=function(){var e=[],t,i;if(0===this._eventsCount)return e;for(i in t=this._events){if(o.call(t,i))e.push(s?i.slice(1):i)}if(Object.getOwnPropertySymbols){return e.concat(Object.getOwnPropertySymbols(t))}return e};r.prototype.listeners=function(e){var t=s?s+e:e,a=this._events[t];if(!a)return[];if(a.fn)return[a.fn];for(var n=0,r=a.length,o=Array(r);n<r;n++){o[n]=a[n].fn}return o};r.prototype.listenerCount=function(e){var t=s?s+e:e,i=this._events[t];if(!i)return 0;if(i.fn)return 1;return i.length};r.prototype.emit=function(e,t,a,n,r,o){var l=s?s+e:e;if(!this._events[l])return!1;var d=this._events[l],p=arguments.length,c,u;if(d.fn){if(d.once)this.removeListener(e,d.fn,void 0,!0);switch(p){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,a),!0;case 4:return d.fn.call(d.context,t,a,n),!0;case 5:return d.fn.call(d.context,t,a,n,r),!0;case 6:return d.fn.call(d.context,t,a,n,r,o),!0;}for(u=1,c=Array(p-1);u<p;u++){c[u-1]=arguments[u]}d.fn.apply(d.context,c)}else{var g=d.length,h;for(u=0;u<g;u++){if(d[u].once)this.removeListener(e,d[u].fn,void 0,!0);switch(p){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,a);break;case 4:d[u].fn.call(d[u].context,t,a,n);break;default:if(!c)for(h=1,c=Array(p-1);h<p;h++){c[h-1]=arguments[h]}d[u].fn.apply(d[u].context,c);}}}return!0};r.prototype.on=function(e,t,i){return a(this,e,t,i,!1)};r.prototype.once=function(e,t,i){return a(this,e,t,i,!0)};r.prototype.removeListener=function(e,t,a,r){var o=s?s+e:e;if(!this._events[o])return this;if(!t){n(this,o);return this}var l=this._events[o];if(l.fn){if(l.fn===t&&(!r||l.once)&&(!a||l.context===a)){n(this,o)}}else{for(var d=0,p=[],c=l.length;d<c;d++){if(l[d].fn!==t||r&&!l[d].once||a&&l[d].context!==a){p.push(l[d])}}if(p.length)this._events[o]=1===p.length?p[0]:p;else n(this,o)}return this};r.prototype.removeAllListeners=function(e){var i;if(e){i=s?s+e:e;if(this._events[i])n(this,i)}else{this._events=new t;this._eventsCount=0}return this};r.prototype.off=r.prototype.removeListener;r.prototype.addListener=r.prototype.on;r.prefixed=s;r.EventEmitter=r;e.exports=r},function(e){e.exports={getTintFromFloats:function getTintFromFloats(e,t,i,n){return((255&(0|255*n))<<24|(255&(0|255*e))<<16|(255&(0|255*t))<<8|255&(0|255*i))>>>0},getTintAppendFloatAlpha:function getTintAppendFloatAlpha(e,t){return((255&(0|255*t))<<24|e)>>>0},getTintAppendFloatAlphaAndSwap:function getTintAppendFloatAlphaAndSwap(e,t){return((255&(0|255*t))<<24|(255&(0|e))<<16|(255&(0|e>>8))<<8|255&(0|e>>16))>>>0},getFloatsFromUintRGB:function getFloatsFromUintRGB(e){return[(255&(0|e>>16))/255,(255&(0|e>>8))/255,(255&(0|e))/255]},getComponentCount:function getComponentCount(e,t){for(var i=0,a=0,n;a<e.length;++a){n=e[a];if(n.type===t.FLOAT){i+=n.size}else{i+=1}}return i}}},function(e,t,i){var a=i(0),n=i(47),r=i(149),o=i(271),s=i(46),l=i(56),d=i(152),p=new a({initialize:function(e,t,i,a){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=0}this.type=s.RECTANGLE;this.x=e;this.y=t;this.width=i;this.height=a},contains:function contains(e,t){return n(this,e,t)},getPoint:function getPoint(e,t){return r(this,e,t)},getPoints:function getPoints(e,t,i){return o(this,e,t,i)},getRandomPoint:function getRandomPoint(e){return d(this,e)},setTo:function setTo(e,t,i,a){this.x=e;this.y=t;this.width=i;this.height=a;return this},setEmpty:function setEmpty(){return this.setTo(0,0,0,0)},setPosition:function setPosition(e,t){if(t===void 0){t=e}this.x=e;this.y=t;return this},setSize:function setSize(e,t){if(t===void 0){t=e}this.width=e;this.height=t;return this},isEmpty:function isEmpty(){return 0>=this.width||0>=this.height},getLineA:function getLineA(e){if(e===void 0){e=new l}e.setTo(this.x,this.y,this.right,this.y);return e},getLineB:function getLineB(e){if(e===void 0){e=new l}e.setTo(this.right,this.y,this.right,this.bottom);return e},getLineC:function getLineC(e){if(e===void 0){e=new l}e.setTo(this.right,this.bottom,this.x,this.bottom);return e},getLineD:function getLineD(e){if(e===void 0){e=new l}e.setTo(this.x,this.bottom,this.x,this.y);return e},left:{get:function get(){return this.x},set:function set(e){if(e>=this.right){this.width=0}else{this.width=this.right-e}this.x=e}},right:{get:function get(){return this.x+this.width},set:function set(e){if(e<=this.x){this.width=0}else{this.width=e-this.x}}},top:{get:function get(){return this.y},set:function set(e){if(e>=this.bottom){this.height=0}else{this.height=this.bottom-e}this.y=e}},bottom:{get:function get(){return this.y+this.height},set:function set(e){if(e<=this.y){this.height=0}else{this.height=e-this.y}}},centerX:{get:function get(){return this.x+this.width/2},set:function set(e){this.x=e-this.width/2}},centerY:{get:function get(){return this.y+this.height/2},set:function set(e){this.y=e-this.height/2}}});e.exports=p},function(e,t,i){e.exports={Alpha:i(527),AlphaSingle:i(266),Animation:i(498),BlendMode:i(269),ComputedSize:i(546),Crop:i(547),Depth:i(270),Flip:i(548),GetBounds:i(549),Mask:i(274),Origin:i(566),PathFollower:i(567),Pipeline:i(153),ScrollFactor:i(277),Size:i(568),Texture:i(569),TextureCrop:i(570),Tint:i(571),ToJSON:i(278),Transform:i(279),TransformMatrix:i(32),Visible:i(280)}},function(e){var t={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};e.exports=t},function(e,t,i){var a=i(0),n=i(278),r=i(113),o=i(9),s=i(90),l=new a({Extends:o,initialize:function(e,t){o.call(this);this.scene=e;this.type=t;this.state=0;this.parentContainer=null;this.name="";this.active=!0;this.tabIndex=-1;this.data=null;this.renderFlags=15;this.cameraFilter=0;this.input=null;this.body=null;this.ignoreDestroy=!1;e.sys.queueDepthSort()},setActive:function setActive(e){this.active=e;return this},setName:function setName(e){this.name=e;return this},setState:function setState(e){this.state=e;return this},setDataEnabled:function setDataEnabled(){if(!this.data){this.data=new r(this)}return this},setData:function setData(e,t){if(!this.data){this.data=new r(this)}this.data.set(e,t);return this},getData:function getData(e){if(!this.data){this.data=new r(this)}return this.data.get(e)},setInteractive:function setInteractive(e,t,i){this.scene.sys.input.enable(this,e,t,i);return this},disableInteractive:function disableInteractive(){if(this.input){this.input.enabled=!1}return this},removeInteractive:function removeInteractive(){this.scene.sys.input.clear(this);this.input=void 0;return this},update:function update(){},toJSON:function toJSON(){return n(this)},willRender:function willRender(e){return!(l.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&e.id)},getIndexList:function getIndexList(){var e=this,t=this.parentContainer,i=[];while(t){i.unshift(t.getIndex(e));e=t;if(!t.parentContainer){break}else{t=t.parentContainer}}i.unshift(this.scene.sys.displayList.getIndex(e));return i},destroy:function destroy(e){if(e===void 0){e=!1}if(!this.scene||this.ignoreDestroy){return}if(this.preDestroy){this.preDestroy.call(this)}this.emit(s.DESTROY,this);var t=this.scene.sys;if(!e){t.displayList.remove(this);t.updateList.remove(this)}if(this.input){t.input.clear(this);this.input=void 0}if(this.data){this.data.destroy();this.data=void 0}if(this.body){this.body.destroy();this.body=void 0}if(!e){t.queueDepthSort()}this.active=!1;this.visible=!1;this.scene=void 0;this.parentContainer=void 0;this.removeAllListeners()}});l.RENDER_MASK=15;e.exports=l},function(e,t,i){var a=i(168),n=i(6),r=function(e,t,i){var r=n(e,t,null);if(null===r){return i}else if(Array.isArray(r)){return a.RND.pick(r)}else if("object"===_typeof(r)){if(r.hasOwnProperty("randInt")){return a.RND.integerInRange(r.randInt[0],r.randInt[1])}else if(r.hasOwnProperty("randFloat")){return a.RND.realInRange(r.randFloat[0],r.randFloat[1])}}else if("function"==typeof r){return r(t)}return r};e.exports=r},function(e,t,i){var a=i(0),n=i(23),r=i(19),o=new a({initialize:function(e){this.scene=e;this.systems=e.sys;this.displayList;this.updateList;e.sys.events.once(r.BOOT,this.boot,this);e.sys.events.on(r.START,this.start,this)},boot:function boot(){this.displayList=this.systems.displayList;this.updateList=this.systems.updateList;this.systems.events.once(r.DESTROY,this.destroy,this)},start:function start(){this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function shutdown(){this.systems.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown();this.scene.sys.events.off(r.START,this.start,this);this.scene=null;this.systems=null;this.displayList=null;this.updateList=null}});o.register=function(e,t){if(!o.prototype.hasOwnProperty(e)){o.prototype[e]=t}};o.remove=function(e){if(o.prototype.hasOwnProperty(e)){delete o.prototype[e]}};n.register("GameObjectCreator",o,"make");e.exports=o},function(e,t,i){var a=i(7),n=function(){var e,t,r,o,s,l,d=arguments[0]||{},p=1,c=arguments.length,u=!1;if("boolean"==typeof d){u=d;d=arguments[1]||{};p=2}if(c===p){d=this;--p}for(;p<c;p++){if(null!=(e=arguments[p])){for(t in e){r=d[t];o=e[t];if(d===o){continue}if(u&&o&&(a(o)||(s=Array.isArray(o)))){if(s){s=!1;l=r&&Array.isArray(r)?r:[]}else{l=r&&a(r)?r:{}}d[t]=n(u,l,o)}else if(o!==void 0){d[t]=o}}}}return d};e.exports=n},function(e,t,i){e.exports={BLUR:i(550),BOOT:i(551),CONTEXT_LOST:i(552),CONTEXT_RESTORED:i(553),DESTROY:i(554),FOCUS:i(555),HIDDEN:i(556),PAUSE:i(557),POST_RENDER:i(558),POST_STEP:i(559),PRE_RENDER:i(560),PRE_STEP:i(561),READY:i(562),RESUME:i(563),STEP:i(564),VISIBLE:i(565)}},function(e,t,i){e.exports={BOOT:i(700),CREATE:i(701),DESTROY:i(702),PAUSE:i(703),POST_UPDATE:i(704),PRE_UPDATE:i(705),READY:i(706),RENDER:i(707),RESUME:i(708),SHUTDOWN:i(709),SLEEP:i(710),START:i(711),TRANSITION_COMPLETE:i(712),TRANSITION_INIT:i(713),TRANSITION_OUT:i(714),TRANSITION_START:i(715),TRANSITION_WAKE:i(716),UPDATE:i(717),WAKE:i(718)}},function(e){e.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(e,t,i){var a=i(0),n=i(20),r=i(81),o=i(2),s=i(134),l=i(212),d=i(447),p=i(135),c=new a({initialize:function(e,t){this.loader=e;this.cache=o(t,"cache",!1);this.type=o(t,"type",!1);this.key=o(t,"key",!1);var i=this.key;if(e.prefix&&""!==e.prefix){this.key=e.prefix+i}if(!this.type||!this.key){throw new Error("Error calling 'Loader."+this.type+"' invalid key provided.")}this.url=o(t,"url");if(this.url===void 0){this.url=e.path+i+"."+o(t,"extension","")}else if("function"!=typeof this.url){this.url=e.path+this.url}this.src="";this.xhrSettings=p(o(t,"responseType",void 0));if(o(t,"xhrSettings",!1)){this.xhrSettings=l(this.xhrSettings,o(t,"xhrSettings",{}))}this.xhrLoader=null;this.state="function"==typeof this.url?n.FILE_POPULATED:n.FILE_PENDING;this.bytesTotal=0;this.bytesLoaded=-1;this.percentComplete=-1;this.crossOrigin=void 0;this.data=void 0;this.config=o(t,"config",{});this.multiFile;this.linkFile},setLink:function setLink(e){this.linkFile=e;e.linkFile=this},resetXHR:function resetXHR(){if(this.xhrLoader){this.xhrLoader.onload=void 0;this.xhrLoader.onerror=void 0;this.xhrLoader.onprogress=void 0}},load:function load(){if(this.state===n.FILE_POPULATED){this.loader.nextFile(this,!0)}else{this.src=s(this,this.loader.baseURL);if(0===this.src.indexOf("data:")){console.warn("Local data URIs are not supported: "+this.key)}else{this.xhrLoader=d(this,this.loader.xhr)}}},onLoad:function onLoad(e,t){var i=e.responseURL&&0===e.responseURL.indexOf("file://")&&0===t.target.status,a=!(t.target&&200!==t.target.status)||i;if(4===e.readyState&&400<=e.status&&599>=e.status){a=!1}this.resetXHR();this.loader.nextFile(this,a)},onError:function onError(){this.resetXHR();this.loader.nextFile(this,!1)},onProgress:function onProgress(e){if(e.lengthComputable){this.bytesLoaded=e.loaded;this.bytesTotal=e.total;this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1);this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete)}},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;this.onProcessComplete()},onProcessComplete:function onProcessComplete(){this.state=n.FILE_COMPLETE;if(this.multiFile){this.multiFile.onFileComplete(this)}this.loader.fileProcessComplete(this)},onProcessError:function onProcessError(){this.state=n.FILE_ERRORED;if(this.multiFile){this.multiFile.onFileFailed(this)}this.loader.fileProcessComplete(this)},hasCacheConflict:function hasCacheConflict(){return this.cache&&this.cache.exists(this.key)},addToCache:function addToCache(){if(this.cache){this.cache.add(this.key,this.data)}this.pendingDestroy()},pendingDestroy:function pendingDestroy(e){if(e===void 0){e=this.data}var t=this.key,i=this.type;this.loader.emit(r.FILE_COMPLETE,t,i,e);this.loader.emit(r.FILE_KEY_COMPLETE+i+"-"+t,t,i,e);this.loader.flagForRemoval(this)},destroy:function destroy(){this.loader=null;this.cache=null;this.xhrSettings=null;this.multiFile=null;this.linkFile=null;this.data=null}});c.createObjectURL=function(e,t,i){if("function"==typeof URL){e.src=URL.createObjectURL(t)}else{var a=new FileReader;a.onload=function(){e.removeAttribute("crossOrigin");e.src="data:"+(t.type||i)+";base64,"+a.result.split(",")[1]};a.onerror=e.onerror;a.readAsDataURL(t)}};c.revokeObjectURL=function(e){if("function"==typeof URL){URL.revokeObjectURL(e.src)}};e.exports=c},function(e){e.exports=function Clamp(e,t,i){return Math.max(t,Math.min(i,e))}},function(e){var t={},i={},a={};a.register=function(e,i,a,n){if(n===void 0){n=!1}t[e]={plugin:i,mapping:a,custom:n}};a.registerCustom=function(e,t,a,n){i[e]={plugin:t,mapping:a,data:n}};a.hasCore=function(e){return t.hasOwnProperty(e)};a.hasCustom=function(e){return i.hasOwnProperty(e)};a.getCore=function(e){return t[e]};a.getCustom=function(e){return i[e]};a.getCustomClass=function(e){return i.hasOwnProperty(e)?i[e].plugin:null};a.remove=function(e){if(t.hasOwnProperty(e)){delete t[e]}};a.removeCustom=function(e){if(i.hasOwnProperty(e)){delete i[e]}};a.destroyCorePlugins=function(){for(var e in t){if(t.hasOwnProperty(e)){delete t[e]}}};a.destroyCustomPlugins=function(){for(var e in i){if(i.hasOwnProperty(e)){delete i[e]}}};e.exports=a},function(e,t,i){var a=i(2);e.exports=function GetTilesWithin(e,t,i,n,r,o){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=o.width}if(n===void 0){n=o.height}var s=a(r,"isNotEmpty",!1),l=a(r,"isColliding",!1),d=a(r,"hasInterestingFace",!1);if(0>e){i+=e;e=0}if(0>t){n+=t;t=0}if(e+i>o.width){i=Math.max(o.width-e,0)}if(t+n>o.height){n=Math.max(o.height-t,0)}for(var p=[],c=t;c<t+n;c++){for(var u=e,g;u<e+i;u++){g=o.data[c][u];if(null!==g){if(s&&-1===g.index){continue}if(l&&!g.collides){continue}if(d&&!g.hasInterestingFace){continue}p.push(g)}}}return p}},function(e){e.exports=function PropertyValueSet(e,a,n,r,o,s){if(r===void 0){r=0}if(o===void 0){o=0}if(s===void 0){s=1}var l,d=0,p=e.length;if(1===s){for(l=o;l<p;l++){e[l][a]=n+d*r;d++}}else{for(l=o;0<=l;l--){e[l][a]=n+d*r;d++}}return e}},function(e,t,i){var a=i(29),n=i(164),r=[],o=!1;e.exports=function CanvasPool(){var e=function(e,i,s,l,d){if(i===void 0){i=1}if(s===void 0){s=1}if(l===void 0){l=a.CANVAS}if(d===void 0){d=!1}var p,c=t(l);if(null===c){c={parent:e,canvas:document.createElement("canvas"),type:l};if(l===a.CANVAS){r.push(c)}p=c.canvas}else{c.parent=e;p=c.canvas}if(d){c.parent=p}p.width=i;p.height=s;if(o&&l===a.CANVAS){n.disable(p.getContext("2d"))}return p},t=function(e){if(e===void 0){e=a.CANVAS}if(e===a.WEBGL){return null}for(var t=0,n;t<r.length;t++){n=r[t];if(!n.parent&&n.type===e){return n}}return null},i=function(){var e=0;r.forEach(function(t){if(t.parent){e++}});return e};return{create2D:function create2D(t,i,n){return e(t,i,n,a.CANVAS)},create:e,createWebGL:function createWebGL(t,i,n){return e(t,i,n,a.WEBGL)},disableSmoothing:function disableSmoothing(){o=!0},enableSmoothing:function enableSmoothing(){o=!1},first:t,free:function free(){return r.length-i()},pool:r,remove:function remove(e){var t=e instanceof HTMLCanvasElement;r.forEach(function(i){if(t&&i.canvas===e||!t&&i.parent===e){i.parent=null;i.canvas.width=1;i.canvas.height=1}})},total:i}}()},function(e){e.exports=function SetTransform(e,t,i,a,n){var r=a.alpha*i.alpha;if(0>=r){return!1}var o=e._tempMatrix1.copyFromArray(a.matrix.matrix),s=e._tempMatrix2.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),l=e._tempMatrix3;if(n){o.multiplyWithOffset(n,-a.scrollX*i.scrollFactorX,-a.scrollY*i.scrollFactorY);s.e=i.x;s.f=i.y;o.multiply(s,l)}else{s.e-=a.scrollX*i.scrollFactorX;s.f-=a.scrollY*i.scrollFactorY;o.multiply(s,l)}t.globalCompositeOperation=e.blendModes[i.blendMode];t.globalAlpha=r;t.save();l.setToContext(t);t.imageSmoothingEnabled=!(!e.antialias||i.frame&&i.frame.source.scaleMode);return!0}},function(e,t,i){var a=i(52),n=i(15);e.exports=function BuildGameObject(e,t,i){t.x=n(i,"x",0);t.y=n(i,"y",0);t.depth=n(i,"depth",0);t.flipX=n(i,"flipX",!1);t.flipY=n(i,"flipY",!1);var r=n(i,"scale",null);if("number"==typeof r){t.setScale(r)}else if(null!==r){t.scaleX=n(r,"x",1);t.scaleY=n(r,"y",1)}var o=n(i,"scrollFactor",null);if("number"==typeof o){t.setScrollFactor(o)}else if(null!==o){t.scrollFactorX=n(o,"x",1);t.scrollFactorY=n(o,"y",1)}t.rotation=n(i,"rotation",0);var s=n(i,"angle",null);if(null!==s){t.angle=s}t.alpha=n(i,"alpha",1);var l=n(i,"origin",null);if("number"==typeof l){t.setOrigin(l)}else if(null!==l){var d=n(l,"x",.5),p=n(l,"y",.5);t.setOrigin(d,p)}t.blendMode=n(i,"blendMode",a.NORMAL);t.visible=n(i,"visible",!0);var c=n(i,"add",!0);if(c){e.sys.displayList.add(t)}if(t.preUpdate){e.sys.updateList.add(t)}return t}},function(e,t,i){var a={VERSION:"3.22.0",BlendModes:i(52),ScaleModes:i(231),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};e.exports=a},function(e,t,i){var a=i(0),n=i(12),r=i(14),o=i(56),s=new a({Extends:r,Mixins:[n.AlphaSingle,n.BlendMode,n.ComputedSize,n.Depth,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Transform,n.Visible],initialize:function(e,t,i){if(t===void 0){t="Shape"}r.call(this,e,t);this.geom=i;this.pathData=[];this.pathIndexes=[];this.fillColor=16777215;this.fillAlpha=1;this.strokeColor=16777215;this.strokeAlpha=1;this.lineWidth=1;this.isFilled=!1;this.isStroked=!1;this.closePath=!0;this._tempLine=new o;this.initPipeline()},setFillStyle:function setFillStyle(e,t){if(t===void 0){t=1}if(e===void 0){this.isFilled=!1}else{this.fillColor=e;this.fillAlpha=t;this.isFilled=!0}return this},setStrokeStyle:function setStrokeStyle(e,t,i){if(i===void 0){i=1}if(e===void 0){this.isStroked=!1}else{this.lineWidth=e;this.strokeColor=t;this.strokeAlpha=i;this.isStroked=!0}return this},setClosePath:function setClosePath(e){this.closePath=e;return this},preDestroy:function preDestroy(){this.geom=null;this._tempLine=null;this.pathData=[];this.pathIndexes=[]}});e.exports=s},function(e){e.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(e,t,i){var a=i(0),n=i(13),r=i(3),o=new a({initialize:function(e,t,i,n,r,o){if(e===void 0){e=1}if(t===void 0){t=0}if(i===void 0){i=0}if(n===void 0){n=1}if(r===void 0){r=0}if(o===void 0){o=0}this.matrix=new Float32Array([e,t,i,n,r,o,0,0,1]);this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function get(){return this.matrix[0]},set:function set(e){this.matrix[0]=e}},b:{get:function get(){return this.matrix[1]},set:function set(e){this.matrix[1]=e}},c:{get:function get(){return this.matrix[2]},set:function set(e){this.matrix[2]=e}},d:{get:function get(){return this.matrix[3]},set:function set(e){this.matrix[3]=e}},e:{get:function get(){return this.matrix[4]},set:function set(e){this.matrix[4]=e}},f:{get:function get(){return this.matrix[5]},set:function set(e){this.matrix[5]=e}},tx:{get:function get(){return this.matrix[4]},set:function set(e){this.matrix[4]=e}},ty:{get:function get(){return this.matrix[5]},set:function set(e){this.matrix[5]=e}},rotation:{get:function get(){return Math.acos(this.a/this.scaleX)*(0>Math.atan(-this.c/this.a)?-1:1)}},rotationNormalized:{get:function get(){var e=this.matrix,t=e[0],i=e[1],a=e[2],r=e[3];if(t||i){return 0<i?Math.acos(t/this.scaleX):-Math.acos(t/this.scaleX)}else if(a||r){return n.TAU-(0<r?Math.acos(-a/this.scaleY):-Math.acos(a/this.scaleY))}else{return 0}}},scaleX:{get:function get(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function get(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function loadIdentity(){var e=this.matrix;e[0]=1;e[1]=0;e[2]=0;e[3]=1;e[4]=0;e[5]=0;return this},translate:function translate(e,t){var i=this.matrix;i[4]=i[0]*e+i[2]*t+i[4];i[5]=i[1]*e+i[3]*t+i[5];return this},scale:function scale(e,t){var i=this.matrix;i[0]*=e;i[1]*=e;i[2]*=t;i[3]*=t;return this},rotate:function rotate(e){var t=Math.sin(e),i=Math.cos(e),n=this.matrix,r=n[0],a=n[1],o=n[2],s=n[3];n[0]=r*i+o*t;n[1]=a*i+s*t;n[2]=r*-t+o*i;n[3]=a*-t+s*i;return this},multiply:function multiply(e,t){var i=this.matrix,a=e.matrix,n=i[0],r=i[1],o=i[2],s=i[3],l=i[4],d=i[5],p=a[0],c=a[1],u=a[2],g=a[3],h=a[4],m=a[5],y=t===void 0?this:t;y.a=p*n+c*o;y.b=p*r+c*s;y.c=u*n+g*o;y.d=u*r+g*s;y.e=h*n+m*o+l;y.f=h*r+m*s+d;return y},multiplyWithOffset:function multiplyWithOffset(e,t,i){var a=this.matrix,n=e.matrix,r=a[0],o=a[1],s=a[2],l=a[3],d=a[4],p=a[5],c=n[0],u=n[1],g=n[2],h=n[3],m=n[4],y=n[5];a[0]=c*r+u*s;a[1]=c*o+u*l;a[2]=g*r+h*s;a[3]=g*o+h*l;a[4]=m*r+y*s+(t*r+i*s+d);a[5]=m*o+y*l+(t*o+i*l+p);return this},transform:function transform(e,t,i,a,n,r){var o=this.matrix,s=o[0],l=o[1],d=o[2],p=o[3],c=o[4],u=o[5];o[0]=e*s+t*d;o[1]=e*l+t*p;o[2]=i*s+a*d;o[3]=i*l+a*p;o[4]=n*s+r*d+c;o[5]=n*l+r*p+u;return this},transformPoint:function transformPoint(e,t,i){if(i===void 0){i={x:0,y:0}}var n=this.matrix,r=n[0],a=n[1],o=n[2],s=n[3],l=n[4],d=n[5];i.x=e*r+t*o+l;i.y=e*a+t*s+d;return i},invert:function invert(){var e=this.matrix,t=e[0],i=e[1],a=e[2],r=e[3],o=e[4],s=e[5],l=t*r-i*a;e[0]=r/l;e[1]=-i/l;e[2]=-a/l;e[3]=t/l;e[4]=(a*s-r*o)/l;e[5]=-(t*s-i*o)/l;return this},copyFrom:function copyFrom(e){var t=this.matrix;t[0]=e.a;t[1]=e.b;t[2]=e.c;t[3]=e.d;t[4]=e.e;t[5]=e.f;return this},copyFromArray:function copyFromArray(e){var t=this.matrix;t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];return this},copyToContext:function copyToContext(e){var t=this.matrix;e.transform(t[0],t[1],t[2],t[3],t[4],t[5]);return e},setToContext:function setToContext(e){var t=this.matrix;e.setTransform(t[0],t[1],t[2],t[3],t[4],t[5]);return e},copyToArray:function copyToArray(e){var t=this.matrix;if(e===void 0){e=[t[0],t[1],t[2],t[3],t[4],t[5]]}else{e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5]}return e},setTransform:function setTransform(e,t,i,a,n,r){var o=this.matrix;o[0]=e;o[1]=t;o[2]=i;o[3]=a;o[4]=n;o[5]=r;return this},decomposeMatrix:function decomposeMatrix(){var e=this.decomposedMatrix,t=this.matrix,i=t[0],a=t[1],n=t[2],o=t[3],l=i*o-a*n;e.translateX=t[4];e.translateY=t[5];if(i||a){var d=Math.sqrt(i*i+a*a);e.rotation=0<a?Math.acos(i/d):-Math.acos(i/d);e.scaleX=d;e.scaleY=l/d}else if(n||o){var r=Math.sqrt(n*n+o*o);e.rotation=.5*Math.PI-(0<o?Math.acos(-n/r):-Math.acos(n/r));e.scaleX=l/r;e.scaleY=r}else{e.rotation=0;e.scaleX=0;e.scaleY=0}return e},applyITRS:function applyITRS(e,t,i,a,n){var r=this.matrix,o=Math.sin(i),s=Math.cos(i);r[4]=e;r[5]=t;r[0]=s*a;r[1]=o*a;r[2]=-o*n;r[3]=s*n;return this},applyInverse:function applyInverse(e,t,i){if(i===void 0){i=new r}var n=this.matrix,o=n[0],a=n[1],s=n[2],l=n[3],d=n[4],p=n[5],c=1/(o*l+s*-a);i.x=l*c*e+-s*c*t+(p*s-d*l)*c;i.y=o*c*t+-a*c*e+(-p*o+d*a)*c;return i},getX:function getX(e,t){return e*this.a+t*this.c+this.e},getY:function getY(e,t){return e*this.b+t*this.d+this.f},getCSSMatrix:function getCSSMatrix(){var e=this.matrix;return"matrix("+e[0]+","+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+")"},destroy:function destroy(){this.matrix=null;this.decomposedMatrix=null}});e.exports=o},function(e,t,i){var a=i(0),n=i(162),o=i(292),l=i(163),d=i(293),p=new a({initialize:function(e,t,i,a){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=255}this.r=0;this.g=0;this.b=0;this.a=255;this._h=0;this._s=0;this._v=0;this._locked=!1;this.gl=[0,0,0,1];this._color=0;this._color32=0;this._rgba="";this.setTo(e,t,i,a)},transparent:function transparent(){this._locked=!0;this.red=0;this.green=0;this.blue=0;this.alpha=0;this._locked=!1;return this.update(!0)},setTo:function setTo(e,t,i,a,n){if(a===void 0){a=255}if(n===void 0){n=!0}this._locked=!0;this.red=e;this.green=t;this.blue=i;this.alpha=a;this._locked=!1;return this.update(n)},setGLTo:function setGLTo(e,t,i,a){if(a===void 0){a=1}this._locked=!0;this.redGL=e;this.greenGL=t;this.blueGL=i;this.alphaGL=a;this._locked=!1;return this.update(!0)},setFromRGB:function setFromRGB(e){this._locked=!0;this.red=e.r;this.green=e.g;this.blue=e.b;if(e.hasOwnProperty("a")){this.alpha=e.a}this._locked=!1;return this.update(!0)},setFromHSV:function setFromHSV(e,t,i){return l(e,t,i,this)},update:function update(e){if(e===void 0){e=!1}if(this._locked){return this}var t=this.r,i=this.g,r=this.b,s=this.a;this._color=n(t,i,r);this._color32=o(t,i,r,s);this._rgba="rgba("+t+","+i+","+r+","+s/255+")";if(e){d(t,i,r,this)}return this},updateHSV:function updateHSV(){var e=this.r,t=this.g,i=this.b;d(e,t,i,this);return this},clone:function clone(){return new p(this.r,this.g,this.b,this.a)},gray:function gray(e){return this.setTo(e,e,e)},random:function random(e,t){if(e===void 0){e=0}if(t===void 0){t=255}var i=Math.floor(e+Math.random()*(t-e)),a=Math.floor(e+Math.random()*(t-e)),n=Math.floor(e+Math.random()*(t-e));return this.setTo(i,a,n)},randomGray:function randomGray(e,t){if(e===void 0){e=0}if(t===void 0){t=255}var i=Math.floor(e+Math.random()*(t-e));return this.setTo(i,i,i)},saturate:function saturate(e){this.s+=e/100;return this},desaturate:function desaturate(e){this.s-=e/100;return this},lighten:function lighten(e){this.v+=e/100;return this},darken:function darken(e){this.v-=e/100;return this},brighten:function brighten(e){var t=this.r,i=this.g,a=this.b;t=Math.max(0,Math.min(255,t-Math.round(255*-(e/100))));i=Math.max(0,Math.min(255,i-Math.round(255*-(e/100))));a=Math.max(0,Math.min(255,a-Math.round(255*-(e/100))));return this.setTo(t,i,a)},color:{get:function get(){return this._color}},color32:{get:function get(){return this._color32}},rgba:{get:function get(){return this._rgba}},redGL:{get:function get(){return this.gl[0]},set:function set(e){this.gl[0]=Math.min(Math.abs(e),1);this.r=Math.floor(255*this.gl[0]);this.update(!0)}},greenGL:{get:function get(){return this.gl[1]},set:function set(e){this.gl[1]=Math.min(Math.abs(e),1);this.g=Math.floor(255*this.gl[1]);this.update(!0)}},blueGL:{get:function get(){return this.gl[2]},set:function set(e){this.gl[2]=Math.min(Math.abs(e),1);this.b=Math.floor(255*this.gl[2]);this.update(!0)}},alphaGL:{get:function get(){return this.gl[3]},set:function set(e){this.gl[3]=Math.min(Math.abs(e),1);this.a=Math.floor(255*this.gl[3]);this.update()}},red:{get:function get(){return this.r},set:function set(e){e=Math.floor(Math.abs(e));this.r=Math.min(e,255);this.gl[0]=e/255;this.update(!0)}},green:{get:function get(){return this.g},set:function set(e){e=Math.floor(Math.abs(e));this.g=Math.min(e,255);this.gl[1]=e/255;this.update(!0)}},blue:{get:function get(){return this.b},set:function set(e){e=Math.floor(Math.abs(e));this.b=Math.min(e,255);this.gl[2]=e/255;this.update(!0)}},alpha:{get:function get(){return this.a},set:function set(e){e=Math.floor(Math.abs(e));this.a=Math.min(e,255);this.gl[3]=e/255;this.update()}},h:{get:function get(){return this._h},set:function set(e){this._h=e;l(e,this._s,this._v,this)}},s:{get:function get(){return this._s},set:function set(e){this._s=e;l(this._h,e,this._v,this)}},v:{get:function get(){return this._v},set:function set(e){this._v=e;l(this._h,this._s,e,this)}}});e.exports=p},function(e){e.exports=function PropertyValueInc(e,a,n,r,o,s){if(r===void 0){r=0}if(o===void 0){o=0}if(s===void 0){s=1}var l,d=0,p=e.length;if(1===s){for(l=o;l<p;l++){e[l][a]+=n+d*r;d++}}else{for(l=o;0<=l;l--){e[l][a]+=n+d*r;d++}}return e}},function(e,t,i){var a=i(13);e.exports=function DegToRad(e){return e*a.DEG_TO_RAD}},function(e){e.exports=function FillStyleCanvas(e,t,i,a){var n=i?i:t.fillColor,r=a?a:t.fillAlpha;e.fillStyle="rgba("+((16711680&n)>>>16)+","+((65280&n)>>>8)+","+(255&n)+","+r+")"}},function(e){var t={};e.exports=t;(function(){t._nextId=0;t._seed=0;t._nowStartTime=+new Date;t.extend=function(e,a){var n,r;if("boolean"==typeof a){n=2;r=a}else{n=1;r=!0}for(var o=n,s;o<arguments.length;o++){s=arguments[o];if(s){for(var l in s){if(r&&s[l]&&s[l].constructor===Object){if(!e[l]||e[l].constructor===Object){e[l]=e[l]||{};t.extend(e[l],r,s[l])}else{e[l]=s[l]}}else{e[l]=s[l]}}}}return e};t.clone=function(e,i){return t.extend({},i,e)};t.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e){t.push(i)}return t};t.values=function(e){var t=[];if(Object.keys){for(var a=Object.keys(e),n=0;n<a.length;n++){t.push(e[a[n]])}return t}for(var r in e){t.push(e[r])}return t};t.get=function(e,t,a,n){t=t.split(".").slice(a,n);for(var r=0;r<t.length;r+=1){e=e[t[r]]}return e};t.set=function(e,i,a,n,r){var o=i.split(".").slice(n,r);t.get(e,i,0,-1)[o[o.length-1]]=a;return a};t.shuffle=function(e){for(var a=e.length-1;0<a;a--){var n=Math.floor(t.random()*(a+1)),r=e[a];e[a]=e[n];e[n]=r}return e};t.choose=function(e){return e[Math.floor(t.random()*e.length)]};t.isElement=function(e){if("undefined"!=typeof HTMLElement){return e instanceof HTMLElement}return!!(e&&e.nodeType&&e.nodeName)};t.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.isFunction=function(e){return"function"==typeof e};t.isPlainObject=function(e){return"object"===_typeof(e)&&e.constructor===Object};t.isString=function(e){return"[object String]"===toString.call(e)};t.clamp=function(e,t,i){if(e<t)return t;if(e>i)return i;return e};t.sign=function(e){return 0>e?-1:1};t.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now){return window.performance.now()}else if(window.performance.webkitNow){return window.performance.webkitNow()}}return new Date-t._nowStartTime};t.random=function(t,i){t="undefined"!=typeof t?t:0;i="undefined"!=typeof i?i:1;return t+e()*(i-t)};var e=function(){t._seed=(9301*t._seed+49297)%233280;return t._seed/233280};t.colorToNumber=function(e){e=e.replace("#","");if(3==e.length){e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)}return parseInt(e,16)};t.logLevel=1;t.log=function(){if(console&&0<t.logLevel&&3>=t.logLevel){console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))}};t.info=function(){if(console&&0<t.logLevel&&2>=t.logLevel){console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))}};t.warn=function(){if(console&&0<t.logLevel&&3>=t.logLevel){console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))}};t.nextId=function(){return t._nextId++};t.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var a=0;a<e.length;a++){if(e[a]===t)return a}return-1};t.map=function(e,t){if(e.map){return e.map(t)}for(var a=[],n=0;n<e.length;n+=1){a.push(t(e[n]))}return a};t.topologicalSort=function(e){var i=[],a=[],n=[];for(var r in e){if(!a[r]&&!n[r]){t._topologicalSort(r,a,n,e,i)}}return i};t._topologicalSort=function(e,a,n,r,o){var s=r[e]||[];n[e]=!0;for(var l=0,d;l<s.length;l+=1){d=s[l];if(n[d]){continue}if(!a[d]){t._topologicalSort(d,a,n,r,o)}}n[e]=!1;a[e]=!0;o.push(e)};t.chain=function(){for(var e=[],t=0,a;t<arguments.length;t+=1){a=arguments[t];if(a._chained){e.push.apply(e,a._chained)}else{e.push(a)}}var n=function(){for(var t,a=Array(arguments.length),n=0,r=arguments.length;n<r;n++){a[n]=arguments[n]}for(n=0;n<e.length;n+=1){var o=e[n].apply(t,a);if("undefined"!=typeof o){t=o}}return t};n._chained=e;return n};t.chainPathBefore=function(e,i,a){return t.set(e,i,t.chain(a,t.get(e,i)))};t.chainPathAfter=function(e,i,a){return t.set(e,i,t.chain(t.get(e,i),a))}})()},function(e){e.exports=function GetBottom(e){return e.y+e.height-e.height*e.originY}},function(e){e.exports=function SetTop(e,t){e.y=t+e.height*e.originY;return e}},function(e){e.exports=function GetLeft(e){return e.x-e.width*e.originX}},function(e){e.exports=function SetLeft(e,t){e.x=t+e.width*e.originX;return e}},function(e){e.exports=function GetRight(e){return e.x+e.width-e.width*e.originX}},function(e){e.exports=function SetRight(e,t){e.x=t-e.width+e.width*e.originX;return e}},function(e){e.exports=function SetBottom(e,t){e.y=t-e.height+e.height*e.originY;return e}},function(e){e.exports=function GetTop(e){return e.y-e.height*e.originY}},function(e){e.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(e){e.exports=function Contains(e,t,i){if(0>=e.width||0>=e.height){return!1}return e.x<=t&&e.x+e.width>=t&&e.y<=i&&e.y+e.height>=i}},function(e,t,i){e.exports={DESTROY:i(641),FADE_IN_COMPLETE:i(642),FADE_IN_START:i(643),FADE_OUT_COMPLETE:i(644),FADE_OUT_START:i(645),FLASH_COMPLETE:i(646),FLASH_START:i(647),PAN_COMPLETE:i(648),PAN_START:i(649),POST_RENDER:i(650),PRE_RENDER:i(651),SHAKE_COMPLETE:i(652),SHAKE_START:i(653),ZOOM_COMPLETE:i(654),ZOOM_START:i(655)}},function(e){e.exports=function LineStyleCanvas(e,t,i,a){var n=i?i:t.strokeColor,r=a?a:t.strokeAlpha;e.strokeStyle="rgba("+((16711680&n)>>>16)+","+((65280&n)>>>8)+","+(255&n)+","+r+")";e.lineWidth=t.lineWidth}},function(e){e.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(e,t,i){var a=i(138),n=i(24);e.exports=function CalculateFacesWithin(e,t,r,o,s){for(var l=null,d=null,p=null,c=null,u=n(e,t,r,o,null,s),g=0,h;g<u.length;g++){h=u[g];if(h){if(h.collides){l=a(h.x,h.y-1,!0,s);d=a(h.x,h.y+1,!0,s);p=a(h.x-1,h.y,!0,s);c=a(h.x+1,h.y,!0,s);h.faceTop=l&&l.collides?!1:!0;h.faceBottom=d&&d.collides?!1:!0;h.faceLeft=p&&p.collides?!1:!0;h.faceRight=c&&c.collides?!1:!0}else{h.resetFaces()}}}}},function(e){e.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(e){e.exports=function DistanceBetween(e,t,i,a){var n=e-i,r=t-a;return Math.sqrt(n*n+r*r)}},function(e,t,i){e.exports={BOOT:i(814),DESTROY:i(815),DRAG_END:i(816),DRAG_ENTER:i(817),DRAG:i(818),DRAG_LEAVE:i(819),DRAG_OVER:i(820),DRAG_START:i(821),DROP:i(822),GAME_OUT:i(823),GAME_OVER:i(824),GAMEOBJECT_DOWN:i(825),GAMEOBJECT_DRAG_END:i(826),GAMEOBJECT_DRAG_ENTER:i(827),GAMEOBJECT_DRAG:i(828),GAMEOBJECT_DRAG_LEAVE:i(829),GAMEOBJECT_DRAG_OVER:i(830),GAMEOBJECT_DRAG_START:i(831),GAMEOBJECT_DROP:i(832),GAMEOBJECT_MOVE:i(833),GAMEOBJECT_OUT:i(834),GAMEOBJECT_OVER:i(835),GAMEOBJECT_POINTER_DOWN:i(836),GAMEOBJECT_POINTER_MOVE:i(837),GAMEOBJECT_POINTER_OUT:i(838),GAMEOBJECT_POINTER_OVER:i(839),GAMEOBJECT_POINTER_UP:i(840),GAMEOBJECT_POINTER_WHEEL:i(841),GAMEOBJECT_UP:i(842),GAMEOBJECT_WHEEL:i(843),MANAGER_BOOT:i(844),MANAGER_PROCESS:i(845),MANAGER_UPDATE:i(846),POINTER_DOWN:i(847),POINTER_DOWN_OUTSIDE:i(848),POINTER_MOVE:i(849),POINTER_OUT:i(850),POINTER_OVER:i(851),POINTER_UP:i(852),POINTER_UP_OUTSIDE:i(853),POINTER_WHEEL:i(854),POINTERLOCK_CHANGE:i(855),PRE_UPDATE:i(856),SHUTDOWN:i(857),START:i(858),UPDATE:i(859)}},function(e){e.exports=function Contains(e,t,i){if(0<e.radius&&t>=e.left&&t<=e.right&&i>=e.top&&i<=e.bottom){var a=(e.x-t)*(e.x-t),n=(e.y-i)*(e.y-i);return a+n<=e.radius*e.radius}else{return!1}}},function(e,t,i){var a=i(0),n=i(272),r=i(150),o=i(46),s=i(151),l=i(3),d=new a({initialize:function(e,t,i,a){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=0}this.type=o.LINE;this.x1=e;this.y1=t;this.x2=i;this.y2=a},getPoint:function getPoint(e,t){return n(this,e,t)},getPoints:function getPoints(e,t,i){return r(this,e,t,i)},getRandomPoint:function getRandomPoint(e){return s(this,e)},setTo:function setTo(e,t,i,a){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=0}this.x1=e;this.y1=t;this.x2=i;this.y2=a;return this},getPointA:function getPointA(e){if(e===void 0){e=new l}e.set(this.x1,this.y1);return e},getPointB:function getPointB(e){if(e===void 0){e=new l}e.set(this.x2,this.y2);return e},left:{get:function get(){return Math.min(this.x1,this.x2)},set:function set(e){if(this.x1<=this.x2){this.x1=e}else{this.x2=e}}},right:{get:function get(){return Math.max(this.x1,this.x2)},set:function set(e){if(this.x1>this.x2){this.x1=e}else{this.x2=e}}},top:{get:function get(){return Math.min(this.y1,this.y2)},set:function set(e){if(this.y1<=this.y2){this.y1=e}else{this.y2=e}}},bottom:{get:function get(){return Math.max(this.y1,this.y2)},set:function set(e){if(this.y1>this.y2){this.y1=e}else{this.y2=e}}}});e.exports=d},function(e){e.exports=function Length(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))}},function(e){e.exports=function Wrap(e,t,i){var a=i-t;return t+((e-t)%a+a)%a}},function(e,t,i){e.exports={COMPLETE:i(882),DECODED:i(883),DECODED_ALL:i(884),DESTROY:i(885),DETUNE:i(886),GLOBAL_DETUNE:i(887),GLOBAL_MUTE:i(888),GLOBAL_RATE:i(889),GLOBAL_VOLUME:i(890),LOOP:i(891),LOOPED:i(892),MUTE:i(893),PAUSE_ALL:i(894),PAUSE:i(895),PLAY:i(896),RATE:i(897),RESUME_ALL:i(898),RESUME:i(899),SEEK:i(900),STOP_ALL:i(901),STOP:i(902),UNLOCKED:i(903),VOLUME:i(904)}},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(6),d=i(7),p=new a({Extends:r,initialize:function(e,t,i,a,o){var p="json";if(d(t)){var c=t;t=s(c,"key");i=s(c,"url");a=s(c,"xhrSettings");p=s(c,"extension",p);o=s(c,"dataKey",o)}var u={type:"json",cache:e.cacheManager.json,extension:p,responseType:"text",key:t,url:i,xhrSettings:a,config:o};r.call(this,e,u);if(d(i)){if(o){this.data=l(i,o)}else{this.data=i}this.state=n.FILE_POPULATED}},onProcess:function onProcess(){if(this.state!==n.FILE_POPULATED){this.state=n.FILE_PROCESSING;var e=JSON.parse(this.xhrLoader.responseText),t=this.config;if("string"==typeof t){this.data=l(e,t,e)}else{this.data=e}}this.onProcessComplete()}});o.register("json",function(e,t,a,n){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new p(this,e[r]))}}else{this.addFile(new p(this,e,t,n,a))}return this});e.exports=p},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t,a,n){this.loader=e;this.type=t;this.key=a;this.multiKeyIndex=e.multiKeyIndex++;this.files=n;this.complete=!1;this.pending=n.length;this.failed=0;this.config={};this.baseURL=e.baseURL;this.path=e.path;this.prefix=e.prefix;for(var r=0;r<n.length;r++){n[r].multiFile=this}},isReadyToProcess:function isReadyToProcess(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function addToMultiFile(e){this.files.push(e);e.multiFile=this;this.pending++;this.complete=!1;return this},onFileComplete:function onFileComplete(e){var t=this.files.indexOf(e);if(-1!==t){this.pending--}},onFileFailed:function onFileFailed(e){var t=this.files.indexOf(e);if(-1!==t){this.failed++}}});e.exports=n},function(e,t,i){var a={};e.exports=a;var n=i(86),r=i(101),o=i(236),s=i(37),l=i(102),d=i(507);(function(){a._inertiaScale=4;a._nextCollidingGroupId=1;a._nextNonCollidingGroupId=-1;a._nextCategory=1;a.create=function(t){var i={id:s.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};if(!t.hasOwnProperty("position")&&t.hasOwnProperty("vertices")){t.position=n.centre(t.vertices)}else if(!t.hasOwnProperty("vertices")){i.vertices=n.fromPath("L 0 0 L 40 0 L 40 40 L 0 40")}var a=s.extend(i,t);e(a,t);a.setOnCollideWith=function(e,t){if(t){this.onCollideWith[e.id]=t}else{delete this.onCollideWith[e.id]}return this};return a};a.nextGroup=function(e){if(e)return a._nextNonCollidingGroupId--;return a._nextCollidingGroupId++};a.nextCategory=function(){a._nextCategory=a._nextCategory<<1;return a._nextCategory};var e=function(e,t){t=t||{};a.set(e,{bounds:e.bounds||l.create(e.vertices),positionPrev:e.positionPrev||r.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e});var i=e.bounds;n.rotate(e.vertices,e.angle,e.position);d.rotate(e.axes,e.angle);l.update(i,e.vertices,e.velocity);a.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});if(1===e.parts.length){var o=e.centerOfMass,s=e.centerOffset,p=i.max.x-i.min.x,c=i.max.y-i.min.y;o.x=-(i.min.x-e.position.x)/p;o.y=-(i.min.y-e.position.y)/c;s.x=p*o.x;s.y=c*o.y}};a.set=function(e,t,i){if("string"==typeof t){n=t;t={};t[n]=i}for(var n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;i=t[n];switch(n){case"isStatic":a.setStatic(e,i);break;case"isSleeping":o.set(e,i);break;case"mass":a.setMass(e,i);break;case"density":a.setDensity(e,i);break;case"inertia":a.setInertia(e,i);break;case"vertices":a.setVertices(e,i);break;case"position":a.setPosition(e,i);break;case"angle":a.setAngle(e,i);break;case"velocity":a.setVelocity(e,i);break;case"angularVelocity":a.setAngularVelocity(e,i);break;case"parts":a.setParts(e,i);break;case"centre":a.setCentre(e,i);break;default:e[n]=i;}}};a.setStatic=function(e,t){for(var a=0,n;a<e.parts.length;a++){n=e.parts[a];n.isStatic=t;if(t){n._original={restitution:n.restitution,friction:n.friction,mass:n.mass,inertia:n.inertia,density:n.density,inverseMass:n.inverseMass,inverseInertia:n.inverseInertia};n.restitution=0;n.friction=1;n.mass=n.inertia=n.density=1/0;n.inverseMass=n.inverseInertia=0;n.positionPrev.x=n.position.x;n.positionPrev.y=n.position.y;n.anglePrev=n.angle;n.angularVelocity=0;n.speed=0;n.angularSpeed=0;n.motion=0}else if(n._original){n.restitution=n._original.restitution;n.friction=n._original.friction;n.mass=n._original.mass;n.inertia=n._original.inertia;n.density=n._original.density;n.inverseMass=n._original.inverseMass;n.inverseInertia=n._original.inverseInertia;n._original=null}}};a.setMass=function(e,t){var i=e.inertia/(e.mass/6);e.inertia=i*(t/6);e.inverseInertia=1/e.inertia;e.mass=t;e.inverseMass=1/e.mass;e.density=e.mass/e.area};a.setDensity=function(e,t){a.setMass(e,t*e.area);e.density=t};a.setInertia=function(e,t){e.inertia=t;e.inverseInertia=1/e.inertia};a.setVertices=function(e,t){if(t[0].body===e){e.vertices=t}else{e.vertices=n.create(t,e)}e.axes=d.fromVertices(e.vertices);e.area=n.area(e.vertices);a.setMass(e,e.density*e.area);var i=n.centre(e.vertices);n.translate(e.vertices,i,-1);a.setInertia(e,a._inertiaScale*n.inertia(e.vertices,e.mass));n.translate(e.vertices,e.position);l.update(e.bounds,e.vertices,e.velocity)};a.setParts=function(e,t,r){var o;t=t.slice(0);e.parts.length=0;e.parts.push(e);e.parent=e;for(o=0;o<t.length;o++){var s=t[o];if(s!==e){s.parent=e;e.parts.push(s)}}if(1===e.parts.length)return;r="undefined"!=typeof r?r:!0;if(r){var d=[];for(o=0;o<t.length;o++){d=d.concat(t[o].vertices)}n.clockwiseSort(d);var p=n.hull(d),c=n.centre(p);a.setVertices(e,p);n.translate(e.vertices,c)}var u=a._totalProperties(e),g=u.centre.x,h=u.centre.y,m=e.bounds,y=e.centerOfMass,x=e.centerOffset;l.update(m,e.vertices,e.velocity);y.x=-(m.min.x-g)/(m.max.x-m.min.x);y.y=-(m.min.y-h)/(m.max.y-m.min.y);x.x=g;x.y=h;e.area=u.area;e.parent=e;e.position.x=g;e.position.y=h;e.positionPrev.x=g;e.positionPrev.y=h;a.setMass(e,u.mass);a.setInertia(e,u.inertia);a.setPosition(e,u.centre)};a.setCentre=function(e,t,i){if(!i){e.positionPrev.x=t.x-(e.position.x-e.positionPrev.x);e.positionPrev.y=t.y-(e.position.y-e.positionPrev.y);e.position.x=t.x;e.position.y=t.y}else{e.positionPrev.x+=t.x;e.positionPrev.y+=t.y;e.position.x+=t.x;e.position.y+=t.y}};a.setPosition=function(e,t){var a=r.sub(t,e.position);e.positionPrev.x+=a.x;e.positionPrev.y+=a.y;for(var o=0,s;o<e.parts.length;o++){s=e.parts[o];s.position.x+=a.x;s.position.y+=a.y;n.translate(s.vertices,a);l.update(s.bounds,s.vertices,e.velocity)}};a.setAngle=function(e,t){var a=t-e.angle;e.anglePrev+=a;for(var o=0,s;o<e.parts.length;o++){s=e.parts[o];s.angle+=a;n.rotate(s.vertices,a,e.position);d.rotate(s.axes,a);l.update(s.bounds,s.vertices,e.velocity);if(0<o){r.rotateAbout(s.position,a,e.position,s.position)}}};a.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x;e.positionPrev.y=e.position.y-t.y;e.velocity.x=t.x;e.velocity.y=t.y;e.speed=r.magnitude(e.velocity)};a.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t;e.angularVelocity=t;e.angularSpeed=Math.abs(e.angularVelocity)};a.translate=function(e,t){a.setPosition(e,r.add(e.position,t))};a.rotate=function(e,t,i){if(!i){a.setAngle(e,e.angle+t)}else{var n=Math.cos(t),r=Math.sin(t),o=e.position.x-i.x,s=e.position.y-i.y;a.setPosition(e,{x:i.x+(o*n-s*r),y:i.y+(o*r+s*n)});a.setAngle(e,e.angle+t)}};a.scale=function(e,t,r,o){var s=0,p=0;o=o||e.position;for(var c=0,u;c<e.parts.length;c++){u=e.parts[c];u.scale.x=t;u.scale.y=r;n.scale(u.vertices,t,r,o);u.axes=d.fromVertices(u.vertices);u.area=n.area(u.vertices);a.setMass(u,e.density*u.area);n.translate(u.vertices,{x:-u.position.x,y:-u.position.y});a.setInertia(u,a._inertiaScale*n.inertia(u.vertices,u.mass));n.translate(u.vertices,{x:u.position.x,y:u.position.y});if(0<c){s+=u.area;p+=u.inertia}u.position.x=o.x+(u.position.x-o.x)*t;u.position.y=o.y+(u.position.y-o.y)*r;l.update(u.bounds,u.vertices,e.velocity)}if(1<e.parts.length){e.area=s;if(!e.isStatic){a.setMass(e,e.density*s);a.setInertia(e,p)}}if(e.circleRadius){if(t===r){e.circleRadius*=t}else{e.circleRadius=null}}};a.update=function(e,t,a,o){var s=Math.pow(t*a*e.timeScale,2),p=1-e.frictionAir*a*e.timeScale,c=e.position.x-e.positionPrev.x,u=e.position.y-e.positionPrev.y;e.velocity.x=c*p*o+e.force.x/e.mass*s;e.velocity.y=u*p*o+e.force.y/e.mass*s;e.positionPrev.x=e.position.x;e.positionPrev.y=e.position.y;e.position.x+=e.velocity.x;e.position.y+=e.velocity.y;e.angularVelocity=(e.angle-e.anglePrev)*p*o+e.torque/e.inertia*s;e.anglePrev=e.angle;e.angle+=e.angularVelocity;e.speed=r.magnitude(e.velocity);e.angularSpeed=Math.abs(e.angularVelocity);for(var g=0,h;g<e.parts.length;g++){h=e.parts[g];n.translate(h.vertices,e.velocity);if(0<g){h.position.x+=e.velocity.x;h.position.y+=e.velocity.y}if(0!==e.angularVelocity){n.rotate(h.vertices,e.angularVelocity,e.position);d.rotate(h.axes,e.angularVelocity);if(0<g){r.rotateAbout(h.position,e.angularVelocity,e.position,h.position)}}l.update(h.bounds,h.vertices,e.velocity)}};a.applyForce=function(e,t,i){e.force.x+=i.x;e.force.y+=i.y;var a={x:t.x-e.position.x,y:t.y-e.position.y};e.torque+=a.x*i.y-a.y*i.x};a._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},a=1===e.parts.length?0:1;a<e.parts.length;a++){var n=e.parts[a],o=n.mass!==1/0?n.mass:1;t.mass+=o;t.area+=n.area;t.inertia+=n.inertia;t.centre=r.add(t.centre,r.mult(n.position,o))}t.centre=r.div(t.centre,t.mass);return t}})()},function(e){e.exports=function WorldToTileX(e,t,i,a){if(t===void 0){t=!0}var n=a.baseTileWidth,r=a.tilemapLayer;if(r){if(i===void 0){i=r.scene.cameras.main}e=e-(r.x+i.scrollX*(1-r.scrollFactorX));n*=r.scaleX}return t?Math.floor(e/n):e/n}},function(e){e.exports=function WorldToTileY(e,t,i,a){if(t===void 0){t=!0}var n=a.baseTileHeight,r=a.tilemapLayer;if(r){if(i===void 0){i=r.scene.cameras.main}e=e-(r.y+i.scrollY*(1-r.scrollFactorY));n*=r.scaleY}return t?Math.floor(e/n):e/n}},function(e,t,i){var a=i(0),n=i(55),r=i(263),o=i(264),s=i(46),l=i(147),d=new a({initialize:function(e,t,i){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}this.type=s.CIRCLE;this.x=e;this.y=t;this._radius=i;this._diameter=2*i},contains:function contains(e,t){return n(this,e,t)},getPoint:function getPoint(e,t){return r(this,e,t)},getPoints:function getPoints(e,t,i){return o(this,e,t,i)},getRandomPoint:function getRandomPoint(e){return l(this,e)},setTo:function setTo(e,t,i){this.x=e;this.y=t;this._radius=i;this._diameter=2*i;return this},setEmpty:function setEmpty(){this._radius=0;this._diameter=0;return this},setPosition:function setPosition(e,t){if(t===void 0){t=e}this.x=e;this.y=t;return this},isEmpty:function isEmpty(){return 0>=this._radius},radius:{get:function get(){return this._radius},set:function set(e){this._radius=e;this._diameter=2*e}},diameter:{get:function get(){return this._diameter},set:function set(e){this._diameter=e;this._radius=.5*e}},left:{get:function get(){return this.x-this._radius},set:function set(e){this.x=e+this._radius}},right:{get:function get(){return this.x+this._radius},set:function set(e){this.x=e-this._radius}},top:{get:function get(){return this.y-this._radius},set:function set(e){this.y=e+this._radius}},bottom:{get:function get(){return this.y+this._radius},set:function set(e){this.y=e-this._radius}}});e.exports=d},function(e){"use strict";e.exports=t;function t(e,t,n){n=n||2;var o=t&&t.length,s=o?t[0]*n:e.length,l=a(e,0,s,n,!0),d=[];if(!l||l.next===l.prev)return d;var c,u,g,h,m,f,T;if(o)l=p(e,t,l,n);if(e.length>80*n){c=g=e[0];u=h=e[1];for(var v=n;v<s;v+=n){m=e[v];f=e[v+1];if(m<c)c=m;if(f<u)u=f;if(m>g)g=m;if(f>h)h=f}T=Math.max(g-c,h-u);T=0!==T?1/T:0}r(l,d,n,c,u,T);return d}function a(e,t,a,n,r){var o,s;if(r===0<L(e,t,a,n)){for(o=t;o<a;o+=n){s=P(o,e[o],e[o+1],s)}}else{for(o=a-n;o>=t;o-=n){s=P(o,e[o],e[o+1],s)}}if(s&&E(s,s.next)){O(s);s=s.next}return s}function n(e,t){if(!e)return e;if(!t)t=e;var i=e,a;do{a=!1;if(!i.steiner&&(E(i,i.next)||0===v(i.prev,i,i.next))){O(i);i=t=i.prev;if(i===i.next)break;a=!0}else{i=i.next}}while(a||i!==t);return t}function r(e,t,i,a,p,c,u){if(!e)return;if(!u&&c)h(e,a,p,c);var g=e,m,y;while(e.prev!==e.next){m=e.prev;y=e.next;if(c?s(e,a,p,c):o(e)){t.push(m.i/i);t.push(e.i/i);t.push(y.i/i);O(e);e=y.next;g=y.next;continue}e=y;if(e===g){if(!u){r(n(e),t,i,a,p,c,1)}else if(1===u){e=l(e,t,i);r(e,t,i,a,p,c,2)}else if(2===u){d(e,t,i,a,p,c)}break}}}function o(e){var t=e.prev,i=e,a=e.next;if(0<=v(t,i,a))return!1;var n=e.next.next;while(n!==e.prev){if(f(t.x,t.y,i.x,i.y,a.x,a.y,n.x,n.y)&&0<=v(n.prev,n,n.next))return!1;n=n.next}return!0}function s(e,t,i,r){var o=e.prev,a=e,s=e.next;if(0<=v(o,a,s))return!1;var l=o.x<a.x?o.x<s.x?o.x:s.x:a.x<s.x?a.x:s.x,d=o.y<a.y?o.y<s.y?o.y:s.y:a.y<s.y?a.y:s.y,c=o.x>a.x?o.x>s.x?o.x:s.x:a.x>s.x?a.x:s.x,u=o.y>a.y?o.y>s.y?o.y:s.y:a.y>s.y?a.y:s.y,g=y(l,d,t,i,r),h=y(c,u,t,i,r),m=e.prevZ,x=e.nextZ;while(m&&m.z>=g&&x&&x.z<=h){if(m!==e.prev&&m!==e.next&&f(o.x,o.y,a.x,a.y,s.x,s.y,m.x,m.y)&&0<=v(m.prev,m,m.next))return!1;m=m.prevZ;if(x!==e.prev&&x!==e.next&&f(o.x,o.y,a.x,a.y,s.x,s.y,x.x,x.y)&&0<=v(x.prev,x,x.next))return!1;x=x.nextZ}while(m&&m.z>=g){if(m!==e.prev&&m!==e.next&&f(o.x,o.y,a.x,a.y,s.x,s.y,m.x,m.y)&&0<=v(m.prev,m,m.next))return!1;m=m.prevZ}while(x&&x.z<=h){if(x!==e.prev&&x!==e.next&&f(o.x,o.y,a.x,a.y,s.x,s.y,x.x,x.y)&&0<=v(x.prev,x,x.next))return!1;x=x.nextZ}return!0}function l(e,t,i){var n=e;do{var r=n.prev,a=n.next.next;if(!E(r,a)&&S(r,n,n.next,a)&&A(r,a)&&A(a,r)){t.push(r.i/i);t.push(n.i/i);t.push(a.i/i);O(n);O(n.next);n=e=a}n=n.next}while(n!==e);return n}function d(e,t,i,o,s,l){var d=e;do{var p=d.next.next;while(p!==d.prev){if(d.i!==p.i&&T(d,p)){var u=w(d,p);d=n(d,d.next);u=n(u,u.next);r(d,t,i,o,s,l);r(u,t,i,o,s,l);return}p=p.next}d=d.next}while(d!==e)}function p(e,t,r,o){var s=[],l,d,p,g,h;for(l=0,d=t.length;l<d;l++){p=t[l]*o;g=l<d-1?t[l+1]*o:e.length;h=a(e,p,g,o,!1);if(h===h.next)h.steiner=!0;s.push(x(h))}s.sort(c);for(l=0;l<s.length;l++){u(s[l],r);r=n(r,r.next)}return r}function c(e,t){return e.x-t.x}function u(e,t){t=g(e,t);if(t){var i=w(t,e);n(i,i.next)}}function g(e,t){var i=t,a=e.x,n=e.y,r=-Infinity,o;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){var s=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=a&&s>r){r=s;if(s===a){if(n===i.y)return i;if(n===i.next.y)return i.next}o=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!o)return null;if(a===r)return o.prev;var l=o,d=o.x,c=o.y,u=1/0,g;i=o.next;while(i!==l){if(a>=i.x&&i.x>=d&&a!==i.x&&f(n<c?a:r,n,d,c,n<c?r:a,n,i.x,i.y)){g=Math.abs(n-i.y)/(a-i.x);if((g<u||g===u&&i.x>o.x)&&A(i,e)){o=i;u=g}}i=i.next}return o}function h(e,t,i,a){var n=e;do{if(null===n.z)n.z=y(n.x,n.y,t,i,a);n.prevZ=n.prev;n.nextZ=n.next;n=n.next}while(n!==e);n.prevZ.nextZ=null;n.prevZ=null;m(n)}function m(t){var a,n,r,o,s,l,d,c,u=1;do{n=t;t=null;s=null;l=0;while(n){l++;r=n;d=0;for(a=0;a<u;a++){d++;r=r.nextZ;if(!r)break}c=u;while(0<d||0<c&&r){if(0!==d&&(0===c||!r||n.z<=r.z)){o=n;n=n.nextZ;d--}else{o=r;r=r.nextZ;c--}if(s)s.nextZ=o;else t=o;o.prevZ=s;s=o}n=r}s.nextZ=null;u*=2}while(1<l);return t}function y(e,t,i,a,n){e=32767*(e-i)*n;t=32767*(t-a)*n;e=16711935&(e|e<<8);e=252645135&(e|e<<4);e=858993459&(e|e<<2);e=1431655765&(e|e<<1);t=16711935&(t|t<<8);t=252645135&(t|t<<4);t=858993459&(t|t<<2);t=1431655765&(t|t<<1);return e|t<<1}function x(e){var t=e,i=e;do{if(t.x<i.x)i=t;t=t.next}while(t!==e);return i}function f(e,t,i,a,n,r,o,s){return 0<=(n-o)*(t-s)-(e-o)*(r-s)&&0<=(e-o)*(a-s)-(i-o)*(t-s)&&0<=(i-o)*(r-s)-(n-o)*(a-s)}function T(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!_(e,t)&&A(e,t)&&A(t,e)&&C(e,t)}function v(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function E(e,t){return e.x===t.x&&e.y===t.y}function S(e,t,i,a){if(E(e,t)&&E(i,a)||E(e,a)&&E(i,t))return!0;return 0<v(e,t,i)!=0<v(e,t,a)&&0<v(i,a,e)!=0<v(i,a,t)}function _(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&S(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function A(e,t){return 0>v(e.prev,e,e.next)?0<=v(e,t,e.next)&&0<=v(e,e.prev,t):0>v(e,t,e.prev)||0>v(e,e.next,t)}function C(e,t){var i=e,a=!1,n=(e.x+t.x)/2,r=(e.y+t.y)/2;do{if(i.y>r!=i.next.y>r&&i.next.y!==i.y&&n<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x)a=!a;i=i.next}while(i!==e);return a}function w(e,t){var i=new R(e.i,e.x,e.y),a=new R(t.i,t.x,t.y),n=e.next,r=t.prev;e.next=t;t.prev=e;i.next=n;n.prev=i;a.next=i;i.prev=a;r.next=a;a.prev=r;return a}function P(e,t,i,a){var n=new R(e,t,i);if(!a){n.prev=n;n.next=n}else{n.next=a.next;n.prev=a;a.next.prev=n;a.next=n}return n}function O(e){e.next.prev=e.prev;e.prev.next=e.next;if(e.prevZ)e.prevZ.nextZ=e.nextZ;if(e.nextZ)e.nextZ.prevZ=e.prevZ}function R(e,t,i){this.i=e;this.x=t;this.y=i;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=!1}t.deviation=function(e,t,n,r){var o=t&&t.length,s=o?t[0]*n:e.length,l=Math.abs(L(e,0,s,n));if(o){for(var d=0,p=t.length;d<p;d++){var u=t[d]*n,g=d<p-1?t[d+1]*n:e.length;l-=Math.abs(L(e,u,g,n))}}var h=0;for(d=0;d<r.length;d+=3){var m=r[d]*n,a=r[d+1]*n,y=r[d+2]*n;h+=Math.abs((e[m]-e[y])*(e[a+1]-e[m+1])-(e[m]-e[a])*(e[y+1]-e[m+1]))}return 0===l&&0===h?0:Math.abs((h-l)/l)};function L(e,t,a,n){for(var r=0,o=t,s=a-n;o<a;o+=n){r+=(e[s]-e[o])*(e[o+1]+e[s+1]);s=o}return r}t.flatten=function(e){for(var t=e[0][0].length,a={vertices:[],holes:[],dimensions:t},n=0,r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++){for(var s=0;s<t;s++){a.vertices.push(e[r][o][s])}}if(0<r){n+=e[r-1].length;a.holes.push(n)}}return a}},function(e){e.exports=function Clone(e){var t={};for(var i in e){if(Array.isArray(e[i])){t[i]=e[i].slice(0)}else{t[i]=e[i]}}return t}},function(e){e.exports=function SafeRange(e,t,i,a){var n=e.length;if(0>t||t>n||t>=i||i>n||t+i>n){if(a){throw new Error("Range Error: Values outside acceptable range")}return!1}else{return!0}}},function(e,t,i){var a=i(0),n=i(12),r=i(14),o=i(960),s=new a({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,o],initialize:function(e,t,i,a,o){r.call(this,e,"Sprite");this._crop=this.resetCropObject();this.anims=new n.Animation(this);this.setTexture(a,o);this.setPosition(t,i);this.setSizeToFrame();this.setOriginFromFrame();this.initPipeline()},preUpdate:function preUpdate(e,t){this.anims.update(e,t)},play:function play(e,t,i){this.anims.play(e,t,i);return this},toJSON:function toJSON(){var e=n.ToJSON(this);return e},preDestroy:function preDestroy(){this.anims.destroy();this.anims=void 0}});e.exports=s},function(e,t,i){var a=i(10);e.exports=function StrokePathWebGL(e,t,n,r,o){var s=e.strokeTint,l=a.getTintAppendFloatAlphaAndSwap(t.strokeColor,t.strokeAlpha*n);s.TL=l;s.TR=l;s.BL=l;s.BR=l;var d=t.pathData,p=d.length-1,c=t.lineWidth,u=c/2,g=d[0]-r,h=d[1]-o;if(!t.closePath){p-=2}for(var m=2;m<p;m+=2){var y=d[m]-r,x=d[m+1]-o;e.setTexture2D();e.batchLine(g,h,y,x,u,u,c,m-2,t.closePath?m==p-1:!1);g=y;h=x}}},function(e,t,i){var a=i(0),n=i(83),r=i(417),o=i(418),s=i(46),l=i(56),d=i(155),p=new a({initialize:function(e,t,i,a,n,r){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=0}if(n===void 0){n=0}if(r===void 0){r=0}this.type=s.TRIANGLE;this.x1=e;this.y1=t;this.x2=i;this.y2=a;this.x3=n;this.y3=r},contains:function contains(e,t){return n(this,e,t)},getPoint:function getPoint(e,t){return r(this,e,t)},getPoints:function getPoints(e,t,i){return o(this,e,t,i)},getRandomPoint:function getRandomPoint(e){return d(this,e)},setTo:function setTo(e,t,i,a,n,r){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=0}if(n===void 0){n=0}if(r===void 0){r=0}this.x1=e;this.y1=t;this.x2=i;this.y2=a;this.x3=n;this.y3=r;return this},getLineA:function getLineA(e){if(e===void 0){e=new l}e.setTo(this.x1,this.y1,this.x2,this.y2);return e},getLineB:function getLineB(e){if(e===void 0){e=new l}e.setTo(this.x2,this.y2,this.x3,this.y3);return e},getLineC:function getLineC(e){if(e===void 0){e=new l}e.setTo(this.x3,this.y3,this.x1,this.y1);return e},left:{get:function get(){return Math.min(this.x1,this.x2,this.x3)},set:function set(e){var t=0;if(this.x1<=this.x2&&this.x1<=this.x3){t=this.x1-e}else if(this.x2<=this.x1&&this.x2<=this.x3){t=this.x2-e}else{t=this.x3-e}this.x1-=t;this.x2-=t;this.x3-=t}},right:{get:function get(){return Math.max(this.x1,this.x2,this.x3)},set:function set(e){var t=0;if(this.x1>=this.x2&&this.x1>=this.x3){t=this.x1-e}else if(this.x2>=this.x1&&this.x2>=this.x3){t=this.x2-e}else{t=this.x3-e}this.x1-=t;this.x2-=t;this.x3-=t}},top:{get:function get(){return Math.min(this.y1,this.y2,this.y3)},set:function set(e){var t=0;if(this.y1<=this.y2&&this.y1<=this.y3){t=this.y1-e}else if(this.y2<=this.y1&&this.y2<=this.y3){t=this.y2-e}else{t=this.y3-e}this.y1-=t;this.y2-=t;this.y3-=t}},bottom:{get:function get(){return Math.max(this.y1,this.y2,this.y3)},set:function set(e){var t=0;if(this.y1>=this.y2&&this.y1>=this.y3){t=this.y1-e}else if(this.y2>=this.y1&&this.y2>=this.y3){t=this.y2-e}else{t=this.y3-e}this.y1-=t;this.y2-=t;this.y3-=t}}});e.exports=p},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=new a({Extends:r,initialize:function e(t,i,a,n,o){var d="png",p;if(l(i)){var c=i;i=s(c,"key");a=s(c,"url");p=s(c,"normalMap");n=s(c,"xhrSettings");d=s(c,"extension",d);o=s(c,"frameConfig")}if(Array.isArray(a)){p=a[1];a=a[0]}var u={type:"image",cache:t.textureManager,extension:d,responseType:"blob",key:i,url:a,xhrSettings:n,config:o};r.call(this,t,u);if(p){var g=new e(t,this.key,p,n,o);g.type="normalMap";this.setLink(g);t.addFile(g)}},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;this.data=new Image;this.data.crossOrigin=this.crossOrigin;var e=this;this.data.onload=function(){r.revokeObjectURL(e.data);e.onProcessComplete()};this.data.onerror=function(){r.revokeObjectURL(e.data);e.onProcessError()};r.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function addToCache(){var e,t=this.linkFile;if(t&&t.state===n.FILE_COMPLETE){if("image"===this.type){e=this.cache.addImage(this.key,this.data,t.data)}else{e=this.cache.addImage(t.key,t.data,this.data)}this.pendingDestroy(e);t.pendingDestroy(e)}else if(!t){e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}}});o.register("image",function(e,t,a){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new d(this,e[n]))}}else{this.addFile(new d(this,e,t,a))}return this});e.exports=d},function(e){e.exports=function SetTileCollision(e,t){if(t){e.setCollision(!0,!0,!0,!0,!1)}else{e.resetCollision(!1)}}},function(e,t,i){var a=i(0),n=i(12),r=i(436),o=new a({Mixins:[n.Alpha,n.Flip,n.Visible],initialize:function(e,t,i,a,n,r,o,s){this.layer=e;this.index=t;this.x=i;this.y=a;this.width=n;this.height=r;this.baseWidth=o!==void 0?o:n;this.baseHeight=s!==void 0?s:r;this.pixelX=0;this.pixelY=0;this.updatePixelXY();this.properties={};this.rotation=0;this.collideLeft=!1;this.collideRight=!1;this.collideUp=!1;this.collideDown=!1;this.faceLeft=!1;this.faceRight=!1;this.faceTop=!1;this.faceBottom=!1;this.collisionCallback=null;this.collisionCallbackContext=this;this.tint=16777215;this.physics={}},containsPoint:function containsPoint(e,t){return!(e<this.pixelX||t<this.pixelY||e>this.right||t>this.bottom)},copy:function copy(e){this.index=e.index;this.alpha=e.alpha;this.properties=e.properties;this.visible=e.visible;this.setFlip(e.flipX,e.flipY);this.tint=e.tint;this.rotation=e.rotation;this.collideUp=e.collideUp;this.collideDown=e.collideDown;this.collideLeft=e.collideLeft;this.collideRight=e.collideRight;this.collisionCallback=e.collisionCallback;this.collisionCallbackContext=e.collisionCallbackContext;return this},getCollisionGroup:function getCollisionGroup(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function getTileData(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function getLeft(e){var t=this.tilemapLayer;return t?t.tileToWorldX(this.x,e):this.x*this.baseWidth},getRight:function getRight(e){var t=this.tilemapLayer;return t?this.getLeft(e)+this.width*t.scaleX:this.getLeft(e)+this.width},getTop:function getTop(e){var t=this.tilemapLayer;return t?t.tileToWorldY(this.y,e)-(this.height-this.baseHeight)*t.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function getBottom(e){var t=this.tilemapLayer;return t?this.getTop(e)+this.height*t.scaleY:this.getTop(e)+this.height},getBounds:function getBounds(e,t){if(t===void 0){t=new r}t.x=this.getLeft();t.y=this.getTop();t.width=this.getRight()-t.x;t.height=this.getBottom()-t.y;return t},getCenterX:function getCenterX(e){return(this.getLeft(e)+this.getRight(e))/2},getCenterY:function getCenterY(e){return(this.getTop(e)+this.getBottom(e))/2},destroy:function destroy(){this.collisionCallback=void 0;this.collisionCallbackContext=void 0;this.properties=void 0},intersects:function intersects(e,t,i,a){return!(i<=this.pixelX||a<=this.pixelY||e>=this.right||t>=this.bottom)},isInteresting:function isInteresting(e,t){if(e&&t){return this.canCollide||this.hasInterestingFace}else if(e){return this.collides}else if(t){return this.hasInterestingFace}return!1},resetCollision:function resetCollision(e){if(e===void 0){e=!0}this.collideLeft=!1;this.collideRight=!1;this.collideUp=!1;this.collideDown=!1;this.faceTop=!1;this.faceBottom=!1;this.faceLeft=!1;this.faceRight=!1;if(e){var t=this.tilemapLayer;if(t){this.tilemapLayer.calculateFacesAt(this.x,this.y)}}return this},resetFaces:function resetFaces(){this.faceTop=!1;this.faceBottom=!1;this.faceLeft=!1;this.faceRight=!1;return this},setCollision:function setCollision(e,t,i,a,n){if(t===void 0){t=e}if(i===void 0){i=e}if(a===void 0){a=e}if(n===void 0){n=!0}this.collideLeft=e;this.collideRight=t;this.collideUp=i;this.collideDown=a;this.faceLeft=e;this.faceRight=t;this.faceTop=i;this.faceBottom=a;if(n){var r=this.tilemapLayer;if(r){this.tilemapLayer.calculateFacesAt(this.x,this.y)}}return this},setCollisionCallback:function setCollisionCallback(e,t){if(null===e){this.collisionCallback=void 0;this.collisionCallbackContext=void 0}else{this.collisionCallback=e;this.collisionCallbackContext=t}return this},setSize:function setSize(e,t,i,a){if(e!==void 0){this.width=e}if(t!==void 0){this.height=t}if(i!==void 0){this.baseWidth=i}if(a!==void 0){this.baseHeight=a}this.updatePixelXY();return this},updatePixelXY:function updatePixelXY(){this.pixelX=this.x*this.baseWidth;this.pixelY=this.y*this.baseHeight;return this},canCollide:{get:function get(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}},collides:{get:function get(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function get(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function get(){var e=this.layer.tilemapLayer;if(e){var t=e.gidMap[this.index];if(t){return t}}return null}},tilemapLayer:{get:function get(){return this.layer.tilemapLayer}},tilemap:{get:function get(){var e=this.tilemapLayer;return e?e.tilemap:null}}});e.exports=o},function(e){e.exports=function GetCenterX(e){return e.x-e.width*e.originX+.5*e.width}},function(e){e.exports=function SetCenterX(e,t){var i=e.width*e.originX;e.x=t+i-.5*e.width;return e}},function(e){e.exports=function GetCenterY(e){return e.y-e.height*e.originY+.5*e.height}},function(e){e.exports=function SetCenterY(e,t){var i=e.height*e.originY;e.y=t+i-.5*e.height;return e}},function(e){e.exports=function SpliceOne(e,t){if(t>=e.length){return}for(var a=e.length-1,n=e[t],r=t;r<a;r++){e[r]=e[r+1]}e.length=a;return n}},function(e,t,i){var a=i(0),n=i(174),r=i(11),o=i(3),s=new a({initialize:function(e){this.type=e;this.defaultDivisions=5;this.arcLengthDivisions=100;this.cacheArcLengths=[];this.needsUpdate=!0;this.active=!0;this._tmpVec2A=new o;this._tmpVec2B=new o},draw:function draw(e,t){if(t===void 0){t=32}return e.strokePoints(this.getPoints(t))},getBounds:function getBounds(e,t){if(!e){e=new r}if(t===void 0){t=16}var i=this.getLength();if(t>i){t=i/2}var a=Math.max(1,Math.round(i/t));return n(this.getSpacedPoints(a),e)},getDistancePoints:function getDistancePoints(e){var t=this.getLength(),i=Math.max(1,t/e);return this.getSpacedPoints(i)},getEndPoint:function getEndPoint(e){if(e===void 0){e=new o}return this.getPointAt(1,e)},getLength:function getLength(){var e=this.getLengths();return e[e.length-1]},getLengths:function getLengths(e){if(e===void 0){e=this.arcLengthDivisions}if(this.cacheArcLengths.length===e+1&&!this.needsUpdate){return this.cacheArcLengths}this.needsUpdate=!1;var t=[],i,a=this.getPoint(0,this._tmpVec2A),n=0;t.push(0);for(var r=1;r<=e;r++){i=this.getPoint(r/e,this._tmpVec2B);n+=i.distance(a);t.push(n);a.copy(i)}this.cacheArcLengths=t;return t},getPointAt:function getPointAt(e,i){var a=this.getUtoTmapping(e);return this.getPoint(a,i)},getPoints:function getPoints(e,t,i){if(i===void 0){i=[]}if(!e){if(!t){e=this.defaultDivisions}else{e=this.getLength()/t}}for(var a=0;a<=e;a++){i.push(this.getPoint(a/e))}return i},getRandomPoint:function getRandomPoint(e){if(e===void 0){e=new o}return this.getPoint(Math.random(),e)},getSpacedPoints:function getSpacedPoints(e,i,a){if(a===void 0){a=[]}if(!e){if(!i){e=this.defaultDivisions}else{e=this.getLength()/i}}for(var n=0,r;n<=e;n++){r=this.getUtoTmapping(n/e,null,e);a.push(this.getPoint(r))}return a},getStartPoint:function getStartPoint(e){if(e===void 0){e=new o}return this.getPointAt(0,e)},getTangent:function getTangent(e,t){if(t===void 0){t=new o}var i=1e-4,a=e-i,n=e+i;if(0>a){a=0}if(1<n){n=1}this.getPoint(a,this._tmpVec2A);this.getPoint(n,t);return t.subtract(this._tmpVec2A).normalize()},getTangentAt:function getTangentAt(e,i){var a=this.getUtoTmapping(e);return this.getTangent(a,i)},getTFromDistance:function getTFromDistance(e,t){if(0>=e){return 0}return this.getUtoTmapping(0,e,t)},getUtoTmapping:function getUtoTmapping(e,t,a){var n=this.getLengths(a),r=0,o=n.length,s;if(t){s=Math.min(t,n[o-1])}else{s=e*n[o-1]}var l=0,d=o-1,p;while(l<=d){r=Math.floor(l+(d-l)/2);p=n[r]-s;if(0>p){l=r+1}else if(0<p){d=r-1}else{d=r;break}}r=d;if(n[r]===s){return r/(o-1)}var c=n[r],u=n[r+1],g=(s-c)/(u-c);return(r+g)/(o-1)},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0;this.getLengths()}});e.exports=s},function(e,t,i){e.exports={ADD:i(861),COMPLETE:i(862),FILE_COMPLETE:i(863),FILE_KEY_COMPLETE:i(864),FILE_LOAD_ERROR:i(865),FILE_LOAD:i(866),FILE_PROGRESS:i(867),POST_PROCESS:i(868),PROGRESS:i(869),START:i(870)}},function(e,t,i){var a=i(166),n=i(179);e.exports=function GetEaseFunction(e,t){var i=a.Power0;if("string"==typeof e){if(a.hasOwnProperty(e)){i=a[e]}else{var r="";if(e.indexOf(".")){r=e.substr(e.indexOf(".")+1);if("in"===r.toLowerCase()){r="easeIn"}else if("out"===r.toLowerCase()){r="easeOut"}else if("inout"===r.toLowerCase()){r="easeInOut"}}e=n(e.substr(0,e.indexOf(".")+1)+r);if(a.hasOwnProperty(e)){i=a[e]}}}else if("function"==typeof e){i=e}else if(Array.isArray(e)&&4===e.length){}if(!t){return i}var o=t.slice(0);o.unshift(0);return function(e){o[0]=e;return i.apply(this,o)}}},function(e){e.exports=function Contains(e,t,i){var a=e.x3-e.x1,n=e.y3-e.y1,r=e.x2-e.x1,o=e.y2-e.y1,s=t-e.x1,l=i-e.y1,d=a*a+n*n,p=a*r+n*o,c=a*s+n*l,g=r*r+o*o,h=r*s+o*l,m=d*g-p*p,y=0===m?0:1/m,x=(g*c-p*h)*y,u=(d*h-p*c)*y;return 0<=x&&0<=u&&1>x+u}},function(e,t,i){var a=i(4);e.exports=function LineToLine(e,t,i){if(i===void 0){i=new a}var n=e.x1,r=e.y1,o=e.x2,s=e.y2,l=t.x1,d=t.y1,p=t.x2,c=t.y2,u=(c-d)*(o-n)-(p-l)*(s-r);if(0===u){return!1}var g=((p-l)*(r-d)-(c-d)*(n-l))/u,h=((o-n)*(r-d)-(s-r)*(n-l))/u;if(0<=g&&1>=g&&0<=h&&1>=h){i.x=n+g*(o-n);i.y=r+g*(s-r);return!0}return!1}},function(e){e.exports=function Angle(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)}},function(e,t,i){var a={};e.exports=a;var r=i(101),o=i(37);(function(){a.create=function(e,t){for(var a=[],n=0;n<e.length;n++){var r=e[n],o={x:r.x,y:r.y,index:n,body:t,isInternal:!1,contact:null,offset:null};o.contact={vertex:o,normalImpulse:0,tangentImpulse:0};a.push(o)}return a};a.fromPath=function(e,t){var i=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,n=[];e.replace(i,function(e,t,i){n.push({x:parseFloat(t),y:parseFloat(i)})});return a.create(n,t)};a.centre=function(e){for(var t=a.area(e,!0),n={x:0,y:0},o,s,l,d=0;d<e.length;d++){l=(d+1)%e.length;o=r.cross(e[d],e[l]);s=r.mult(r.add(e[d],e[l]),o);n=r.add(n,s)}return r.div(n,6*t)};a.mean=function(e){for(var t={x:0,y:0},a=0;a<e.length;a++){t.x+=e[a].x;t.y+=e[a].y}return r.div(t,e.length)};a.area=function(e,t){for(var a=0,n=e.length-1,r=0;r<e.length;r++){a+=(e[n].x-e[r].x)*(e[n].y+e[r].y);n=r}if(t)return a/2;return Math.abs(a)/2};a.inertia=function(e,t){for(var i=0,a=0,o=e,s,l,d=0;d<o.length;d++){l=(d+1)%o.length;s=Math.abs(r.cross(o[l],o[d]));i+=s*(r.dot(o[l],o[l])+r.dot(o[l],o[d])+r.dot(o[d],o[d]));a+=s}return t/6*(i/a)};a.translate=function(e,t,a){var n;if(a){for(n=0;n<e.length;n++){e[n].x+=t.x*a;e[n].y+=t.y*a}}else{for(n=0;n<e.length;n++){e[n].x+=t.x;e[n].y+=t.y}}return e};a.rotate=function(e,t,a){if(0===t)return;for(var n=Math.cos(t),r=Math.sin(t),o=0;o<e.length;o++){var s=e[o],l=s.x-a.x,d=s.y-a.y;s.x=a.x+(l*n-d*r);s.y=a.y+(l*r+d*n)}return e};a.contains=function(e,t){for(var a=0;a<e.length;a++){var n=e[a],r=e[(a+1)%e.length];if(0<(t.x-n.x)*(r.y-n.y)+(t.y-n.y)*(n.x-r.x)){return!1}}return!0};a.scale=function(e,t,n,o){if(1===t&&1===n)return e;o=o||a.centre(e);for(var s,l,d=0;d<e.length;d++){s=e[d];l=r.sub(s,o);e[d].x=o.x+l.x*t;e[d].y=o.y+l.y*n}return e};a.chamfer=function(e,t,a,n,s){if("number"==typeof t){t=[t]}else{t=t||[8]}a="undefined"!=typeof a?a:-1;n=n||2;s=s||14;for(var l=[],d=0;d<e.length;d++){var p=e[0<=d-1?d-1:e.length-1],c=e[d],u=e[(d+1)%e.length],g=t[d<t.length?d:t.length-1];if(0===g){l.push(c);continue}var h=r.normalise({x:c.y-p.y,y:p.x-c.x}),m=r.normalise({x:u.y-c.y,y:c.x-u.x}),y=Math.sqrt(2*Math.pow(g,2)),x=r.mult(o.clone(h),g),f=r.normalise(r.mult(r.add(h,m),.5)),T=r.sub(c,r.mult(f,y)),v=a;if(-1===a){v=1.75*Math.pow(g,.32)}v=o.clamp(v,n,s);if(1==v%2)v+=1;for(var b=Math.acos(r.dot(h,m)),E=b/v,S=0;S<v;S++){l.push(r.add(r.rotate(x,E*S),T))}}return l};a.clockwiseSort=function(e){var t=a.mean(e);e.sort(function(e,i){return r.angle(t,e)-r.angle(t,i)});return e};a.isConvex=function(e){var t=0,a=e.length,n,r,o,s;if(3>a)return null;for(n=0;n<a;n++){r=(n+1)%a;o=(n+2)%a;s=(e[r].x-e[n].x)*(e[o].y-e[r].y);s-=(e[r].y-e[n].y)*(e[o].x-e[r].x);if(0>s){t|=1}else if(0<s){t|=2}if(3==t){return!1}}if(0!=t){return!0}else{return null}};a.hull=function(e){var t=[],a=[],n,o;e=e.slice(0);e.sort(function(e,t){var i=e.x-t.x;return 0!=i?i:e.y-t.y});for(o=0;o<e.length;o+=1){n=e[o];while(2<=a.length&&0>=r.cross3(a[a.length-2],a[a.length-1],n)){a.pop()}a.push(n)}for(o=e.length-1;0<=o;o-=1){n=e[o];while(2<=t.length&&0>=r.cross3(t[t.length-2],t[t.length-1],n)){t.pop()}t.push(n)}t.pop();a.pop();return t.concat(a)}})()},function(e,t,i){var a=i(22);e.exports=function FromPercent(e,t,i){e=a(e,0,1);return(i-t)*e}},function(e){e.exports=function GetBoolean(e,t,i){if(!e){return i}else if(e.hasOwnProperty(t)){return e[t]}else{return i}}},function(e){e.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(e,t,i){e.exports={DESTROY:i(576),VIDEO_COMPLETE:i(577),VIDEO_CREATED:i(578),VIDEO_ERROR:i(579),VIDEO_LOOP:i(580),VIDEO_PLAY:i(581),VIDEO_SEEKED:i(582),VIDEO_SEEKING:i(583),VIDEO_STOP:i(584),VIDEO_TIMEOUT:i(585),VIDEO_UNLOCKED:i(586)}},function(e,t,i){var a=i(0),n=i(12),r=i(35),o=i(9),s=i(48),l=i(11),d=i(32),p=i(161),c=i(3),u=new a({Extends:o,Mixins:[n.Alpha,n.Visible],initialize:function(e,t,i,a){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=0}o.call(this);this.scene;this.sceneManager;this.scaleManager;this.cameraManager;this.id=0;this.name="";this.resolution=1;this.roundPixels=!1;this.useBounds=!1;this.worldView=new l;this.dirty=!0;this._x=e;this._y=t;this._cx=0;this._cy=0;this._cw=0;this._ch=0;this._width=i;this._height=a;this._bounds=new l;this._scrollX=0;this._scrollY=0;this._zoom=1;this._rotation=0;this.matrix=new d;this.transparent=!0;this.backgroundColor=p("rgba(0,0,0,0)");this.disableCull=!1;this.culledObjects=[];this.midPoint=new c(i/2,a/2);this.originX=.5;this.originY=.5;this._customViewport=!1;this.mask=null;this._maskCamera=null},setOrigin:function setOrigin(e,t){if(e===void 0){e=.5}if(t===void 0){t=e}this.originX=e;this.originY=t;return this},getScroll:function getScroll(e,t,i){if(i===void 0){i=new c}var a=.5*this.width,n=.5*this.height;i.x=e-a;i.y=t-n;if(this.useBounds){i.x=this.clampX(i.x);i.y=this.clampY(i.y)}return i},centerOnX:function centerOnX(e){var t=.5*this.width;this.midPoint.x=e;this.scrollX=e-t;if(this.useBounds){this.scrollX=this.clampX(this.scrollX)}return this},centerOnY:function centerOnY(e){var t=.5*this.height;this.midPoint.y=e;this.scrollY=e-t;if(this.useBounds){this.scrollY=this.clampY(this.scrollY)}return this},centerOn:function centerOn(e,t){this.centerOnX(e);this.centerOnY(t);return this},centerToBounds:function centerToBounds(){if(this.useBounds){var e=this._bounds,t=.5*this.width,i=.5*this.height;this.midPoint.set(e.centerX,e.centerY);this.scrollX=e.centerX-t;this.scrollY=e.centerY-i}return this},centerToSize:function centerToSize(){this.scrollX=.5*this.width;this.scrollY=.5*this.height;return this},cull:function cull(e){if(this.disableCull){return e}var t=this.matrix.matrix,i=t[0],a=t[1],n=t[2],r=t[3],o=i*r-a*n;if(!o){return e}var s=t[4],l=t[5],d=this.scrollX,p=this.scrollY,c=this.width,u=this.height,g=this.culledObjects,h=e.length;o=1/o;g.length=0;for(var m=0,y;m<h;++m){y=e[m];if(!y.hasOwnProperty("width")||y.parentContainer){g.push(y);continue}var x=y.width,f=y.height,T=y.x-d*y.scrollFactorX-x*y.originX,v=y.y-p*y.scrollFactorY-f*y.originY,b=this.y,E=this.x;if((T+x)*i+(v+f)*n+s>E&&T*i+v*n+s<E+c&&(T+x)*a+(v+f)*r+l>b&&T*a+v*r+l<b+u){g.push(y)}}return g},getWorldPoint:function getWorldPoint(e,t,i){if(i===void 0){i=new c}var a=this.matrix.matrix,n=a[0],r=a[1],o=a[2],l=a[3],d=a[4],p=a[5],u=n*l-r*o;if(!u){i.x=e;i.y=t;return i}u=1/u;var g=l*u,h=-r*u,m=-o*u,y=n*u,x=(o*p-l*d)*u,f=(r*d-n*p)*u,T=Math.cos(this.rotation),v=Math.sin(this.rotation),s=this.zoom,b=this.resolution,E=this.scrollX,S=this.scrollY,_=e+(E*T-S*v)*s,A=t+(E*v+S*T)*s;i.x=(_*g+A*m)*b+x;i.y=(_*h+A*y)*b+f;return i},ignore:function ignore(e){var t=this.id;if(!Array.isArray(e)){e=[e]}for(var a=0,n;a<e.length;a++){n=e[a];if(Array.isArray(n)){this.ignore(n)}else if(n.isParent){this.ignore(n.getChildren())}else{n.cameraFilter|=t}}return this},preRender:function preRender(e){var t=this.width,i=this.height,a=this.zoom*e,n=this.matrix,r=t*this.originX,o=i*this.originY,s=this.scrollX,l=this.scrollY;if(this.useBounds){s=this.clampX(s);l=this.clampY(l)}if(this.roundPixels){r=Math.round(r);o=Math.round(o)}this.scrollX=s;this.scrollY=l;var d=s+.5*t,p=l+.5*i;this.midPoint.set(d,p);var c=t/a,u=i/a;this.worldView.setTo(d-c/2,p-u/2,c,u);n.applyITRS(this.x+r,this.y+o,this.rotation,a,a);n.translate(-r,-o)},clampX:function clampX(e){var t=this._bounds,i=this.displayWidth,a=t.x+(i-this.width)/2,n=Math.max(a,a+t.width-i);if(e<a){e=a}else if(e>n){e=n}return e},clampY:function clampY(e){var t=this._bounds,i=this.displayHeight,a=t.y+(i-this.height)/2,n=Math.max(a,a+t.height-i);if(e<a){e=a}else if(e>n){e=n}return e},removeBounds:function removeBounds(){this.useBounds=!1;this.dirty=!0;this._bounds.setEmpty();return this},setAngle:function setAngle(e){if(e===void 0){e=0}this.rotation=r(e);return this},setBackgroundColor:function setBackgroundColor(e){if(e===void 0){e="rgba(0,0,0,0)"}this.backgroundColor=p(e);this.transparent=0===this.backgroundColor.alpha;return this},setBounds:function setBounds(e,t,i,a,n){if(n===void 0){n=!1}this._bounds.setTo(e,t,i,a);this.dirty=!0;this.useBounds=!0;if(n){this.centerToBounds()}else{this.scrollX=this.clampX(this.scrollX);this.scrollY=this.clampY(this.scrollY)}return this},getBounds:function getBounds(e){if(e===void 0){e=new l}var t=this._bounds;e.setTo(t.x,t.y,t.width,t.height);return e},setName:function setName(e){if(e===void 0){e=""}this.name=e;return this},setPosition:function setPosition(e,t){if(t===void 0){t=e}this.x=e;this.y=t;return this},setRotation:function setRotation(e){if(e===void 0){e=0}this.rotation=e;return this},setRoundPixels:function setRoundPixels(e){this.roundPixels=e;return this},setScene:function setScene(e){if(this.scene&&this._customViewport){this.sceneManager.customViewports--}this.scene=e;var t=e.sys;this.sceneManager=t.game.scene;this.scaleManager=t.scale;this.cameraManager=t.cameras;var i=this.scaleManager.resolution;this.resolution=i;this._cx=this._x*i;this._cy=this._y*i;this._cw=this._width*i;this._ch=this._height*i;this.updateSystem();return this},setScroll:function setScroll(e,t){if(t===void 0){t=e}this.scrollX=e;this.scrollY=t;return this},setSize:function setSize(e,t){if(t===void 0){t=e}this.width=e;this.height=t;return this},setViewport:function setViewport(e,t,i,a){this.x=e;this.y=t;this.width=i;this.height=a;return this},setZoom:function setZoom(e){if(e===void 0){e=1}if(0===e){e=.001}this.zoom=e;return this},setMask:function setMask(e,t){if(t===void 0){t=!0}this.mask=e;this._maskCamera=t?this.cameraManager.default:this;return this},clearMask:function clearMask(e){if(e===void 0){e=!1}if(e&&this.mask){this.mask.destroy()}this.mask=null;return this},toJSON:function toJSON(){var e={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};if(this.useBounds){e.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}}return e},update:function update(){},updateSystem:function updateSystem(){if(!this.scaleManager){return}var e=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,t=this.sceneManager;if(e&&!this._customViewport){t.customViewports++}else if(!e&&this._customViewport){t.customViewports--}this.dirty=!0;this._customViewport=e},destroy:function destroy(){this.emit(s.DESTROY,this);this.removeAllListeners();this.matrix.destroy();this.culledObjects=[];if(this._customViewport){this.sceneManager.customViewports--}this._bounds=null;this.scene=null;this.scaleManager=null;this.sceneManager=null;this.cameraManager=null},x:{get:function get(){return this._x},set:function set(e){this._x=e;this._cx=e*this.resolution;this.updateSystem()}},y:{get:function get(){return this._y},set:function set(e){this._y=e;this._cy=e*this.resolution;this.updateSystem()}},width:{get:function get(){return this._width},set:function set(e){this._width=e;this._cw=e*this.resolution;this.updateSystem()}},height:{get:function get(){return this._height},set:function set(e){this._height=e;this._ch=e*this.resolution;this.updateSystem()}},scrollX:{get:function get(){return this._scrollX},set:function set(e){this._scrollX=e;this.dirty=!0}},scrollY:{get:function get(){return this._scrollY},set:function set(e){this._scrollY=e;this.dirty=!0}},zoom:{get:function get(){return this._zoom},set:function set(e){this._zoom=e;this.dirty=!0}},rotation:{get:function get(){return this._rotation},set:function set(e){this._rotation=e;this.dirty=!0}},centerX:{get:function get(){return this.x+.5*this.width}},centerY:{get:function get(){return this.y+.5*this.height}},displayWidth:{get:function get(){return this.width/this.zoom}},displayHeight:{get:function get(){return this.height/this.zoom}}});e.exports=u},function(e,t,i){e.exports={ENTER_FULLSCREEN:i(694),FULLSCREEN_FAILED:i(695),FULLSCREEN_UNSUPPORTED:i(696),LEAVE_FULLSCREEN:i(697),ORIENTATION_CHANGE:i(698),RESIZE:i(699)}},function(e){e.exports=function SnapFloor(e,t,i,a){if(i===void 0){i=0}if(0===t){return e}e-=i;e=t*Math.floor(e/t);return a?(i+e)/t:i+e}},function(e,t,i){var a=i(0),n=i(22),r=i(17),o=new a({initialize:function(e,t,i,a,n,r,o){this.texture=e;this.name=t;this.source=e.source[i];this.sourceIndex=i;this.glTexture=this.source.glTexture;this.cutX;this.cutY;this.cutWidth;this.cutHeight;this.x=0;this.y=0;this.width;this.height;this.halfWidth;this.halfHeight;this.centerX;this.centerY;this.pivotX=0;this.pivotY=0;this.customPivot=!1;this.rotated=!1;this.autoRound=-1;this.customData={};this.u0=0;this.v0=0;this.u1=0;this.v1=0;this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}};this.setSize(r,o,a,n)},setSize:function setSize(e,t,i,a){if(i===void 0){i=0}if(a===void 0){a=0}this.cutX=i;this.cutY=a;this.cutWidth=e;this.cutHeight=t;this.width=e;this.height=t;this.halfWidth=Math.floor(.5*e);this.halfHeight=Math.floor(.5*t);this.centerX=Math.floor(e/2);this.centerY=Math.floor(t/2);var n=this.data,r=n.cut;r.x=i;r.y=a;r.w=e;r.h=t;r.r=i+e;r.b=a+t;n.sourceSize.w=e;n.sourceSize.h=t;n.spriteSourceSize.w=e;n.spriteSourceSize.h=t;n.radius=.5*Math.sqrt(e*e+t*t);var o=n.drawImage;o.x=i;o.y=a;o.width=e;o.height=t;return this.updateUVs()},setTrim:function setTrim(e,t,i,a,n,r){var o=this.data,s=o.spriteSourceSize;o.trim=!0;o.sourceSize.w=e;o.sourceSize.h=t;s.x=i;s.y=a;s.w=n;s.h=r;s.r=i+n;s.b=a+r;this.x=i;this.y=a;this.width=n;this.height=r;this.halfWidth=.5*n;this.halfHeight=.5*r;this.centerX=Math.floor(n/2);this.centerY=Math.floor(r/2);return this.updateUVs()},setCropUVs:function setCropUVs(e,t,i,a,r,o,s){var l=this.cutX,d=this.cutY,p=this.cutWidth,c=this.cutHeight,u=this.realWidth,g=this.realHeight;t=n(t,0,u);i=n(i,0,g);a=n(a,0,u-t);r=n(r,0,g-i);var h=l+t,m=d+i,f=a,T=r,v=this.data;if(v.trim){var b=v.spriteSourceSize;a=n(a,0,p-t);r=n(r,0,c-i);var E=t+a,S=i+r,_=!(b.r<t||b.b<i||b.x>E||b.y>S);if(_){var A=Math.max(b.x,t),C=Math.max(b.y,i),w=Math.min(b.r,E)-A,P=Math.min(b.b,S)-C;f=w;T=P;if(o){h=l+(p-(A-b.x)-w)}else{h=l+(A-b.x)}if(s){m=d+(c-(C-b.y)-P)}else{m=d+(C-b.y)}t=A;i=C;a=w;r=P}else{h=0;m=0;f=0;T=0}}else{if(o){h=l+(p-t-a)}if(s){m=d+(c-i-r)}}var O=this.source.width,R=this.source.height;e.u0=Math.max(0,h/O);e.v0=Math.max(0,m/R);e.u1=Math.min(1,(h+f)/O);e.v1=Math.min(1,(m+T)/R);e.x=t;e.y=i;e.cx=h;e.cy=m;e.cw=f;e.ch=T;e.width=a;e.height=r;e.flipX=o;e.flipY=s;return e},updateCropUVs:function updateCropUVs(e,t,i){return this.setCropUVs(e,e.x,e.y,e.width,e.height,t,i)},updateUVs:function updateUVs(){var e=this.cutX,t=this.cutY,i=this.cutWidth,a=this.cutHeight,n=this.data.drawImage;n.width=i;n.height=a;var r=this.source.width,o=this.source.height;this.u0=e/r;this.v0=t/o;this.u1=(e+i)/r;this.v1=(t+a)/o;return this},updateUVsInverted:function updateUVsInverted(){var e=this.source.width,t=this.source.height;this.u0=(this.cutX+this.cutHeight)/e;this.v0=this.cutY/t;this.u1=this.cutX/e;this.v1=(this.cutY+this.cutWidth)/t;return this},clone:function(){var e=new o(this.texture,this.name,this.sourceIndex);e.cutX=this.cutX;e.cutY=this.cutY;e.cutWidth=this.cutWidth;e.cutHeight=this.cutHeight;e.x=this.x;e.y=this.y;e.width=this.width;e.height=this.height;e.halfWidth=this.halfWidth;e.halfHeight=this.halfHeight;e.centerX=this.centerX;e.centerY=this.centerY;e.rotated=this.rotated;e.data=r(!0,e.data,this.data);e.updateUVs();return e},destroy:function destroy(){this.source=null;this.texture=null;this.glTexture=null;this.customData=null;this.data=null},realWidth:{get:function get(){return this.data.sourceSize.w}},realHeight:{get:function get(){return this.data.sourceSize.h}},radius:{get:function get(){return this.data.radius}},trimmed:{get:function get(){return this.data.trim}},canvasData:{get:function get(){return this.data.drawImage}}});e.exports=o},function(e,t,i){var a=i(0),n=i(96),r=i(390),o=i(391),s=i(46),l=i(154),d=new a({initialize:function(e,t,i,a){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=0}this.type=s.ELLIPSE;this.x=e;this.y=t;this.width=i;this.height=a},contains:function contains(e,t){return n(this,e,t)},getPoint:function getPoint(e,t){return r(this,e,t)},getPoints:function getPoints(e,t,i){return o(this,e,t,i)},getRandomPoint:function getRandomPoint(e){return l(this,e)},setTo:function setTo(e,t,i,a){this.x=e;this.y=t;this.width=i;this.height=a;return this},setEmpty:function setEmpty(){this.width=0;this.height=0;return this},setPosition:function setPosition(e,t){if(t===void 0){t=e}this.x=e;this.y=t;return this},setSize:function setSize(e,t){if(t===void 0){t=e}this.width=e;this.height=t;return this},isEmpty:function isEmpty(){return 0>=this.width||0>=this.height},getMinorRadius:function getMinorRadius(){return Math.min(this.width,this.height)/2},getMajorRadius:function getMajorRadius(){return Math.max(this.width,this.height)/2},left:{get:function get(){return this.x-this.width/2},set:function set(e){this.x=e+this.width/2}},right:{get:function get(){return this.x+this.width/2},set:function set(e){this.x=e-this.width/2}},top:{get:function get(){return this.y-this.height/2},set:function set(e){this.y=e+this.height/2}},bottom:{get:function get(){return this.y+this.height/2},set:function set(e){this.y=e-this.height/2}}});e.exports=d},function(e){e.exports=function Contains(e,t,i){if(0>=e.width||0>=e.height){return!1}var a=(t-e.x)/e.width,n=(i-e.y)/e.height;a*=a;n*=n;return .25>a+n}},function(e,t,i){var a=i(238),n=i(0),r=i(90),o=i(2),s=i(6),l=i(7),d=i(384),p=i(108),c=i(69),u=new n({initialize:function(e,t,i){if(i){if(t&&!Array.isArray(t)){t=[t]}}else if(Array.isArray(t)){if(l(t[0])){i=t;t=null}}else if(l(t)){i=t;t=null}this.scene=e;this.children=new p(t);this.isParent=!0;this.type="Group";this.classType=o(i,"classType",c);this.name=o(i,"name","");this.active=o(i,"active",!0);this.maxSize=o(i,"maxSize",-1);this.defaultKey=o(i,"defaultKey",null);this.defaultFrame=o(i,"defaultFrame",null);this.runChildUpdate=o(i,"runChildUpdate",!1);this.createCallback=o(i,"createCallback",null);this.removeCallback=o(i,"removeCallback",null);this.createMultipleCallback=o(i,"createMultipleCallback",null);this.internalCreateCallback=o(i,"internalCreateCallback",null);this.internalRemoveCallback=o(i,"internalRemoveCallback",null);if(i){this.createMultiple(i)}},create:function create(e,t,i,a,n,r){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=this.defaultKey}if(a===void 0){a=this.defaultFrame}if(n===void 0){n=!0}if(r===void 0){r=!0}if(this.isFull()){return null}var o=new this.classType(this.scene,e,t,i,a);this.scene.sys.displayList.add(o);if(o.preUpdate){this.scene.sys.updateList.add(o)}o.visible=n;o.setActive(r);this.add(o);return o},createMultiple:function createMultiple(e){if(this.isFull()){return[]}if(!Array.isArray(e)){e=[e]}var t=[];if(e[0].key){for(var a=0,n;a<e.length;a++){n=this.createFromConfig(e[a]);t=t.concat(n)}}return t},createFromConfig:function createFromConfig(e){if(this.isFull()){return[]}this.classType=o(e,"classType",this.classType);var t=o(e,"key",void 0),i=o(e,"frame",null),n=o(e,"visible",!0),r=o(e,"active",!0),l=[];if(t===void 0){return l}else{if(!Array.isArray(t)){t=[t]}if(!Array.isArray(i)){i=[i]}}var p=o(e,"repeat",0),u=o(e,"randomKey",!1),g=o(e,"randomFrame",!1),h=o(e,"yoyo",!1),m=o(e,"quantity",!1),f=o(e,"frameQuantity",1),T=o(e,"max",0),v=d(t,i,{max:T,qty:m?m:f,random:u,randomB:g,repeat:p,yoyo:h});if(e.createCallback){this.createCallback=e.createCallback}if(e.removeCallback){this.removeCallback=e.removeCallback}for(var b=0,E;b<v.length;b++){E=this.create(0,0,v[b].a,v[b].b,n,r);if(!E){break}l.push(E)}var S=s(e,"setXY.x",0),x=s(e,"setXY.y",0),y=s(e,"setXY.stepX",0),_=s(e,"setXY.stepY",0);a.SetXY(l,S,x,y,_);var A=s(e,"setRotation.value",0),C=s(e,"setRotation.step",0);a.SetRotation(l,A,C);var w=s(e,"setScale.x",1),P=s(e,"setScale.y",w),O=s(e,"setScale.stepX",0),R=s(e,"setScale.stepY",0);a.SetScale(l,w,P,O,R);var L=s(e,"setAlpha.value",1),k=s(e,"setAlpha.step",0);a.SetAlpha(l,L,k);var D=s(e,"setDepth.value",0),F=s(e,"setDepth.step",0);a.SetDepth(l,D,F);var I=s(e,"setScrollFactor.x",1),M=s(e,"setScrollFactor.y",I),B=s(e,"setScrollFactor.stepX",0),Y=s(e,"setScrollFactor.stepY",0);a.SetScrollFactor(l,I,M,B,Y);var N=o(e,"hitArea",null),X=o(e,"hitAreaCallback",null);if(N){a.SetHitArea(l,N,X)}var z=o(e,"gridAlign",!1);if(z){a.GridAlign(l,z)}if(this.createMultipleCallback){this.createMultipleCallback.call(this,l)}return l},preUpdate:function preUpdate(e,t){if(!this.runChildUpdate||0===this.children.size){return}for(var a=this.children.entries.slice(),n=0,r;n<a.length;n++){r=a[n];if(r.active){r.update(e,t)}}},add:function add(e,t){if(t===void 0){t=!1}if(this.isFull()){return this}this.children.set(e);if(this.internalCreateCallback){this.internalCreateCallback.call(this,e)}if(this.createCallback){this.createCallback.call(this,e)}if(t){this.scene.sys.displayList.add(e);if(e.preUpdate){this.scene.sys.updateList.add(e)}}e.on(r.DESTROY,this.remove,this);return this},addMultiple:function addMultiple(e,t){if(t===void 0){t=!1}if(Array.isArray(e)){for(var a=0;a<e.length;a++){this.add(e[a],t)}}return this},remove:function remove(e,t,i){if(t===void 0){t=!1}if(i===void 0){i=!1}if(!this.children.contains(e)){return this}this.children.delete(e);if(this.internalRemoveCallback){this.internalRemoveCallback.call(this,e)}if(this.removeCallback){this.removeCallback.call(this,e)}e.off(r.DESTROY,this.remove,this);if(i){e.destroy()}else if(t){e.scene.sys.displayList.remove(e);if(e.preUpdate){e.scene.sys.updateList.remove(e)}}return this},clear:function clear(e,t){if(e===void 0){e=!1}if(t===void 0){t=!1}for(var a=this.children,n=0,o;n<a.size;n++){o=a.entries[n];o.off(r.DESTROY,this.remove,this);if(t){o.destroy()}else if(e){o.scene.sys.displayList.remove(o);if(o.preUpdate){o.scene.sys.updateList.remove(o)}}}this.children.clear();return this},contains:function contains(e){return this.children.contains(e)},getChildren:function getChildren(){return this.children.entries},getLength:function getLength(){return this.children.size},getFirst:function getFirst(e,t,i,a,n,r,o){return this.getHandler(!0,1,e,t,i,a,n,r,o)},getFirstNth:function getFirstNth(e,t,i,a,n,r,o,s){return this.getHandler(!0,e,t,i,a,n,r,o,s)},getLast:function getLast(e,t,i,a,n,r,o){return this.getHandler(!1,1,e,t,i,a,n,r,o)},getLastNth:function getLastNth(e,t,i,a,n,r,o,s){return this.getHandler(!1,e,t,i,a,n,r,o,s)},getHandler:function getHandler(e,t,a,n,r,o,s,l,d){if(a===void 0){a=!1}if(n===void 0){n=!1}var p,c,u=0,g=this.children.entries;if(e){for(c=0;c<g.length;c++){p=g[c];if(p.active===a){u++;if(u===t){break}}else{p=null}}}else{for(c=g.length-1;0<=c;c--){p=g[c];if(p.active===a){u++;if(u===t){break}}else{p=null}}}if(p){if("number"==typeof r){p.x=r}if("number"==typeof o){p.y=o}return p}if(n){return this.create(r,o,s,l,d)}else{return null}},get:function get(e,t,i,a,n){return this.getFirst(!1,!0,e,t,i,a,n)},getFirstAlive:function getFirstAlive(e,t,i,a,n,r){return this.getFirst(!0,e,t,i,a,n,r)},getFirstDead:function getFirstDead(e,t,i,a,n,r){return this.getFirst(!1,e,t,i,a,n,r)},playAnimation:function playAnimation(e,t){a.PlayAnimation(this.children.entries,e,t);return this},isFull:function isFull(){if(-1===this.maxSize){return!1}else{return this.children.size>=this.maxSize}},countActive:function countActive(e){if(e===void 0){e=!0}for(var t=0,a=0;a<this.children.size;a++){if(this.children.entries[a].active===e){t++}}return t},getTotalUsed:function getTotalUsed(){return this.countActive()},getTotalFree:function getTotalFree(){var e=this.getTotalUsed(),t=-1===this.maxSize?999999999999:this.maxSize;return t-e},propertyValueSet:function propertyValueSet(e,t,i,n,r){a.PropertyValueSet(this.children.entries,e,t,i,n,r);return this},propertyValueInc:function propertyValueInc(e,t,i,n,r){a.PropertyValueInc(this.children.entries,e,t,i,n,r);return this},setX:function setX(e,t){a.SetX(this.children.entries,e,t);return this},setY:function setY(e,t){a.SetY(this.children.entries,e,t);return this},setXY:function setXY(e,t,i,n){a.SetXY(this.children.entries,e,t,i,n);return this},incX:function incX(e,t){a.IncX(this.children.entries,e,t);return this},incY:function incY(e,t){a.IncY(this.children.entries,e,t);return this},incXY:function incXY(e,t,i,n){a.IncXY(this.children.entries,e,t,i,n);return this},shiftPosition:function shiftPosition(e,t,i){a.ShiftPosition(this.children.entries,e,t,i);return this},angle:function angle(e,t){a.Angle(this.children.entries,e,t);return this},rotate:function rotate(e,t){a.Rotate(this.children.entries,e,t);return this},rotateAround:function rotateAround(e,t){a.RotateAround(this.children.entries,e,t);return this},rotateAroundDistance:function rotateAroundDistance(e,t,i){a.RotateAroundDistance(this.children.entries,e,t,i);return this},setAlpha:function setAlpha(e,t){a.SetAlpha(this.children.entries,e,t);return this},setTint:function setTint(e,t,i,n){a.SetTint(this.children.entries,e,t,i,n);return this},setOrigin:function setOrigin(e,t,i,n){a.SetOrigin(this.children.entries,e,t,i,n);return this},scaleX:function scaleX(e,t){a.ScaleX(this.children.entries,e,t);return this},scaleY:function scaleY(e,t){a.ScaleY(this.children.entries,e,t);return this},scaleXY:function scaleXY(e,t,i,n){a.ScaleXY(this.children.entries,e,t,i,n);return this},setDepth:function setDepth(e,t){a.SetDepth(this.children.entries,e,t);return this},setBlendMode:function setBlendMode(e){a.SetBlendMode(this.children.entries,e);return this},setHitArea:function setHitArea(e,t){a.SetHitArea(this.children.entries,e,t);return this},shuffle:function shuffle(){a.Shuffle(this.children.entries);return this},kill:function kill(e){if(this.children.contains(e)){e.setActive(!1)}},killAndHide:function killAndHide(e){if(this.children.contains(e)){e.setActive(!1);e.setVisible(!1)}},setVisible:function setVisible(e,t,i){a.SetVisible(this.children.entries,e,t,i);return this},toggleVisible:function toggleVisible(){a.ToggleVisible(this.children.entries);return this},destroy:function destroy(e){if(e===void 0){e=!1}if(!this.scene||this.ignoreDestroy){return}this.clear(!1,e);this.scene=void 0;this.children=void 0}});e.exports=u},function(e,t,i){var a=i(0),n=i(12),r=i(14),o=i(963),s=new a({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,o],initialize:function(e,t,i,a,n){r.call(this,e,"Image");this._crop=this.resetCropObject();this.setTexture(a,n);this.setPosition(t,i);this.setSizeToFrame();this.setOriginFromFrame();this.initPipeline()}});e.exports=s},function(e){e.exports=function HasValue(e,t){return e.hasOwnProperty(t)}},function(e,t,i){var a=i(10);e.exports=function FillPathWebGL(e,t,n,r,o,s){for(var l=a.getTintAppendFloatAlphaAndSwap(n.fillColor,n.fillAlpha*r),d=n.pathData,p=n.pathIndexes,c=0;c<p.length;c+=3){var u=2*p[c],g=2*p[c+1],h=2*p[c+2],m=d[u+0]-o,y=d[u+1]-s,x=d[g+0]-o,f=d[g+1]-s,T=d[h+0]-o,v=d[h+1]-s,b=t.getX(m,y),E=t.getY(m,y),S=t.getX(x,f),_=t.getY(x,f),A=t.getX(T,v),C=t.getY(T,v);e.setTexture2D();e.batchTri(b,E,S,_,A,C,0,0,1,1,l,l,l,e.tintEffect)}}},function(e){var t={};e.exports=t;(function(){t.create=function(e,t){return{x:e||0,y:t||0}};t.clone=function(e){return{x:e.x,y:e.y}};t.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};t.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y};t.rotate=function(e,t,i){var a=Math.cos(t),n=Math.sin(t);if(!i)i={};var r=e.x*a-e.y*n;i.y=e.x*n+e.y*a;i.x=r;return i};t.rotateAbout=function(e,t,i,a){var n=Math.cos(t),r=Math.sin(t);if(!a)a={};var o=i.x+((e.x-i.x)*n-(e.y-i.y)*r);a.y=i.y+((e.x-i.x)*r+(e.y-i.y)*n);a.x=o;return a};t.normalise=function(e){var i=t.magnitude(e);if(0===i)return{x:0,y:0};return{x:e.x/i,y:e.y/i}};t.dot=function(e,t){return e.x*t.x+e.y*t.y};t.cross=function(e,t){return e.x*t.y-e.y*t.x};t.cross3=function(e,t,i){return(t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x)};t.add=function(e,t,i){if(!i)i={};i.x=e.x+t.x;i.y=e.y+t.y;return i};t.sub=function(e,t,i){if(!i)i={};i.x=e.x-t.x;i.y=e.y-t.y;return i};t.mult=function(e,t){return{x:e.x*t,y:e.y*t}};t.div=function(e,t){return{x:e.x/t,y:e.y/t}};t.perp=function(e,t){t=!0===t?-1:1;return{x:t*-e.y,y:t*e.x}};t.neg=function(e){return{x:-e.x,y:-e.y}};t.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)};t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]})()},function(e){var t={};e.exports=t;(function(){t.create=function(e){var i={min:{x:0,y:0},max:{x:0,y:0}};if(e)t.update(i,e);return i};t.update=function(e,t,a){e.min.x=1/0;e.max.x=-Infinity;e.min.y=1/0;e.max.y=-Infinity;for(var n=0,r;n<t.length;n++){r=t[n];if(r.x>e.max.x)e.max.x=r.x;if(r.x<e.min.x)e.min.x=r.x;if(r.y>e.max.y)e.max.y=r.y;if(r.y<e.min.y)e.min.y=r.y}if(a){if(0<a.x){e.max.x+=a.x}else{e.min.x+=a.x}if(0<a.y){e.max.y+=a.y}else{e.min.y+=a.y}}};t.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y};t.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y};t.translate=function(e,t){e.min.x+=t.x;e.max.x+=t.x;e.min.y+=t.y;e.max.y+=t.y};t.shift=function(e,t){var i=e.max.x-e.min.x,a=e.max.y-e.min.y;e.min.x=t.x;e.max.x=t.x+i;e.min.y=t.y;e.max.y=t.y+a}})()},function(e){e.exports=function IsInLayerBounds(e,t,i){return 0<=e&&e<i.width&&0<=t&&t<i.height}},function(e,t,i){var a=i(0),n=i(2),r=new a({initialize:function(e){if(e===void 0){e={}}this.name=n(e,"name","layer");this.x=n(e,"x",0);this.y=n(e,"y",0);this.width=n(e,"width",0);this.height=n(e,"height",0);this.tileWidth=n(e,"tileWidth",0);this.tileHeight=n(e,"tileHeight",0);this.baseTileWidth=n(e,"baseTileWidth",this.tileWidth);this.baseTileHeight=n(e,"baseTileHeight",this.tileHeight);this.widthInPixels=n(e,"widthInPixels",this.width*this.baseTileWidth);this.heightInPixels=n(e,"heightInPixels",this.height*this.baseTileHeight);this.alpha=n(e,"alpha",1);this.visible=n(e,"visible",!0);this.properties=n(e,"properties",{});this.indexes=n(e,"indexes",[]);this.collideIndexes=n(e,"collideIndexes",[]);this.callbacks=n(e,"callbacks",[]);this.bodies=n(e,"bodies",[]);this.data=n(e,"data",[]);this.tilemapLayer=n(e,"tilemapLayer",null)}});e.exports=r},function(e,t,i){var a=i(0),n=i(2),r=new a({initialize:function(e){if(e===void 0){e={}}this.name=n(e,"name","map");this.width=n(e,"width",0);this.height=n(e,"height",0);this.infinite=n(e,"infinite",!1);this.tileWidth=n(e,"tileWidth",0);this.tileHeight=n(e,"tileHeight",0);this.widthInPixels=n(e,"widthInPixels",this.width*this.tileWidth);this.heightInPixels=n(e,"heightInPixels",this.height*this.tileHeight);this.format=n(e,"format",null);this.orientation=n(e,"orientation","orthogonal");this.renderOrder=n(e,"renderOrder","right-down");this.version=n(e,"version","1");this.properties=n(e,"properties",{});this.layers=n(e,"layers",[]);this.images=n(e,"images",[]);this.objects=n(e,"objects",{});this.collision=n(e,"collision",{});this.tilesets=n(e,"tilesets",[]);this.imageCollections=n(e,"imageCollections",[]);this.tiles=n(e,"tiles",[])}});e.exports=r},function(e){e.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(e,t,i){var a=i(67);e.exports=function Merge(e,t){var i=a(e);for(var n in t){if(!i.hasOwnProperty(n)){i[n]=t[n]}}return i}},function(e,t,i){var a=i(0),n=new a({initialize:function(e){this.entries=[];if(Array.isArray(e)){for(var t=0;t<e.length;t++){this.set(e[t])}}},set:function set(e){if(-1===this.entries.indexOf(e)){this.entries.push(e)}return this},get:function get(e,t){for(var a=0,n;a<this.entries.length;a++){n=this.entries[a];if(n[e]===t){return n}}},getArray:function getArray(){return this.entries.slice(0)},delete:function _delete(e){var t=this.entries.indexOf(e);if(-1<t){this.entries.splice(t,1)}return this},dump:function dump(){console.group("Set");for(var e=0,t;e<this.entries.length;e++){t=this.entries[e];console.log(t)}console.groupEnd()},each:function each(e,t){var a,n=this.entries.slice(),r=n.length;if(t){for(a=0;a<r;a++){if(!1===e.call(t,n[a],a)){break}}}else{for(a=0;a<r;a++){if(!1===e(n[a],a)){break}}}return this},iterate:function iterate(e,t){var a,n=this.entries.length;if(t){for(a=0;a<n;a++){if(!1===e.call(t,this.entries[a],a)){break}}}else{for(a=0;a<n;a++){if(!1===e(this.entries[a],a)){break}}}return this},iterateLocal:function iterateLocal(e){var t,a=[];for(t=1;t<arguments.length;t++){a.push(arguments[t])}var n=this.entries.length;for(t=0;t<n;t++){var r=this.entries[t];r[e].apply(r,a)}return this},clear:function clear(){this.entries.length=0;return this},contains:function contains(e){return-1<this.entries.indexOf(e)},union:function union(e){var t=new n;e.entries.forEach(function(e){t.set(e)});this.entries.forEach(function(e){t.set(e)});return t},intersect:function intersect(e){var t=new n;this.entries.forEach(function(i){if(e.contains(i)){t.set(i)}});return t},difference:function difference(e){var t=new n;this.entries.forEach(function(i){if(!e.contains(i)){t.set(i)}});return t},size:{get:function get(){return this.entries.length},set:function set(e){if(e<this.entries.length){return this.entries.length=e}else{return this.entries.length}}}});e.exports=n},function(e,t,i){var a={};e.exports=a;var n=i(86),r=i(37),o=i(62),s=i(102),l=i(101),d=i(1380);(function(){a.rectangle=function(e,t,i,a,s){s=s||{};var l={label:"Rectangle Body",position:{x:e,y:t},vertices:n.fromPath("L 0 0 L "+i+" 0 L "+i+" "+a+" L 0 "+a)};if(s.chamfer){var d=s.chamfer;l.vertices=n.chamfer(l.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax);delete s.chamfer}return o.create(r.extend({},l,s))};a.trapezoid=function(e,t,i,a,s,l){l=l||{};s*=.5;var d=(1-2*s)*i,p=i*s,c=p+d,u=c+p,g;if(.5>s){g="L 0 0 L "+p+" "+-a+" L "+c+" "+-a+" L "+u+" 0"}else{g="L 0 0 L "+c+" "+-a+" L "+u+" 0"}var h={label:"Trapezoid Body",position:{x:e,y:t},vertices:n.fromPath(g)};if(l.chamfer){var m=l.chamfer;h.vertices=n.chamfer(h.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax);delete l.chamfer}return o.create(r.extend({},h,l))};a.circle=function(e,t,i,n,o){n=n||{};o=o||25;var s=Math.ceil(Math.max(10,Math.min(o,i)));if(1==s%2)s+=1;return a.polygon(e,t,s,i,r.extend({},{label:"Circle Body",circleRadius:i},n))};a.polygon=function(e,t,s,l,d){d=d||{};if(3>s)return a.circle(e,t,l,d);for(var p=2*Math.PI/s,c="",u=0;u<s;u+=1){var g=.5*p+u*p,h=Math.cos(g)*l,m=Math.sin(g)*l;c+="L "+h.toFixed(3)+" "+m.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:e,y:t},vertices:n.fromPath(c)};if(d.chamfer){var x=d.chamfer;y.vertices=n.chamfer(y.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax);delete d.chamfer}return o.create(r.extend({},y,d))};a.fromVertices=function(e,t,s,l,p,c,u){var g,h,m,y,x,f;l=l||{};h=[];p="undefined"!=typeof p?p:!1;c="undefined"!=typeof c?c:.01;u="undefined"!=typeof u?u:10;if(!d){r.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull.")}if(!r.isArray(s[0])){s=[s]}for(f=0;f<s.length;f+=1){y=s[f];m=n.isConvex(y);if(m||!d){if(m){y=n.clockwiseSort(y)}else{y=n.hull(y)}h.push({position:{x:e,y:t},vertices:y})}else{var T=y.map(function(e){return[e.x,e.y]});d.makeCCW(T);if(!1!==c)d.removeCollinearPoints(T,c);var b=d.quickDecomp(T);for(x=0;x<b.length;x++){var E=b[x],S=E.map(function(e){return{x:e[0],y:e[1]}});if(0<u&&n.area(S)<u)continue;h.push({position:n.centre(S),vertices:S})}}}for(x=0;x<h.length;x++){h[x]=o.create(r.extend(h[x],l))}if(p){a.flagCoincidentParts(h,5)}if(1<h.length){g=o.create(r.extend({parts:h.slice(0)},l));o.setPosition(g,{x:e,y:t});return g}else{return h[0]}};a.flagCoincidentParts=function(e,t){if(t===void 0){t=5}for(var a=0,n;a<e.length;a++){n=e[a];for(var r=a+1,o;r<e.length;r++){o=e[r];if(s.overlaps(n.bounds,o.bounds)){for(var d=n.vertices,p=o.vertices,c=0;c<n.vertices.length;c++){for(var u=0;u<o.vertices.length;u++){var g=l.magnitudeSquared(l.sub(d[(c+1)%d.length],p[u])),h=l.magnitudeSquared(l.sub(d[c],p[(u+1)%p.length]));if(g<t&&h<t){d[c].isInternal=!0;p[u].isInternal=!0}}}}}}return e}})()},function(e,t,i){var a=i(52),n=i(65),r=i(55),o=i(0),s=i(12),l=i(14),d=i(11),p=i(47),c=new o({Extends:l,Mixins:[s.Depth,s.GetBounds,s.Origin,s.Transform,s.ScrollFactor,s.Visible],initialize:function(e,t,i,n,r){if(n===void 0){n=1}if(r===void 0){r=n}l.call(this,e,"Zone");this.setPosition(t,i);this.width=n;this.height=r;this.blendMode=a.NORMAL;this.updateDisplayOrigin()},displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(e){this.scaleX=e/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(e){this.scaleY=e/this.height}},setSize:function setSize(e,t,i){if(i===void 0){i=!0}this.width=e;this.height=t;this.updateDisplayOrigin();var a=this.input;if(i&&a&&!a.customHitArea){a.hitArea.width=e;a.hitArea.height=t}return this},setDisplaySize:function setDisplaySize(e,t){this.displayWidth=e;this.displayHeight=t;return this},setCircleDropZone:function setCircleDropZone(e){return this.setDropZone(new n(0,0,e),r)},setRectangleDropZone:function setRectangleDropZone(e,t){return this.setDropZone(new d(0,0,e,t),p)},setDropZone:function setDropZone(e,t){if(e===void 0){this.setRectangleDropZone(this.width,this.height)}else if(!this.input){this.setInteractive(e,t,!0)}return this},setAlpha:function setAlpha(){},setBlendMode:function setBlendMode(){},renderCanvas:function renderCanvas(){},renderWebGL:function renderWebGL(){}});e.exports=c},function(e,t,i){e.exports={ADD_ANIMATION:i(528),ANIMATION_COMPLETE:i(529),ANIMATION_REPEAT:i(530),ANIMATION_RESTART:i(531),ANIMATION_START:i(532),PAUSE_ALL:i(533),REMOVE_ANIMATION:i(534),RESUME_ALL:i(535),SPRITE_ANIMATION_COMPLETE:i(536),SPRITE_ANIMATION_KEY_COMPLETE:i(537),SPRITE_ANIMATION_KEY_REPEAT:i(538),SPRITE_ANIMATION_KEY_RESTART:i(539),SPRITE_ANIMATION_KEY_START:i(540),SPRITE_ANIMATION_KEY_UPDATE:i(541),SPRITE_ANIMATION_REPEAT:i(542),SPRITE_ANIMATION_RESTART:i(543),SPRITE_ANIMATION_START:i(544),SPRITE_ANIMATION_UPDATE:i(545)}},function(e){e.exports=function Perimeter(e){return 2*(e.width+e.height)}},function(e,t,i){var a=i(0),n=i(281),r=new a({initialize:function(e,t){this.parent=e;this.events=t;if(!t){this.events=e.events?e.events:e}this.list={};this.values={};this._frozen=!1;if(!e.hasOwnProperty("sys")&&this.events){this.events.once("destroy",this.destroy,this)}},get:function get(e){var t=this.list;if(Array.isArray(e)){for(var a=[],n=0;n<e.length;n++){a.push(t[e[n]])}return a}else{return t[e]}},getAll:function getAll(){var e={};for(var t in this.list){if(this.list.hasOwnProperty(t)){e[t]=this.list[t]}}return e},query:function query(e){var t={};for(var i in this.list){if(this.list.hasOwnProperty(i)&&i.match(e)){t[i]=this.list[i]}}return t},set:function set(e,t){if(this._frozen){return this}if("string"==typeof e){return this.setValue(e,t)}else{for(var i in e){this.setValue(i,e[i])}}return this},setValue:function setValue(e,t){if(this._frozen){return this}if(this.has(e)){this.values[e]=t}else{var i=this,a=this.list,r=this.events,o=this.parent;Object.defineProperty(this.values,e,{enumerable:!0,configurable:!0,get:function get(){return a[e]},set:function set(t){if(!i._frozen){var s=a[e];a[e]=t;r.emit(n.CHANGE_DATA,o,e,t,s);r.emit(n.CHANGE_DATA_KEY+e,o,t,s)}}});a[e]=t;r.emit(n.SET_DATA,o,e,t)}return this},each:function each(e,t){for(var a=[this.parent,null,void 0],n=1;n<arguments.length;n++){a.push(arguments[n])}for(var r in this.list){a[1]=r;a[2]=this.list[r];e.apply(t,a)}return this},merge:function merge(e,t){if(t===void 0){t=!0}for(var i in e){if(e.hasOwnProperty(i)&&(t||!t&&!this.has(i))){this.setValue(i,e[i])}}return this},remove:function remove(e){if(this._frozen){return this}if(Array.isArray(e)){for(var t=0;t<e.length;t++){this.removeValue(e[t])}}else{return this.removeValue(e)}return this},removeValue:function removeValue(e){if(this.has(e)){var t=this.list[e];delete this.list[e];delete this.values[e];this.events.emit(n.REMOVE_DATA,this.parent,e,t)}return this},pop:function pop(e){var t;if(!this._frozen&&this.has(e)){t=this.list[e];delete this.list[e];delete this.values[e];this.events.emit(n.REMOVE_DATA,this.parent,e,t)}return t},has:function has(e){return this.list.hasOwnProperty(e)},setFreeze:function setFreeze(e){this._frozen=e;return this},reset:function reset(){for(var e in this.list){delete this.list[e];delete this.values[e]}this._frozen=!1;return this},destroy:function destroy(){this.reset();this.events.off(n.CHANGE_DATA);this.events.off(n.SET_DATA);this.events.off(n.REMOVE_DATA);this.parent=null},freeze:{get:function get(){return this._frozen},set:function set(e){this._frozen=e?!0:!1}},count:{get:function get(){var e=0;for(var t in this.list){if(this.list[t]!==void 0){e++}}return e}}});e.exports=r},function(e){e.exports=function Shuffle(e){for(var t=e.length-1;0<t;t--){var a=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[a];e[a]=n}return e}},function(e){e.exports=function Linear(e,i,a){return(i-e)*a+e}},function(e,t,i){(function(t){var a={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function i(){var e=navigator.userAgent;if(/Windows/.test(e)){a.windows=!0}else if(/Mac OS/.test(e)&&!/like Mac OS/.test(e)){a.macOS=!0}else if(/Android/.test(e)){a.android=!0}else if(/Linux/.test(e)){a.linux=!0}else if(/iP[ao]d|iPhone/i.test(e)){a.iOS=!0;navigator.appVersion.match(/OS (\d+)/);a.iOSVersion=parseInt(RegExp.$1,10);a.iPhone=-1!==e.toLowerCase().indexOf("iphone");a.iPad=-1!==e.toLowerCase().indexOf("ipad")}else if(/Kindle/.test(e)||/\bKF[A-Z][A-Z]+/.test(e)||/Silk.*Mobile Safari/.test(e)){a.kindle=!0}else if(/CrOS/.test(e)){a.chromeOS=!0}if(/Windows Phone/i.test(e)||/IEMobile/i.test(e)){a.android=!1;a.iOS=!1;a.macOS=!1;a.windows=!0;a.windowsPhone=!0}var i=/Silk/.test(e);if(a.windows||a.macOS||a.linux&&!i||a.chromeOS){a.desktop=!0}if(a.windowsPhone||/Windows NT/i.test(e)&&/Touch/i.test(e)){a.desktop=!1}if(navigator.standalone){a.webApp=!0}if(window.cordova!==void 0){a.cordova=!0}if("undefined"!=typeof t&&t.versions&&t.versions.node){a.node=!0}if(a.node&&"object"===_typeof(t.versions)){a.nodeWebkit=!!t.versions["node-webkit"];a.electron=!!t.versions.electron}if(window.ejecta!==void 0){a.ejecta=!0}if(/Crosswalk/.test(e)){a.crosswalk=!0}a.pixelRatio=window.devicePixelRatio||1;return a}e.exports=i()}).call(this,i(720))},function(e,t,i){var a=i(116),n={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};e.exports=function(){var e=navigator.userAgent;if(/Edge\/\d+/.test(e)){n.edge=!0}else if(/Chrome\/(\d+)/.test(e)&&!a.windowsPhone){n.chrome=!0;n.chromeVersion=parseInt(RegExp.$1,10)}else if(/Firefox\D+(\d+)/.test(e)){n.firefox=!0;n.firefoxVersion=parseInt(RegExp.$1,10)}else if(/AppleWebKit/.test(e)&&a.iOS){n.mobileSafari=!0}else if(/MSIE (\d+\.\d+);/.test(e)){n.ie=!0;n.ieVersion=parseInt(RegExp.$1,10)}else if(/Opera/.test(e)){n.opera=!0}else if(/Safari/.test(e)&&!a.windowsPhone){n.safari=!0}else if(/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)){n.ie=!0;n.trident=!0;n.tridentVersion=parseInt(RegExp.$1,10);n.ieVersion=parseInt(RegExp.$3,10)}if(/Silk/.test(e)){n.silk=!0}return n}()},function(e){e.exports=function IsSizePowerOfTwo(e,t){return 0<e&&0==(e&e-1)&&0<t&&0==(t&t-1)}},function(e,t,i){e.exports={ADD:i(771),ERROR:i(772),LOAD:i(773),READY:i(774),REMOVE:i(775)}},function(e){var t=function(e,t){var i;if(t){if("string"==typeof t){i=document.getElementById(t)}else if("object"===_typeof(t)&&1===t.nodeType){i=t}}else if(e.parentElement){return e}if(!i){i=document.body}i.appendChild(e);return e};e.exports=t},function(e,t,i){var a=i(79);e.exports=function Remove(e,t,i,n){if(n===void 0){n=e}var r;if(!Array.isArray(t)){r=e.indexOf(t);if(-1!==r){a(e,r);if(i){i.call(n,t)}return t}else{return null}}var o=t.length-1;while(0<=o){var s=t[o];r=e.indexOf(s);if(-1!==r){a(e,r);if(i){i.call(n,s)}}else{t.pop()}o--}return t}},function(e){e.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(e){e.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(e,t,i){var a=i(0),n=i(67),r=i(9),o=i(59),s=i(18),l=i(1),d=new a({Extends:r,initialize:function(e){r.call(this);this.game=e;this.jsonCache=e.cache.json;this.sounds=[];this.mute=!1;this.volume=1;this.pauseOnBlur=!0;this._rate=1;this._detune=0;this.locked=this.locked||!1;this.unlocked=!1;e.events.on(s.BLUR,function(){if(this.pauseOnBlur){this.onBlur()}},this);e.events.on(s.FOCUS,function(){if(this.pauseOnBlur){this.onFocus()}},this);e.events.on(s.PRE_STEP,this.update,this);e.events.once(s.DESTROY,this.destroy,this)},add:l,addAudioSprite:function addAudioSprite(e,t){if(t===void 0){t={}}var i=this.add(e,t);i.spritemap=this.jsonCache.get(e).spritemap;for(var a in i.spritemap){if(!i.spritemap.hasOwnProperty(a)){continue}var r=n(t),o=i.spritemap[a];r.loop=o.hasOwnProperty("loop")?o.loop:!1;i.addMarker({name:a,start:o.start,duration:o.end-o.start,config:r})}return i},play:function play(e,t){var i=this.add(e);i.once(o.COMPLETE,i.destroy,i);if(t){if(t.name){i.addMarker(t);return i.play(t.name)}else{return i.play(t)}}else{return i.play()}},playAudioSprite:function playAudioSprite(e,t,i){var a=this.addAudioSprite(e);a.once(o.COMPLETE,a.destroy,a);return a.play(t,i)},remove:function remove(e){var t=this.sounds.indexOf(e);if(-1!==t){e.destroy();this.sounds.splice(t,1);return!0}return!1},removeByKey:function removeByKey(e){for(var t=0,a=this.sounds.length-1,n;0<=a;a--){n=this.sounds[a];if(n.key===e){n.destroy();this.sounds.splice(a,1);t++}}return t},pauseAll:function pauseAll(){this.forEachActiveSound(function(e){e.pause()});this.emit(o.PAUSE_ALL,this)},resumeAll:function resumeAll(){this.forEachActiveSound(function(e){e.resume()});this.emit(o.RESUME_ALL,this)},stopAll:function stopAll(){this.forEachActiveSound(function(e){e.stop()});this.emit(o.STOP_ALL,this)},unlock:l,onBlur:l,onFocus:l,update:function update(e,t){if(this.unlocked){this.unlocked=!1;this.locked=!1;this.emit(o.UNLOCKED,this)}for(var a=this.sounds.length-1;0<=a;a--){if(this.sounds[a].pendingRemove){this.sounds.splice(a,1)}}this.sounds.forEach(function(i){i.update(e,t)})},destroy:function destroy(){this.removeAllListeners();this.forEachActiveSound(function(e){e.destroy()});this.sounds.length=0;this.sounds=null;this.game=null},forEachActiveSound:function forEachActiveSound(e,t){var i=this;this.sounds.forEach(function(a,n){if(a&&!a.pendingRemove){e.call(t||i,a,n,i.sounds)}})},setRate:function setRate(e){this.rate=e;return this},rate:{get:function get(){return this._rate},set:function set(e){this._rate=e;this.forEachActiveSound(function(e){e.calculateRate()});this.emit(o.GLOBAL_RATE,this,e)}},setDetune:function setDetune(e){this.detune=e;return this},detune:{get:function get(){return this._detune},set:function set(e){this._detune=e;this.forEachActiveSound(function(e){e.calculateRate()});this.emit(o.GLOBAL_DETUNE,this,e)}}});e.exports=d},function(e,t,i){var a=i(0),n=i(9),r=i(59),o=i(17),s=i(1),l=new a({Extends:n,initialize:function(e,t,i){n.call(this);this.manager=e;this.key=t;this.isPlaying=!1;this.isPaused=!1;this.totalRate=1;this.duration=this.duration||0;this.totalDuration=this.totalDuration||0;this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0};this.currentConfig=this.config;this.config=o(this.config,i);this.markers={};this.currentMarker=null;this.pendingRemove=!1},addMarker:function addMarker(e){if(!e||!e.name||"string"!=typeof e.name){return!1}if(this.markers[e.name]){console.error("addMarker "+e.name+" already exists in Sound");return!1}e=o(!0,{name:"",start:0,duration:this.totalDuration-(e.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0}},e);this.markers[e.name]=e;return!0},updateMarker:function updateMarker(e){if(!e||!e.name||"string"!=typeof e.name){return!1}if(!this.markers[e.name]){console.warn("Audio Marker: "+e.name+" missing in Sound: "+this.key);return!1}this.markers[e.name]=o(!0,this.markers[e.name],e);return!0},removeMarker:function removeMarker(e){var t=this.markers[e];if(!t){return null}this.markers[e]=null;return t},play:function play(e,t){if(e===void 0){e=""}if("object"===_typeof(e)){t=e;e=""}if("string"!=typeof e){return!1}if(!e){this.currentMarker=null;this.currentConfig=this.config;this.duration=this.totalDuration}else{if(!this.markers[e]){console.warn("Marker: "+e+" missing in Sound: "+this.key);return!1}this.currentMarker=this.markers[e];this.currentConfig=this.currentMarker.config;this.duration=this.currentMarker.duration}this.resetConfig();this.currentConfig=o(this.currentConfig,t);this.isPlaying=!0;this.isPaused=!1;return!0},pause:function pause(){if(this.isPaused||!this.isPlaying){return!1}this.isPlaying=!1;this.isPaused=!0;return!0},resume:function resume(){if(!this.isPaused||this.isPlaying){return!1}this.isPlaying=!0;this.isPaused=!1;return!0},stop:function stop(){if(!this.isPaused&&!this.isPlaying){return!1}this.isPlaying=!1;this.isPaused=!1;this.resetConfig();return!0},applyConfig:function applyConfig(){this.mute=this.currentConfig.mute;this.volume=this.currentConfig.volume;this.rate=this.currentConfig.rate;this.detune=this.currentConfig.detune;this.loop=this.currentConfig.loop},resetConfig:function resetConfig(){this.currentConfig.seek=0;this.currentConfig.delay=0},update:s,calculateRate:function calculateRate(){var e=this.currentConfig.detune+this.manager.detune,t=Math.pow(1.0005777895065548,e);this.totalRate=this.currentConfig.rate*this.manager.rate*t},destroy:function destroy(){if(this.pendingRemove){return}this.emit(r.DESTROY,this);this.pendingRemove=!0;this.manager=null;this.key="";this.removeAllListeners();this.isPlaying=!1;this.isPaused=!1;this.config=null;this.currentConfig=null;this.markers=null;this.currentMarker=null}});e.exports=l},function(e,t,i){var a=i(181),n=i(0),r=i(1),o=i(128),s=new n({initialize:function(e){this.parent=e;this.list=[];this.position=0;this.addCallback=r;this.removeCallback=r;this._sortKey=""},add:function add(e,t){if(t){return a.Add(this.list,e)}else{return a.Add(this.list,e,0,this.addCallback,this)}},addAt:function addAt(e,t,i){if(i){return a.AddAt(this.list,e,t)}else{return a.AddAt(this.list,e,t,0,this.addCallback,this)}},getAt:function getAt(e){return this.list[e]},getIndex:function getIndex(e){return this.list.indexOf(e)},sort:function sort(e,t){if(!e){return this}if(t===void 0){t=function(t,i){return t[e]-i[e]}}o.inplace(this.list,t);return this},getByName:function getByName(e){return a.GetFirst(this.list,"name",e)},getRandom:function getRandom(e,t){return a.GetRandom(this.list,e,t)},getFirst:function getFirst(e,t,i,n){return a.GetFirst(this.list,e,t,i,n)},getAll:function getAll(e,t,i,n){return a.GetAll(this.list,e,t,i,n)},count:function count(e,t){return a.CountAllMatching(this.list,e,t)},swap:function swap(e,t){a.Swap(this.list,e,t)},moveTo:function moveTo(e,t){return a.MoveTo(this.list,e,t)},remove:function remove(e,t){if(t){return a.Remove(this.list,e)}else{return a.Remove(this.list,e,this.removeCallback,this)}},removeAt:function removeAt(e,t){if(t){return a.RemoveAt(this.list,e)}else{return a.RemoveAt(this.list,e,this.removeCallback,this)}},removeBetween:function removeBetween(e,t,i){if(i){return a.RemoveBetween(this.list,e,t)}else{return a.RemoveBetween(this.list,e,t,this.removeCallback,this)}},removeAll:function removeAll(e){var t=this.list.length;while(t--){this.remove(this.list[t],e)}return this},bringToTop:function bringToTop(e){return a.BringToTop(this.list,e)},sendToBack:function sendToBack(e){return a.SendToBack(this.list,e)},moveUp:function moveUp(e){a.MoveUp(this.list,e);return e},moveDown:function moveDown(e){a.MoveDown(this.list,e);return e},reverse:function reverse(){this.list.reverse();return this},shuffle:function shuffle(){a.Shuffle(this.list);return this},replace:function replace(e,t){return a.Replace(this.list,e,t)},exists:function exists(e){return-1<this.list.indexOf(e)},setAll:function setAll(e,t,i,n){a.SetAll(this.list,e,t,i,n);return this},each:function each(e,t){for(var a=[null],n=2;n<arguments.length;n++){a.push(arguments[n])}for(n=0;n<this.list.length;n++){a[0]=this.list[n];e.apply(t,a)}},shutdown:function shutdown(){this.removeAll();this.list=[]},destroy:function destroy(){this.removeAll();this.parent=null;this.addCallback=null;this.removeCallback=null},length:{get:function get(){return this.list.length}},first:{get:function get(){this.position=0;if(0<this.list.length){return this.list[0]}else{return null}}},last:{get:function get(){if(0<this.list.length){this.position=this.list.length-1;return this.list[this.position]}else{return null}}},next:{get:function get(){if(this.position<this.list.length){this.position++;return this.list[this.position]}else{return null}}},previous:{get:function get(){if(0<this.position){this.position--;return this.list[this.position]}else{return null}}}});e.exports=s},function(e,t,i){var a=i(182),n=i(382);e.exports=function RotateMatrix(e,t){if(t===void 0){t=90}if(!a(e)){return null}if("string"!=typeof t){t=(t%360+360)%360}if(90===t||-270===t||"rotateLeft"===t){e=n(e);e.reverse()}else if(-90===t||270===t||"rotateRight"===t){e.reverse();e=n(e)}else if(180===Math.abs(t)||"rotate180"===t){for(var r=0;r<e.length;r++){e[r].reverse()}e.reverse()}return e}},function(e){(function(){var i=function(e,i){return t(e.slice(),i)};i.inplace=function(e,i){var n=t(e,i);if(n!==e){a(n,null,e.length,e)}return e};function t(e,t){if("function"!=typeof t){t=function(e,t){return(e+"").localeCompare(t)}}var i=e.length;if(1>=i){return e}for(var n=Array(i),r=1;r<i;r*=2){a(e,t,r,n);var o=e;e=n;n=o}return e}var a=function(t,a,n,o){var s=t.length,d=0,p,c,u,g,h;for(p=0;p<s;p+=2*n){c=p+n;u=c+n;if(c>s)c=s;if(u>s)u=s;g=p;h=c;while(!0){if(g<c&&h<u){if(0>=a(t[g],t[h])){o[d++]=t[g++]}else{o[d++]=t[h++]}}else if(g<c){o[d++]=t[g++]}else if(h<u){o[d++]=t[h++]}else{break}}}};e.exports=i})()},function(e,t,i){var a=i(0),n=i(12),r=i(14),o=i(938),s=i(939),l=i(185),d=i(940),p=new a({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Texture,n.Tint,n.Transform,n.Visible,d],initialize:function(e,t,i,a,n,s,l){if(n===void 0){n=""}if(l===void 0){l=0}r.call(this,e,"BitmapText");this.font=a;var d=this.scene.sys.cache.bitmapFont.get(a);this.fontData=d.data;this._text="";this._fontSize=s||this.fontData.size;this._letterSpacing=0;this._align=l;this._bounds=o();this._dirty=!0;this._maxWidth=0;this.wordWrapCharCode=32;this.setTexture(d.texture,d.frame);this.setPosition(t,i);this.setOrigin(0,0);this.initPipeline();this.setText(n)},setLeftAlign:function setLeftAlign(){this._align=p.ALIGN_LEFT;this._dirty=!0;return this},setCenterAlign:function setCenterAlign(){this._align=p.ALIGN_CENTER;this._dirty=!0;return this},setRightAlign:function setRightAlign(){this._align=p.ALIGN_RIGHT;this._dirty=!0;return this},setFontSize:function setFontSize(e){this._fontSize=e;this._dirty=!0;return this},setLetterSpacing:function setLetterSpacing(e){if(e===void 0){e=0}this._letterSpacing=e;this._dirty=!0;return this},setText:function setText(e){if(!e&&0!==e){e=""}if(Array.isArray(e)){e=e.join("\n")}if(e!==this.text){this._text=e.toString();this._dirty=!0;this.updateDisplayOrigin()}return this},getTextBounds:function getTextBounds(e){var t=this._bounds;if(this._dirty||this.scaleX!==t.scaleX||this.scaleY!==t.scaleY){o(this,e,t);this._dirty=!1;this.updateDisplayOrigin()}return t},setFont:function setFont(e,t,i){if(t===void 0){t=this._fontSize}if(i===void 0){i=this._align}if(e!==this.font){var a=this.scene.sys.cache.bitmapFont.get(e);if(a){this.font=e;this.fontData=a.data;this._fontSize=t;this._align=i;this.setTexture(a.texture,a.frame);o(this,!1,this._bounds)}}return this},setMaxWidth:function setMaxWidth(e,t){this._maxWidth=e;this._dirty=!0;if(t!==void 0){this.wordWrapCharCode=t}return this},align:{set:function set(e){this._align=e;this._dirty=!0},get:function get(){return this._align}},text:{set:function set(e){this.setText(e)},get:function get(){return this._text}},fontSize:{set:function set(e){this._fontSize=e;this._dirty=!0},get:function get(){return this._fontSize}},letterSpacing:{set:function set(e){this._letterSpacing=e;this._dirty=!0},get:function get(){return this._letterSpacing}},maxWidth:{set:function set(e){this._maxWidth=e;this._dirty=!0},get:function get(){return this._maxWidth}},width:{get:function get(){this.getTextBounds(!1);return this._bounds.global.width}},height:{get:function get(){this.getTextBounds(!1);return this._bounds.global.height}},toJSON:function toJSON(){var e=n.ToJSON(this),t={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};e.data=t;return e}});p.ALIGN_LEFT=0;p.ALIGN_CENTER=1;p.ALIGN_RIGHT=2;p.ParseFromAtlas=s;p.ParseXMLBitmapFont=l;e.exports=p},function(e,t,i){var a=i(0),n=i(12),r=i(14),o=i(1065),s=i(1),l=new a({Extends:r,Mixins:[n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,o],initialize:function(e,t,a,n,o,s,l,d,p){r.call(this,e,"Mesh");if(n.length!==o.length){throw new Error("Mesh Vertex count must match UV count")}var c=0|n.length/2;if(0<s.length&&s.length<c){throw new Error("Mesh Color count must match Vertex count")}if(0<l.length&&l.length<c){throw new Error("Mesh Alpha count must match Vertex count")}var u;if(0===s.length){for(u=0;u<c;++u){s[u]=16777215}}if(0===l.length){for(u=0;u<c;++u){l[u]=1}}this.vertices=new Float32Array(n);this.uv=new Float32Array(o);this.colors=new Uint32Array(s);this.alphas=new Float32Array(l);this.tintFill=!1;this.setTexture(d,p);this.setPosition(t,a);this.setSizeToFrame();this.initPipeline()},setAlpha:s});e.exports=l},function(e){e.exports=function RectangleToRectangle(e,t){if(0>=e.width||0>=e.height||0>=t.width||0>=t.height){return!1}return!(e.right<t.x||e.bottom<t.y||e.x>t.right||e.y>t.bottom)}},function(e,t,i){var a=i(6),n={},r={};r.register=function(e,t,i,a,r){n[e]={plugin:t,mapping:i,settingsKey:a,configKey:r}};r.getPlugin=function(e){return n[e]};r.install=function(e){var t=e.scene.sys,i=t.settings.input,r=t.game.config;for(var o in n){var s=n[o].plugin,l=n[o].mapping,d=n[o].settingsKey,p=n[o].configKey;if(a(i,d,r[p])){e[l]=new s(e)}}};r.remove=function(e){if(n.hasOwnProperty(e)){delete n[e]}};e.exports=r},function(e,t,i){e.exports={ANY_KEY_DOWN:i(1203),ANY_KEY_UP:i(1204),COMBO_MATCH:i(1205),DOWN:i(1206),KEY_DOWN:i(1207),KEY_UP:i(1208),UP:i(1209)}},function(e){e.exports=function GetURL(e,t){if(!e.url){return!1}if(e.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)){return e.url}else{return t+e.url}}},function(e){e.exports=function XHRSettings(e,t,i,a,n){if(e===void 0){e=""}if(t===void 0){t=!0}if(i===void 0){i=""}if(a===void 0){a=""}if(n===void 0){n=0}return{responseType:e,async:t,user:i,password:a,timeout:n,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0}}},function(e,t,i){var a=i(0),n=i(214),r=i(69),o=new a({Extends:r,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Size,n.Velocity],initialize:function(e,t,i,a,n){r.call(this,e,t,i,a,n);this.body=null}});e.exports=o},function(e,t,i){e.exports={CalculateFacesAt:i(217),CalculateFacesWithin:i(51),Copy:i(1301),CreateFromTiles:i(1302),CullTiles:i(1303),Fill:i(1304),FilterTiles:i(1305),FindByIndex:i(1306),FindTile:i(1307),ForEachTile:i(1308),GetTileAt:i(138),GetTileAtWorldXY:i(1309),GetTilesWithin:i(24),GetTilesWithinShape:i(1310),GetTilesWithinWorldXY:i(1311),HasTileAt:i(470),HasTileAtWorldXY:i(1312),IsInLayerBounds:i(103),PutTileAt:i(218),PutTileAtWorldXY:i(1313),PutTilesAt:i(1314),Randomize:i(1315),RemoveTileAt:i(471),RemoveTileAtWorldXY:i(1316),RenderDebug:i(1317),ReplaceByIndex:i(469),SetCollision:i(1318),SetCollisionBetween:i(1319),SetCollisionByExclusion:i(1320),SetCollisionByProperty:i(1321),SetCollisionFromCollisionGroup:i(1322),SetTileIndexCallback:i(1323),SetTileLocationCallback:i(1324),Shuffle:i(1325),SwapByIndex:i(1326),TileToWorldX:i(139),TileToWorldXY:i(1327),TileToWorldY:i(140),WeightedRandomize:i(1328),WorldToTileX:i(63),WorldToTileXY:i(1329),WorldToTileY:i(64)}},function(e,t,i){var a=i(103);e.exports=function GetTileAt(e,t,i,n){if(i===void 0){i=!1}if(a(e,t,n)){var r=n.data[t][e]||null;if(null===r){return null}else if(-1===r.index){return i?r:null}else{return r}}else{return null}}},function(e){e.exports=function TileToWorldX(e,t,i){var a=i.baseTileWidth,n=i.tilemapLayer,r=0;if(n){if(t===void 0){t=n.scene.cameras.main}r=n.x+t.scrollX*(1-n.scrollFactorX);a*=n.scaleX}return r+e*a}},function(e){e.exports=function TileToWorldY(e,t,i){var a=i.baseTileHeight,n=i.tilemapLayer,r=0;if(n){if(t===void 0){t=n.scene.cameras.main}r=n.y+t.scrollY*(1-n.scrollFactorY);a*=n.scaleY}return r+e*a}},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t,i,a,n,r,o,s){if(i===void 0||0>=i){i=32}if(a===void 0||0>=a){a=32}if(n===void 0){n=0}if(r===void 0){r=0}if(o===void 0){o={}}if(s===void 0){s={}}this.name=e;this.firstgid=t;this.tileWidth=i;this.tileHeight=a;this.tileMargin=n;this.tileSpacing=r;this.tileProperties=o;this.tileData=s;this.image=null;this.glTexture=null;this.rows=0;this.columns=0;this.total=0;this.texCoordinates=[]},getTileProperties:function getTileProperties(e){if(!this.containsTileIndex(e)){return null}return this.tileProperties[e-this.firstgid]},getTileData:function getTileData(e){if(!this.containsTileIndex(e)){return null}return this.tileData[e-this.firstgid]},getTileCollisionGroup:function getTileCollisionGroup(e){var t=this.getTileData(e);return t&&t.objectgroup?t.objectgroup:null},containsTileIndex:function containsTileIndex(e){return e>=this.firstgid&&e<this.firstgid+this.total},getTileTextureCoordinates:function getTileTextureCoordinates(e){if(!this.containsTileIndex(e)){return null}return this.texCoordinates[e-this.firstgid]},setImage:function setImage(e){this.image=e;this.glTexture=e.get().source.glTexture;this.updateTileData(this.image.source[0].width,this.image.source[0].height);return this},setTileSize:function setTileSize(e,t){if(e!==void 0){this.tileWidth=e}if(t!==void 0){this.tileHeight=t}if(this.image){this.updateTileData(this.image.source[0].width,this.image.source[0].height)}return this},setSpacing:function setSpacing(e,t){if(e!==void 0){this.tileMargin=e}if(t!==void 0){this.tileSpacing=t}if(this.image){this.updateTileData(this.image.source[0].width,this.image.source[0].height)}return this},updateTileData:function updateTileData(e,t){var i=(t-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),a=(e-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);if(0!=i%1||0!=a%1){console.warn("Image tile area not tile size multiple in: "+this.name)}i=Math.floor(i);a=Math.floor(a);this.rows=i;this.columns=a;this.total=i*a;this.texCoordinates.length=0;for(var n=this.tileMargin,r=this.tileMargin,o=0;o<this.rows;o++){for(var s=0;s<this.columns;s++){this.texCoordinates.push({x:n,y:r});n+=this.tileWidth+this.tileSpacing}n=this.tileMargin;r+=this.tileHeight+this.tileSpacing}return this}});e.exports=n},function(e){var t=function(e,i,a){var n;if(e.hasOwnProperty(i)){var r=_typeof(e[i]);if("function"===r){n=function(t,a,n,r,o,s){return e[i](t,a,n,r,o,s)}}else{n=function(){return e[i]}}}else if("function"==typeof a){n=a}else{n=function(){return a}}return n};e.exports=t},function(e,t,i){var a=i(227),n=i(15),r=i(88),o=i(82),s=i(142),l=i(492),d=i(225),c=i(6),u=i(226),g=i(228),h=i(230);e.exports=function TweenBuilder(e,m,y){if(y===void 0){y=a}for(var x=y.targets?y.targets:d(m),f=l(m),T=s(m,"delay",y.delay),v=s(m,"duration",y.duration),b=c(m,"easeParams",y.easeParams),E=o(c(m,"ease",y.ease),b),S=s(m,"hold",y.hold),_=s(m,"repeat",y.repeat),A=s(m,"repeatDelay",y.repeatDelay),C=r(m,"yoyo",y.yoyo),w=r(m,"flipX",y.flipX),P=r(m,"flipY",y.flipY),O=[],R=0;R<f.length;R++){for(var L=f[R].key,k=f[R].value,D=0;D<x.length;D++){var F=u(L,k),I=h(x[D],D,L,F.getEnd,F.getStart,F.getActive,o(c(k,"ease",E),b),s(k,"delay",T),s(k,"duration",v),r(k,"yoyo",C),s(k,"hold",S),s(k,"repeat",_),s(k,"repeatDelay",A),r(k,"flipX",w),r(k,"flipY",P));O.push(I)}}var M=new g(e,O,x);M.offset=n(m,"offset",null);M.completeDelay=n(m,"completeDelay",0);M.loop=Math.round(n(m,"loop",0));M.loopDelay=Math.round(n(m,"loopDelay",0));M.paused=r(m,"paused",!1);M.useFrames=r(m,"useFrames",!1);for(var B=c(m,"callbackScope",M),Y=[M,null],N=g.TYPES,X=0;X<N.length;X++){var z=N[X],U=c(m,z,!1);if(U){var G=c(m,z+"Scope",B),W=c(m,z+"Params",[]);M.setCallback(z,U,Y.concat(W),G)}}return M}},function(e){e.exports=function Equal(e,t,i){if(i===void 0){i=1e-4}return Math.abs(e-t)<i}},function(e,t,i){var a={};e.exports=a;var n=i(237),r=i(37),o=i(102),s=i(62);(function(){a.create=function(e){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)};a.setModified=function(e,t,r,o){n.trigger(e,"compositeModified",e);e.isModified=t;if(r&&e.parent){a.setModified(e.parent,t,r,o)}if(o){for(var s=0,l;s<e.composites.length;s++){l=e.composites[s];a.setModified(l,t,r,o)}}};a.add=function(e,t){var o=[].concat(t);n.trigger(e,"beforeAdd",{object:t});for(var s=0,l;s<o.length;s++){l=o[s];switch(l.type){case"body":if(l.parent!==l){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}a.addBody(e,l);break;case"constraint":a.addConstraint(e,l);break;case"composite":a.addComposite(e,l);break;case"mouseConstraint":a.addConstraint(e,l.constraint);break;}}n.trigger(e,"afterAdd",{object:t});return e};a.remove=function(e,t,r){var o=[].concat(t);n.trigger(e,"beforeRemove",{object:t});for(var s=0,l;s<o.length;s++){l=o[s];switch(l.type){case"body":a.removeBody(e,l,r);break;case"constraint":a.removeConstraint(e,l,r);break;case"composite":a.removeComposite(e,l,r);break;case"mouseConstraint":a.removeConstraint(e,l.constraint);break;}}n.trigger(e,"afterRemove",{object:t});return e};a.addComposite=function(e,t){e.composites.push(t);t.parent=e;a.setModified(e,!0,!0,!1);return e};a.removeComposite=function(e,t,n){var r=e.composites.indexOf(t);if(-1!==r){a.removeCompositeAt(e,r);a.setModified(e,!0,!0,!1)}if(n){for(var o=0;o<e.composites.length;o++){a.removeComposite(e.composites[o],t,!0)}}return e};a.removeCompositeAt=function(e,t){e.composites.splice(t,1);a.setModified(e,!0,!0,!1);return e};a.addBody=function(e,t){e.bodies.push(t);a.setModified(e,!0,!0,!1);return e};a.removeBody=function(e,t,n){var r=e.bodies.indexOf(t);if(-1!==r){a.removeBodyAt(e,r);a.setModified(e,!0,!0,!1)}if(n){for(var o=0;o<e.composites.length;o++){a.removeBody(e.composites[o],t,!0)}}return e};a.removeBodyAt=function(e,t){e.bodies.splice(t,1);a.setModified(e,!0,!0,!1);return e};a.addConstraint=function(e,t){e.constraints.push(t);a.setModified(e,!0,!0,!1);return e};a.removeConstraint=function(e,t,n){var r=e.constraints.indexOf(t);if(-1!==r){a.removeConstraintAt(e,r)}if(n){for(var o=0;o<e.composites.length;o++){a.removeConstraint(e.composites[o],t,!0)}}return e};a.removeConstraintAt=function(e,t){e.constraints.splice(t,1);a.setModified(e,!0,!0,!1);return e};a.clear=function(e,t,n){if(n){for(var r=0;r<e.composites.length;r++){a.clear(e.composites[r],t,!0)}}if(t){e.bodies=e.bodies.filter(function(e){return e.isStatic})}else{e.bodies.length=0}e.constraints.length=0;e.composites.length=0;a.setModified(e,!0,!0,!1);return e};a.allBodies=function(e){for(var t=[].concat(e.bodies),n=0;n<e.composites.length;n++){t=t.concat(a.allBodies(e.composites[n]))}return t};a.allConstraints=function(e){for(var t=[].concat(e.constraints),n=0;n<e.composites.length;n++){t=t.concat(a.allConstraints(e.composites[n]))}return t};a.allComposites=function(e){for(var t=[].concat(e.composites),n=0;n<e.composites.length;n++){t=t.concat(a.allComposites(e.composites[n]))}return t};a.get=function(e,t,i){var n,r;switch(i){case"body":n=a.allBodies(e);break;case"constraint":n=a.allConstraints(e);break;case"composite":n=a.allComposites(e).concat(e);break;}if(!n)return null;r=n.filter(function(e){return e.id.toString()===t.toString()});return 0===r.length?null:r[0]};a.move=function(e,t,i){a.remove(e,t);a.add(i,t);return e};a.rebase=function(e){for(var t=a.allBodies(e).concat(a.allConstraints(e)).concat(a.allComposites(e)),n=0;n<t.length;n++){t[n].id=r.nextId()}a.setModified(e,!0,!0,!1);return e};a.translate=function(e,t,n){for(var r=n?a.allBodies(e):e.bodies,o=0;o<r.length;o++){s.translate(r[o],t)}a.setModified(e,!0,!0,!1);return e};a.rotate=function(e,t,n,r){for(var o=Math.cos(t),l=Math.sin(t),d=r?a.allBodies(e):e.bodies,p=0;p<d.length;p++){var c=d[p],u=c.position.x-n.x,g=c.position.y-n.y;s.setPosition(c,{x:n.x+(u*o-g*l),y:n.y+(u*l+g*o)});s.rotate(c,t)}a.setModified(e,!0,!0,!1);return e};a.scale=function(e,t,n,r,o){for(var l=o?a.allBodies(e):e.bodies,d=0;d<l.length;d++){var p=l[d],c=p.position.x-r.x,u=p.position.y-r.y;s.setPosition(p,{x:r.x+c*t,y:r.y+u*n});s.scale(p,t,n)}a.setModified(e,!0,!0,!1);return e};a.bounds=function(e){for(var t=a.allBodies(e),n=[],r=0,s;r<t.length;r+=1){s=t[r];n.push(s.bounds.min,s.bounds.max)}return o.create(n)}})()},function(e,t,i){var a=i(4);e.exports=function CircumferencePoint(e,t,i){if(i===void 0){i=new a}i.x=e.x+e.radius*Math.cos(t);i.y=e.y+e.radius*Math.sin(t);return i}},function(e,t,i){var a=i(4);e.exports=function Random(e,i){if(i===void 0){i=new a}var n=2*Math.PI*Math.random(),t=Math.random()+Math.random(),o=1<t?2-t:t,r=o*Math.cos(n),s=o*Math.sin(n);i.x=e.x+r*e.radius;i.y=e.y+s*e.radius;return i}},function(e,t,i){var a=i(22),n=i(0),r=i(9),o=i(111),s=i(267),l=i(268),d=i(6),p=new n({Extends:r,initialize:function(e,t,i){r.call(this);this.manager=e;this.key=t;this.type="frame";this.frames=this.getFrames(e.textureManager,d(i,"frames",[]),d(i,"defaultTextureKey",null));this.frameRate=d(i,"frameRate",null);this.duration=d(i,"duration",null);if(null===this.duration&&null===this.frameRate){this.frameRate=24;this.duration=1e3*(this.frameRate/this.frames.length)}else if(this.duration&&null===this.frameRate){this.frameRate=this.frames.length/(this.duration/1e3)}else{this.duration=1e3*(this.frames.length/this.frameRate)}this.msPerFrame=1e3/this.frameRate;this.skipMissedFrames=d(i,"skipMissedFrames",!0);this.delay=d(i,"delay",0);this.repeat=d(i,"repeat",0);this.repeatDelay=d(i,"repeatDelay",0);this.yoyo=d(i,"yoyo",!1);this.showOnStart=d(i,"showOnStart",!1);this.hideOnComplete=d(i,"hideOnComplete",!1);this.paused=!1;this.manager.on(o.PAUSE_ALL,this.pause,this);this.manager.on(o.RESUME_ALL,this.resume,this)},addFrame:function addFrame(e){return this.addFrameAt(this.frames.length,e)},addFrameAt:function addFrameAt(e,t){var i=this.getFrames(this.manager.textureManager,t);if(0<i.length){if(0===e){this.frames=i.concat(this.frames)}else if(e===this.frames.length){this.frames=this.frames.concat(i)}else{var a=this.frames.slice(0,e),n=this.frames.slice(e);this.frames=a.concat(i,n)}this.updateFrameSequence()}return this},checkFrame:function checkFrame(e){return 0<=e&&e<this.frames.length},completeAnimation:function completeAnimation(e){if(this.hideOnComplete){e.parent.visible=!1}e.stop()},getFirstTick:function getFirstTick(e,t){if(t===void 0){t=!0}e.accumulator=0;e.nextTick=e.msPerFrame+e.currentFrame.duration;if(t){e.nextTick+=e._delay}},getFrameAt:function getFrameAt(e){return this.frames[e]},getFrames:function getFrames(e,t,a){var n=[],r,o,s=1,p,c;if("string"==typeof t){c=t;var u=e.get(c),g=u.getFrameNames();t=[];g.forEach(function(e,i){t.push({key:c,frame:i})})}if(!Array.isArray(t)||0===t.length){return n}for(p=0;p<t.length;p++){var h=t[p],m=d(h,"key",a);if(!m){continue}var y=d(h,"frame",0),x=e.getFrame(m,y);o=new l(m,y,s,x);o.duration=d(h,"duration",0);o.isFirst=!r;if(r){r.nextFrame=o;o.prevFrame=r}n.push(o);r=o;s++}if(0<n.length){o.isLast=!0;o.nextFrame=n[0];n[0].prevFrame=o;var f=1/(n.length-1);for(p=0;p<n.length;p++){n[p].progress=p*f}}return n},getNextTick:function getNextTick(e){e.accumulator-=e.nextTick;e.nextTick=e.msPerFrame+e.currentFrame.duration},load:function load(e,t){if(t>=this.frames.length){t=0}if(e.currentAnim!==this){e.currentAnim=this;e.frameRate=this.frameRate;e.duration=this.duration;e.msPerFrame=this.msPerFrame;e.skipMissedFrames=this.skipMissedFrames;e._delay=this.delay;e._repeat=this.repeat;e._repeatDelay=this.repeatDelay;e._yoyo=this.yoyo}var i=this.frames[t];if(0===t&&!e.forward){i=this.getLastFrame()}e.updateFrame(i)},getFrameByProgress:function getFrameByProgress(e){e=a(e,0,1);return s(e,this.frames,"progress")},nextFrame:function nextFrame(e){var t=e.currentFrame;if(t.isLast){if(e._yoyo){this.handleYoyoFrame(e,!1)}else if(0<e.repeatCounter){if(e._reverse&&e.forward){e.forward=!1}else{this.repeatAnimation(e)}}else{this.completeAnimation(e)}}else{this.updateAndGetNextTick(e,t.nextFrame)}},handleYoyoFrame:function handleYoyoFrame(e,t){if(!t){t=!1}if(e._reverse===!t&&0<e.repeatCounter){e.forward=t;this.repeatAnimation(e);return}if(e._reverse!==t&&0===e.repeatCounter){this.completeAnimation(e);return}e.forward=t;var i=t?e.currentFrame.nextFrame:e.currentFrame.prevFrame;this.updateAndGetNextTick(e,i)},getLastFrame:function getLastFrame(){return this.frames[this.frames.length-1]},previousFrame:function previousFrame(e){var t=e.currentFrame;if(t.isFirst){if(e._yoyo){this.handleYoyoFrame(e,!0)}else if(0<e.repeatCounter){if(e._reverse&&!e.forward){e.currentFrame=this.getLastFrame();this.repeatAnimation(e)}else{e.forward=!0;this.repeatAnimation(e)}}else{this.completeAnimation(e)}}else{this.updateAndGetNextTick(e,t.prevFrame)}},updateAndGetNextTick:function updateAndGetNextTick(e,t){e.updateFrame(t);this.getNextTick(e)},removeFrame:function removeFrame(e){var t=this.frames.indexOf(e);if(-1!==t){this.removeFrameAt(t)}return this},removeFrameAt:function removeFrameAt(e){this.frames.splice(e,1);this.updateFrameSequence();return this},repeatAnimation:function repeatAnimation(e){if(2===e._pendingStop){return this.completeAnimation(e)}if(0<e._repeatDelay&&!1===e.pendingRepeat){e.pendingRepeat=!0;e.accumulator-=e.nextTick;e.nextTick+=e._repeatDelay}else{e.repeatCounter--;e.updateFrame(e.currentFrame[e.forward?"nextFrame":"prevFrame"]);if(e.isPlaying){this.getNextTick(e);e.pendingRepeat=!1;var t=e.currentFrame,i=e.parent;this.emit(o.ANIMATION_REPEAT,this,t);i.emit(o.SPRITE_ANIMATION_KEY_REPEAT+this.key,this,t,e.repeatCounter,i);i.emit(o.SPRITE_ANIMATION_REPEAT,this,t,e.repeatCounter,i)}}},setFrame:function setFrame(e){if(e.forward){this.nextFrame(e)}else{this.previousFrame(e)}},toJSON:function toJSON(){var e={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};this.frames.forEach(function(t){e.frames.push(t.toJSON())});return e},updateFrameSequence:function updateFrameSequence(){for(var e=this.frames.length,t,a=0;a<e;a++){t=this.frames[a];t.index=a+1;t.isFirst=!1;t.isLast=!1;t.progress=a*(1/(e-1));if(0==a){t.isFirst=!0;if(1===e){t.isLast=!0;t.nextFrame=t;t.prevFrame=t}else{t.isLast=!1;t.prevFrame=this.frames[e-1];t.nextFrame=this.frames[a+1]}}else if(a==e-1&&1<e){t.isLast=!0;t.prevFrame=this.frames[e-2];t.nextFrame=this.frames[0]}else if(1<e){t.prevFrame=this.frames[a-1];t.nextFrame=this.frames[a+1]}}return this},pause:function pause(){this.paused=!0;return this},resume:function resume(){this.paused=!1;return this},destroy:function destroy(){this.removeAllListeners();this.manager.off(o.PAUSE_ALL,this.pause,this);this.manager.off(o.RESUME_ALL,this.resume,this);this.manager.remove(this.key);for(var e=0;e<this.frames.length;e++){this.frames[e].destroy()}this.frames=[];this.manager=null}});e.exports=p},function(e,t,i){var a=i(112),n=i(4);e.exports=function GetPoint(e,t,i){if(i===void 0){i=new n}if(0>=t||1<=t){i.x=e.x;i.y=e.y;return i}var r=a(e)*t;if(.5<t){r-=e.width+e.height;if(r<=e.width){i.x=e.right-r;i.y=e.bottom}else{i.x=e.x;i.y=e.bottom-(r-e.width)}}else if(r<=e.width){i.x=e.x+r;i.y=e.y}else{i.x=e.right;i.y=e.y+(r-e.width)}return i}},function(e,t,i){var a=i(57),n=i(4);e.exports=function GetPoints(e,t,r,o){if(o===void 0){o=[]}if(!t){t=a(e)/r}for(var s=e.x1,l=e.y1,d=e.x2,p=e.y2,c=0;c<t;c++){var u=c/t;o.push(new n(s+(d-s)*u,l+(p-l)*u))}return o}},function(e,t,i){var a=i(4);e.exports=function Random(e,i){if(i===void 0){i=new a}var n=Math.random();i.x=e.x1+n*(e.x2-e.x1);i.y=e.y1+n*(e.y2-e.y1);return i}},function(e,t,i){var a=i(4);e.exports=function Random(e,t){if(t===void 0){t=new a}t.x=e.x+Math.random()*e.width;t.y=e.y+Math.random()*e.height;return t}},function(e){e.exports={defaultPipeline:null,pipeline:null,initPipeline:function initPipeline(e){if(e===void 0){e="TextureTintPipeline"}var t=this.scene.sys.game.renderer;if(t&&t.gl&&t.hasPipeline(e)){this.defaultPipeline=t.getPipeline(e);this.pipeline=this.defaultPipeline;return!0}return!1},setPipeline:function setPipeline(e){var t=this.scene.sys.game.renderer;if(t&&t.gl&&t.hasPipeline(e)){this.pipeline=t.getPipeline(e)}return this},resetPipeline:function resetPipeline(){this.pipeline=this.defaultPipeline;return null!==this.pipeline},getPipelineName:function getPipelineName(){return this.pipeline.name}}},function(e,t,i){var a=i(4);e.exports=function Random(e,t){if(t===void 0){t=new a}var i=2*(Math.random()*Math.PI),n=Math.sqrt(Math.random());t.x=e.x+n*Math.cos(i)*e.width/2;t.y=e.y+n*Math.sin(i)*e.height/2;return t}},function(e,t,i){var a=i(4);e.exports=function Random(e,t){if(t===void 0){t=new a}var i=e.x2-e.x1,n=e.y2-e.y1,o=e.x3-e.x1,l=e.y3-e.y1,d=Math.random(),p=Math.random();if(1<=d+p){d=1-d;p=1-p}t.x=e.x1+(i*d+o*p);t.y=e.y1+(n*d+l*p);return t}},function(e){e.exports=function RotateAroundDistance(e,i,a,n,r){var o=n+Math.atan2(e.y-a,e.x-i);e.x=i+r*Math.cos(o);e.y=a+r*Math.sin(o);return e}},function(e){e.exports=function SmootherStep(e,t,i){e=Math.max(0,Math.min(1,(e-t)/(i-t)));return e*e*e*(e*(6*e-15)+10)}},function(e){e.exports=function SmoothStep(e,t,i){if(e<=t){return 0}if(e>=i){return 1}e=(e-t)/(i-t);return e*e*(3-2*e)}},function(e,t,i){var a=i(0),n=new a({initialize:function(e){this.entries={};this.size=0;if(Array.isArray(e)){for(var t=0;t<e.length;t++){this.set(e[t][0],e[t][1])}}},set:function set(e,t){if(!this.has(e)){this.size++}this.entries[e]=t;return this},get:function get(e){if(this.has(e)){return this.entries[e]}},getArray:function getArray(){var e=[],t=this.entries;for(var i in t){e.push(t[i])}return e},has:function has(e){return this.entries.hasOwnProperty(e)},delete:function _delete(e){if(this.has(e)){delete this.entries[e];this.size--}return this},clear:function clear(){Object.keys(this.entries).forEach(function(e){delete this.entries[e]},this);this.size=0;return this},keys:function keys(){return Object.keys(this.entries)},values:function values(){var e=[],t=this.entries;for(var i in t){e.push(t[i])}return e},dump:function dump(){var e=this.entries;console.group("Map");for(var t in e){console.log(t,e[t])}console.groupEnd()},each:function each(e){var t=this.entries;for(var i in t){if(!1===e(i,t[i])){break}}return this},contains:function contains(e){var t=this.entries;for(var i in t){if(t[i]===e){return!0}}return!1},merge:function merge(e,t){if(t===void 0){t=!1}var i=this.entries,a=e.entries;for(var n in a){if(i.hasOwnProperty(n)&&t){i[n]=a[n]}else{this.set(n,a[n])}}return this}});e.exports=n},function(e){e.exports=function Pad(e,t,i,a){if(t===void 0){t=0}if(i===void 0){i=" "}if(a===void 0){a=3}e=e.toString();var n=0;if(t+1>=e.length){switch(a){case 1:e=Array(t+1-e.length).join(i)+e;break;case 3:var r=Math.ceil((n=t-e.length)/2),o=n-r;e=Array(o+1).join(i)+e+Array(r+1).join(i);break;default:e=e+Array(t+1-e.length).join(i);break;}}return e}},function(e,t,i){var a=i(291),n=i(294),r=i(296),o=i(297),s=function(e){var i=_typeof(e);switch(i){case"string":if("rgb"===e.substr(0,3).toLowerCase()){return o(e)}else{return a(e)}case"number":return n(e);case"object":return r(e);}};e.exports=s},function(e){e.exports=function GetColor(e,t,i){return e<<16|t<<8|i}},function(e,t,i){var a=i(162);e.exports=function HSVToRGB(e,n,o,l){if(n===void 0){n=1}if(o===void 0){o=1}var d=Math.floor(6*e),i=6*e-d,u=Math.floor(255*(o*(1-n))),p=Math.floor(255*(o*(1-i*n))),h=Math.floor(255*(o*(1-(1-i)*n)));o=Math.floor(o*=255);var t=o,m=o,y=o,x=d%6;if(0===x){m=h;y=u}else if(1===x){t=p;y=u}else if(2===x){t=u;y=h}else if(3===x){t=u;m=p}else if(4===x){t=h;m=u}else if(5===x){m=u;y=p}if(!l){return{r:t,g:m,b:y,color:a(t,m,y)}}else if(l.setTo){return l.setTo(t,m,y,l.alpha,!1)}else{l.r=t;l.g=m;l.b=y;l.color=a(t,m,y);return l}}},function(e){var t="";e.exports=function Smoothing(){var e=function(e){for(var t=["i","webkitI","msI","mozI","oI"],a=0,n;a<t.length;a++){n=t[a]+"mageSmoothingEnabled";if(n in e){return n}}return null},i=function(i){if(""===t){t=e(i)}if(t){i[t]=!0}return i},a=function(i){if(""===t){t=e(i)}if(t){i[t]=!1}return i},n=function(e){return null!==t?e[t]:null};return{disable:a,enable:i,getPrefix:e,isEnabled:n}}()},function(e){e.exports=function CenterOn(e,t,i){e.x=t-e.width/2;e.y=i-e.height/2;return e}},function(e,t,i){var a=i(299),n=i(300),r=i(301),o=i(302),s=i(303),l=i(304),d=i(305),p=i(306),c=i(307),u=i(308),g=i(309),h=i(310);e.exports={Power0:d,Power1:p.Out,Power2:o.Out,Power3:c.Out,Power4:u.Out,Linear:d,Quad:p.Out,Cubic:o.Out,Quart:c.Out,Quint:u.Out,Sine:g.Out,Expo:l.Out,Circ:r.Out,Elastic:s.Out,Back:a.Out,Bounce:n.Out,Stepped:h,"Quad.easeIn":p.In,"Cubic.easeIn":o.In,"Quart.easeIn":c.In,"Quint.easeIn":u.In,"Sine.easeIn":g.In,"Expo.easeIn":l.In,"Circ.easeIn":r.In,"Elastic.easeIn":s.In,"Back.easeIn":a.In,"Bounce.easeIn":n.In,"Quad.easeOut":p.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":c.Out,"Quint.easeOut":u.Out,"Sine.easeOut":g.Out,"Expo.easeOut":l.Out,"Circ.easeOut":r.Out,"Elastic.easeOut":s.Out,"Back.easeOut":a.Out,"Bounce.easeOut":n.Out,"Quad.easeInOut":p.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":c.InOut,"Quint.easeInOut":u.InOut,"Sine.easeInOut":g.InOut,"Expo.easeInOut":l.InOut,"Circ.easeInOut":r.InOut,"Elastic.easeInOut":s.InOut,"Back.easeInOut":a.InOut,"Bounce.easeInOut":n.InOut}},function(e,t,i){var r=i(116),o=i(117),s=i(26),l={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function a(){var e=new ArrayBuffer(4),t=new Uint8Array(e),i=new Uint32Array(e);t[0]=161;t[1]=178;t[2]=195;t[3]=212;if(3569595041===i[0]){return!0}if(2712847316===i[0]){return!1}else{return null}}function n(){l.canvas=!!window.CanvasRenderingContext2D;try{l.localStorage=!!localStorage.getItem}catch(e){l.localStorage=!1}l.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob;l.fileSystem=!!window.requestFileSystem;var e=!1;l.webGL=function testWebGL(){if(window.WebGLRenderingContext){try{var t=s.createWebGL(this),i=t.getContext("webgl")||t.getContext("experimental-webgl"),a=s.create2D(this),n=a.getContext("2d"),r=n.createImageData(1,1);e=r.data instanceof Uint8ClampedArray;s.remove(t);s.remove(a);return!!i}catch(t){return!1}}return!1}();l.worker=!!window.Worker;l.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL;l.getUserMedia=l.getUserMedia&&!!navigator.getUserMedia&&!!window.URL;if(o.firefox&&21>o.firefoxVersion){l.getUserMedia=!1}if(!r.iOS&&(o.ie||o.firefox||o.chrome)){l.canvasBitBltShift=!0}if(o.safari||o.mobileSafari){l.canvasBitBltShift=!1}navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate;if(navigator.vibrate){l.vibration=!0}if("undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array){l.littleEndian=a()}l.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==l.littleEndian&&e;return l}e.exports=n()},function(e,t,i){var a=i(13),n=i(17),r={Angle:i(725),Distance:i(733),Easing:i(739),Fuzzy:i(740),Interpolation:i(743),Pow2:i(748),Snap:i(750),RandomDataGenerator:i(752),Average:i(753),Bernstein:i(319),Between:i(170),CatmullRom:i(169),CeilTo:i(754),Clamp:i(22),DegToRad:i(35),Difference:i(755),Factorial:i(320),FloatBetween:i(326),FloorTo:i(756),FromPercent:i(87),GetSpeed:i(757),IsEven:i(758),IsEvenStrict:i(759),Linear:i(115),MaxAdd:i(760),MinSub:i(761),Percent:i(762),RadToDeg:i(171),RandomXY:i(763),RandomXYZ:i(764),RandomXYZW:i(765),Rotate:i(327),RotateAround:i(273),RotateAroundDistance:i(156),RoundAwayFromZero:i(328),RoundTo:i(766),SinCosTableGenerator:i(767),SmootherStep:i(157),SmoothStep:i(158),ToXY:i(768),TransformXY:i(329),Within:i(769),Wrap:i(58),Vector2:i(3),Vector3:i(172),Vector4:i(330),Matrix3:i(331),Matrix4:i(332),Quaternion:i(333),RotateVec3:i(770)};r=n(!1,r,a);e.exports=r},function(e){e.exports=function CatmullRom(e,t,i,a,n){var r=.5*(a-t),o=.5*(n-i),s=e*e;return(2*i-2*a+r+o)*(e*s)+(-3*i+3*a-2*r-o)*s+r*e+i}},function(e){e.exports=function Between(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},function(e,t,i){var a=i(13);e.exports=function RadToDeg(e){return e*a.RAD_TO_DEG}},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t,i){this.x=0;this.y=0;this.z=0;if("object"===_typeof(e)){this.x=e.x||0;this.y=e.y||0;this.z=e.z||0}else{this.x=e||0;this.y=t||0;this.z=i||0}},up:function up(){this.x=0;this.y=1;this.z=0;return this},clone:function clone(){return new n(this.x,this.y,this.z)},crossVectors:function crossVectors(e,t){var i=e.x,a=e.y,n=e.z,r=t.x,o=t.y,s=t.z;this.x=a*s-n*o;this.y=n*r-i*s;this.z=i*o-a*r;return this},equals:function equals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z},copy:function copy(e){this.x=e.x;this.y=e.y;this.z=e.z||0;return this},set:function set(e,t,i){if("object"===_typeof(e)){this.x=e.x||0;this.y=e.y||0;this.z=e.z||0}else{this.x=e||0;this.y=t||0;this.z=i||0}return this},add:function add(e){this.x+=e.x;this.y+=e.y;this.z+=e.z||0;return this},subtract:function subtract(e){this.x-=e.x;this.y-=e.y;this.z-=e.z||0;return this},multiply:function multiply(e){this.x*=e.x;this.y*=e.y;this.z*=e.z||1;return this},scale:function scale(e){if(isFinite(e)){this.x*=e;this.y*=e;this.z*=e}else{this.x=0;this.y=0;this.z=0}return this},divide:function divide(e){this.x/=e.x;this.y/=e.y;this.z/=e.z||1;return this},negate:function negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},distance:function distance(e){var t=e.x-this.x,i=e.y-this.y,a=e.z-this.z||0;return Math.sqrt(t*t+i*i+a*a)},distanceSq:function distanceSq(e){var t=e.x-this.x,i=e.y-this.y,a=e.z-this.z||0;return t*t+i*i+a*a},length:function length(){var e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)},lengthSq:function lengthSq(){var e=this.x,t=this.y,i=this.z;return e*e+t*t+i*i},normalize:function normalize(){var e=this.x,t=this.y,i=this.z,a=e*e+t*t+i*i;if(0<a){a=1/Math.sqrt(a);this.x=e*a;this.y=t*a;this.z=i*a}return this},dot:function dot(e){return this.x*e.x+this.y*e.y+this.z*e.z},cross:function cross(e){var t=this.x,i=this.y,a=this.z,n=e.x,r=e.y,o=e.z;this.x=i*o-a*r;this.y=a*n-t*o;this.z=t*r-i*n;return this},lerp:function lerp(e,i){if(i===void 0){i=0}var a=this.x,n=this.y,r=this.z;this.x=a+i*(e.x-a);this.y=n+i*(e.y-n);this.z=r+i*(e.z-r);return this},transformMat3:function transformMat3(e){var t=this.x,i=this.y,a=this.z,n=e.val;this.x=t*n[0]+i*n[3]+a*n[6];this.y=t*n[1]+i*n[4]+a*n[7];this.z=t*n[2]+i*n[5]+a*n[8];return this},transformMat4:function transformMat4(e){var t=this.x,i=this.y,a=this.z,n=e.val;this.x=n[0]*t+n[4]*i+n[8]*a+n[12];this.y=n[1]*t+n[5]*i+n[9]*a+n[13];this.z=n[2]*t+n[6]*i+n[10]*a+n[14];return this},transformCoordinates:function transformCoordinates(e){var t=this.x,i=this.y,a=this.z,n=e.val,r=t*n[0]+i*n[4]+a*n[8]+n[12],o=t*n[1]+i*n[5]+a*n[9]+n[13],s=t*n[2]+i*n[6]+a*n[10]+n[14],l=t*n[3]+i*n[7]+a*n[11]+n[15];this.x=r/l;this.y=o/l;this.z=s/l;return this},transformQuat:function transformQuat(e){var t=this.x,i=this.y,a=this.z,n=e.x,r=e.y,o=e.z,s=e.w,l=s*t+r*a-o*i,d=s*i+o*t-n*a,p=s*a+n*i-r*t,c=-n*t-r*i-o*a;this.x=l*s+c*-n+d*-o-p*-r;this.y=d*s+c*-r+p*-n-l*-o;this.z=p*s+c*-o+l*-r-d*-n;return this},project:function project(e){var t=this.x,i=this.y,a=this.z,n=e.val,r=n[0],o=n[1],s=n[2],l=n[3],d=n[4],p=n[5],c=n[6],u=n[7],g=n[8],h=n[9],m=n[10],y=n[11],x=n[12],f=n[13],T=n[14],v=n[15],b=1/(t*l+i*u+a*y+v);this.x=(t*r+i*d+a*g+x)*b;this.y=(t*o+i*p+a*h+f)*b;this.z=(t*s+i*c+a*m+T)*b;return this},unproject:function unproject(e,t){var i=e.x,a=e.y,n=e.z,r=e.w,o=this.x-i,s=r-this.y-1-a,l=this.z;this.x=2*o/n-1;this.y=2*s/r-1;this.z=2*l-1;return this.project(t)},reset:function reset(){this.x=0;this.y=0;this.z=0;return this}});n.ZERO=new n;n.RIGHT=new n(1,0,0);n.LEFT=new n(-1,0,0);n.UP=new n(0,-1,0);n.DOWN=new n(0,1,0);n.FORWARD=new n(0,0,1);n.BACK=new n(0,0,-1);n.ONE=new n(1,1,1);e.exports=n},function(e){e.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(e,t,i){var a=i(11),n=i(13);e.exports=function FromPoints(e,t){if(t===void 0){t=new a}if(0===e.length){return t}for(var r=Number.MAX_VALUE,o=Number.MAX_VALUE,s=n.MIN_SAFE_INTEGER,l=n.MIN_SAFE_INTEGER,d,c,u,g=0;g<e.length;g++){d=e[g];if(Array.isArray(d)){c=d[0];u=d[1]}else{c=d.x;u=d.y}r=Math.min(r,c);o=Math.min(o,u);s=Math.max(s,c);l=Math.max(l,u)}t.x=r;t.y=o;t.width=s-r;t.height=l-o;return t}},function(e,t,i){var a={CENTER:i(353),ORIENTATION:i(354),SCALE_MODE:i(355),ZOOM:i(356)};e.exports=a},function(e){e.exports=function RemoveFromDOM(e){if(e.parentNode){e.parentNode.removeChild(e)}}},function(e){e.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(e,t,i){var a=i(0),n=i(123),r=i(173),o=i(19),s=i(871),l=i(872),d=i(1),p=i(369),c=new a({initialize:function(e,t){this.scene=e;this.game;this.renderer;this.config=t;this.settings=p.create(t);this.canvas;this.context;this.anims;this.cache;this.plugins;this.registry;this.scale;this.sound;this.textures;this.add;this.cameras;this.displayList;this.events;this.make;this.scenePlugin;this.updateList;this.sceneUpdate=d},init:function init(e){this.settings.status=n.INIT;this.sceneUpdate=d;this.game=e;this.renderer=e.renderer;this.canvas=e.canvas;this.context=e.context;var t=e.plugins;this.plugins=t;t.addToScene(this,r.Global,[r.CoreScene,l(this),s(this)]);this.events.emit(o.BOOT,this);this.settings.isBooted=!0},install:function install(e){if(!Array.isArray(e)){e=[e]}this.plugins.installLocal(this,e)},step:function step(e,t){this.events.emit(o.PRE_UPDATE,e,t);this.events.emit(o.UPDATE,e,t);this.sceneUpdate.call(this.scene,e,t);this.events.emit(o.POST_UPDATE,e,t)},render:function render(e){var t=this.displayList;t.depthSort();this.cameras.render(e,t);this.events.emit(o.RENDER,e)},queueDepthSort:function queueDepthSort(){this.displayList.queueDepthSort()},depthSort:function depthSort(){this.displayList.depthSort()},pause:function pause(e){if(this.settings.active){this.settings.status=n.PAUSED;this.settings.active=!1;this.events.emit(o.PAUSE,this,e)}return this},resume:function resume(e){if(!this.settings.active){this.settings.status=n.RUNNING;this.settings.active=!0;this.events.emit(o.RESUME,this,e)}return this},sleep:function sleep(e){this.settings.status=n.SLEEPING;this.settings.active=!1;this.settings.visible=!1;this.events.emit(o.SLEEP,this,e);return this},wake:function wake(e){var t=this.settings;t.status=n.RUNNING;t.active=!0;t.visible=!0;this.events.emit(o.WAKE,this,e);if(t.isTransition){this.events.emit(o.TRANSITION_WAKE,t.transitionFrom,t.transitionDuration)}return this},getData:function getData(){return this.settings.data},isSleeping:function isSleeping(){return this.settings.status===n.SLEEPING},isActive:function isActive(){return this.settings.status===n.RUNNING},isPaused:function isPaused(){return this.settings.status===n.PAUSED},isTransitioning:function isTransitioning(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function isTransitionOut(){return null!==this.scenePlugin._target&&0<this.scenePlugin._duration},isTransitionIn:function isTransitionIn(){return this.settings.isTransition},isVisible:function isVisible(){return this.settings.visible},setVisible:function setVisible(e){this.settings.visible=e;return this},setActive:function setActive(e,t){if(e){return this.resume(t)}else{return this.pause(t)}},start:function start(e){if(e){this.settings.data=e}this.settings.status=n.START;this.settings.active=!0;this.settings.visible=!0;this.events.emit(o.START,this);this.events.emit(o.READY,this,e)},shutdown:function shutdown(e){this.events.off(o.TRANSITION_INIT);this.events.off(o.TRANSITION_START);this.events.off(o.TRANSITION_COMPLETE);this.events.off(o.TRANSITION_OUT);this.settings.status=n.SHUTDOWN;this.settings.active=!1;this.settings.visible=!1;this.events.emit(o.SHUTDOWN,this,e)},destroy:function destroy(){this.settings.status=n.DESTROYED;this.settings.active=!1;this.settings.visible=!1;this.events.emit(o.DESTROY,this);this.events.removeAllListeners();for(var e=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],t=0;t<e.length;t++){this[e[t]]=null}}});e.exports=c},function(e){e.exports=function UppercaseFirst(e){return e&&e[0].toUpperCase()+e.slice(1)}},function(e,t,i){var a=i(0),n=i(94),r=i(372),o="Texture.frame missing: ",s=new a({initialize:function(e,t,a,n,o){if(!Array.isArray(a)){a=[a]}this.manager=e;this.key=t;this.source=[];this.dataSource=[];this.frames={};this.customData={};this.firstFrame="__BASE";this.frameTotal=0;for(var s=0;s<a.length;s++){this.source.push(new r(this,a[s],n,o))}},add:function add(e,t,i,a,r,o){if(this.has(e)){return null}var s=new n(this,e,t,i,a,r,o);this.frames[e]=s;if("__BASE"===this.firstFrame){this.firstFrame=e}this.frameTotal++;return s},remove:function remove(e){if(this.has(e)){var t=this.get(e);t.destroy();delete this.frames[e];return!0}return!1},has:function has(e){return this.frames[e]},get:function get(e){if(!e){e=this.firstFrame}var t=this.frames[e];if(!t){console.warn(o+e);t=this.frames[this.firstFrame]}return t},getTextureSourceIndex:function getTextureSourceIndex(e){for(var t=0;t<this.source.length;t++){if(this.source[t]===e){return t}}return-1},getFramesFromTextureSource:function getFramesFromTextureSource(e,t){if(t===void 0){t=!1}var i=[];for(var a in this.frames){if("__BASE"==a&&!t){continue}var n=this.frames[a];if(n.sourceIndex===e){i.push(n)}}return i},getFrameNames:function getFrameNames(e){if(e===void 0){e=!1}var t=Object.keys(this.frames);if(!e){var i=t.indexOf("__BASE");if(-1!==i){t.splice(i,1)}}return t},getSourceImage:function getSourceImage(e){if(e===void 0||null===e||1===this.frameTotal){e="__BASE"}var t=this.frames[e];if(t){return t.source.image}else{console.warn(o+e);return this.frames.__BASE.source.image}},getDataSourceImage:function getDataSourceImage(e){if(e===void 0||null===e||1===this.frameTotal){e="__BASE"}var t=this.frames[e],i;if(!t){console.warn(o+e);i=this.frames.__BASE.sourceIndex}else{i=t.sourceIndex}return this.dataSource[i].image},setDataSource:function setDataSource(e){if(!Array.isArray(e)){e=[e]}for(var t=0,a;t<e.length;t++){a=this.source[t];this.dataSource.push(new r(this,e[t],a.width,a.height))}},setFilter:function setFilter(e){var t;for(t=0;t<this.source.length;t++){this.source[t].setFilter(e)}for(t=0;t<this.dataSource.length;t++){this.dataSource[t].setFilter(e)}},destroy:function destroy(){var e;for(e=0;e<this.source.length;e++){this.source[e].destroy()}for(e=0;e<this.dataSource.length;e++){this.dataSource[e].destroy()}for(var t in this.frames){var a=this.frames[t];a.destroy()}this.source=[];this.dataSource=[];this.frames={};this.manager.removeKey(this.key);this.manager=null}});e.exports=s},function(e,t,i){e.exports={Matrix:i(907),Add:i(914),AddAt:i(915),BringToTop:i(916),CountAllMatching:i(917),Each:i(918),EachInRange:i(919),FindClosestInSorted:i(267),GetAll:i(920),GetFirst:i(921),GetRandom:i(183),MoveDown:i(922),MoveTo:i(923),MoveUp:i(924),NumberArray:i(925),NumberArrayStep:i(926),QuickSelect:i(383),Range:i(384),Remove:i(121),RemoveAt:i(927),RemoveBetween:i(928),RemoveRandomElement:i(929),Replace:i(930),RotateLeft:i(283),RotateRight:i(284),SafeRange:i(68),SendToBack:i(931),SetAll:i(932),Shuffle:i(114),SpliceOne:i(79),StableSort:i(128),Swap:i(933)}},function(e){e.exports=function CheckMatrix(e){if(!Array.isArray(e)||2>e.length||!Array.isArray(e[0])){return!1}for(var t=e[0].length,a=1;a<e.length;a++){if(e[a].length!==t){return!1}}return!0}},function(e){e.exports=function GetRandom(e,t,i){if(t===void 0){t=0}if(i===void 0){i=e.length}var a=t+Math.floor(Math.random()*i);return e[a]===void 0?null:e[a]}},function(e,t,i){var a=i(0),n=i(9),r=i(935),o=new a({Extends:n,initialize:function(){n.call(this);this._pending=[];this._active=[];this._destroy=[];this._toProcess=0},add:function add(e){this._pending.push(e);this._toProcess++;return e},remove:function remove(e){this._destroy.push(e);this._toProcess++;return e},removeAll:function removeAll(){var e=this._active,t=this._destroy,a=e.length;while(a--){t.push(e[a]);this._toProcess++}return this},update:function update(){if(0===this._toProcess){return this._active}var e=this._destroy,t=this._active,a,n;for(a=0;a<e.length;a++){n=e[a];var o=t.indexOf(n);if(-1!==o){t.splice(o,1);this.emit(r.REMOVE,n)}}e.length=0;e=this._pending;for(a=0;a<e.length;a++){n=e[a];this._active.push(n);this.emit(r.ADD,n)}e.length=0;this._toProcess=0;return this._active},getActive:function getActive(){return this._active},length:{get:function get(){return this._active.length}},destroy:function destroy(){this._toProcess=0;this._pending=[];this._active=[];this._destroy=[]}});e.exports=o},function(e){function t(e,t){return parseInt(e.getAttribute(t),10)}e.exports=function ParseXMLBitmapFont(e,a,n,r){if(a===void 0){a=0}if(n===void 0){n=0}var o={},s=e.getElementsByTagName("info")[0],l=e.getElementsByTagName("common")[0];o.font=s.getAttribute("face");o.size=t(s,"size");o.lineHeight=t(l,"lineHeight")+n;o.chars={};var d=e.getElementsByTagName("char"),p=r!==void 0&&r.trimmed;if(p){var c=r.height,u=r.width}for(var g=0;g<d.length;g++){var h=d[g],m=t(h,"id"),y=t(h,"x"),x=t(h,"y"),f=t(h,"width"),T=t(h,"height");if(p){if(y<u){u=y}if(x<c){c=x}}o.chars[m]={x:y,y:x,width:f,height:T,centerX:Math.floor(f/2),centerY:Math.floor(T/2),xOffset:t(h,"xoffset"),yOffset:t(h,"yoffset"),xAdvance:t(h,"xadvance")+a,data:{},kerning:{}}}if(p&&0!==c&&0!==u){for(var v in o.chars){var b=o.chars[v];b.x-=r.x;b.y-=r.y}}var E=e.getElementsByTagName("kerning");for(g=0;g<E.length;g++){var S=E[g],_=t(S,"first"),A=t(S,"second"),C=t(S,"amount");o.chars[A].kerning[_]=C}return o}},function(e,t,i){var a=i(943),n=i(946),r=i(0),o=i(12),s=i(94),l=i(14),d=i(126),p=new r({Extends:l,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,a],initialize:function(e,t,i,a,n){l.call(this,e,"Blitter");this.setTexture(a,n);this.setPosition(t,i);this.initPipeline();this.children=new d;this.renderList=[];this.dirty=!1},create:function create(e,t,i,a,r){if(a===void 0){a=!0}if(r===void 0){r=this.children.length}if(i===void 0){i=this.frame}else if(!(i instanceof s)){i=this.texture.get(i)}var o=new n(this,e,t,i,a);this.children.addAt(o,r,!1);this.dirty=!0;return o},createFromCallback:function createFromCallback(e,t,a,n){for(var r=this.createMultiple(t,a,n),o=0,s;o<r.length;o++){s=r[o];e.call(this,s,o)}return r},createMultiple:function createMultiple(e,t,i){if(t===void 0){t=this.frame.name}if(i===void 0){i=!0}if(!Array.isArray(t)){t=[t]}var a=[],n=this;t.forEach(function(t){for(var r=0;r<e;r++){a.push(n.create(0,0,t,i))}});return a},childCanRender:function childCanRender(e){return e.visible&&0<e.alpha},getRenderList:function getRenderList(){if(this.dirty){this.renderList=this.children.list.filter(this.childCanRender,this);this.dirty=!1}return this.renderList},clear:function clear(){this.children.removeAll();this.dirty=!0},preDestroy:function preDestroy(){this.children.destroy();this.renderList=[]}});e.exports=p},function(e,t,i){var a=i(181),n=i(52),r=i(0),o=i(12),s=i(90),l=i(14),d=i(11),p=i(947),c=i(386),u=i(3),g=new r({Extends:l,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Transform,o.Visible,p],initialize:function(e,t,i,a){l.call(this,e,"Container");this.list=[];this.exclusive=!0;this.maxSize=-1;this.position=0;this.localTransform=new o.TransformMatrix;this.tempTransformMatrix=new o.TransformMatrix;this._displayList=e.sys.displayList;this._sortKey="";this._sysEvents=e.sys.events;this.scrollFactorX=1;this.scrollFactorY=1;this.setPosition(t,i);this.clearAlpha();this.setBlendMode(n.SKIP_CHECK);if(a){this.add(a)}},originX:{get:function get(){return .5}},originY:{get:function get(){return .5}},displayOriginX:{get:function get(){return .5*this.width}},displayOriginY:{get:function get(){return .5*this.height}},setExclusive:function setExclusive(e){if(e===void 0){e=!0}this.exclusive=e;return this},getBounds:function getBounds(e){if(e===void 0){e=new d}e.setTo(this.x,this.y,0,0);if(0<this.list.length){for(var t=this.list,a=new d,n=0,r;n<t.length;n++){r=t[n];if(r.getBounds){r.getBounds(a);c(a,e,e)}}}return e},addHandler:function addHandler(e){e.once(s.DESTROY,this.remove,this);if(this.exclusive){this._displayList.remove(e);if(e.parentContainer){e.parentContainer.remove(e)}e.parentContainer=this}},removeHandler:function removeHandler(e){e.off(s.DESTROY,this.remove);if(this.exclusive){e.parentContainer=null}},pointToContainer:function pointToContainer(e,t){if(t===void 0){t=new u}if(this.parentContainer){return this.parentContainer.pointToContainer(e,t)}var i=this.tempTransformMatrix;i.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY);i.invert();i.transformPoint(e.x,e.y,t);return t},getBoundsTransformMatrix:function getBoundsTransformMatrix(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function add(e){a.Add(this.list,e,this.maxSize,this.addHandler,this);return this},addAt:function addAt(e,t){a.AddAt(this.list,e,t,this.maxSize,this.addHandler,this);return this},getAt:function getAt(e){return this.list[e]},getIndex:function getIndex(e){return this.list.indexOf(e)},sort:function sort(e,t){if(!e){return this}if(t===void 0){t=function(t,i){return t[e]-i[e]}}a.StableSort.inplace(this.list,t);return this},getByName:function getByName(e){return a.GetFirst(this.list,"name",e)},getRandom:function getRandom(e,t){return a.GetRandom(this.list,e,t)},getFirst:function getFirst(e,t,i,n){return a.GetFirst(this.list,e,t,i,n)},getAll:function getAll(e,t,i,n){return a.GetAll(this.list,e,t,i,n)},count:function count(e,t,i,n){return a.CountAllMatching(this.list,e,t,i,n)},swap:function swap(e,t){a.Swap(this.list,e,t);return this},moveTo:function moveTo(e,t){a.MoveTo(this.list,e,t);return this},remove:function remove(e,t){var n=a.Remove(this.list,e,this.removeHandler,this);if(t&&n){if(!Array.isArray(n)){n=[n]}for(var r=0;r<n.length;r++){n[r].destroy()}}return this},removeAt:function removeAt(e,t){var i=a.RemoveAt(this.list,e,this.removeHandler,this);if(t&&i){i.destroy()}return this},removeBetween:function removeBetween(e,t,n){var r=a.RemoveBetween(this.list,e,t,this.removeHandler,this);if(n){for(var o=0;o<r.length;o++){r[o].destroy()}}return this},removeAll:function removeAll(e){var t=a.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(e){for(var n=0;n<t.length;n++){t[n].destroy()}}return this},bringToTop:function bringToTop(e){a.BringToTop(this.list,e);return this},sendToBack:function sendToBack(e){a.SendToBack(this.list,e);return this},moveUp:function moveUp(e){a.MoveUp(this.list,e);return this},moveDown:function moveDown(e){a.MoveDown(this.list,e);return this},reverse:function reverse(){this.list.reverse();return this},shuffle:function shuffle(){a.Shuffle(this.list);return this},replace:function replace(e,t,i){var n=a.Replace(this.list,e,t);if(n){this.addHandler(t);this.removeHandler(e);if(i){e.destroy()}}return this},exists:function exists(e){return-1<this.list.indexOf(e)},setAll:function setAll(e,t,i,n){a.SetAll(this.list,e,t,i,n);return this},each:function each(e,t){var a=[null],n,r=this.list.slice(),o=r.length;for(n=2;n<arguments.length;n++){a.push(arguments[n])}for(n=0;n<o;n++){a[0]=r[n];e.apply(t,a)}return this},iterate:function iterate(e,t){var a=[null],n;for(n=2;n<arguments.length;n++){a.push(arguments[n])}for(n=0;n<this.list.length;n++){a[0]=this.list[n];e.apply(t,a)}return this},setScrollFactor:function setScrollFactor(e,t,i){if(t===void 0){t=e}if(i===void 0){i=!1}this.scrollFactorX=e;this.scrollFactorY=t;if(i){a.SetAll(this.list,"scrollFactorX",e);a.SetAll(this.list,"scrollFactorY",t)}return this},length:{get:function get(){return this.list.length}},first:{get:function get(){this.position=0;if(0<this.list.length){return this.list[0]}else{return null}}},last:{get:function get(){if(0<this.list.length){this.position=this.list.length-1;return this.list[this.position]}else{return null}}},next:{get:function get(){if(this.position<this.list.length){this.position++;return this.list[this.position]}else{return null}}},previous:{get:function get(){if(0<this.position){this.position--;return this.list[this.position]}else{return null}}},preDestroy:function preDestroy(){this.removeAll(!!this.exclusive);this.localTransform.destroy();this.tempTransformMatrix.destroy();this.list=[];this._displayList=null}});e.exports=g},function(e,t,i){var a=i(129),n=i(0),r=i(952),o=new n({Extends:a,Mixins:[r],initialize:function(e,t,i,n,r,o,s){a.call(this,e,t,i,n,r,o,s);this.type="DynamicBitmapText";this.scrollX=0;this.scrollY=0;this.cropWidth=0;this.cropHeight=0;this.displayCallback;this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function setSize(e,t){this.cropWidth=e;this.cropHeight=t;return this},setDisplayCallback:function setDisplayCallback(e){this.displayCallback=e;return this},setScrollX:function setScrollX(e){this.scrollX=e;return this},setScrollY:function setScrollY(e){this.scrollY=e;return this}});e.exports=o},function(e,t,i){var a=i(91),n=i(0),r=i(190),o=i(266),s=i(269),l=i(270),d=i(274),p=i(153),c=i(279),u=i(280),g=i(277),h=i(32),m=i(95),f=i(14),T=i(2),v=i(6),b=i(13),E=i(958),S=new n({Extends:f,Mixins:[o,s,l,d,p,c,u,g,E],initialize:function(e,t){var i=v(t,"x",0),a=v(t,"y",0);f.call(this,e,"Graphics");this.setPosition(i,a);this.initPipeline();this.displayOriginX=0;this.displayOriginY=0;this.commandBuffer=[];this.defaultFillColor=-1;this.defaultFillAlpha=1;this.defaultStrokeWidth=1;this.defaultStrokeColor=-1;this.defaultStrokeAlpha=1;this._lineWidth=1;this._tempMatrix1=new h;this._tempMatrix2=new h;this._tempMatrix3=new h;this.setDefaultStyles(t)},setDefaultStyles:function setDefaultStyles(e){if(v(e,"lineStyle",null)){this.defaultStrokeWidth=v(e,"lineStyle.width",1);this.defaultStrokeColor=v(e,"lineStyle.color",16777215);this.defaultStrokeAlpha=v(e,"lineStyle.alpha",1);this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)}if(v(e,"fillStyle",null)){this.defaultFillColor=v(e,"fillStyle.color",16777215);this.defaultFillAlpha=v(e,"fillStyle.alpha",1);this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)}return this},lineStyle:function lineStyle(e,t,i){if(i===void 0){i=1}this.commandBuffer.push(r.LINE_STYLE,e,t,i);this._lineWidth=e;return this},fillStyle:function fillStyle(e,t){if(t===void 0){t=1}this.commandBuffer.push(r.FILL_STYLE,e,t);return this},fillGradientStyle:function fillGradientStyle(e,t,i,a,n){if(n===void 0){n=1}this.commandBuffer.push(r.GRADIENT_FILL_STYLE,n,e,t,i,a);return this},lineGradientStyle:function lineGradientStyle(e,t,i,a,n,o){if(o===void 0){o=1}this.commandBuffer.push(r.GRADIENT_LINE_STYLE,e,o,t,i,a,n);return this},setTexture:function setTexture(e,t,i){if(i===void 0){i=0}if(e===void 0){this.commandBuffer.push(r.CLEAR_TEXTURE)}else{var a=this.scene.sys.textures.getFrame(e,t);if(a){if(2===i){i=3}this.commandBuffer.push(r.SET_TEXTURE,a,i)}}return this},beginPath:function beginPath(){this.commandBuffer.push(r.BEGIN_PATH);return this},closePath:function closePath(){this.commandBuffer.push(r.CLOSE_PATH);return this},fillPath:function fillPath(){this.commandBuffer.push(r.FILL_PATH);return this},fill:function fill(){this.commandBuffer.push(r.FILL_PATH);return this},strokePath:function strokePath(){this.commandBuffer.push(r.STROKE_PATH);return this},stroke:function stroke(){this.commandBuffer.push(r.STROKE_PATH);return this},fillCircleShape:function fillCircleShape(e){return this.fillCircle(e.x,e.y,e.radius)},strokeCircleShape:function strokeCircleShape(e){return this.strokeCircle(e.x,e.y,e.radius)},fillCircle:function fillCircle(e,t,i){this.beginPath();this.arc(e,t,i,0,b.PI2);this.fillPath();return this},strokeCircle:function strokeCircle(e,t,i){this.beginPath();this.arc(e,t,i,0,b.PI2);this.strokePath();return this},fillRectShape:function fillRectShape(e){return this.fillRect(e.x,e.y,e.width,e.height)},strokeRectShape:function strokeRectShape(e){return this.strokeRect(e.x,e.y,e.width,e.height)},fillRect:function fillRect(e,t,i,a){this.commandBuffer.push(r.FILL_RECT,e,t,i,a);return this},strokeRect:function strokeRect(e,t,i,a){var n=this._lineWidth/2,r=e-n,o=e+n;this.beginPath();this.moveTo(e,t);this.lineTo(e,t+a);this.strokePath();this.beginPath();this.moveTo(e+i,t);this.lineTo(e+i,t+a);this.strokePath();this.beginPath();this.moveTo(r,t);this.lineTo(o+i,t);this.strokePath();this.beginPath();this.moveTo(r,t+a);this.lineTo(o+i,t+a);this.strokePath();return this},fillRoundedRect:function fillRoundedRect(e,t,i,a,n){if(n===void 0){n=20}var r=n,o=n,s=n,l=n;if("number"!=typeof n){r=T(n,"tl",20);o=T(n,"tr",20);s=T(n,"bl",20);l=T(n,"br",20)}this.beginPath();this.moveTo(e+r,t);this.lineTo(e+i-o,t);this.arc(e+i-o,t+o,o,-b.TAU,0);this.lineTo(e+i,t+a-l);this.arc(e+i-l,t+a-l,l,0,b.TAU);this.lineTo(e+s,t+a);this.arc(e+s,t+a-s,s,b.TAU,Math.PI);this.lineTo(e,t+r);this.arc(e+r,t+r,r,-Math.PI,-b.TAU);this.fillPath();return this},strokeRoundedRect:function strokeRoundedRect(e,t,i,a,n){if(n===void 0){n=20}var r=n,o=n,s=n,l=n;if("number"!=typeof n){r=T(n,"tl",20);o=T(n,"tr",20);s=T(n,"bl",20);l=T(n,"br",20)}this.beginPath();this.moveTo(e+r,t);this.lineTo(e+i-o,t);this.arc(e+i-o,t+o,o,-b.TAU,0);this.lineTo(e+i,t+a-l);this.arc(e+i-l,t+a-l,l,0,b.TAU);this.lineTo(e+s,t+a);this.arc(e+s,t+a-s,s,b.TAU,Math.PI);this.lineTo(e,t+r);this.arc(e+r,t+r,r,-Math.PI,-b.TAU);this.strokePath();return this},fillPointShape:function fillPointShape(e,t){return this.fillPoint(e.x,e.y,t)},fillPoint:function fillPoint(e,t,i){if(!i||1>i){i=1}else{e-=i/2;t-=i/2}this.commandBuffer.push(r.FILL_RECT,e,t,i,i);return this},fillTriangleShape:function fillTriangleShape(e){return this.fillTriangle(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)},strokeTriangleShape:function strokeTriangleShape(e){return this.strokeTriangle(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)},fillTriangle:function fillTriangle(e,t,i,a,n,o){this.commandBuffer.push(r.FILL_TRIANGLE,e,t,i,a,n,o);return this},strokeTriangle:function strokeTriangle(e,t,i,a,n,o){this.commandBuffer.push(r.STROKE_TRIANGLE,e,t,i,a,n,o);return this},strokeLineShape:function strokeLineShape(e){return this.lineBetween(e.x1,e.y1,e.x2,e.y2)},lineBetween:function lineBetween(e,t,i,a){this.beginPath();this.moveTo(e,t);this.lineTo(i,a);this.strokePath();return this},lineTo:function lineTo(e,t){this.commandBuffer.push(r.LINE_TO,e,t);return this},moveTo:function moveTo(e,t){this.commandBuffer.push(r.MOVE_TO,e,t);return this},strokePoints:function strokePoints(e,t,a,n){if(t===void 0){t=!1}if(a===void 0){a=!1}if(n===void 0){n=e.length}this.beginPath();this.moveTo(e[0].x,e[0].y);for(var r=1;r<n;r++){this.lineTo(e[r].x,e[r].y)}if(t){this.lineTo(e[0].x,e[0].y)}if(a){this.closePath()}this.strokePath();return this},fillPoints:function fillPoints(e,t,a,n){if(t===void 0){t=!1}if(a===void 0){a=!1}if(n===void 0){n=e.length}this.beginPath();this.moveTo(e[0].x,e[0].y);for(var r=1;r<n;r++){this.lineTo(e[r].x,e[r].y)}if(t){this.lineTo(e[0].x,e[0].y)}if(a){this.closePath()}this.fillPath();return this},strokeEllipseShape:function strokeEllipseShape(e,t){if(t===void 0){t=32}var i=e.getPoints(t);return this.strokePoints(i,!0)},strokeEllipse:function strokeEllipse(e,t,i,a,n){if(n===void 0){n=32}var r=new m(e,t,i,a),o=r.getPoints(n);return this.strokePoints(o,!0)},fillEllipseShape:function fillEllipseShape(e,t){if(t===void 0){t=32}var i=e.getPoints(t);return this.fillPoints(i,!0)},fillEllipse:function fillEllipse(e,t,i,a,n){if(n===void 0){n=32}var r=new m(e,t,i,a),o=r.getPoints(n);return this.fillPoints(o,!0)},arc:function arc(e,t,i,a,n,o,s){if(o===void 0){o=!1}if(s===void 0){s=0}this.commandBuffer.push(r.ARC,e,t,i,a,n,o,s);return this},slice:function slice(e,t,i,a,n,o,s){if(o===void 0){o=!1}if(s===void 0){s=0}this.commandBuffer.push(r.BEGIN_PATH);this.commandBuffer.push(r.MOVE_TO,e,t);this.commandBuffer.push(r.ARC,e,t,i,a,n,o,s);this.commandBuffer.push(r.CLOSE_PATH);return this},save:function save(){this.commandBuffer.push(r.SAVE);return this},restore:function restore(){this.commandBuffer.push(r.RESTORE);return this},translateCanvas:function translateCanvas(e,t){this.commandBuffer.push(r.TRANSLATE,e,t);return this},scaleCanvas:function scaleCanvas(e,t){this.commandBuffer.push(r.SCALE,e,t);return this},rotateCanvas:function rotateCanvas(e){this.commandBuffer.push(r.ROTATE,e);return this},clear:function clear(){this.commandBuffer.length=0;if(-1<this.defaultFillColor){this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)}if(-1<this.defaultStrokeColor){this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)}return this},generateTexture:function generateTexture(e,t,i){var a=this.scene.sys,n=a.game.renderer;if(t===void 0){t=a.scale.width}if(i===void 0){i=a.scale.height}S.TargetCamera.setScene(this.scene);S.TargetCamera.setViewport(0,0,t,i);S.TargetCamera.scrollX=this.x;S.TargetCamera.scrollY=this.y;var r,o;if("string"==typeof e){if(a.textures.exists(e)){r=a.textures.get(e);var s=r.getSourceImage();if(s instanceof HTMLCanvasElement){o=s.getContext("2d")}}else{r=a.textures.createCanvas(e,t,i);o=r.getSourceImage().getContext("2d")}}else if(e instanceof HTMLCanvasElement){o=e.getContext("2d")}if(o){this.renderCanvas(n,this,0,S.TargetCamera,null,o,!1);if(r){r.refresh()}}return this},preDestroy:function preDestroy(){this.commandBuffer=[]}});S.TargetCamera=new a;e.exports=S},function(e){e.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,SET_TEXTURE:19,CLEAR_TEXTURE:20,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(e,t,i){var a=i(4);e.exports=function CircumferencePoint(e,t,i){if(i===void 0){i=new a}var n=e.width/2,r=e.height/2;i.x=e.x+n*Math.cos(t);i.y=e.y+r*Math.sin(t);return i}},function(e,t,i){var a=i(0),n=i(12),r=i(14),o=i(394),s=i(126),l=i(396),d=i(968),p=new a({Extends:r,Mixins:[n.Depth,n.Mask,n.Pipeline,n.Transform,n.Visible,d],initialize:function(e,t,a,n){r.call(this,e,"ParticleEmitterManager");this.blendMode=-1;this.timeScale=1;this.texture=null;this.frame=null;this.frameNames=[];if(null!==a&&("object"===_typeof(a)||Array.isArray(a))){n=a;a=null}this.setTexture(t,a);this.initPipeline();this.emitters=new s(this);this.wells=new s(this);if(n){if(!Array.isArray(n)){n=[n]}for(var o=0;o<n.length;o++){this.createEmitter(n[o])}}},setTexture:function setTexture(e,t){this.texture=this.scene.sys.textures.get(e);return this.setFrame(t)},setFrame:function setFrame(e){this.frame=this.texture.get(e);var t=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),i=[];t.forEach(function(e){i.push(e.name)});this.frameNames=i;this.defaultFrame=this.frame;return this},setEmitterFrames:function setEmitterFrames(e,t){if(!Array.isArray(e)){e=[e]}var a=t.frames;a.length=0;for(var n=0,r;n<e.length;n++){r=e[n];if(-1!==this.frameNames.indexOf(r)){a.push(this.texture.get(r))}}if(0<a.length){t.defaultFrame=a[0]}else{t.defaultFrame=this.defaultFrame}return this},addEmitter:function addEmitter(e){return this.emitters.add(e)},createEmitter:function createEmitter(e){return this.addEmitter(new l(this,e))},removeEmitter:function removeEmitter(e){return this.emitters.remove(e,!0)},addGravityWell:function addGravityWell(e){return this.wells.add(e)},createGravityWell:function createGravityWell(e){return this.addGravityWell(new o(e))},emitParticle:function emitParticle(e,t,a){for(var n=this.emitters.list,r=0,o;r<n.length;r++){o=n[r];if(o.active){o.emitParticle(e,t,a)}}return this},emitParticleAt:function emitParticleAt(e,t,i){return this.emitParticle(i,e,t)},pause:function pause(){this.active=!1;return this},resume:function resume(){this.active=!0;return this},getProcessors:function getProcessors(){return this.wells.getAll("active",!0)},preUpdate:function preUpdate(e,t){t*=this.timeScale;for(var a=this.emitters.list,n=0,r;n<a.length;n++){r=a[n];if(r.active){r.preUpdate(e,t)}}},setAlpha:function setAlpha(){},setScrollFactor:function setScrollFactor(){},setBlendMode:function setBlendMode(){}});e.exports=p},function(e,t,i){var a=i(52),n=i(91),r=i(26),o=i(0),s=i(12),l=i(29),d=i(94),p=i(14),c=i(972),u=i(10),g=i(194),h=new o({Extends:p,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,c],initialize:function(e,t,i,a,o,s,d){if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=32}if(o===void 0){o=32}p.call(this,e,"RenderTexture");this.renderer=e.sys.game.renderer;this.textureManager=e.sys.textures;this.globalTint=16777215;this.globalAlpha=1;this.canvas=null;this.framebuffer=null;this.dirty=!1;this._crop=this.resetCropObject();this.texture=null;this.frame=null;this._saved=!1;if(s===void 0){this.canvas=r.create2D(this,a,o);this.texture=e.sys.textures.addCanvas(g(),this.canvas);this.frame=this.texture.get()}else{this.texture=e.sys.textures.get(s);this.frame=this.texture.get(d);this.canvas=this.frame.source.image;this._saved=!0;this.dirty=!0;this.width=this.frame.cutWidth;this.height=this.frame.cutHeight}this.context=this.canvas.getContext("2d");this._eraseMode=!1;this.camera=new n(0,0,a,o);this.gl=null;this.glTexture=null;var c=this.renderer;if(c.type===l.WEBGL){var u=c.gl;this.gl=u;this.glTexture=this.frame.source.glTexture;this.drawGameObject=this.batchGameObjectWebGL;this.framebuffer=c.createFramebuffer(a,o,this.glTexture,!1)}else if(c.type===l.CANVAS){this.drawGameObject=this.batchGameObjectCanvas}this.camera.setScene(e);this.setPosition(t,i);if(s===void 0){this.setSize(a,o)}this.setOrigin(0,0);this.initPipeline()},setSize:function setSize(e,t){return this.resize(e,t)},resize:function resize(e,t){if(t===void 0){t=e}if(e!==this.width||t!==this.height){if("__BASE"===this.frame.name){this.canvas.width=e;this.canvas.height=t;this.texture.width=e;this.texture.height=t;if(this.gl){var i=this.gl;this.renderer.deleteTexture(this.frame.source.glTexture);this.renderer.deleteFramebuffer(this.framebuffer);var a=this.renderer.createTexture2D(0,i.NEAREST,i.NEAREST,i.CLAMP_TO_EDGE,i.CLAMP_TO_EDGE,i.RGBA,null,e,t,!1);this.framebuffer=this.renderer.createFramebuffer(e,t,a,!1);this.frame.source.isRenderTexture=!0;this.frame.glTexture=a;this.glTexture=a}this.frame.source.width=e;this.frame.source.height=t;this.camera.setSize(e,t);this.frame.setSize(e,t);this.width=e;this.height=t}}else{var n=this.texture.getSourceImage();if(this.frame.cutX+e>n.width){e=n.width-this.frame.cutX}if(this.frame.cutY+t>n.height){t=n.height-this.frame.cutY}this.frame.setSize(e,t,this.frame.cutX,this.frame.cutY)}this.updateDisplayOrigin();var r=this.input;if(r&&!r.customHitArea){r.hitArea.width=e;r.hitArea.height=t}return this},setGlobalTint:function setGlobalTint(e){this.globalTint=e;return this},setGlobalAlpha:function setGlobalAlpha(e){this.globalAlpha=e;return this},saveTexture:function saveTexture(e){this.textureManager.renameTexture(this.texture.key,e);this._saved=!0;return this.texture},fill:function fill(e,t,i,a,n,o){if(t===void 0){t=1}if(i===void 0){i=0}if(a===void 0){a=0}if(n===void 0){n=this.frame.cutWidth}if(o===void 0){o=this.frame.cutHeight}var s=255&(0|e>>16),r=255&(0|e>>8),l=255&(0|e),d=this.gl,p=this.frame;this.camera.preRender(1,1);if(d){var c=this.camera._cx,g=this.camera._cy,h=this.camera._cw,m=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,!1);this.renderer.pushScissor(c,g,h,m,m);var f=this.pipeline;f.projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3);f.drawFillRect(i,a,n,o,u.getTintFromFloats(s/255,r/255,l/255,1),t);this.renderer.setFramebuffer(null,!1);this.renderer.popScissor();f.projOrtho(0,f.width,f.height,0,-1e3,1e3)}else{this.renderer.setContext(this.context);this.context.fillStyle="rgba("+s+","+r+","+l+","+t+")";this.context.fillRect(i+p.cutX,a+p.cutY,n,o);this.renderer.setContext()}this.dirty=!0;return this},clear:function clear(){if(this.dirty){var e=this.gl;if(e){var t=this.renderer;t.setFramebuffer(this.framebuffer,!0);if(this.frame.cutWidth!==this.canvas.width||this.frame.cutHeight!==this.canvas.height){e.scissor(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight)}e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);t.setFramebuffer(null,!0)}else{var i=this.context;i.save();i.setTransform(1,0,0,1,0,0);i.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight);i.restore()}this.dirty=!1}return this},erase:function erase(e,t,i){this._eraseMode=!0;var n=this.renderer.currentBlendMode;this.renderer.setBlendMode(a.ERASE);this.draw(e,t,i,1,16777215);this.renderer.setBlendMode(n);this._eraseMode=!1;return this},draw:function draw(e,t,i,a,n){if(a===void 0){a=this.globalAlpha}if(n===void 0){n=(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16)}else{n=(n>>16)+(65280&n)+((255&n)<<16)}if(!Array.isArray(e)){e=[e]}var r=this.gl;this.camera.preRender(1,1);if(r){var o=this.camera._cx,s=this.camera._cy,l=this.camera._cw,d=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,!1);this.renderer.pushScissor(o,s,l,d,d);var p=this.pipeline;p.projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3);this.batchList(e,t,i,a,n);p.flush();this.renderer.setFramebuffer(null,!1);this.renderer.popScissor();p.projOrtho(0,p.width,p.height,0,-1e3,1e3)}else{this.renderer.setContext(this.context);this.batchList(e,t,i,a,n);this.renderer.setContext()}this.dirty=!0;return this},drawFrame:function drawFrame(e,t,i,a,n,r){if(i===void 0){i=0}if(a===void 0){a=0}if(n===void 0){n=this.globalAlpha}if(r===void 0){r=(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16)}else{r=(r>>16)+(65280&r)+((255&r)<<16)}var o=this.gl,s=this.textureManager.getFrame(e,t);if(s){this.camera.preRender(1,1);if(o){var l=this.camera._cx,d=this.camera._cy,p=this.camera._cw,c=this.camera._ch;this.renderer.setFramebuffer(this.framebuffer,!1);this.renderer.pushScissor(l,d,p,c,c);var u=this.pipeline;u.projOrtho(0,this.texture.width,0,this.texture.height,-1e3,1e3);u.batchTextureFrame(s,i+this.frame.cutX,a+this.frame.cutY,r,n,this.camera.matrix,null);u.flush();this.renderer.setFramebuffer(null,!1);this.renderer.popScissor();u.projOrtho(0,u.width,u.height,0,-1e3,1e3)}else{this.batchTextureFrame(s,i+this.frame.cutX,a+this.frame.cutY,n,r)}this.dirty=!0}return this},batchList:function batchList(e,t,a,n,r){for(var o=0,s;o<e.length;o++){s=e[o];if(!s||s===this){continue}if(s.renderWebGL||s.renderCanvas){this.drawGameObject(s,t,a)}else if(s.isParent||s.list){this.batchGroup(s.getChildren(),t,a)}else if("string"==typeof s){this.batchTextureFrameKey(s,null,t,a,n,r)}else if(s instanceof d){this.batchTextureFrame(s,t,a,n,r)}else if(Array.isArray(s)){this.batchList(s,t,a,n,r)}}},batchGroup:function batchGroup(e,t,a){if(t===void 0){t=0}if(a===void 0){a=0}t+=this.frame.cutX;a+=this.frame.cutY;for(var n=0,r;n<e.length;n++){r=e[n];if(r.willRender()){var o=r.x+t,s=r.y+a;this.drawGameObject(r,o,s)}}},batchGameObjectWebGL:function batchGameObjectWebGL(e,t,i){if(t===void 0){t=e.x}if(i===void 0){i=e.y}var a=e.x,n=e.y;if(!this._eraseMode){this.renderer.setBlendMode(e.blendMode)}e.setPosition(t+this.frame.cutX,i+this.frame.cutY);e.renderWebGL(this.renderer,e,0,this.camera,null);e.setPosition(a,n)},batchGameObjectCanvas:function batchGameObjectCanvas(e,t,i){if(t===void 0){t=e.x}if(i===void 0){i=e.y}var n=e.x,r=e.y;if(this._eraseMode){var o=e.blendMode;e.blendMode=a.ERASE}e.setPosition(t+this.frame.cutX,i+this.frame.cutY);e.renderCanvas(this.renderer,e,0,this.camera,null);e.setPosition(n,r);if(this._eraseMode){e.blendMode=o}},batchTextureFrameKey:function batchTextureFrameKey(e,t,i,a,n,r){var o=this.textureManager.getFrame(e,t);if(o){this.batchTextureFrame(o,i,a,n,r)}},batchTextureFrame:function batchTextureFrame(e,t,i,a,n){if(t===void 0){t=0}if(i===void 0){i=0}t+=this.frame.cutX;i+=this.frame.cutY;if(this.gl){this.pipeline.batchTextureFrame(e,t,i,n,a,this.camera.matrix,null)}else{var r=this.context,o=e.canvasData,s=e.source.image,l=this.camera.matrix;r.globalAlpha=this.globalAlpha;r.setTransform(l[0],l[1],l[2],l[3],l[4],l[5]);r.drawImage(s,o.x,o.y,o.width,o.height,t,i,o.width,o.height)}},snapshotArea:function snapshotArea(e,t,i,a,n,r,o){if(this.gl){this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,n,!1,e,t,i,a,r,o)}else{this.renderer.snapshotCanvas(this.canvas,n,!1,e,t,i,a,r,o)}return this},snapshot:function snapshot(e,t,i){if(this.gl){this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,e,!1,0,0,this.width,this.height,t,i)}else{this.renderer.snapshotCanvas(this.canvas,e,!1,0,0,this.width,this.height,t,i)}return this},snapshotPixel:function snapshotPixel(e,t,i){if(this.gl){this.renderer.snapshotFramebuffer(this.framebuffer,this.width,this.height,i,!0,e,t)}else{this.renderer.snapshotCanvas(this.canvas,i,!0,e,t)}return this},preDestroy:function preDestroy(){if(!this._saved){r.remove(this.canvas);if(this.gl){this.renderer.deleteFramebuffer(this.framebuffer)}this.texture.destroy();this.camera.destroy();this.canvas=null;this.context=null;this.framebuffer=null;this.texture=null;this.glTexture=null}}});e.exports=h},function(e){e.exports=function UUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),i="x"===e?t:8|3&t;return i.toString(16)})}},function(e,t,i){var a=i(120),n=i(26),r=i(0),o=i(12),s=i(18),l=i(14),d=i(978),p=i(6),c=i(176),u=i(979),g=i(982),h=new r({Extends:l,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,u],initialize:function(e,t,i,a,r){if(t===void 0){t=0}if(i===void 0){i=0}l.call(this,e,"Text");this.renderer=e.sys.game.renderer;this.setPosition(t,i);this.setOrigin(0,0);this.initPipeline();this.canvas=n.create(this);this.context=this.canvas.getContext("2d");this.style=new g(this,r);this.autoRound=!0;this.splitRegExp=/(?:\r\n|\r|\n)/;this._text=void 0;this.padding={left:0,right:0,top:0,bottom:0};this.width=1;this.height=1;this.lineSpacing=0;this.dirty=!1;if(0===this.style.resolution){this.style.resolution=e.sys.game.config.resolution}this._crop=this.resetCropObject();this.texture=e.sys.textures.addCanvas(null,this.canvas,!0);this.frame=this.texture.get();this.frame.source.resolution=this.style.resolution;if(this.renderer&&this.renderer.gl){this.renderer.deleteTexture(this.frame.source.glTexture);this.frame.source.glTexture=null}this.initRTL();this.setText(a);if(r&&r.padding){this.setPadding(r.padding)}if(r&&r.lineSpacing){this.setLineSpacing(r.lineSpacing)}e.sys.game.events.on(s.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function initRTL(){if(!this.style.rtl){return}this.canvas.dir="rtl";this.context.direction="rtl";this.canvas.style.display="none";a(this.canvas,this.scene.sys.canvas);this.originX=1},runWordWrap:function runWordWrap(e){var t=this.style;if(t.wordWrapCallback){var i=t.wordWrapCallback.call(t.wordWrapCallbackScope,e,this);if(Array.isArray(i)){i=i.join("\n")}return i}else if(t.wordWrapWidth){if(t.wordWrapUseAdvanced){return this.advancedWordWrap(e,this.context,this.style.wordWrapWidth)}else{return this.basicWordWrap(e,this.context,this.style.wordWrapWidth)}}else{return e}},advancedWordWrap:function advancedWordWrap(e,t,a){for(var n="",r=e.replace(/ +/gi," ").split(this.splitRegExp),o=r.length,s=0;s<o;s++){var l=r[s],d="";l=l.replace(/^ *|\s*$/gi,"");var p=t.measureText(l).width;if(p<a){n+=l+"\n";continue}for(var c=a,u=l.split(" "),g=0;g<u.length;g++){var h=u[g],m=h+" ",y=t.measureText(m).width;if(y>c){if(0==g){var x=m;while(x.length){x=x.slice(0,-1);y=t.measureText(x).width;if(y<=c){break}}if(!x.length){throw new Error("This text's wordWrapWidth setting is less than a single character!")}var f=h.substr(x.length);u[g]=f;d+=x}var T=u[g].length?g:g+1,v=u.slice(T).join(" ").replace(/[ \n]*$/gi,"");r[s+1]=v+" "+(r[s+1]||"");o=r.length;break}else{d+=m;c-=y}}n+=d.replace(/[ \n]*$/gi,"")+"\n"}n=n.replace(/[\s|\n]*$/gi,"");return n},basicWordWrap:function basicWordWrap(e,t,a){for(var n="",r=e.split(this.splitRegExp),o=r.length-1,s=t.measureText(" ").width,l=0;l<=o;l++){for(var d=a,p=r[l].split(" "),c=p.length-1,u=0;u<=c;u++){var g=p[u],h=t.measureText(g).width,m=h+s;if(m>d){if(0<u){n+="\n";d=a}}n+=g;if(u<c){n+=" ";d-=m}else{d-=h}}if(l<o){n+="\n"}}return n},getWrappedText:function getWrappedText(e){if(e===void 0){e=this._text}this.style.syncFont(this.canvas,this.context);var t=this.runWordWrap(e);return t.split(this.splitRegExp)},setText:function setText(e){if(!e&&0!==e){e=""}if(Array.isArray(e)){e=e.join("\n")}if(e!==this._text){this._text=e.toString();this.updateText()}return this},setStyle:function setStyle(e){return this.style.setStyle(e)},setFont:function setFont(e){return this.style.setFont(e)},setFontFamily:function setFontFamily(e){return this.style.setFontFamily(e)},setFontSize:function setFontSize(e){return this.style.setFontSize(e)},setFontStyle:function setFontStyle(e){return this.style.setFontStyle(e)},setFixedSize:function setFixedSize(e,t){return this.style.setFixedSize(e,t)},setBackgroundColor:function setBackgroundColor(e){return this.style.setBackgroundColor(e)},setFill:function setFill(e){return this.style.setFill(e)},setColor:function setColor(e){return this.style.setColor(e)},setStroke:function setStroke(e,t){return this.style.setStroke(e,t)},setShadow:function setShadow(e,t,i,a,n,r){return this.style.setShadow(e,t,i,a,n,r)},setShadowOffset:function setShadowOffset(e,t){return this.style.setShadowOffset(e,t)},setShadowColor:function setShadowColor(e){return this.style.setShadowColor(e)},setShadowBlur:function setShadowBlur(e){return this.style.setShadowBlur(e)},setShadowStroke:function setShadowStroke(e){return this.style.setShadowStroke(e)},setShadowFill:function setShadowFill(e){return this.style.setShadowFill(e)},setWordWrapWidth:function setWordWrapWidth(e,t){return this.style.setWordWrapWidth(e,t)},setWordWrapCallback:function setWordWrapCallback(e,t){return this.style.setWordWrapCallback(e,t)},setAlign:function setAlign(e){return this.style.setAlign(e)},setResolution:function setResolution(e){return this.style.setResolution(e)},setLineSpacing:function setLineSpacing(e){this.lineSpacing=e;return this.updateText()},setPadding:function setPadding(e,t,i,a){if("object"===_typeof(e)){var n=e,r=p(n,"x",null);if(null!==r){e=r;i=r}else{e=p(n,"left",0);i=p(n,"right",e)}var o=p(n,"y",null);if(null!==o){t=o;a=o}else{t=p(n,"top",0);a=p(n,"bottom",t)}}else{if(e===void 0){e=0}if(t===void 0){t=e}if(i===void 0){i=e}if(a===void 0){a=t}}this.padding.left=e;this.padding.top=t;this.padding.right=i;this.padding.bottom=a;return this.updateText()},setMaxLines:function setMaxLines(e){return this.style.setMaxLines(e)},updateText:function updateText(){var e=this.canvas,t=this.context,a=this.style,n=a.resolution,r=a.metrics;a.syncFont(e,t);var o=this._text;if(a.wordWrapWidth||a.wordWrapCallback){o=this.runWordWrap(this._text)}var s=o.split(this.splitRegExp),l=d(this,r,s),p=this.padding,c;if(0===a.fixedWidth){this.width=l.width+p.left+p.right;c=l.width}else{this.width=a.fixedWidth;c=this.width-p.left-p.right;if(c<l.width){c=l.width}}if(0===a.fixedHeight){this.height=l.height+p.top+p.bottom}else{this.height=a.fixedHeight}var u=this.width,g=this.height;this.updateDisplayOrigin();u*=n;g*=n;u=Math.max(u,1);g=Math.max(g,1);if(e.width!==u||e.height!==g){e.width=u;e.height=g;this.frame.setSize(u,g);a.syncFont(e,t)}else{t.clearRect(0,0,u,g)}t.save();t.scale(n,n);if(a.backgroundColor){t.fillStyle=a.backgroundColor;t.fillRect(0,0,u,g)}a.syncStyle(e,t);t.textBaseline="alphabetic";t.translate(p.left,p.top);for(var m,y,x=0;x<l.lines;x++){m=a.strokeThickness/2;y=a.strokeThickness/2+x*l.lineHeight+r.ascent;if(0<x){y+=l.lineSpacing*x}if(a.rtl){m=u-m}else if("right"===a.align){m+=c-l.lineWidths[x]}else if("center"===a.align){m+=(c-l.lineWidths[x])/2}else if("justify"===a.align){if(l.lineWidths[x]/l.width>=.85){var f=l.width-l.lineWidths[x],T=t.measureText(" ").width,v=s[x].trim(),b=v.split(" ");f+=(s[x].length-v.length)*T;var E=Math.floor(f/T),S=0;while(0<E){b[S]+=" ";S=(S+1)%(b.length-1||1);--E}s[x]=b.join(" ")}}if(this.autoRound){m=Math.round(m);y=Math.round(y)}if(a.strokeThickness){this.style.syncShadow(t,a.shadowStroke);t.strokeText(s[x],m,y)}if(a.color){this.style.syncShadow(t,a.shadowFill);t.fillText(s[x],m,y)}}t.restore();if(this.renderer.gl){this.frame.source.glTexture=this.renderer.canvasToTexture(e,this.frame.source.glTexture,!0);this.frame.glTexture=this.frame.source.glTexture}this.dirty=!0;var _=this.input;if(_&&!_.customHitArea){_.hitArea.width=this.width;_.hitArea.height=this.height}return this},getTextMetrics:function getTextMetrics(){return this.style.getTextMetrics()},text:{get:function get(){return this._text},set:function set(e){this.setText(e)}},toJSON:function toJSON(){var e=o.ToJSON(this),t={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};e.data=t;return e},preDestroy:function preDestroy(){if(this.style.rtl){c(this.canvas)}n.remove(this.canvas);this.texture.destroy()}});e.exports=h},function(e,t,i){var a=i(26),n=i(0),r=i(12),o=i(18),s=i(14),l=i(324),d=i(164),p=i(984),c=i(3),u=8,g=new n({Extends:s,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,p],initialize:function(e,t,i,n,r,d,p){var u=e.sys.game.renderer;s.call(this,e,"TileSprite");var g=e.sys.textures.get(d),h=g.get(p);if(!n||!r){n=h.width;r=h.height}else{n=Math.floor(n);r=Math.floor(r)}this._tilePosition=new c;this._tileScale=new c(1,1);this.dirty=!1;this.renderer=u;this.canvas=a.create(this,n,r);this.context=this.canvas.getContext("2d");this.displayTexture=g;this.displayFrame=h;this._crop=this.resetCropObject();this.texture=e.sys.textures.addCanvas(null,this.canvas,!0);this.frame=this.texture.get();this.potWidth=l(h.width);this.potHeight=l(h.height);this.fillCanvas=a.create2D(this,this.potWidth,this.potHeight);this.fillContext=this.fillCanvas.getContext("2d");this.fillPattern=null;this.setPosition(t,i);this.setSize(n,r);this.setFrame(p);this.setOriginFromFrame();this.initPipeline();e.sys.game.events.on(o.CONTEXT_RESTORED,function(e){var t=e.gl;this.dirty=!0;this.fillPattern=null;this.fillPattern=e.createTexture2D(0,t.LINEAR,t.LINEAR,t.REPEAT,t.REPEAT,t.RGBA,this.fillCanvas,this.potWidth,this.potHeight)},this)},setTexture:function setTexture(e,t){this.displayTexture=this.scene.sys.textures.get(e);return this.setFrame(t)},setFrame:function setFrame(e){var t=this.displayTexture.get(e);this.potWidth=l(t.width);this.potHeight=l(t.height);this.canvas.width=0;if(!t.cutWidth||!t.cutHeight){this.renderFlags&=~u}else{this.renderFlags|=u}this.displayFrame=t;this.dirty=!0;this.updateTileTexture();return this},setTilePosition:function setTilePosition(e,t){if(e!==void 0){this.tilePositionX=e}if(t!==void 0){this.tilePositionY=t}return this},setTileScale:function setTileScale(e,t){if(e===void 0){e=this.tileScaleX}if(t===void 0){t=e}this.tileScaleX=e;this.tileScaleY=t;return this},updateTileTexture:function updateTileTexture(){if(!this.dirty||!this.renderer){return}var e=this.displayFrame;if(e.source.isRenderTexture||e.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures");this.dirty=!1;return}var t=this.fillContext,i=this.fillCanvas,a=this.potWidth,n=this.potHeight;if(!this.renderer.gl){a=e.cutWidth;n=e.cutHeight}t.clearRect(0,0,a,n);i.width=a;i.height=n;t.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,a,n);if(this.renderer.gl){this.fillPattern=this.renderer.canvasToTexture(i,this.fillPattern)}else{this.fillPattern=t.createPattern(i,"repeat")}this.updateCanvas();this.dirty=!1},updateCanvas:function updateCanvas(){var e=this.canvas;if(e.width!==this.width||e.height!==this.height){e.width=this.width;e.height=this.height;this.frame.setSize(this.width,this.height);this.updateDisplayOrigin();this.dirty=!0}if(!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var t=this.context;if(!this.scene.sys.game.config.antialias){d.disable(t)}var i=this._tileScale.x,a=this._tileScale.y,n=this._tilePosition.x,r=this._tilePosition.y;t.clearRect(0,0,this.width,this.height);t.save();t.scale(i,a);t.translate(-n,-r);t.fillStyle=this.fillPattern;t.fillRect(n,r,this.width/i,this.height/a);t.restore();this.dirty=!1},preDestroy:function preDestroy(){if(this.renderer&&this.renderer.gl){this.renderer.deleteTexture(this.fillPattern)}a.remove(this.canvas);a.remove(this.fillCanvas);this.fillPattern=null;this.fillContext=null;this.fillCanvas=null;this.displayTexture=null;this.displayFrame=null;this.texture.destroy();this.renderer=null},tilePositionX:{get:function get(){return this._tilePosition.x},set:function set(e){this._tilePosition.x=e;this.dirty=!0}},tilePositionY:{get:function get(){return this._tilePosition.y},set:function set(e){this._tilePosition.y=e;this.dirty=!0}},tileScaleX:{get:function get(){return this._tileScale.x},set:function set(e){this._tileScale.x=e;this.dirty=!0}},tileScaleY:{get:function get(){return this._tileScale.y},set:function set(e){this._tileScale.y=e;this.dirty=!0}}});e.exports=g},function(e,t,i){var a=i(0),n=i(22),r=i(12),o=i(90),s=i(18),l=i(14),d=i(59),p=i(194),c=i(987),u=i(13),g=new a({Extends:l,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,c],initialize:function(e,t,i,a){l.call(this,e,"Video");this.video=null;this.videoTexture=null;this.videoTextureSource=null;this.snapshotTexture=null;this.flipY=!1;this._key=p();this.touchLocked=!0;this.playWhenUnlocked=!1;this.retryLimit=20;this.retry=0;this.retryInterval=500;this._retryID=null;this._systemMuted=!1;this._codeMuted=!1;this._systemPaused=!1;this._codePaused=!1;this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)};this._crop=this.resetCropObject();this.markers={};this._markerIn=-1;this._markerOut=u.MAX_SAFE_INTEGER;this._lastUpdate=0;this._cacheKey="";this._isSeeking=!1;this.removeVideoElementOnDestroy=!1;this.setPosition(t,i);this.initPipeline();if(a){this.changeSource(a,!1)}var n=e.sys.game.events;n.on(s.PAUSE,this.globalPause,this);n.on(s.RESUME,this.globalResume,this);var r=e.sys.sound;if(r){r.on(d.GLOBAL_MUTE,this.globalMute,this)}},play:function play(e,t,i){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying()){return this}var a=this.video;if(!a){console.warn("Video not loaded");return this}if(e===void 0){e=a.loop}var n=this.scene.sys.sound;if(n&&n.mute){this.setMute(!0)}if(!isNaN(t)){this._markerIn=t}if(!isNaN(i)&&i>t){this._markerOut=i}a.loop=e;var r=this._callbacks,o=a.play();if(o!==void 0){o.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this))}else{a.addEventListener("playing",r.play,!0);if(2>a.readyState){this.retry=this.retryLimit;this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval)}}a.addEventListener("ended",r.end,!0);a.addEventListener("timeupdate",r.time,!0);a.addEventListener("seeking",r.seeking,!0);a.addEventListener("seeked",r.seeked,!0);return this},changeSource:function changeSource(e,t,i,a,n){if(t===void 0){t=!0}var r=this.video;if(r){this.stop()}var s=this.scene.sys.cache.video.get(e);if(s){this.video=s;this._cacheKey=e;this._codePaused=s.paused;this._codeMuted=s.muted;if(this.videoTexture){this.scene.sys.textures.remove(this._key);this.videoTexture=this.scene.sys.textures.create(this._key,s,s.videoWidth,s.videoHeight);this.videoTextureSource=this.videoTexture.source[0];this.videoTexture.add("__BASE",0,0,0,s.videoWidth,s.videoHeight);this.setTexture(this.videoTexture);this.setSizeToFrame();this.updateDisplayOrigin();this.emit(o.VIDEO_CREATED,this,s.videoWidth,s.videoHeight)}else{this.updateTexture()}s.currentTime=0;this._lastUpdate=0;if(t){this.play(i,a,n)}}else{this.video=null}return this},addMarker:function addMarker(e,t,i){if(!isNaN(t)&&0<=t&&!isNaN(i)){this.markers[e]=[t,i]}return this},playMarker:function playMarker(e,t){var i=this.markers[e];if(i){this.play(t,i[0],i[1])}return this},removeMarker:function removeMarker(e){delete this.markers[e];return this},snapshot:function snapshot(e,t){if(e===void 0){e=this.width}if(t===void 0){t=this.height}return this.snapshotArea(0,0,this.width,this.height,e,t)},snapshotArea:function snapshotArea(e,t,i,a,n,r){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=this.width}if(a===void 0){a=this.height}if(n===void 0){n=i}if(r===void 0){r=a}var o=this.video,s=this.snapshotTexture;if(!s){s=this.scene.sys.textures.createCanvas(p(),n,r);this.snapshotTexture=s;if(o){s.context.drawImage(o,e,t,i,a,0,0,n,r)}}else{s.setSize(n,r);if(o){s.context.drawImage(o,e,t,i,a,0,0,n,r)}}return s.update()},saveSnapshotTexture:function saveSnapshotTexture(e){if(this.snapshotTexture){this.scene.sys.textures.renameTexture(this.snapshotTexture.key,e)}else{this.snapshotTexture=this.scene.sys.textures.createCanvas(e,this.width,this.height)}return this.snapshotTexture},loadURL:function loadURL(e,t,i){if(t===void 0){t="loadeddata"}if(i===void 0){i=!1}if(this.video){this.stop()}if(this.videoTexture){this.scene.sys.textures.remove(this._key)}var a=document.createElement("video");a.controls=!1;if(i){a.muted=!0;a.defaultMuted=!0;a.setAttribute("autoplay","autoplay")}a.setAttribute("playsinline","playsinline");a.setAttribute("preload","auto");a.addEventListener("error",this._callbacks.error,!0);a.src=e;a.load();this.video=a;return this},playPromiseSuccessHandler:function playPromiseSuccessHandler(){this.touchLocked=!1;this.emit(o.VIDEO_PLAY,this);if(-1<this._markerIn){this.video.currentTime=this._markerIn}},playPromiseErrorHandler:function playPromiseErrorHandler(e){this.scene.sys.input.once("pointerdown",this.unlockHandler,this);this.touchLocked=!0;this.playWhenUnlocked=!0;this.emit(o.VIDEO_ERROR,this,e)},playHandler:function playHandler(){this.touchLocked=!1;this.emit(o.VIDEO_PLAY,this);this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function loadErrorHandler(e){this.stop();this.emit(o.VIDEO_ERROR,this,e)},unlockHandler:function unlockHandler(){this.touchLocked=!1;this.playWhenUnlocked=!1;this.emit(o.VIDEO_UNLOCKED,this);if(-1<this._markerIn){this.video.currentTime=this._markerIn}this.video.play();this.emit(o.VIDEO_PLAY,this)},completeHandler:function completeHandler(){this.emit(o.VIDEO_COMPLETE,this)},timeUpdateHandler:function timeUpdateHandler(){if(this.video&&this.video.currentTime<this._lastUpdate){this.emit(o.VIDEO_LOOP,this);this._lastUpdate=0}},preUpdate:function preUpdate(){var e=this.video;if(e){var t=e.currentTime;if(t!==this._lastUpdate){this._lastUpdate=t;this.updateTexture();if(t>=this._markerOut){if(e.loop){e.currentTime=this._markerIn;this.updateTexture();this._lastUpdate=t;this.emit(o.VIDEO_LOOP,this)}else{this.emit(o.VIDEO_COMPLETE,this);this.stop()}}}}},checkVideoProgress:function checkVideoProgress(){if(2<=this.video.readyState){this.updateTexture()}else{this.retry--;if(0<this.retry){this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval)}else{this.emit(o.VIDEO_TIMEOUT,this)}}},updateTexture:function updateTexture(){var e=this.video,t=e.videoWidth,i=e.videoHeight;if(!this.videoTexture){this.videoTexture=this.scene.sys.textures.create(this._key,e,t,i);this.videoTextureSource=this.videoTexture.source[0];this.videoTexture.add("__BASE",0,0,0,t,i);this.setTexture(this.videoTexture);this.setSizeToFrame();this.updateDisplayOrigin();this.emit(o.VIDEO_CREATED,this,t,i)}else{var a=this.videoTextureSource;if(a.source!==e){a.source=e;a.width=t;a.height=i}a.update()}},getVideoKey:function getVideoKey(){return this._cacheKey},seekTo:function seekTo(e){var t=this.video;if(t){var i=t.duration;if(i!==1/0&&!isNaN(i)){this.setCurrentTime(i*e)}}return this},getCurrentTime:function getCurrentTime(){return this.video?this.video.currentTime:0},setCurrentTime:function setCurrentTime(e){var t=this.video;if(t){if("string"==typeof e){var i=e[0],a=parseFloat(e.substr(1));if("+"===i){e=t.currentTime+a}else if("-"===i){e=t.currentTime-a}}t.currentTime=e;this._lastUpdate=e}return this},isSeeking:function isSeeking(){return this._isSeeking},seekingHandler:function seekingHandler(){this._isSeeking=!0;this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function seekedHandler(){this._isSeeking=!1;this.emit(o.VIDEO_SEEKED,this);var e=this.video;if(e){this.updateTexture()}},getProgress:function getProgress(){var e=this.video;if(e){var t=e.currentTime,i=e.duration;if(i!==1/0&&!isNaN(i)){return t/i}}return 0},getDuration:function getDuration(){return this.video?this.video.duration:0},setMute:function setMute(e){if(e===void 0){e=!0}this._codeMuted=e;var t=this.video;if(t){t.muted=this._systemMuted?!0:e}return this},isMuted:function isMuted(){return this._codeMuted},globalMute:function globalMute(e,t){this._systemMuted=t;var i=this.video;if(i){i.muted=this._codeMuted?!0:t}},globalPause:function globalPause(){this._systemPaused=!0;if(this.video){this.video.pause()}},globalResume:function globalResume(){this._systemPaused=!1;if(this.video&&!this._codePaused){this.video.play()}},setPaused:function setPaused(e){if(e===void 0){e=!0}var t=this.video;this._codePaused=e;if(t){if(e){if(!t.paused){t.pause()}}else if(!e){if(t.paused&&!this._systemPaused){t.play()}}}return this},getVolume:function getVolume(){return this.video?this.video.volume:1},setVolume:function setVolume(e){if(e===void 0){e=1}if(this.video){this.video.volume=n(e,0,1)}return this},getPlaybackRate:function getPlaybackRate(){return this.video?this.video.playbackRate:1},setPlaybackRate:function setPlaybackRate(e){if(this.video){this.video.playbackRate=e}return this},getLoop:function getLoop(){return this.video?this.video.loop:!1},setLoop:function setLoop(e){if(e===void 0){e=!0}if(this.video){this.video.loop=e}return this},isPlaying:function isPlaying(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function isPaused(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function saveTexture(e,t){if(t===void 0){t=!1}if(this.videoTexture){this.scene.sys.textures.renameTexture(this._key,e)}this._key=e;this.flipY=t;if(this.videoTextureSource){this.videoTextureSource.setFlipY(t)}return this.videoTexture},stop:function stop(){var e=this.video;if(e){var t=this._callbacks;for(var i in t){e.removeEventListener(i,t[i],!0)}e.pause()}if(this._retryID){window.clearTimeout(this._retryID)}this.emit(o.VIDEO_STOP,this);return this},removeVideoElement:function removeVideoElement(){var e=this.video;if(!e){return}if(e.parentNode){e.parentNode.removeChild(e)}while(e.hasChildNodes()){e.removeChild(e.firstChild)}e.removeAttribute("autoplay");e.removeAttribute("src");this.video=null},preDestroy:function preDestroy(){this.stop();if(this.removeVideoElementOnDestroy){this.removeVideoElement()}var e=this.scene.sys.game.events;e.off(s.PAUSE,this.globalPause,this);e.off(s.RESUME,this.globalResume,this);var t=this.scene.sys.sound;if(t){t.off(d.GLOBAL_MUTE,this.globalMute,this)}if(this._retryID){window.clearTimeout(this._retryID)}}});e.exports=g},function(e,t,i){var a=i(0),n=i(199),r=i(411),o=i(46),s=new a({initialize:function(e){this.type=o.POLYGON;this.area=0;this.points=[];if(e){this.setTo(e)}},contains:function contains(e,t){return n(this,e,t)},setTo:function setTo(e){this.area=0;this.points=[];if("string"==typeof e){e=e.split(" ")}if(!Array.isArray(e)){return this}for(var t,a=Number.MAX_VALUE,n=0;n<e.length;n++){t={x:0,y:0};if("number"==typeof e[n]||"string"==typeof e[n]){t.x=parseFloat(e[n]);t.y=parseFloat(e[n+1]);n++}else if(Array.isArray(e[n])){t.x=e[n][0];t.y=e[n][1]}else{t.x=e[n].x;t.y=e[n].y}this.points.push(t);if(t.y<a){a=t.y}}this.calculateArea(a);return this},calculateArea:function calculateArea(){if(3>this.points.length){this.area=0;return this.area}for(var e=0,t,a,n=0;n<this.points.length-1;n++){t=this.points[n];a=this.points[n+1];e+=(a.x-t.x)*(t.y+a.y)}t=this.points[0];a=this.points[this.points.length-1];e+=(t.x-a.x)*(a.y+t.y);this.area=.5*-e;return this.area},getPoints:function getPoints(e,t,i){return r(this,e,t,i)}});e.exports=s},function(e){e.exports=function Contains(e,t,a){for(var n=!1,r=-1,o=e.points.length-1;++r<e.points.length;o=r){var s=e.points[r].x,l=e.points[r].y,d=e.points[o].x,p=e.points[o].y;if((l<=a&&a<p||p<=a&&a<l)&&t<(d-s)*(a-l)/(p-l)+s){n=!n}}return n}},function(e,t,i){var a=i(0),n=i(130),r=new a({Extends:n,initialize:function(e,t,i,a,r){n.call(this,e,t,i,[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,0,0,1,1,1,0],[16777215,16777215,16777215,16777215,16777215,16777215],[1,1,1,1,1,1],a,r);this.resetPosition()},setFrame:function setFrame(e){this.frame=this.texture.get(e);if(!this.frame.cutWidth||!this.frame.cutHeight){this.renderFlags&=-9}else{this.renderFlags|=8}e=this.frame;this.uv[0]=e.u0;this.uv[1]=e.v0;this.uv[2]=e.u0;this.uv[3]=e.v1;this.uv[4]=e.u1;this.uv[5]=e.v1;this.uv[6]=e.u0;this.uv[7]=e.v0;this.uv[8]=e.u1;this.uv[9]=e.v1;this.uv[10]=e.u1;this.uv[11]=e.v0;return this},topLeftX:{get:function get(){return this.x+this.vertices[0]},set:function set(e){this.vertices[0]=e-this.x;this.vertices[6]=e-this.x}},topLeftY:{get:function get(){return this.y+this.vertices[1]},set:function set(e){this.vertices[1]=e-this.y;this.vertices[7]=e-this.y}},topRightX:{get:function get(){return this.x+this.vertices[10]},set:function set(e){this.vertices[10]=e-this.x}},topRightY:{get:function get(){return this.y+this.vertices[11]},set:function set(e){this.vertices[11]=e-this.y}},bottomLeftX:{get:function get(){return this.x+this.vertices[2]},set:function set(e){this.vertices[2]=e-this.x}},bottomLeftY:{get:function get(){return this.y+this.vertices[3]},set:function set(e){this.vertices[3]=e-this.y}},bottomRightX:{get:function get(){return this.x+this.vertices[4]},set:function set(e){this.vertices[4]=e-this.x;this.vertices[8]=e-this.x}},bottomRightY:{get:function get(){return this.y+this.vertices[5]},set:function set(e){this.vertices[5]=e-this.y;this.vertices[9]=e-this.y}},topLeftAlpha:{get:function get(){return this.alphas[0]},set:function set(e){this.alphas[0]=e;this.alphas[3]=e}},topRightAlpha:{get:function get(){return this.alphas[5]},set:function set(e){this.alphas[5]=e}},bottomLeftAlpha:{get:function get(){return this.alphas[1]},set:function set(e){this.alphas[1]=e}},bottomRightAlpha:{get:function get(){return this.alphas[2]},set:function set(e){this.alphas[2]=e;this.alphas[4]=e}},topLeftColor:{get:function get(){return this.colors[0]},set:function set(e){this.colors[0]=e;this.colors[3]=e}},topRightColor:{get:function get(){return this.colors[5]},set:function set(e){this.colors[5]=e}},bottomLeftColor:{get:function get(){return this.colors[1]},set:function set(e){this.colors[1]=e}},bottomRightColor:{get:function get(){return this.colors[2]},set:function set(e){this.colors[2]=e;this.colors[4]=e}},setTopLeft:function setTopLeft(e,t){this.topLeftX=e;this.topLeftY=t;return this},setTopRight:function setTopRight(e,t){this.topRightX=e;this.topRightY=t;return this},setBottomLeft:function setBottomLeft(e,t){this.bottomLeftX=e;this.bottomLeftY=t;return this},setBottomRight:function setBottomRight(e,t){this.bottomRightX=e;this.bottomRightY=t;return this},resetPosition:function resetPosition(){var e=this.x,t=this.y,i=Math.floor(this.width/2),a=Math.floor(this.height/2);this.setTopLeft(e-i,t-a);this.setTopRight(e+i,t-a);this.setBottomLeft(e-i,t+a);this.setBottomRight(e+i,t+a);return this},resetAlpha:function resetAlpha(){var e=this.alphas;e[0]=1;e[1]=1;e[2]=1;e[3]=1;e[4]=1;e[5]=1;return this},resetColors:function resetColors(){var e=this.colors;e[0]=16777215;e[1]=16777215;e[2]=16777215;e[3]=16777215;e[4]=16777215;e[5]=16777215;return this},reset:function reset(){this.resetPosition();this.resetAlpha();return this.resetColors()}});e.exports=r},function(e,t,i){var a=i(0),n=i(12),r=i(14),o=i(2),s=i(17),l=i(419),d=i(1068),p=i(32),c=new a({Extends:r,Mixins:[n.ComputedSize,n.Depth,n.GetBounds,n.Mask,n.Origin,n.ScrollFactor,n.Transform,n.Visible,d],initialize:function(e,t,i,a,n,o,s,l){if(i===void 0){i=0}if(a===void 0){a=0}if(n===void 0){n=128}if(o===void 0){o=128}r.call(this,e,"Shader");this.blendMode=-1;this.shader;var d=e.sys.renderer;this.renderer=d;this.gl=d.gl;this.vertexData=new ArrayBuffer(6*(2*Float32Array.BYTES_PER_ELEMENT));this.vertexBuffer=d.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW);this.program=null;this.bytes=new Uint8Array(this.vertexData);this.vertexViewF32=new Float32Array(this.vertexData);this._tempMatrix1=new p;this._tempMatrix2=new p;this._tempMatrix3=new p;this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.uniforms={};this.pointer=null;this._rendererWidth=d.width;this._rendererHeight=d.height;this._textureCount=0;this.framebuffer=null;this.glTexture=null;this.renderToTexture=!1;this.texture=null;this.setPosition(i,a);this.setSize(n,o);this.setOrigin(.5,.5);this.setShader(t,s,l)},willRender:function willRender(e){if(this.renderToTexture){return!0}else{return!(r.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&e.id)}},setRenderToTexture:function setRenderToTexture(e,t){if(t===void 0){t=!1}if(!this.renderToTexture){var i=this.width,a=this.height,n=this.renderer;this.glTexture=n.createTextureFromSource(null,i,a,0);this.glTexture.flipY=t;this.framebuffer=n.createFramebuffer(i,a,this.glTexture,!1);this._rendererWidth=i;this._rendererHeight=a;this.renderToTexture=!0;this.projOrtho(0,this.width,this.height,0);if(e){this.texture=this.scene.sys.textures.addGLTexture(e,this.glTexture,i,a)}}if(this.shader){var r=n.currentPipeline;n.clearPipeline();this.load();this.flush();n.rebindPipeline(r)}return this},setShader:function setShader(e,t,a){if(t===void 0){t=[]}if("string"==typeof e){var n=this.scene.sys.cache.shader;if(!n.has(e)){console.warn("Shader missing: "+e);return this}this.shader=n.get(e)}else{this.shader=e}var r=this.gl,o=this.renderer;if(this.program){r.deleteProgram(this.program)}var l=o.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);o.setMatrix4(l,"uViewMatrix",!1,this.viewMatrix);o.setMatrix4(l,"uProjectionMatrix",!1,this.projectionMatrix);o.setFloat2(l,"uResolution",this.width,this.height);this.program=l;var p=new Date,d={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[p.getFullYear(),p.getMonth(),p.getDate(),60*(60*p.getHours())+60*p.getMinutes()+p.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};if(this.shader.uniforms){this.uniforms=s(!0,{},this.shader.uniforms,d)}else{this.uniforms=d}for(var c=0;4>c;c++){if(t[c]){this.setSampler2D("iChannel"+c,t[c],c,a)}}this.initUniforms();this.projOrtho(0,this._rendererWidth,this._rendererHeight,0);return this},setPointer:function setPointer(e){this.pointer=e;return this},projOrtho:function projOrtho(e,t,i,a){var n=1e3,r=1/(e-t),o=1/(i-a),s=1/(-1000-n),l=this.projectionMatrix;l[0]=-2*r;l[5]=-2*o;l[10]=2*s;l[12]=(e+t)*r;l[13]=(a+i)*o;l[14]=(n+-1000)*s;var d=this.program;this.renderer.setMatrix4(d,"uProjectionMatrix",!1,this.projectionMatrix);this._rendererWidth=t;this._rendererHeight=i},initUniforms:function initUniforms(){var e=this.gl,t=this.renderer.glFuncMap,i=this.program;this._textureCount=0;for(var a in this.uniforms){var n=this.uniforms[a],r=n.type,o=t[r];n.uniformLocation=e.getUniformLocation(i,a);if("sampler2D"!==r){n.glMatrix=o.matrix;n.glValueLength=o.length;n.glFunc=o.func}}},setSampler2DBuffer:function setSampler2DBuffer(e,t,i,a,n,r){if(n===void 0){n=0}if(r===void 0){r={}}var o=this.uniforms[e];o.value=t;r.width=i;r.height=a;o.textureData=r;this._textureCount=n;this.initSampler2D(o);return this},setSampler2D:function setSampler2D(e,t,i,a){if(i===void 0){i=0}var n=this.scene.sys.textures;if(n.exists(t)){var r=n.getFrame(t),o=this.uniforms[e],s=r.source;o.textureKey=t;o.source=s.image;o.value=r.glTexture;if(s.isGLTexture){if(!a){a={}}a.width=s.width;a.height=s.height}if(a){o.textureData=a}this._textureCount=i;this.initSampler2D(o)}return this},setUniform:function setUniform(e,t){l(this.uniforms,e,t);return this},getUniform:function getUniform(e){return o(this.uniforms,e,null)},setChannel0:function setChannel0(e,t){return this.setSampler2D("iChannel0",e,0,t)},setChannel1:function setChannel1(e,t){return this.setSampler2D("iChannel1",e,1,t)},setChannel2:function setChannel2(e,t){return this.setSampler2D("iChannel2",e,2,t)},setChannel3:function setChannel3(e,t){return this.setSampler2D("iChannel3",e,3,t)},initSampler2D:function initSampler2D(e){if(!e.value){return}var t=this.gl;t.activeTexture(t.TEXTURE0+this._textureCount);t.bindTexture(t.TEXTURE_2D,e.value);var i=e.textureData;if(i){var a=t[o(i,"magFilter","linear").toUpperCase()],n=t[o(i,"minFilter","linear").toUpperCase()],r=t[o(i,"wrapS","repeat").toUpperCase()],s=t[o(i,"wrapT","repeat").toUpperCase()],l=t[o(i,"format","rgba").toUpperCase()];if(i.repeat){r=t.REPEAT;s=t.REPEAT}t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!i.flipY);if(i.width){var d=o(i,"width",512),p=o(i,"height",2),c=o(i,"border",0);t.texImage2D(t.TEXTURE_2D,0,l,d,p,c,l,t.UNSIGNED_BYTE,null)}else{t.texImage2D(t.TEXTURE_2D,0,l,t.RGBA,t.UNSIGNED_BYTE,e.source)}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,a);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,r);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,s)}this.renderer.setProgram(this.program);t.uniform1i(e.uniformLocation,this._textureCount);this._textureCount++},syncUniforms:function syncUniforms(){var e=this.gl,t=this.uniforms,i,a,n,r,o,s=0;for(var l in t){i=t[l];n=i.glFunc;a=i.glValueLength;r=i.uniformLocation;o=i.value;if(null===o){continue}if(1===a){if(i.glMatrix){n.call(e,r,i.transpose,o)}else{n.call(e,r,o)}}else if(2===a){n.call(e,r,o.x,o.y)}else if(3===a){n.call(e,r,o.x,o.y,o.z)}else if(4===a){n.call(e,r,o.x,o.y,o.z,o.w)}else if("sampler2D"===i.type){e.activeTexture(e["TEXTURE"+s]);e.bindTexture(e.TEXTURE_2D,o);e.uniform1i(r,s);s++}}},load:function load(e){var t=this.gl,i=this.width,a=this.height,n=this.renderer,r=this.program,o=this.viewMatrix;if(!this.renderToTexture){var s=-this._displayOriginX,l=-this._displayOriginY;o[0]=e[0];o[1]=e[1];o[4]=e[2];o[5]=e[3];o[8]=e[4];o[9]=e[5];o[12]=o[0]*s+o[4]*l;o[13]=o[1]*s+o[5]*l}t.useProgram(r);t.uniformMatrix4fv(t.getUniformLocation(r,"uViewMatrix"),!1,o);t.uniform2f(t.getUniformLocation(r,"uResolution"),this.width,this.height);var d=this.uniforms,p=d.resolution;p.value.x=i;p.value.y=a;d.time.value=n.game.loop.getDuration();var c=this.pointer;if(c){var u=d.mouse,g=c.x/i,h=1-c.y/a;u.value.x=g.toFixed(2);u.value.y=h.toFixed(2)}this.syncUniforms()},flush:function flush(){var e=this.width,t=this.height,i=this.program,a=this.gl,n=this.vertexBuffer,r=this.renderer,o=2*Float32Array.BYTES_PER_ELEMENT;if(this.renderToTexture){r.setFramebuffer(this.framebuffer);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT)}a.bindBuffer(a.ARRAY_BUFFER,n);var s=a.getAttribLocation(i,"inPosition");if(-1!==s){a.enableVertexAttribArray(s);a.vertexAttribPointer(s,2,a.FLOAT,!1,o,0)}var l=this.vertexViewF32;l[3]=t;l[4]=e;l[5]=t;l[8]=e;l[9]=t;l[10]=e;a.bufferSubData(a.ARRAY_BUFFER,0,this.bytes.subarray(0,6*o));a.drawArrays(a.TRIANGLES,0,6);if(this.renderToTexture){r.setFramebuffer(null,!1)}},setAlpha:function setAlpha(){},setBlendMode:function setBlendMode(){},preDestroy:function preDestroy(){var e=this.gl;e.deleteProgram(this.program);e.deleteBuffer(this.vertexBuffer);if(this.renderToTexture){this.renderer.deleteFramebuffer(this.framebuffer);this.texture.destroy();this.framebuffer=null;this.glTexture=null;this.texture=null}}});e.exports=c},function(e,t,i){var a=i(53);e.exports=function CircleToCircle(e,t){return a(e.x,e.y,t.x,t.y)<=e.radius+t.radius}},function(e){e.exports=function CircleToRectangle(e,t){var i=t.width/2,a=t.height/2,n=Math.abs(e.x-t.x-i),r=Math.abs(e.y-t.y-a),o=i+e.radius,s=a+e.radius;if(n>o||r>s){return!1}else if(n<=i||r<=a){return!0}else{var l=n-i,d=r-a,p=e.radius*e.radius;return l*l+d*d<=p}}},function(e,t,i){var a=i(4),n=i(205);e.exports=function GetLineToCircle(e,t,i){if(i===void 0){i=[]}if(n(e,t)){var r=e.x1,o=e.y1,s=e.x2,l=e.y2,d=t.x,p=t.y,c=t.radius,u=s-r,g=l-o,h=r-d,m=o-p,f=u*u+g*g,T=2*(u*h+g*m),v=T*T-4*f*(h*h+m*m-c*c),b,E;if(0===v){var S=-T/(2*f);b=r+S*u;E=o+S*g;if(0<=S&&1>=S){i.push(new a(b,E))}}else if(0<v){var _=(-T-Math.sqrt(v))/(2*f);b=r+_*u;E=o+_*g;if(0<=_&&1>=_){i.push(new a(b,E))}var A=(-T+Math.sqrt(v))/(2*f);b=r+A*u;E=o+A*g;if(0<=A&&1>=A){i.push(new a(b,E))}}}return i}},function(e,t,i){var a=i(55),n=i(4),r=new n;e.exports=function LineToCircle(e,t,i){if(i===void 0){i=r}if(a(t,e.x1,e.y1)){i.x=e.x1;i.y=e.y1;return!0}if(a(t,e.x2,e.y2)){i.x=e.x2;i.y=e.y2;return!0}var n=e.x2-e.x1,o=e.y2-e.y1,s=t.x-e.x1,l=t.y-e.y1,d=n*n+o*o,p=n,c=o;if(0<d){var u=(s*n+l*o)/d;p*=u;c*=u}i.x=e.x1+p;i.y=e.y1+c;var g=p*p+c*c;return g<=d&&0<=p*n+c*o&&a(t,i.x,i.y)}},function(e,t,i){var a=i(4),n=i(84),r=i(424);e.exports=function GetLineToRectangle(e,t,o){if(o===void 0){o=[]}if(r(e,t)){for(var s=t.getLineA(),l=t.getLineB(),d=t.getLineC(),p=t.getLineD(),c=[new a,new a,new a,new a],u=[n(s,e,c[0]),n(l,e,c[1]),n(d,e,c[2]),n(p,e,c[3])],g=0;4>g;g++){if(u[g]){o.push(c[g])}}}return o}},function(e){e.exports=function ContainsArray(e,t,a,n){if(a===void 0){a=!1}if(n===void 0){n=[]}for(var r=e.x3-e.x1,o=e.y3-e.y1,s=e.x2-e.x1,l=e.y2-e.y1,d=r*r+o*o,p=r*s+o*l,c=s*s+l*l,g=d*c-p*p,h=0===g?0:1/g,m,y,x,f,T,b,E=e.x1,S=e.y1,_=0;_<t.length;_++){x=t[_].x-E;f=t[_].y-S;T=r*x+o*f;b=s*x+l*f;m=(c*T-p*b)*h;y=(d*b-p*T)*h;if(0<=m&&0<=y&&1>m+y){n.push({x:t[_].x,y:t[_].y});if(a){break}}}return n}},function(e){e.exports=function RotateAroundXY(e,t,i,a){var n=Math.cos(a),r=Math.sin(a),o=e.x1-t,s=e.y1-i;e.x1=o*n-s*r+t;e.y1=o*r+s*n+i;o=e.x2-t;s=e.y2-i;e.x2=o*n-s*r+t;e.y2=o*r+s*n+i;return e}},function(e){e.exports=function GetAspectRatio(e){return 0===e.height?NaN:e.width/e.height}},function(e){e.exports=function RotateAroundXY(e,t,i,a){var n=Math.cos(a),r=Math.sin(a),o=e.x1-t,s=e.y1-i;e.x1=o*n-s*r+t;e.y1=o*r+s*n+i;o=e.x2-t;s=e.y2-i;e.x2=o*n-s*r+t;e.y2=o*r+s*n+i;o=e.x3-t;s=e.y3-i;e.x3=o*n-s*r+t;e.y3=o*r+s*n+i;return e}},function(e,t,i){e.exports={BUTTON_DOWN:i(1189),BUTTON_UP:i(1190),CONNECTED:i(1191),DISCONNECTED:i(1192),GAMEPAD_BUTTON_DOWN:i(1193),GAMEPAD_BUTTON_UP:i(1194)}},function(e,t,i){var a=i(17),n=i(135);e.exports=function MergeXHRSettings(e,t){var i=e===void 0?n():a({},e);if(t){for(var r in t){if(t[r]!==void 0){i[r]=t[r]}}}return i}},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=i(358),p=new a({Extends:r,initialize:function(e,t,i,a){var n="xml";if(l(t)){var o=t;t=s(o,"key");i=s(o,"url");a=s(o,"xhrSettings");n=s(o,"extension",n)}var d={type:"xml",cache:e.cacheManager.xml,extension:n,responseType:"text",key:t,url:i,xhrSettings:a};r.call(this,e,d)},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;this.data=d(this.xhrLoader.responseText);if(this.data){this.onProcessComplete()}else{console.warn("Invalid XMLFile: "+this.key);this.onProcessError()}}});o.register("xml",function(e,t,a){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new p(this,e[n]))}}else{this.addFile(new p(this,e,t,a))}return this});e.exports=p},function(e,t,i){e.exports={Acceleration:i(1249),Angular:i(1250),Bounce:i(1251),Debug:i(1252),Drag:i(1253),Enable:i(1254),Friction:i(1255),Gravity:i(1256),Immovable:i(1257),Mass:i(1258),Size:i(1259),Velocity:i(1260)}},function(e,t,i){e.exports={COLLIDE:i(1262),OVERLAP:i(1263),PAUSE:i(1264),RESUME:i(1265),TILE_COLLIDE:i(1266),TILE_OVERLAP:i(1267),WORLD_BOUNDS:i(1268),WORLD_STEP:i(1269)}},function(e,t,i){var a={};e.exports=a;var n=i(86),r=i(101),o=i(236),s=i(102),l=i(507),d=i(37);(function(){a._warming=.4;a._torqueDampen=1;a._minLength=1e-6;a.create=function(e){var t=e;if(t.bodyA&&!t.pointA)t.pointA={x:0,y:0};if(t.bodyB&&!t.pointB)t.pointB={x:0,y:0};var i=t.bodyA?r.add(t.bodyA.position,t.pointA):t.pointA,a=t.bodyB?r.add(t.bodyB.position,t.pointB):t.pointB,n=r.magnitude(r.sub(i,a));t.length="undefined"!=typeof t.length?t.length:n;t.id=t.id||d.nextId();t.label=t.label||"Constraint";t.type="constraint";t.stiffness=t.stiffness||(0<t.length?1:.7);t.damping=t.damping||0;t.angularStiffness=t.angularStiffness||0;t.angleA=t.bodyA?t.bodyA.angle:t.angleA;t.angleB=t.bodyB?t.bodyB.angle:t.angleB;t.plugin={};var o={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};if(0===t.length&&.1<t.stiffness){o.type="pin";o.anchors=!1}else if(.9>t.stiffness){o.type="spring"}t.render=d.extend(o,t.render);return t};a.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var a=e[t],n=a.constraintImpulse;if(a.isStatic||0===n.x&&0===n.y&&0===n.angle){continue}a.position.x+=n.x;a.position.y+=n.y;a.angle+=n.angle}};a.solveAll=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n],o=!r.bodyA||r.bodyA&&r.bodyA.isStatic,s=!r.bodyB||r.bodyB&&r.bodyB.isStatic;if(o||s){a.solve(e[n],t)}}for(n=0;n<e.length;n+=1){r=e[n];o=!r.bodyA||r.bodyA&&r.bodyA.isStatic;s=!r.bodyB||r.bodyB&&r.bodyB.isStatic;if(!o&&!s){a.solve(e[n],t)}}};a.solve=function(e,t){var i=e.bodyA,n=e.bodyB,o=e.pointA,s=e.pointB;if(!i&&!n)return;if(i&&!i.isStatic){r.rotate(o,i.angle-e.angleA,o);e.angleA=i.angle}if(n&&!n.isStatic){r.rotate(s,n.angle-e.angleB,s);e.angleB=n.angle}var l=o,d=s;if(i)l=r.add(i.position,o);if(n)d=r.add(n.position,s);if(!l||!d)return;var p=r.sub(l,d),c=r.magnitude(p);if(c<a._minLength){c=a._minLength}var u=(c-e.length)/c,g=1>e.stiffness?e.stiffness*t:e.stiffness,h=r.mult(p,u*g),m=(i?i.inverseMass:0)+(n?n.inverseMass:0),y=(i?i.inverseInertia:0)+(n?n.inverseInertia:0),x=m+y,f,T,v,b,E;if(e.damping){var S=r.create();v=r.div(p,c);E=r.sub(n&&r.sub(n.position,n.positionPrev)||S,i&&r.sub(i.position,i.positionPrev)||S);b=r.dot(v,E)}if(i&&!i.isStatic){T=i.inverseMass/m;i.constraintImpulse.x-=h.x*T;i.constraintImpulse.y-=h.y*T;i.position.x-=h.x*T;i.position.y-=h.y*T;if(e.damping){i.positionPrev.x-=e.damping*v.x*b*T;i.positionPrev.y-=e.damping*v.y*b*T}f=r.cross(o,h)/x*a._torqueDampen*i.inverseInertia*(1-e.angularStiffness);i.constraintImpulse.angle-=f;i.angle-=f}if(n&&!n.isStatic){T=n.inverseMass/m;n.constraintImpulse.x+=h.x*T;n.constraintImpulse.y+=h.y*T;n.position.x+=h.x*T;n.position.y+=h.y*T;if(e.damping){n.positionPrev.x+=e.damping*v.x*b*T;n.positionPrev.y+=e.damping*v.y*b*T}f=r.cross(s,h)/x*a._torqueDampen*n.inverseInertia*(1-e.angularStiffness);n.constraintImpulse.angle+=f;n.angle+=f}};a.postSolveAll=function(e){for(var t=0;t<e.length;t++){var d=e[t],p=d.constraintImpulse;if(d.isStatic||0===p.x&&0===p.y&&0===p.angle){continue}o.set(d,!1);for(var c=0,u;c<d.parts.length;c++){u=d.parts[c];n.translate(u.vertices,p);if(0<c){u.position.x+=p.x;u.position.y+=p.y}if(0!==p.angle){n.rotate(u.vertices,p.angle,d.position);l.rotate(u.axes,p.angle);if(0<c){r.rotateAbout(u.position,p.angle,d.position,u.position)}}s.update(u.bounds,u.vertices,d.velocity)}p.angle*=a._warming;p.x*=a._warming;p.y*=a._warming}};a.pointAWorld=function(e){return{x:(e.bodyA?e.bodyA.position.x:0)+e.pointA.x,y:(e.bodyA?e.bodyA.position.y:0)+e.pointA.y}};a.pointBWorld=function(e){return{x:(e.bodyB?e.bodyB.position.x:0)+e.pointB.x,y:(e.bodyB?e.bodyB.position.y:0)+e.pointB.y}}})()},function(e,t,i){var a=i(138);e.exports=function CalculateFacesAt(e,t,i){var n=a(e,t,!0,i),r=a(e,t-1,!0,i),o=a(e,t+1,!0,i),s=a(e-1,t,!0,i),l=a(e+1,t,!0,i),d=n&&n.collides;if(d){n.faceTop=!0;n.faceBottom=!0;n.faceLeft=!0;n.faceRight=!0}if(r&&r.collides){if(d){n.faceTop=!1}r.faceBottom=!d}if(o&&o.collides){if(d){n.faceBottom=!1}o.faceTop=!d}if(s&&s.collides){if(d){n.faceLeft=!1}s.faceRight=!d}if(l&&l.collides){if(d){n.faceRight=!1}l.faceLeft=!d}if(n&&!n.collides){n.resetFaces()}return n}},function(e,t,i){var a=i(74),n=i(103),r=i(217),o=i(73);e.exports=function PutTileAt(e,t,i,s,l){if(!n(t,i,l)){return null}if(s===void 0){s=!0}var d=l.data[i][t],p=d&&d.collides;if(e instanceof a){if(null===l.data[i][t]){l.data[i][t]=new a(l,e.index,t,i,e.width,e.height)}l.data[i][t].copy(e)}else{var c=e;if(null===l.data[i][t]){l.data[i][t]=new a(l,c,t,i,l.tileWidth,l.tileHeight)}else{l.data[i][t].index=c}}var u=l.data[i][t],g=-1!==l.collideIndexes.indexOf(u.index);o(u,g);if(s&&p!==u.collides){r(t,i,l)}return u}},function(e){e.exports=function SetLayerCollisionIndex(e,t,i){var a=i.collideIndexes.indexOf(e);if(t&&-1===a){i.collideIndexes.push(e)}else if(!t&&-1!==a){i.collideIndexes.splice(a,1)}}},function(e,t,i){var a=i(31),n=i(104),r=i(105),o=i(74);e.exports=function Parse2DArray(e,t,i,s,l){for(var d=new n({tileWidth:i,tileHeight:s}),p=new r({name:e,tileWidth:i,tileHeight:s,format:a.ARRAY_2D,layers:[d]}),c=[],u=t.length,g=0,h=0;h<t.length;h++){c[h]=[];for(var m=t[h],f=0,T;f<m.length;f++){T=parseInt(m[f],10);if(isNaN(T)||-1===T){c[h][f]=l?null:new o(d,-1,f,h,i,s)}else{c[h][f]=new o(d,T,f,h,i,s)}}if(0===g){g=m.length}}p.width=d.width=g;p.height=d.height=u;p.widthInPixels=d.widthInPixels=g*i;p.heightInPixels=d.heightInPixels=u*s;d.data=c;return p}},function(e){var t=1073741824,i=536870912;e.exports=function ParseGID(e){var a=!!(e&2147483648),n=!!(e&t),r=!!(e&i);e=e&~(2147483648|t|i);var o=0,s=!1;if(a&&n&&r){o=Math.PI/2;s=!0}else if(a&&n&&!r){o=Math.PI;s=!1}else if(a&&!n&&r){o=Math.PI/2;s=!1}else if(a&&!n&&!r){o=0;s=!0}else if(!a&&n&&r){o=3*Math.PI/2;s=!1}else if(!a&&n&&!r){o=Math.PI;s=!0}else if(!a&&!n&&r){o=3*Math.PI/2;s=!0}else if(!a&&!n&&!r){o=0;s=!1}return{gid:e,flippedHorizontal:a,flippedVertical:n,flippedAntiDiagonal:r,rotation:o,flipped:s}}},function(e,t,i){var a=i(2);e.exports=function CreateGroupLayer(e,t,i){if(!t){return{i:0,layers:e.layers,name:"",opacity:1,visible:!0,x:0,y:0}}var n=t.x+a(t,"startx",0)*e.tilewidth+a(t,"offsetx",0),r=t.y+a(t,"starty",0)*e.tileheight+a(t,"offsety",0);return{i:0,layers:t.layers,name:i.name+t.name+"/",opacity:i.opacity*t.opacity,visible:i.visible&&t.visible,x:i.x+n,y:i.y+r}}},function(e,t,i){var a=i(480),n=i(221),r=function(e){return{x:e.x,y:e.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"];e.exports=function ParseObject(e,t,i){if(t===void 0){t=0}if(i===void 0){i=0}var s=a(e,o);s.x+=t;s.y+=i;if(e.gid){var l=n(e.gid);s.gid=l.gid;s.flippedHorizontal=l.flippedHorizontal;s.flippedVertical=l.flippedVertical;s.flippedAntiDiagonal=l.flippedAntiDiagonal}else if(e.polyline){s.polyline=e.polyline.map(r)}else if(e.polygon){s.polygon=e.polygon.map(r)}else if(e.ellipse){s.ellipse=e.ellipse;s.width=e.width;s.height=e.height}else if(e.text){s.width=e.width;s.height=e.height;s.text=e.text}else{s.rectangle=!0;s.width=e.width;s.height=e.height}return s}},function(e,t,i){var a=i(31),n=i(105),r=i(472),o=i(488);e.exports=function ParseToTilemap(e,t,i,s,l,d,p,c){if(i===void 0){i=32}if(s===void 0){s=32}if(l===void 0){l=10}if(d===void 0){d=10}if(c===void 0){c=!1}var u=null;if(Array.isArray(p)){var g=t!==void 0?t:"map";u=r(g,a.ARRAY_2D,p,i,s,c)}else if(t!==void 0){var h=e.cache.tilemap.get(t);if(!h){console.warn("No map data found for key "+t)}else{u=r(t,h.format,h.data,i,s,c)}}if(null===u){u=new n({tileWidth:i,tileHeight:s,width:l,height:d})}return new o(e,u)}},function(e,t,i){var a=i(6);e.exports=function GetTargets(e){var t=a(e,"targets",null);if(null===t){return t}if("function"==typeof t){t=t.call()}if(!Array.isArray(t)){t=[t]}return t}},function(e){function t(e){return!!e.getActive&&"function"==typeof e.getActive}function i(e){return!!e.getStart&&"function"==typeof e.getStart}function a(e){return!!e.getEnd&&"function"==typeof e.getEnd}function n(e){return i(e)||a(e)||t(e)}var r=function(e,o){var s,l=function(e,t,i){return i},d=function(e,t,i){return i},p=null,c=_typeof(o);if("number"===c){l=function(){return o}}else if("string"===c){var u=o[0],g=parseFloat(o.substr(2));switch(u){case"+":l=function(e,t,i){return i+g};break;case"-":l=function(e,t,i){return i-g};break;case"*":l=function(e,t,i){return i*g};break;case"/":l=function(e,t,i){return i/g};break;default:l=function(){return parseFloat(o)};}}else if("function"===c){l=o}else if("object"===c){if(n(o)){if(t(o)){p=o.getActive}if(a(o)){l=o.getEnd}if(i(o)){d=o.getStart}}else if(o.hasOwnProperty("value")){s=r(e,o.value)}else{var h=o.hasOwnProperty("to"),m=o.hasOwnProperty("from"),y=o.hasOwnProperty("start");if(h&&(m||y)){s=r(e,o.to);if(y){var x=r(e,o.start);s.getActive=x.getEnd}if(m){var f=r(e,o.from);s.getStart=f.getEnd}}}}if(!s){s={getActive:p,getEnd:l,getStart:d}}return s};e.exports=r},function(e){e.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(e,t,i){var a=i(0),n=i(9),r=i(229),o=i(16),s=i(5),l=i(89),d=i(13),p=new a({Extends:n,initialize:function(e,t,i){n.call(this);this.parent=e;this.parentIsTimeline=e.hasOwnProperty("isTimeline");this.data=t;this.totalData=t.length;this.targets=i;this.totalTargets=i.length;this.useFrames=!1;this.timeScale=1;this.loop=0;this.loopDelay=0;this.loopCounter=0;this.startDelay=0;this.hasStarted=!1;this.isSeeking=!1;this.completeDelay=0;this.countdown=0;this.offset=0;this.calculatedOffset=0;this.state=l.PENDING_ADD;this._pausedState=l.INIT;this.paused=!1;this.elapsed=0;this.totalElapsed=0;this.duration=0;this.progress=0;this.totalDuration=0;this.totalProgress=0;this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onUpdate:null,onYoyo:null};this.callbackScope},getValue:function getValue(e){if(e===void 0){e=0}return this.data[e].current},setTimeScale:function setTimeScale(e){this.timeScale=e;return this},getTimeScale:function getTimeScale(){return this.timeScale},isPlaying:function isPlaying(){return this.state===l.ACTIVE},isPaused:function isPaused(){return this.state===l.PAUSED},hasTarget:function hasTarget(e){return-1!==this.targets.indexOf(e)},updateTo:function updateTo(e,t,a){if(a===void 0){a=!1}for(var n=0,r;n<this.totalData;n++){r=this.data[n];if(r.key===e){r.end=t;if(a){r.start=r.current}}}return this},restart:function restart(){this.elapsed=0;this.progress=0;this.totalElapsed=0;this.totalProgress=0;if(this.state===l.ACTIVE){return this.seek(0)}else if(this.state===l.REMOVED){this.seek(0);this.parent.makeActive(this);return this}else if(this.state===l.PENDING_ADD){return this}else{return this.play()}},calcDuration:function calcDuration(){for(var e=0,t=d.MAX_SAFE_INTEGER,a=this.data,n=0,r;n<this.totalData;n++){r=a[n];r.t1=r.duration+r.hold;if(r.yoyo){r.t1+=r.duration}r.t2=r.t1+r.repeatDelay;r.totalDuration=r.delay+r.t1;if(-1===r.repeat){r.totalDuration+=999999999999*r.t2}else if(0<r.repeat){r.totalDuration+=r.t2*r.repeat}if(r.totalDuration>e){e=r.totalDuration}if(r.delay<t){t=r.delay}}this.duration=Math.max(e,.001);this.loopCounter=-1===this.loop?999999999999:this.loop;if(0<this.loopCounter){this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter}else{this.totalDuration=this.duration+this.completeDelay}this.startDelay=t},init:function init(){if(this.paused&&!this.parentIsTimeline){this.state=l.PENDING_ADD;this._pausedState=l.INIT;return!1}for(var e=this.data,t=this.totalTargets,a=0;a<this.totalData;a++){var n=e[a],r=n.target,o=n.gen,s=n.key,d=n.index;n.delay=o.delay(r,s,0,d,t,this);n.duration=Math.max(o.duration(r,s,0,d,t,this),.001);n.hold=o.hold(r,s,0,d,t,this);n.repeat=o.repeat(r,s,0,d,t,this);n.repeatDelay=o.repeatDelay(r,s,0,d,t,this)}this.calcDuration();this.progress=0;this.totalProgress=0;this.elapsed=0;this.totalElapsed=0;this.state=l.INIT;return!0},makeActive:function makeActive(){this.parent.makeActive(this);this.dispatchTweenEvent(r.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function nextState(){if(0<this.loopCounter){this.elapsed=0;this.progress=0;this.loopCounter--;this.resetTweenData(!0);if(0<this.loopDelay){this.countdown=this.loopDelay;this.state=l.LOOP_DELAY}else{this.state=l.ACTIVE;this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop)}}else if(0<this.completeDelay){this.state=l.COMPLETE_DELAY;this.countdown=this.completeDelay}else{this.state=l.PENDING_REMOVE;this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete)}},pause:function pause(){if(this.state===l.PAUSED){return this}this.paused=!0;this._pausedState=this.state;this.state=l.PAUSED;return this},play:function play(e){if(e===void 0){e=!1}var t=this.state;if(t===l.INIT&&!this.parentIsTimeline){this.resetTweenData(!1);this.state=l.ACTIVE;return this}else if(t===l.ACTIVE||t===l.PENDING_ADD&&this._pausedState===l.PENDING_ADD){return this}else if(!this.parentIsTimeline&&(t===l.PENDING_REMOVE||t===l.REMOVED)){this.seek(0);this.parent.makeActive(this);return this}if(this.parentIsTimeline){this.resetTweenData(e);if(0===this.calculatedOffset){this.state=l.ACTIVE}else{this.countdown=this.calculatedOffset;this.state=l.OFFSET_DELAY}}else if(this.paused){this.paused=!1;this.makeActive()}else{this.resetTweenData(e);this.state=l.ACTIVE;this.makeActive()}return this},resetTweenData:function resetTweenData(e){for(var t=this.data,a=this.totalData,n=this.totalTargets,r=0;r<a;r++){var o=t[r],s=o.target,d=o.key,p=o.index;o.progress=0;o.elapsed=0;o.repeatCounter=-1===o.repeat?999999999999:o.repeat;if(e){o.start=o.getStartValue(s,d,o.start,p,n,this);o.end=o.getEndValue(s,d,o.end,p,n,this);o.current=o.start;o.state=l.PLAYING_FORWARD}else{o.state=l.PENDING_RENDER}if(0<o.delay){o.elapsed=o.delay;o.state=l.DELAY}if(o.getActiveValue){s[d]=o.getActiveValue(o.target,o.key,o.start)}}},resume:function resume(){if(this.state===l.PAUSED){this.paused=!1;this.state=this._pausedState}else{this.play()}return this},seek:function seek(e,t){if(t===void 0){t=16.6}if(36e5<=this.totalDuration){console.warn("Tween.seek duration too long");return this}if(this.state===l.REMOVED){this.makeActive()}this.elapsed=0;this.progress=0;this.totalElapsed=0;this.totalProgress=0;for(var a=this.data,n=this.totalTargets,r=0;r<this.totalData;r++){var o=a[r],s=o.target,d=o.gen,p=o.key,c=o.index;o.progress=0;o.elapsed=0;o.repeatCounter=-1===o.repeat?999999999999:o.repeat;o.delay=d.delay(s,p,0,c,n,this);o.duration=Math.max(d.duration(s,p,0,c,n,this),.001);o.hold=d.hold(s,p,0,c,n,this);o.repeat=d.repeat(s,p,0,c,n,this);o.repeatDelay=d.repeatDelay(s,p,0,c,n,this);o.current=o.start;o.state=l.PLAYING_FORWARD;this.updateTweenData(this,o,0,c,n);if(0<o.delay){o.elapsed=o.delay;o.state=l.DELAY}}this.calcDuration();var u=!1;if(this.state===l.PAUSED){u=!0;this.state=l.ACTIVE}this.isSeeking=!0;do{this.update(0,t)}while(this.totalProgress<e);this.isSeeking=!1;if(u){this.state=l.PAUSED}return this},setCallback:function setCallback(e,t,i,a){this.callbacks[e]={func:t,scope:a,params:i};return this},complete:function complete(e){if(e===void 0){e=0}if(e){this.state=l.COMPLETE_DELAY;this.countdown=e}else{this.state=l.PENDING_REMOVE;this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete)}return this},remove:function remove(){this.parent.remove(this);return this},stop:function stop(e){if(this.state===l.ACTIVE){if(e!==void 0){this.seek(e)}}if(this.state!==l.REMOVED){if(this.state===l.PAUSED||this.state===l.PENDING_ADD){if(this.parentIsTimeline){this.parent.manager._destroy.push(this);this.parent.manager._toProcess++}else{this.parent._destroy.push(this);this.parent._toProcess++}}this.removeAllListeners();this.state=l.PENDING_REMOVE}return this},update:function update(e,t){if(this.state===l.PAUSED){return!1}if(this.useFrames){t=1*this.parent.timeScale}t*=this.timeScale;this.elapsed+=t;this.progress=Math.min(this.elapsed/this.duration,1);this.totalElapsed+=t;this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1);switch(this.state){case l.ACTIVE:if(!this.hasStarted&&!this.isSeeking){this.startDelay-=t;if(0>=this.startDelay){this.hasStarted=!0;this.dispatchTweenEvent(r.TWEEN_START,this.callbacks.onStart)}}for(var a=!1,n=0,o;n<this.totalData;n++){o=this.data[n];if(this.updateTweenData(this,o,t)){a=!0}}if(!a){this.nextState()}break;case l.LOOP_DELAY:this.countdown-=t;if(0>=this.countdown){this.state=l.ACTIVE;this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop)}break;case l.OFFSET_DELAY:this.countdown-=t;if(0>=this.countdown){this.state=l.ACTIVE}break;case l.COMPLETE_DELAY:this.countdown-=t;if(0>=this.countdown){this.state=l.PENDING_REMOVE;this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete)}break;}return this.state===l.PENDING_REMOVE},dispatchTweenDataEvent:function dispatchTweenDataEvent(e,t,i){if(!this.isSeeking){this.emit(e,this,i.key,i.target,i.current,i.previous);if(t){t.params[1]=i.target;t.func.apply(t.scope,t.params)}}},dispatchTweenEvent:function dispatchTweenEvent(e,t){if(!this.isSeeking){this.emit(e,this,this.targets);if(t){t.params[1]=this.targets;t.func.apply(t.scope,t.params)}}},setStateFromEnd:function setStateFromEnd(e,t,i){if(t.yoyo){t.elapsed=i;t.progress=i/t.duration;if(t.flipX){t.target.toggleFlipX()}if(t.flipY){t.target.toggleFlipY()}this.dispatchTweenDataEvent(r.TWEEN_YOYO,e.callbacks.onYoyo,t);t.start=t.getStartValue(t.target,t.key,t.start,t.index,e.totalTargets,e);return l.PLAYING_BACKWARD}else if(0<t.repeatCounter){t.repeatCounter--;t.elapsed=i;t.progress=i/t.duration;if(t.flipX){t.target.toggleFlipX()}if(t.flipY){t.target.toggleFlipY()}t.start=t.getStartValue(t.target,t.key,t.start,t.index,e.totalTargets,e);t.end=t.getEndValue(t.target,t.key,t.start,t.index,e.totalTargets,e);if(0<t.repeatDelay){t.elapsed=t.repeatDelay-i;t.current=t.start;t.target[t.key]=t.current;return l.REPEAT_DELAY}else{this.dispatchTweenDataEvent(r.TWEEN_REPEAT,e.callbacks.onRepeat,t);return l.PLAYING_FORWARD}}return l.COMPLETE},setStateFromStart:function setStateFromStart(e,t,i){if(0<t.repeatCounter){t.repeatCounter--;t.elapsed=i;t.progress=i/t.duration;if(t.flipX){t.target.toggleFlipX()}if(t.flipY){t.target.toggleFlipY()}t.end=t.getEndValue(t.target,t.key,t.start,t.index,e.totalTargets,e);if(0<t.repeatDelay){t.elapsed=t.repeatDelay-i;t.current=t.start;t.target[t.key]=t.current;return l.REPEAT_DELAY}else{this.dispatchTweenDataEvent(r.TWEEN_REPEAT,e.callbacks.onRepeat,t);return l.PLAYING_FORWARD}}return l.COMPLETE},updateTweenData:function updateTweenData(e,t,i){var a=t.target;switch(t.state){case l.PLAYING_FORWARD:case l.PLAYING_BACKWARD:if(!a){t.state=l.COMPLETE;break}var n=t.elapsed,o=t.duration,s=0;n+=i;if(n>o){s=n-o;n=o}var d=t.state===l.PLAYING_FORWARD,p=n/o;t.elapsed=n;t.progress=p;t.previous=t.current;if(1===p){if(d){t.current=t.end;a[t.key]=t.end;if(0<t.hold){t.elapsed=t.hold-s;t.state=l.HOLD_DELAY}else{t.state=this.setStateFromEnd(e,t,s)}}else{t.current=t.start;a[t.key]=t.start;t.state=this.setStateFromStart(e,t,s)}}else{var c=d?t.ease(p):t.ease(1-p);t.current=t.start+(t.end-t.start)*c;a[t.key]=t.current}this.dispatchTweenDataEvent(r.TWEEN_UPDATE,e.callbacks.onUpdate,t);break;case l.DELAY:t.elapsed-=i;if(0>=t.elapsed){t.elapsed=Math.abs(t.elapsed);t.state=l.PENDING_RENDER}break;case l.REPEAT_DELAY:t.elapsed-=i;if(0>=t.elapsed){t.elapsed=Math.abs(t.elapsed);t.state=l.PLAYING_FORWARD;this.dispatchTweenDataEvent(r.TWEEN_REPEAT,e.callbacks.onRepeat,t)}break;case l.HOLD_DELAY:t.elapsed-=i;if(0>=t.elapsed){t.state=this.setStateFromEnd(e,t,Math.abs(t.elapsed))}break;case l.PENDING_RENDER:if(a){t.start=t.getStartValue(a,t.key,a[t.key],t.index,e.totalTargets,e);t.end=t.getEndValue(a,t.key,t.start,t.index,e.totalTargets,e);t.current=t.start;a[t.key]=t.start;t.state=l.PLAYING_FORWARD}else{t.state=l.COMPLETE}break;}return t.state!==l.COMPLETE}});p.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onUpdate","onYoyo"];s.register("tween",function(e){return this.scene.sys.tweens.add(e)});o.register("tween",function(e){return this.scene.sys.tweens.create(e)});e.exports=p},function(e,t,i){e.exports={TIMELINE_COMPLETE:i(1346),TIMELINE_LOOP:i(1347),TIMELINE_PAUSE:i(1348),TIMELINE_RESUME:i(1349),TIMELINE_START:i(1350),TIMELINE_UPDATE:i(1351),TWEEN_ACTIVE:i(1352),TWEEN_COMPLETE:i(1353),TWEEN_LOOP:i(1354),TWEEN_REPEAT:i(1355),TWEEN_START:i(1356),TWEEN_UPDATE:i(1357),TWEEN_YOYO:i(1358)}},function(e){e.exports=function TweenData(e,t,i,a,n,r,o,s,l,d,p,c,u,g,h){return{target:e,index:t,key:i,getActiveValue:r,getEndValue:a,getStartValue:n,ease:o,duration:0,totalDuration:0,delay:0,yoyo:d,hold:0,repeat:0,repeatDelay:0,flipX:g,flipY:h,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:s,duration:l,hold:p,repeat:c,repeatDelay:u},state:0}}},function(e){e.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(e,t,i){var a=i(58);e.exports=function Wrap(e){return a(e,-Math.PI,Math.PI)}},function(e,t,i){var a=i(58);e.exports=function WrapDegrees(e){return a(e,-180,180)}},function(e,t,i){var a=i(0),n=i(10),r=new a({initialize:function(e){this.name="WebGLPipeline";this.game=e.game;this.view=e.game.canvas;this.resolution=1;this.width=0;this.height=0;this.gl=e.gl;this.vertexCount=0;this.vertexCapacity=e.vertexCapacity;this.renderer=e.renderer;this.vertexData=e.vertices?e.vertices:new ArrayBuffer(e.vertexCapacity*e.vertexSize);this.vertexBuffer=this.renderer.createVertexBuffer(e.vertices?e.vertices:this.vertexData.byteLength,this.gl.STREAM_DRAW);this.program=this.renderer.createProgram(e.vertShader,e.fragShader);this.attributes=e.attributes;this.vertexSize=e.vertexSize;this.topology=e.topology;this.bytes=new Uint8Array(this.vertexData);this.vertexComponentCount=n.getComponentCount(e.attributes,this.gl);this.flushLocked=!1;this.active=!1},boot:function boot(){},addAttribute:function addAttribute(e,t,i,a,r){this.attributes.push({name:e,size:t,type:this.renderer.glFormats[i],normalized:a,offset:r});this.vertexComponentCount=n.getComponentCount(this.attributes,this.gl);return this},shouldFlush:function shouldFlush(){return this.vertexCount>=this.vertexCapacity},resize:function resize(e,t,i){this.width=e*i;this.height=t*i;this.resolution=i;return this},bind:function bind(){var e=this.gl,t=this.vertexBuffer,i=this.attributes,a=this.program,n=this.renderer,r=this.vertexSize;n.setProgram(a);n.setVertexBuffer(t);for(var o=0;o<i.length;++o){var s=i[o],l=e.getAttribLocation(a,s.name);if(0<=l){e.enableVertexAttribArray(l);e.vertexAttribPointer(l,s.size,s.type,s.normalized,r,s.offset)}else if(-1!==l){e.disableVertexAttribArray(l)}}return this},onBind:function onBind(){return this},onPreRender:function onPreRender(){return this},onRender:function onRender(){return this},onPostRender:function onPostRender(){return this},flush:function flush(){if(this.flushLocked){return this}this.flushLocked=!0;var e=this.gl,t=this.vertexCount,i=this.topology,a=this.vertexSize;if(0===t){this.flushLocked=!1;return}e.bufferSubData(e.ARRAY_BUFFER,0,this.bytes.subarray(0,t*a));e.drawArrays(i,0,t);this.vertexCount=0;this.flushLocked=!1;return this},destroy:function destroy(){var e=this.gl;e.deleteProgram(this.program);e.deleteBuffer(this.vertexBuffer);delete this.program;delete this.vertexBuffer;delete this.gl;return this},setFloat1:function setFloat1(e,t){this.renderer.setFloat1(this.program,e,t);return this},setFloat2:function setFloat2(e,t,i){this.renderer.setFloat2(this.program,e,t,i);return this},setFloat3:function setFloat3(e,t,i,a){this.renderer.setFloat3(this.program,e,t,i,a);return this},setFloat4:function setFloat4(e,t,i,a,n){this.renderer.setFloat4(this.program,e,t,i,a,n);return this},setFloat1v:function setFloat1v(e,t){this.renderer.setFloat1v(this.program,e,t);return this},setFloat2v:function setFloat2v(e,t){this.renderer.setFloat2v(this.program,e,t);return this},setFloat3v:function setFloat3v(e,t){this.renderer.setFloat3v(this.program,e,t);return this},setFloat4v:function setFloat4v(e,t){this.renderer.setFloat4v(this.program,e,t);return this},setInt1:function setInt1(e,t){this.renderer.setInt1(this.program,e,t);return this},setInt2:function setInt2(e,t,i){this.renderer.setInt2(this.program,e,t,i);return this},setInt3:function setInt3(e,t,i,a){this.renderer.setInt3(this.program,e,t,i,a);return this},setInt4:function setInt4(e,t,i,a,n){this.renderer.setInt4(this.program,e,t,i,a,n);return this},setMatrix2:function setMatrix2(e,t,i){this.renderer.setMatrix2(this.program,e,t,i);return this},setMatrix3:function setMatrix3(e,t,i){this.renderer.setMatrix3(this.program,e,t,i);return this},setMatrix4:function setMatrix4(e,t,i){this.renderer.setMatrix4(this.program,e,t,i);return this}});e.exports=r},function(e,t,i){var a=i(0),n=i(66),r=i(2),o=i(506),s=i(779),l=i(780),d=i(32),p=i(10),c=i(234),u=new a({Extends:c,Mixins:[o],initialize:function(e){var t=e.renderer.config;c.call(this,{game:e.game,renderer:e.renderer,gl:e.renderer.gl,topology:r(e,"topology",e.renderer.gl.TRIANGLES),vertShader:r(e,"vertShader",l),fragShader:r(e,"fragShader",s),vertexCapacity:r(e,"vertexCapacity",6*t.batchSize),vertexSize:r(e,"vertexSize",5*Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT),attributes:[{name:"inPosition",size:2,type:e.renderer.gl.FLOAT,normalized:!1,offset:0},{name:"inTexCoord",size:2,type:e.renderer.gl.FLOAT,normalized:!1,offset:2*Float32Array.BYTES_PER_ELEMENT},{name:"inTintEffect",size:1,type:e.renderer.gl.FLOAT,normalized:!1,offset:4*Float32Array.BYTES_PER_ELEMENT},{name:"inTint",size:4,type:e.renderer.gl.UNSIGNED_BYTE,normalized:!0,offset:5*Float32Array.BYTES_PER_ELEMENT}]});this.vertexViewF32=new Float32Array(this.vertexData);this.vertexViewU32=new Uint32Array(this.vertexData);this.maxQuads=t.batchSize;this.batches=[];this._tempMatrix1=new d;this._tempMatrix2=new d;this._tempMatrix3=new d;this._tempMatrix4=new d;this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}];this.tintEffect=2;this.strokeTint={TL:0,TR:0,BL:0,BR:0};this.fillTint={TL:0,TR:0,BL:0,BR:0};this.currentFrame={u0:0,v0:0,u1:1,v1:1};this.firstQuad=[0,0,0,0,0];this.prevQuad=[0,0,0,0,0];this.polygonCache=[];this.mvpInit()},onBind:function onBind(){c.prototype.onBind.call(this);this.mvpUpdate();return this},resize:function resize(e,t,i){c.prototype.resize.call(this,e,t,i);this.projOrtho(0,this.width,this.height,0,-1e3,1e3);return this},setTexture2D:function setTexture2D(e,t){if(e===void 0){e=this.renderer.blankTexture.glTexture}if(t===void 0){t=0}if(this.requireTextureBatch(e,t)){this.pushBatch(e,t)}return this},requireTextureBatch:function requireTextureBatch(e,t){var i=this.batches,a=i.length;if(0<a){var n=0<t?i[a-1].textures[t-1]:i[a-1].texture;return!(n===e)}return!0},pushBatch:function pushBatch(e,t){if(0===t){this.batches.push({first:this.vertexCount,texture:e,textures:[]})}else{var i=[];i[t-1]=e;this.batches.push({first:this.vertexCount,texture:null,textures:i})}},flush:function flush(){if(this.flushLocked){return this}this.flushLocked=!0;var e=this.gl,t=this.vertexCount,i=this.topology,a=this.vertexSize,n=this.renderer,r=this.batches,o=r.length,s=0,l=null,d,p,c;if(0===o||0===t){this.flushLocked=!1;return this}e.bufferSubData(e.ARRAY_BUFFER,0,this.bytes.subarray(0,t*a));for(var u=0;u<o-1;u++){l=r[u];d=r[u+1];if(0<l.textures.length){for(p=0;p<l.textures.length;++p){c=l.textures[p];if(c){n.setTexture2D(c,1+p,!1)}}e.activeTexture(e.TEXTURE0)}s=d.first-l.first;if(null===l.texture||0>=s){continue}n.setTexture2D(l.texture,0,!1);e.drawArrays(i,l.first,s)}l=r[o-1];if(0<l.textures.length){for(p=0;p<l.textures.length;++p){c=l.textures[p];if(c){n.setTexture2D(c,1+p,!1)}}e.activeTexture(e.TEXTURE0)}s=t-l.first;if(l.texture&&0<s){n.setTexture2D(l.texture,0,!1);e.drawArrays(i,l.first,s)}this.vertexCount=0;r.length=0;this.flushLocked=!1;return this},batchSprite:function batchSprite(e,t,i){this.renderer.setPipeline(this);var a=this._tempMatrix1,n=this._tempMatrix2,r=this._tempMatrix3,o=e.frame,s=o.glTexture,l=o.u0,d=o.v0,c=o.u1,u=o.v1,g=o.x,h=o.y,m=o.cutWidth,f=o.cutHeight,T=o.customPivot,v=e.displayOriginX,b=e.displayOriginY,E=-v+g,S=-b+h;if(e.isCropped){var _=e._crop;if(_.flipX!==e.flipX||_.flipY!==e.flipY){o.updateCropUVs(_,e.flipX,e.flipY)}l=_.u0;d=_.v0;c=_.u1;u=_.v1;m=_.width;f=_.height;g=_.x;h=_.y;E=-v+g;S=-b+h}var A=1,C=1;if(e.flipX){if(!T){E+=-o.realWidth+2*v}A=-1}if(e.flipY||o.source.isGLTexture&&!s.flipY){if(!T){S+=-o.realHeight+2*b}C=-1}n.applyITRS(e.x,e.y,e.rotation,e.scaleX*A,e.scaleY*C);a.copyFrom(t.matrix);if(i){a.multiplyWithOffset(i,-t.scrollX*e.scrollFactorX,-t.scrollY*e.scrollFactorY);n.e=e.x;n.f=e.y;a.multiply(n,r)}else{n.e-=t.scrollX*e.scrollFactorX;n.f-=t.scrollY*e.scrollFactorY;a.multiply(n,r)}var w=E+m,P=S+f,O=r.getX(E,S),R=r.getY(E,S),L=r.getX(E,P),k=r.getY(E,P),D=r.getX(w,P),F=r.getY(w,P),I=r.getX(w,S),M=r.getY(w,S),B=p.getTintAppendFloatAlpha(e._tintTL,t.alpha*e._alphaTL),Y=p.getTintAppendFloatAlpha(e._tintTR,t.alpha*e._alphaTR),N=p.getTintAppendFloatAlpha(e._tintBL,t.alpha*e._alphaBL),X=p.getTintAppendFloatAlpha(e._tintBR,t.alpha*e._alphaBR);if(t.roundPixels){O=Math.round(O);R=Math.round(R);L=Math.round(L);k=Math.round(k);D=Math.round(D);F=Math.round(F);I=Math.round(I);M=Math.round(M)}this.setTexture2D(s,0);var z=e._isTinted&&e.tintFill;this.batchQuad(O,R,L,k,D,F,I,M,l,d,c,u,B,Y,N,X,z,s,0)},batchQuad:function batchQuad(e,t,i,a,n,r,o,s,l,d,p,c,u,g,h,m,y,x,f){var T=!1;if(this.vertexCount+6>this.vertexCapacity){this.flush();T=!0;this.setTexture2D(x,f)}var v=this.vertexViewF32,b=this.vertexViewU32,E=this.vertexCount*this.vertexComponentCount-1;v[++E]=e;v[++E]=t;v[++E]=l;v[++E]=d;v[++E]=y;b[++E]=u;v[++E]=i;v[++E]=a;v[++E]=l;v[++E]=c;v[++E]=y;b[++E]=h;v[++E]=n;v[++E]=r;v[++E]=p;v[++E]=c;v[++E]=y;b[++E]=m;v[++E]=e;v[++E]=t;v[++E]=l;v[++E]=d;v[++E]=y;b[++E]=u;v[++E]=n;v[++E]=r;v[++E]=p;v[++E]=c;v[++E]=y;b[++E]=m;v[++E]=o;v[++E]=s;v[++E]=p;v[++E]=d;v[++E]=y;b[++E]=g;this.vertexCount+=6;return T},batchTri:function batchTri(e,t,i,a,n,r,o,s,l,d,p,c,u,g,h,m){var y=!1;if(this.vertexCount+3>this.vertexCapacity){this.flush();this.setTexture2D(h,m);y=!0}var x=this.vertexViewF32,f=this.vertexViewU32,T=this.vertexCount*this.vertexComponentCount-1;x[++T]=e;x[++T]=t;x[++T]=o;x[++T]=s;x[++T]=g;f[++T]=p;x[++T]=i;x[++T]=a;x[++T]=o;x[++T]=d;x[++T]=g;f[++T]=c;x[++T]=n;x[++T]=r;x[++T]=l;x[++T]=d;x[++T]=g;f[++T]=u;this.vertexCount+=3;return y},batchTexture:function batchTexture(e,t,i,a,n,r,o,s,l,d,p,c,u,g,h,m,f,T,v,b,E,S,_,A,C,w,P,O,R,L,k){this.renderer.setPipeline(this,e);var D=this._tempMatrix1,F=this._tempMatrix2,I=this._tempMatrix3,M=T/i+P,B=v/a+O,Y=(T+b)/i+P,N=(v+E)/a+O,X=o,z=s,U=-m,G=-f;if(e.isCropped){var W=e._crop;X=W.width;z=W.height;o=W.width;s=W.height;T=W.x;v=W.y;var V=T,H=v;if(c){V=b-W.x-W.width}if(u&&!t.isRenderTexture){H=E-W.y-W.height}M=V/i+P;B=H/a+O;Y=(V+W.width)/i+P;N=(H+W.height)/a+O;U=-m+T;G=-f+v}u=u^(!k&&t.isRenderTexture?1:0);if(c){X*=-1;U+=o}if(u){z*=-1;G+=s}var j=U+X,K=G+z;F.applyITRS(n,r,p,l,d);D.copyFrom(R.matrix);if(L){D.multiplyWithOffset(L,-R.scrollX*g,-R.scrollY*h);F.e=n;F.f=r;D.multiply(F,I)}else{F.e-=R.scrollX*g;F.f-=R.scrollY*h;D.multiply(F,I)}var q=I.getX(U,G),J=I.getY(U,G),Z=I.getX(U,K),Q=I.getY(U,K),$=I.getX(j,K),ee=I.getY(j,K),te=I.getX(j,G),ie=I.getY(j,G);if(R.roundPixels){q=Math.round(q);J=Math.round(J);Z=Math.round(Z);Q=Math.round(Q);$=Math.round($);ee=Math.round(ee);te=Math.round(te);ie=Math.round(ie)}this.setTexture2D(t,0);this.batchQuad(q,J,Z,Q,$,ee,te,ie,M,B,Y,N,S,_,A,C,w,t,0)},batchTextureFrame:function batchTextureFrame(e,t,i,a,n,r,o){this.renderer.setPipeline(this);var s=this._tempMatrix1.copyFrom(r),l=this._tempMatrix2,d=t+e.width,c=i+e.height;if(o){s.multiply(o,l)}else{l=s}var u=l.getX(t,i),g=l.getY(t,i),h=l.getX(t,c),m=l.getY(t,c),y=l.getX(d,c),x=l.getY(d,c),f=l.getX(d,i),T=l.getY(d,i);this.setTexture2D(e.glTexture,0);a=p.getTintAppendFloatAlpha(a,n);this.batchQuad(u,g,h,m,y,x,f,T,e.u0,e.v0,e.u1,e.v1,a,a,a,a,0,e.glTexture,0)},drawFillRect:function drawFillRect(e,t,i,a,n,r){var o=e+i,s=t+a;this.setTexture2D();var l=p.getTintAppendFloatAlphaAndSwap(n,r);this.batchQuad(e,t,e,s,o,s,o,t,0,0,1,1,l,l,l,l,2)},batchFillRect:function batchFillRect(e,t,i,a,n,r){this.renderer.setPipeline(this);var o=this._tempMatrix3;if(r){r.multiply(n,o)}var s=e+i,l=t+a,d=o.getX(e,t),p=o.getY(e,t),c=o.getX(e,l),u=o.getY(e,l),g=o.getX(s,l),h=o.getY(s,l),m=o.getX(s,t),y=o.getY(s,t),x=this.currentFrame,f=x.u0,T=x.v0,v=x.u1,b=x.v1;this.batchQuad(d,p,c,u,g,h,m,y,f,T,v,b,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.fillTint.BR,this.tintEffect)},batchFillTriangle:function batchFillTriangle(e,t,i,a,n,r,o,s){this.renderer.setPipeline(this);var l=this._tempMatrix3;if(s){s.multiply(o,l)}var d=l.getX(e,t),p=l.getY(e,t),c=l.getX(i,a),u=l.getY(i,a),g=l.getX(n,r),h=l.getY(n,r),m=this.currentFrame,y=m.u0,x=m.v0,f=m.u1,T=m.v1;this.batchTri(d,p,c,u,g,h,y,x,f,T,this.fillTint.TL,this.fillTint.TR,this.fillTint.BL,this.tintEffect)},batchStrokeTriangle:function batchStrokeTriangle(e,t,i,a,n,r,o,s,l){var d=this.tempTriangle;d[0].x=e;d[0].y=t;d[0].width=o;d[1].x=i;d[1].y=a;d[1].width=o;d[2].x=n;d[2].y=r;d[2].width=o;d[3].x=e;d[3].y=t;d[3].width=o;this.batchStrokePath(d,o,!1,s,l)},batchFillPath:function batchFillPath(e,t,i){this.renderer.setPipeline(this);var a=this._tempMatrix3;if(i){i.multiply(t,a)}for(var r=e.length,o=this.polygonCache,s,l,d=this.fillTint.TL,p=this.fillTint.TR,c=this.fillTint.BL,u=this.tintEffect,g=0;g<r;++g){l=e[g];o.push(l.x,l.y)}s=n(o);r=s.length;for(var h=this.currentFrame,m=0;m<r;m+=3){var y=2*s[m+0],x=2*s[m+1],f=2*s[m+2],T=o[y+0],v=o[y+1],b=o[x+0],E=o[x+1],S=o[f+0],_=o[f+1],A=a.getX(T,v),C=a.getY(T,v),w=a.getX(b,E),P=a.getY(b,E),O=a.getX(S,_),R=a.getY(S,_),L=h.u0,k=h.v0,D=h.u1,F=h.v1;this.batchTri(A,C,w,P,O,R,L,k,D,F,d,p,c,u)}o.length=0},batchStrokePath:function batchStrokePath(e,t,i,a,n){this.renderer.setPipeline(this);this.prevQuad[4]=0;this.firstQuad[4]=0;for(var r=e.length-1,o=0;o<r;o++){var s=e[o],l=e[o+1];this.batchLine(s.x,s.y,l.x,l.y,s.width/2,l.width/2,t,o,!i&&o==r-1,a,n)}},batchLine:function batchLine(e,t,i,a,n,r,o,s,l,d,p){this.renderer.setPipeline(this);var c=this._tempMatrix3;if(p){p.multiply(d,c)}var u=i-e,g=a-t,h=Math.sqrt(u*u+g*g),m=n*(a-t)/h,y=n*(e-i)/h,x=r*(a-t)/h,f=r*(e-i)/h,T=i-x,v=a-f,b=e-m,E=t-y,S=i+x,_=a+f,A=e+m,C=t+y,w=c.getX(T,v),P=c.getY(T,v),O=c.getX(b,E),R=c.getY(b,E),L=c.getX(S,_),k=c.getY(S,_),D=c.getX(A,C),F=c.getY(A,C),I=this.strokeTint,M=this.tintEffect,B=I.TL,Y=I.TR,N=I.BL,X=I.BR,z=this.currentFrame,U=z.u0,G=z.v0,W=z.u1,V=z.v1;this.batchQuad(D,F,O,R,w,P,L,k,U,G,W,V,B,Y,N,X,M);if(2>=o){return}var H=this.prevQuad,j=this.firstQuad;if(0<s&&H[4]){this.batchQuad(D,F,O,R,H[0],H[1],H[2],H[3],U,G,W,V,B,Y,N,X,M)}else{j[0]=D;j[1]=F;j[2]=O;j[3]=R;j[4]=1}if(l&&j[4]){this.batchQuad(w,P,L,k,j[0],j[1],j[2],j[3],U,G,W,V,B,Y,N,X,M)}else{H[0]=w;H[1]=P;H[2]=L;H[3]=k;H[4]=1}}});e.exports=u},function(e,t,i){var a={};e.exports=a;var n=i(237);(function(){a._motionWakeThreshold=.18;a._motionSleepThreshold=.08;a._minBias=.9;a.update=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.speed*r.speed+r.angularSpeed*r.angularSpeed;if(0!==r.force.x||0!==r.force.y){a.set(r,!1);continue}var s=Math.min(r.motion,o),l=Math.max(r.motion,o);r.motion=a._minBias*s+(1-a._minBias)*l;if(0<r.sleepThreshold&&r.motion<a._motionSleepThreshold*(t*t*t)){r.sleepCounter+=1;if(r.sleepCounter>=r.sleepThreshold)a.set(r,!0)}else if(0<r.sleepCounter){r.sleepCounter-=1}}};a.afterCollisions=function(e,t){for(var n=0,r;n<e.length;n++){r=e[n];if(!r.isActive)continue;var o=r.collision,s=o.bodyA.parent,l=o.bodyB.parent;if(s.isSleeping&&l.isSleeping||s.isStatic||l.isStatic)continue;if(s.isSleeping||l.isSleeping){var d=s.isSleeping&&!s.isStatic?s:l,p=d===s?l:s;if(!d.isStatic&&p.motion>a._motionWakeThreshold*(t*t*t)){a.set(d,!1)}}}};a.set=function(e,t){var i=e.isSleeping;if(t){e.isSleeping=!0;e.sleepCounter=e.sleepThreshold;e.positionImpulse.x=0;e.positionImpulse.y=0;e.positionPrev.x=e.position.x;e.positionPrev.y=e.position.y;e.anglePrev=e.angle;e.speed=0;e.angularSpeed=0;e.motion=0;if(!i){n.trigger(e,"sleepStart")}}else{e.isSleeping=!1;e.sleepCounter=0;if(i){n.trigger(e,"sleepEnd")}}}})()},function(e,t,i){var a={};e.exports=a;var n=i(37);(function(){a.on=function(e,t,a){for(var n=t.split(" "),r,o=0;o<n.length;o++){r=n[o];e.events=e.events||{};e.events[r]=e.events[r]||[];e.events[r].push(a)}return a};a.off=function(e,t,a){if(!t){e.events={};return}if("function"==typeof t){a=t;t=n.keys(e.events).join(" ")}for(var r=t.split(" "),o=0;o<r.length;o++){var s=e.events[r[o]],l=[];if(a&&s){for(var d=0;d<s.length;d++){if(s[d]!==a)l.push(s[d])}}e.events[r[o]]=l}};a.trigger=function(e,t,a){var r,o,s,l,d=e.events;if(d&&0<n.keys(d).length){if(!a)a={};r=t.split(" ");for(var p=0;p<r.length;p++){o=r[p];s=d[o];if(s){l=n.clone(a,!1);l.name=o;l.source=e;for(var c=0;c<s.length;c++){s[c].apply(e,[l])}}}}}})()},function(e,t,i){e.exports={AlignTo:i(521),Angle:i(522),Call:i(523),GetFirst:i(524),GetLast:i(525),GridAlign:i(526),IncAlpha:i(587),IncX:i(588),IncXY:i(589),IncY:i(590),PlaceOnCircle:i(591),PlaceOnEllipse:i(592),PlaceOnLine:i(593),PlaceOnRectangle:i(594),PlaceOnTriangle:i(595),PlayAnimation:i(596),PropertyValueInc:i(34),PropertyValueSet:i(25),RandomCircle:i(597),RandomEllipse:i(598),RandomLine:i(599),RandomRectangle:i(600),RandomTriangle:i(601),Rotate:i(602),RotateAround:i(603),RotateAroundDistance:i(604),ScaleX:i(605),ScaleXY:i(606),ScaleY:i(607),SetAlpha:i(608),SetBlendMode:i(609),SetDepth:i(610),SetHitArea:i(611),SetOrigin:i(612),SetRotation:i(613),SetScale:i(614),SetScaleX:i(615),SetScaleY:i(616),SetScrollFactor:i(617),SetScrollFactorX:i(618),SetScrollFactorY:i(619),SetTint:i(620),SetVisible:i(621),SetX:i(622),SetXY:i(623),SetY:i(624),ShiftPosition:i(625),Shuffle:i(626),SmootherStep:i(627),SmoothStep:i(628),Spread:i(629),ToggleVisible:i(630),WrapInRectangle:i(631)}},function(e,t,i){var a=i(106),n=[];n[a.BOTTOM_CENTER]=i(240);n[a.BOTTOM_LEFT]=i(241);n[a.BOTTOM_RIGHT]=i(242);n[a.LEFT_BOTTOM]=i(243);n[a.LEFT_CENTER]=i(244);n[a.LEFT_TOP]=i(245);n[a.RIGHT_BOTTOM]=i(246);n[a.RIGHT_CENTER]=i(247);n[a.RIGHT_TOP]=i(248);n[a.TOP_CENTER]=i(249);n[a.TOP_LEFT]=i(250);n[a.TOP_RIGHT]=i(251);e.exports=function QuickSet(e,t,i,a,r){return n[i](e,t,a,r)}},function(e,t,i){var a=i(38),n=i(75),r=i(76),o=i(39);e.exports=function BottomCenter(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}r(e,n(t)+i);o(e,a(t)+s);return e}},function(e,t,i){var a=i(38),n=i(40),r=i(41),o=i(39);e.exports=function BottomLeft(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}r(e,n(t)-i);o(e,a(t)+s);return e}},function(e,t,i){var a=i(38),n=i(42),r=i(43),o=i(39);e.exports=function BottomRight(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}r(e,n(t)+i);o(e,a(t)+s);return e}},function(e,t,i){var a=i(38),n=i(40),r=i(44),o=i(43);e.exports=function LeftBottom(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}o(e,n(t)-i);r(e,a(t)+s);return e}},function(e,t,i){var a=i(77),n=i(40),r=i(78),o=i(43);e.exports=function LeftCenter(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}o(e,n(t)-i);r(e,a(t)+s);return e}},function(e,t,i){var a=i(40),n=i(45),r=i(43),o=i(39);e.exports=function LeftTop(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}r(e,a(t)-i);o(e,n(t)-s);return e}},function(e,t,i){var a=i(38),n=i(42),r=i(44),o=i(41);e.exports=function RightBottom(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}o(e,n(t)+i);r(e,a(t)+s);return e}},function(e,t,i){var a=i(77),n=i(42),r=i(78),o=i(41);e.exports=function RightCenter(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}o(e,n(t)+i);r(e,a(t)+s);return e}},function(e,t,i){var a=i(42),n=i(45),r=i(41),o=i(39);e.exports=function RightTop(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}r(e,a(t)+i);o(e,n(t)-s);return e}},function(e,t,i){var a=i(75),n=i(45),r=i(44),o=i(76);e.exports=function TopCenter(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}o(e,a(t)+i);r(e,n(t)-s);return e}},function(e,t,i){var a=i(40),n=i(45),r=i(44),o=i(41);e.exports=function TopLeft(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}o(e,a(t)-i);r(e,n(t)-s);return e}},function(e,t,i){var a=i(42),n=i(45),r=i(44),o=i(43);e.exports=function TopRight(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}o(e,a(t)+i);r(e,n(t)-s);return e}},function(e,t,i){var a=i(106),n=[];n[a.BOTTOM_CENTER]=i(253);n[a.BOTTOM_LEFT]=i(254);n[a.BOTTOM_RIGHT]=i(255);n[a.CENTER]=i(256);n[a.LEFT_CENTER]=i(258);n[a.RIGHT_CENTER]=i(259);n[a.TOP_CENTER]=i(260);n[a.TOP_LEFT]=i(261);n[a.TOP_RIGHT]=i(262);n[a.LEFT_BOTTOM]=n[a.BOTTOM_LEFT];n[a.LEFT_TOP]=n[a.TOP_LEFT];n[a.RIGHT_BOTTOM]=n[a.BOTTOM_RIGHT];n[a.RIGHT_TOP]=n[a.TOP_RIGHT];e.exports=function QuickSet(e,t,i,a,r){return n[i](e,t,a,r)}},function(e,t,i){var a=i(38),n=i(75),r=i(44),o=i(76);e.exports=function BottomCenter(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}o(e,n(t)+i);r(e,a(t)+s);return e}},function(e,t,i){var a=i(38),n=i(40),r=i(44),o=i(41);e.exports=function BottomLeft(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}o(e,n(t)-i);r(e,a(t)+s);return e}},function(e,t,i){var a=i(38),n=i(42),r=i(44),o=i(43);e.exports=function BottomRight(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}o(e,n(t)+i);r(e,a(t)+s);return e}},function(e,t,i){var a=i(257),n=i(75),r=i(77);e.exports=function Center(e,t,i,o){if(i===void 0){i=0}if(o===void 0){o=0}a(e,n(t)+i,r(t)+o);return e}},function(e,t,i){var a=i(76),n=i(78);e.exports=function CenterOn(e,t,i){a(e,t);return n(e,i)}},function(e,t,i){var a=i(77),n=i(40),r=i(78),o=i(41);e.exports=function LeftCenter(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}o(e,n(t)-i);r(e,a(t)+s);return e}},function(e,t,i){var a=i(77),n=i(42),r=i(78),o=i(43);e.exports=function RightCenter(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}o(e,n(t)+i);r(e,a(t)+s);return e}},function(e,t,i){var a=i(75),n=i(45),r=i(76),o=i(39);e.exports=function TopCenter(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}r(e,a(t)+i);o(e,n(t)-s);return e}},function(e,t,i){var a=i(40),n=i(45),r=i(41),o=i(39);e.exports=function TopLeft(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}r(e,a(t)-i);o(e,n(t)-s);return e}},function(e,t,i){var a=i(42),n=i(45),r=i(43),o=i(39);e.exports=function TopRight(e,t,i,s){if(i===void 0){i=0}if(s===void 0){s=0}r(e,a(t)+i);o(e,n(t)-s);return e}},function(e,t,i){var a=i(146),n=i(87),r=i(13),o=i(4);e.exports=function GetPoint(e,t,i){if(i===void 0){i=new o}var s=n(t,0,r.PI2);return a(e,s,i)}},function(e,t,i){var a=i(265),n=i(146),r=i(87),o=i(13);e.exports=function GetPoints(e,t,s,l){if(l===void 0){l=[]}if(!t){t=a(e)/s}for(var d=0,p;d<t;d++){p=r(d/t,0,o.PI2);l.push(n(e,p))}return l}},function(e){e.exports=function Circumference(e){return 2*(Math.PI*e.radius)}},function(e,t,i){var a=i(22),n=2;e.exports={_alpha:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(e){if(e===void 0){e=1}this.alpha=e;return this},alpha:{get:function get(){return this._alpha},set:function set(e){var t=a(e,0,1);this._alpha=t;if(0===t){this.renderFlags&=~n}else{this.renderFlags|=n}}}}},function(e){e.exports=function FindClosestInSorted(e,t,a){if(!t.length){return NaN}else if(1===t.length){return t[0]}var n=1,r,o;if(a){if(e<t[0][a]){return t[0]}while(t[n][a]<e){n++}}else{while(t[n]<e){n++}}if(n>t.length){n=t.length}if(a){r=t[n-1][a];o=t[n][a];return o-e<=e-r?t[n]:t[n-1]}else{r=t[n-1];o=t[n];return o-e<=e-r?o:r}}},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t,i,a){this.textureKey=e;this.textureFrame=t;this.index=i;this.frame=a;this.isFirst=!1;this.isLast=!1;this.prevFrame=null;this.nextFrame=null;this.duration=0;this.progress=0},toJSON:function toJSON(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration}},destroy:function destroy(){this.frame=void 0}});e.exports=n},function(e,t,i){var a=i(52),n={_blendMode:a.NORMAL,blendMode:{get:function get(){return this._blendMode},set:function set(e){if("string"==typeof e){e=a[e]}e|=0;if(-1<=e){this._blendMode=e}}},setBlendMode:function setBlendMode(e){this.blendMode=e;return this}};e.exports=n},function(e){e.exports={_depth:0,depth:{get:function get(){return this._depth},set:function set(e){this.scene.sys.queueDepthSort();this._depth=e}},setDepth:function setDepth(e){if(e===void 0){e=0}this.depth=e;return this}}},function(e,t,i){var a=i(149),n=i(112);e.exports=function GetPoints(e,t,r,o){if(o===void 0){o=[]}if(!t){t=n(e)/r}for(var s=0,l;s<t;s++){l=s/t;o.push(a(e,l))}return o}},function(e,t,i){var a=i(4);e.exports=function GetPoint(e,t,i){if(i===void 0){i=new a}i.x=e.x1+(e.x2-e.x1)*t;i.y=e.y1+(e.y2-e.y1)*t;return i}},function(e){e.exports=function RotateAround(e,t,i,a){var n=Math.cos(a),r=Math.sin(a),o=e.x-t,s=e.y-i;e.x=o*n-s*r+t;e.y=o*r+s*n+i;return e}},function(e,t,i){var a=i(275),n=i(276);e.exports={mask:null,setMask:function setMask(e){this.mask=e;return this},clearMask:function clearMask(e){if(e===void 0){e=!1}if(e&&this.mask){this.mask.destroy()}this.mask=null;return this},createBitmapMask:function createBitmapMask(e){if(e===void 0&&(this.texture||this.shader)){e=this}return new a(this.scene,e)},createGeometryMask:function createGeometryMask(e){if(e===void 0&&"Graphics"===this.type){e=this}return new n(this.scene,e)}}},function(e,t,i){var a=i(0),n=i(18),r=new a({initialize:function(e,t){var i=e.sys.game.renderer;this.renderer=i;this.bitmapMask=t;this.maskTexture=null;this.mainTexture=null;this.dirty=!0;this.mainFramebuffer=null;this.maskFramebuffer=null;this.prevFramebuffer=null;this.invertAlpha=!1;this.isStencil=!1;if(i&&i.gl){var a=i.width,r=i.height,o=i.gl,s=0==(a&a-1)&&0==(r&r-1)?o.REPEAT:o.CLAMP_TO_EDGE,l=o.LINEAR;this.mainTexture=i.createTexture2D(0,l,l,s,s,o.RGBA,null,a,r);this.maskTexture=i.createTexture2D(0,l,l,s,s,o.RGBA,null,a,r);this.mainFramebuffer=i.createFramebuffer(a,r,this.mainTexture,!0);this.maskFramebuffer=i.createFramebuffer(a,r,this.maskTexture,!0);e.sys.game.events.on(n.CONTEXT_RESTORED,function(e){var t=e.width,i=e.height,a=e.gl,n=0==(t&t-1)&&0==(i&i-1)?a.REPEAT:a.CLAMP_TO_EDGE,r=a.LINEAR;this.mainTexture=e.createTexture2D(0,r,r,n,n,a.RGBA,null,t,i);this.maskTexture=e.createTexture2D(0,r,r,n,n,a.RGBA,null,t,i);this.mainFramebuffer=e.createFramebuffer(t,i,this.mainTexture,!0);this.maskFramebuffer=e.createFramebuffer(t,i,this.maskTexture,!0)},this)}},setBitmap:function setBitmap(e){this.bitmapMask=e},preRenderWebGL:function preRenderWebGL(e,t,i){e.pipelines.BitmapMaskPipeline.beginMask(this,t,i)},postRenderWebGL:function postRenderWebGL(e,t){e.pipelines.BitmapMaskPipeline.endMask(this,t)},preRenderCanvas:function preRenderCanvas(){},postRenderCanvas:function postRenderCanvas(){},destroy:function destroy(){this.bitmapMask=null;var e=this.renderer;if(e&&e.gl){e.deleteTexture(this.mainTexture);e.deleteTexture(this.maskTexture);e.deleteFramebuffer(this.mainFramebuffer);e.deleteFramebuffer(this.maskFramebuffer)}this.mainTexture=null;this.maskTexture=null;this.mainFramebuffer=null;this.maskFramebuffer=null;this.prevFramebuffer=null;this.renderer=null}});e.exports=r},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t){this.geometryMask=t;this.invertAlpha=!1;this.isStencil=!0;this.level=0},setShape:function setShape(e){this.geometryMask=e;return this},setInvertAlpha:function setInvertAlpha(e){if(e===void 0){e=!0}this.invertAlpha=e;return this},preRenderWebGL:function preRenderWebGL(e,t,i){var a=e.gl;e.flush();if(0===e.maskStack.length){a.enable(a.STENCIL_TEST);a.clear(a.STENCIL_BUFFER_BIT);e.maskCount=0}if(e.currentCameraMask.mask!==this){e.currentMask.mask=this}e.maskStack.push({mask:this,camera:i});this.applyStencil(e,i,!0);e.maskCount++},applyStencil:function applyStencil(e,t,i){var a=e.gl,n=this.geometryMask,r=e.maskCount;a.colorMask(!1,!1,!1,!1);if(i){a.stencilFunc(a.EQUAL,r,255);a.stencilOp(a.KEEP,a.KEEP,a.INCR)}else{a.stencilFunc(a.EQUAL,r+1,255);a.stencilOp(a.KEEP,a.KEEP,a.DECR)}n.renderWebGL(e,n,0,t);e.flush();a.colorMask(!0,!0,!0,!0);a.stencilOp(a.KEEP,a.KEEP,a.KEEP);if(i){if(this.invertAlpha){a.stencilFunc(a.NOTEQUAL,r+1,255)}else{a.stencilFunc(a.EQUAL,r+1,255)}}else if(this.invertAlpha){a.stencilFunc(a.NOTEQUAL,r,255)}else{a.stencilFunc(a.EQUAL,r,255)}},postRenderWebGL:function postRenderWebGL(e){var t=e.gl;e.maskStack.pop();e.maskCount--;if(0===e.maskStack.length){e.flush();e.currentMask.mask=null;t.disable(t.STENCIL_TEST)}else{e.flush();var i=e.maskStack[e.maskStack.length-1];i.mask.applyStencil(e,i.camera,!1);if(e.currentCameraMask.mask!==i.mask){e.currentMask.mask=i.mask;e.currentMask.camera=i.camera}else{e.currentMask.mask=null}}},preRenderCanvas:function preRenderCanvas(e,t,i){var a=this.geometryMask;e.currentContext.save();a.renderCanvas(e,a,0,i,null,null,!0);e.currentContext.clip()},postRenderCanvas:function postRenderCanvas(e){e.currentContext.restore()},destroy:function destroy(){this.geometryMask=null}});e.exports=n},function(e){e.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function setScrollFactor(e,t){if(t===void 0){t=e}this.scrollFactorX=e;this.scrollFactorY=t;return this}}},function(e){e.exports=function ToJSON(e){var t={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};if(e.texture){t.textureKey=e.texture.key;t.frameKey=e.frame.name}return t}},function(e,t,i){var a=i(13),n=i(32),r=i(232),o=i(233),s=4;e.exports={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function get(){return(this._scaleX+this._scaleY)/2},set:function set(e){this._scaleX=e;this._scaleY=e;if(0===e){this.renderFlags&=~s}else{this.renderFlags|=s}}},scaleX:{get:function get(){return this._scaleX},set:function set(e){this._scaleX=e;if(0===e){this.renderFlags&=~s}else{this.renderFlags|=s}}},scaleY:{get:function get(){return this._scaleY},set:function set(e){this._scaleY=e;if(0===e){this.renderFlags&=~s}else{this.renderFlags|=s}}},angle:{get:function get(){return o(this._rotation*a.RAD_TO_DEG)},set:function set(e){this.rotation=o(e)*a.DEG_TO_RAD}},rotation:{get:function get(){return this._rotation},set:function set(e){this._rotation=r(e)}},setPosition:function setPosition(e,t,i,a){if(e===void 0){e=0}if(t===void 0){t=e}if(i===void 0){i=0}if(a===void 0){a=0}this.x=e;this.y=t;this.z=i;this.w=a;return this},setRandomPosition:function setRandomPosition(e,t,i,a){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=this.scene.sys.scale.width}if(a===void 0){a=this.scene.sys.scale.height}this.x=e+Math.random()*i;this.y=t+Math.random()*a;return this},setRotation:function setRotation(e){if(e===void 0){e=0}this.rotation=e;return this},setAngle:function setAngle(e){if(e===void 0){e=0}this.angle=e;return this},setScale:function setScale(e,t){if(e===void 0){e=1}if(t===void 0){t=e}this.scaleX=e;this.scaleY=t;return this},setX:function setX(e){if(e===void 0){e=0}this.x=e;return this},setY:function setY(e){if(e===void 0){e=0}this.y=e;return this},setZ:function setZ(e){if(e===void 0){e=0}this.z=e;return this},setW:function setW(e){if(e===void 0){e=0}this.w=e;return this},getLocalTransformMatrix:function getLocalTransformMatrix(e){if(e===void 0){e=new n}return e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function getWorldTransformMatrix(e,t){if(e===void 0){e=new n}if(t===void 0){t=new n}var i=this.parentContainer;if(!i){return this.getLocalTransformMatrix(e)}e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);while(i){t.applyITRS(i.x,i.y,i._rotation,i._scaleX,i._scaleY);t.multiply(e,e);i=i.parentContainer}return e},getParentRotation:function getParentRotation(){var e=0,t=this.parentContainer;while(t){e+=t.rotation;t=t.parentContainer}return e}}},function(e){e.exports={_visible:!0,visible:{get:function get(){return this._visible},set:function set(e){if(e){this._visible=!0;this.renderFlags|=1}else{this._visible=!1;this.renderFlags&=-2}}},setVisible:function setVisible(e){this.visible=e;return this}}},function(e,t,i){e.exports={CHANGE_DATA:i(572),CHANGE_DATA_KEY:i(573),REMOVE_DATA:i(574),SET_DATA:i(575)}},function(e,t,i){var a=i(112),n=i(4);e.exports=function MarchingAnts(e,t,r,o){if(o===void 0){o=[]}if(!t&&!r){return o}if(!t){t=a(e)/r}else{r=Math.round(a(e)/t)}for(var s=e.x,l=e.y,d=0,p=0;p<r;p++){o.push(new n(s,l));switch(d){case 0:s+=t;if(s>=e.right){d=1;l+=s-e.right;s=e.right}break;case 1:l+=t;if(l>=e.bottom){d=2;s-=l-e.bottom;l=e.bottom}break;case 2:s-=t;if(s<=e.left){d=3;l-=e.left-s;s=e.left}break;case 3:l-=t;if(l<=e.top){d=0;l=e.top}break;}}return o}},function(e){e.exports=function RotateLeft(e,t){if(t===void 0){t=1}for(var a=null,n=0;n<t;n++){a=e.shift();e.push(a)}return a}},function(e){e.exports=function RotateRight(e,t){if(t===void 0){t=1}for(var a=null,n=0;n<t;n++){a=e.pop();e.unshift(a)}return a}},function(e){e.exports=function BresenhamPoints(e,t,a){if(t===void 0){t=1}if(a===void 0){a=[]}var n=Math.round(e.x1),r=Math.round(e.y1),o=Math.round(e.x2),s=Math.round(e.y2),l=Math.abs(o-n),d=Math.abs(s-r),p=n<o?1:-1,c=r<s?1:-1,u=l-d;a.push({x:n,y:r});var g=1;while(!(n===o&&r===s)){var h=u<<1;if(h>-d){u-=d;n+=p}if(h<l){u+=l;r+=c}if(0==g%t){a.push({x:n,y:r})}g++}return a}},function(e,t,i){var a=i(148),n=i(0),r=i(159),o=i(9),s=i(111),l=i(18),d=i(6),p=i(160),c=new n({Extends:o,initialize:function(e){o.call(this);this.game=e;this.textureManager=null;this.globalTimeScale=1;this.anims=new r;this.paused=!1;this.name="AnimationManager";e.events.once(l.BOOT,this.boot,this)},boot:function boot(){this.textureManager=this.game.textures;this.game.events.once(l.DESTROY,this.destroy,this)},add:function add(e,t){if(this.anims.has(e)){console.warn("Animation key exists: "+e);return}t.key=e;this.anims.set(e,t);this.emit(s.ADD_ANIMATION,e,t);return this},exists:function exists(e){return this.anims.has(e)},create:function create(e){var t=e.key,i=!1;if(t){i=this.get(t);if(!i){i=new a(this,t,e);this.anims.set(t,i);this.emit(s.ADD_ANIMATION,t,i)}}return i},fromJSON:function fromJSON(e,t){if(t===void 0){t=!1}if(t){this.anims.clear()}if("string"==typeof e){e=JSON.parse(e)}var a=[];if(e.hasOwnProperty("anims")&&Array.isArray(e.anims)){for(var n=0;n<e.anims.length;n++){a.push(this.create(e.anims[n]))}if(e.hasOwnProperty("globalTimeScale")){this.globalTimeScale=e.globalTimeScale}}else if(e.hasOwnProperty("key")&&"frame"===e.type){a.push(this.create(e))}return a},generateFrameNames:function generateFrameNames(e,t){var a=d(t,"prefix",""),n=d(t,"start",0),r=d(t,"end",0),o=d(t,"suffix",""),s=d(t,"zeroPad",0),l=d(t,"outputArray",[]),c=d(t,"frames",!1),u=this.textureManager.get(e);if(!u){return l}var g=n<r?1:-1;r+=g;var h,m;if(!t){c=u.getFrameNames();for(h=0;h<c.length;h++){l.push({key:e,frame:c[h]})}}else if(Array.isArray(c)){for(h=0;h<c.length;h++){m=a+p(c[h],s,"0",1)+o;if(u.has(m)){l.push({key:e,frame:m})}}}else{for(h=n;h!==r;h+=g){m=a+p(h,s,"0",1)+o;if(u.has(m)){l.push({key:e,frame:m})}}}return l},generateFrameNumbers:function generateFrameNumbers(e,t){var a=d(t,"start",0),n=d(t,"end",-1),r=d(t,"first",!1),o=d(t,"outputArray",[]),s=d(t,"frames",!1),l=this.textureManager.get(e);if(!l){return o}if(r&&l.has(r)){o.push({key:e,frame:r})}var p;if(Array.isArray(s)){for(p=0;p<s.length;p++){if(l.has(s[p])){o.push({key:e,frame:s[p]})}}}else{if(-1===n){n=l.frameTotal}var c=a<n?1:-1;n+=c;for(p=a;p!==n;p+=c){if(l.has(p)){o.push({key:e,frame:p})}}}return o},get:function get(e){return this.anims.get(e)},load:function load(e,t,i){var a=this.get(t);if(a){a.load(e,i)}else{console.warn("Missing animation: "+t)}return e},pauseAll:function pauseAll(){if(!this.paused){this.paused=!0;this.emit(s.PAUSE_ALL)}return this},play:function play(e,t){if(!Array.isArray(t)){t=[t]}var a=this.get(e);if(!a){return}for(var n=0;n<t.length;n++){t[n].anims.play(e)}return this},remove:function remove(e){var t=this.get(e);if(t){this.emit(s.REMOVE_ANIMATION,e,t);this.anims.delete(e)}return t},resumeAll:function resumeAll(){if(this.paused){this.paused=!1;this.emit(s.RESUME_ALL)}return this},staggerPlay:function staggerPlay(e,t,a){if(a===void 0){a=0}if(!Array.isArray(t)){t=[t]}var n=this.get(e);if(!n){return}for(var r=0;r<t.length;r++){t[r].anims.delayedPlay(a*r,e)}return this},toJSON:function toJSON(e){if(e!==void 0&&""!==e){return this.anims.get(e).toJSON()}else{var t={anims:[],globalTimeScale:this.globalTimeScale};this.anims.each(function(e,i){t.anims.push(i.toJSON())});return t}},destroy:function destroy(){this.anims.clear();this.textureManager=null;this.game=null}});e.exports=c},function(e,t,i){var a=i(0),n=i(159),r=i(9),o=i(288),s=new a({initialize:function(){this.entries=new n;this.events=new r},add:function add(e,t){this.entries.set(e,t);this.events.emit(o.ADD,this,e,t);return this},has:function has(e){return this.entries.has(e)},exists:function exists(e){return this.entries.has(e)},get:function get(e){return this.entries.get(e)},remove:function remove(e){var t=this.get(e);if(t){this.entries.delete(e);this.events.emit(o.REMOVE,this,e,t.data)}return this},getKeys:function getKeys(){return this.entries.keys()},destroy:function destroy(){this.entries.clear();this.events.removeAllListeners();this.entries=null;this.events=null}});e.exports=s},function(e,t,i){e.exports={ADD:i(634),REMOVE:i(635)}},function(e,t,i){var a=i(287),n=i(0),r=i(18),o=new n({initialize:function(e){this.game=e;this.binary=new a;this.bitmapFont=new a;this.json=new a;this.physics=new a;this.shader=new a;this.audio=new a;this.video=new a;this.text=new a;this.html=new a;this.obj=new a;this.tilemap=new a;this.xml=new a;this.custom={};this.game.events.once(r.DESTROY,this.destroy,this)},addCustom:function addCustom(e){if(!this.custom.hasOwnProperty(e)){this.custom[e]=new a}return this.custom[e]},destroy:function destroy(){for(var e=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],t=0;t<e.length;t++){this[e[t]].destroy();this[e[t]]=null}for(var a in this.custom){this.custom[a].destroy()}this.custom=null;this.game=null}});e.exports=o},function(e,t,i){var a=i(91),n=i(26),r=i(165),o=i(22),s=i(0),l=i(12),d=i(298),p=i(115),c=i(11),u=i(3),g=new s({Extends:a,Mixins:[l.Flip,l.Tint],initialize:function(e,t,i,n){a.call(this,e,t,i,n);this.inputEnabled=!0;this.fadeEffect=new d.Fade(this);this.flashEffect=new d.Flash(this);this.shakeEffect=new d.Shake(this);this.panEffect=new d.Pan(this);this.zoomEffect=new d.Zoom(this);this.lerp=new u(1,1);this.followOffset=new u;this.deadzone=null;this._follow=null;this.renderToTexture=!1;this.canvas=null;this.context=null;this.glTexture=null;this.framebuffer=null;this.pipeline=null},setRenderToTexture:function setRenderToTexture(e){var t=this.scene.sys.game.renderer;if(t.gl){this.glTexture=t.createTextureFromSource(null,this.width,this.height,0);this.framebuffer=t.createFramebuffer(this.width,this.height,this.glTexture,!1)}else{this.canvas=n.create2D(this,this.width,this.height);this.context=this.canvas.getContext("2d")}this.renderToTexture=!0;if(e){this.setPipeline(e)}return this},setPipeline:function setPipeline(e){if("string"==typeof e){var t=this.scene.sys.game.renderer;if(t.gl&&t.hasPipeline(e)){this.pipeline=t.getPipeline(e)}}else{this.pipeline=e}return this},clearRenderToTexture:function clearRenderToTexture(){if(!this.scene){return}var e=this.scene.sys.game.renderer;if(!e){return}if(e.gl){if(this.framebuffer){e.deleteFramebuffer(this.framebuffer)}if(this.glTexture){e.deleteTexture(this.glTexture)}this.framebuffer=null;this.glTexture=null;this.pipeline=null}else{n.remove(this);this.canvas=null;this.context=null}this.renderToTexture=!1;return this},setDeadzone:function setDeadzone(e,t){if(e===void 0){this.deadzone=null}else{if(this.deadzone){this.deadzone.width=e;this.deadzone.height=t}else{this.deadzone=new c(0,0,e,t)}if(this._follow){var i=this.width/2,a=this.height/2,n=this._follow.x-this.followOffset.x,o=this._follow.y-this.followOffset.y;this.midPoint.set(n,o);this.scrollX=n-i;this.scrollY=o-a}r(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function fadeIn(e,t,i,a,n,r){return this.fadeEffect.start(!1,e,t,i,a,!0,n,r)},fadeOut:function fadeOut(e,t,i,a,n,r){return this.fadeEffect.start(!0,e,t,i,a,!0,n,r)},fadeFrom:function fadeFrom(e,t,i,a,n,r,o){return this.fadeEffect.start(!1,e,t,i,a,n,r,o)},fade:function fade(e,t,i,a,n,r,o){return this.fadeEffect.start(!0,e,t,i,a,n,r,o)},flash:function flash(e,t,i,a,n,r,o){return this.flashEffect.start(e,t,i,a,n,r,o)},shake:function shake(e,t,i,a,n){return this.shakeEffect.start(e,t,i,a,n)},pan:function pan(e,t,i,a,n,r,o){return this.panEffect.start(e,t,i,a,n,r,o)},zoomTo:function zoomTo(e,t,i,a,n,r){return this.zoomEffect.start(e,t,i,a,n,r)},preRender:function preRender(e){var t=this.width,i=this.height,a=this.zoom*e,n=this.matrix,o=t*this.originX,s=i*this.originY,l=this._follow,d=this.deadzone,c=this.scrollX,u=this.scrollY;if(d){r(d,this.midPoint.x,this.midPoint.y)}if(l&&!this.panEffect.isRunning){var g=l.x-this.followOffset.x,h=l.y-this.followOffset.y;if(d){if(g<d.x){c=p(c,c-(d.x-g),this.lerp.x)}else if(g>d.right){c=p(c,c+(g-d.right),this.lerp.x)}if(h<d.y){u=p(u,u-(d.y-h),this.lerp.y)}else if(h>d.bottom){u=p(u,u+(h-d.bottom),this.lerp.y)}}else{c=p(c,g-o,this.lerp.x);u=p(u,h-s,this.lerp.y)}}if(this.useBounds){c=this.clampX(c);u=this.clampY(u)}if(this.roundPixels){o=Math.round(o);s=Math.round(s)}this.scrollX=c;this.scrollY=u;var m=c+.5*t,y=u+.5*i;this.midPoint.set(m,y);var x=t/a,f=i/a;this.worldView.setTo(m-x/2,y-f/2,x,f);n.applyITRS(this.x+o,this.y+s,this.rotation,a,a);n.translate(-o,-s);this.shakeEffect.preRender()},setLerp:function setLerp(e,t){if(e===void 0){e=1}if(t===void 0){t=e}this.lerp.set(e,t);return this},setFollowOffset:function setFollowOffset(e,t){if(e===void 0){e=0}if(t===void 0){t=0}this.followOffset.set(e,t);return this},startFollow:function startFollow(e,t,i,a,n,r){if(t===void 0){t=!1}if(i===void 0){i=1}if(a===void 0){a=i}if(n===void 0){n=0}if(r===void 0){r=n}this._follow=e;this.roundPixels=t;i=o(i,0,1);a=o(a,0,1);this.lerp.set(i,a);this.followOffset.set(n,r);var s=this.width/2,l=this.height/2,d=e.x-n,p=e.y-r;this.midPoint.set(d,p);this.scrollX=d-s;this.scrollY=p-l;if(this.useBounds){this.scrollX=this.clampX(this.scrollX);this.scrollY=this.clampY(this.scrollY)}return this},stopFollow:function stopFollow(){this._follow=null;return this},resetFX:function resetFX(){this.panEffect.reset();this.shakeEffect.reset();this.flashEffect.reset();this.fadeEffect.reset();return this},update:function update(e,t){if(this.visible){this.panEffect.update(e,t);this.zoomEffect.update(e,t);this.shakeEffect.update(e,t);this.flashEffect.update(e,t);this.fadeEffect.update(e,t)}},destroy:function destroy(){this.clearRenderToTexture();this.resetFX();a.prototype.destroy.call(this);this._follow=null;this.deadzone=null}});e.exports=g},function(e,t,i){var a=i(33);e.exports=function HexStringToColor(e){var t=new a;e=e.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,a){return t+t+i+i+a+a});var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(i){var n=parseInt(i[1],16),r=parseInt(i[2],16),o=parseInt(i[3],16);t.setTo(n,r,o)}return t}},function(e){e.exports=function GetColor32(e,t,i,a){return a<<24|e<<16|t<<8|i}},function(e){e.exports=function RGBToHSV(e,t,i,a){if(a===void 0){a={h:0,s:0,v:0}}e/=255;t/=255;i/=255;var n=Math.min(e,t,i),o=Math.max(e,t,i),l=o-n,d=0,p=0===o?0:l/o,s=o;if(o!==n){if(o===e){d=(t-i)/l+(t<i?6:0)}else if(o===t){d=(i-e)/l+2}else if(o===i){d=(e-t)/l+4}d/=6}if(a.hasOwnProperty("_h")){a._h=d;a._s=p;a._v=s}else{a.h=d;a.s=p;a.v=s}return a}},function(e,t,i){var a=i(33),n=i(295);e.exports=function IntegerToColor(e){var t=n(e);return new a(t.r,t.g,t.b,t.a)}},function(e){e.exports=function IntegerToRGB(e){if(16777215<e){return{a:e>>>24,r:255&e>>16,g:255&e>>8,b:255&e}}else{return{a:255,r:255&e>>16,g:255&e>>8,b:255&e}}}},function(e,t,i){var a=i(33);e.exports=function ObjectToColor(e){return new a(e.r,e.g,e.b,e.a)}},function(e,t,i){var n=i(33);e.exports=function RGBStringToColor(e){var t=new n,i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e.toLowerCase());if(i){var o=parseInt(i[1],10),r=parseInt(i[2],10),s=parseInt(i[3],10),l=i[4]!==void 0?parseFloat(i[4]):1;t.setTo(o,r,s,255*l)}return t}},function(e,t,i){e.exports={Fade:i(656),Flash:i(657),Pan:i(658),Shake:i(691),Zoom:i(692)}},function(e,t,i){e.exports={In:i(659),Out:i(660),InOut:i(661)}},function(e,t,i){e.exports={In:i(662),Out:i(663),InOut:i(664)}},function(e,t,i){e.exports={In:i(665),Out:i(666),InOut:i(667)}},function(e,t,i){e.exports={In:i(668),Out:i(669),InOut:i(670)}},function(e,t,i){e.exports={In:i(671),Out:i(672),InOut:i(673)}},function(e,t,i){e.exports={In:i(674),Out:i(675),InOut:i(676)}},function(e,t,i){e.exports=i(677)},function(e,t,i){e.exports={In:i(678),Out:i(679),InOut:i(680)}},function(e,t,i){e.exports={In:i(681),Out:i(682),InOut:i(683)}},function(e,t,i){e.exports={In:i(684),Out:i(685),InOut:i(686)}},function(e,t,i){e.exports={In:i(687),Out:i(688),InOut:i(689)}},function(e,t,i){e.exports=i(690)},function(e,t,i){var a=i(0),n=i(29),r=i(312),o=i(2),s=i(6),l=i(7),d=i(168),p=i(1),c=i(173),u=i(161),g=new a({initialize:function(e){if(e===void 0){e={}}this.width=s(e,"width",1024);this.height=s(e,"height",768);this.zoom=s(e,"zoom",1);this.resolution=s(e,"resolution",1);this.parent=s(e,"parent",void 0);this.scaleMode=s(e,"scaleMode",0);this.expandParent=s(e,"expandParent",!0);this.autoRound=s(e,"autoRound",!1);this.autoCenter=s(e,"autoCenter",0);this.resizeInterval=s(e,"resizeInterval",500);this.fullscreenTarget=s(e,"fullscreenTarget",null);this.minWidth=s(e,"minWidth",0);this.maxWidth=s(e,"maxWidth",0);this.minHeight=s(e,"minHeight",0);this.maxHeight=s(e,"maxHeight",0);var t=s(e,"scale",null);if(t){this.width=s(t,"width",this.width);this.height=s(t,"height",this.height);this.zoom=s(t,"zoom",this.zoom);this.resolution=s(t,"resolution",this.resolution);this.parent=s(t,"parent",this.parent);this.scaleMode=s(t,"mode",this.scaleMode);this.expandParent=s(t,"expandParent",this.expandParent);this.autoRound=s(t,"autoRound",this.autoRound);this.autoCenter=s(t,"autoCenter",this.autoCenter);this.resizeInterval=s(t,"resizeInterval",this.resizeInterval);this.fullscreenTarget=s(t,"fullscreenTarget",this.fullscreenTarget);this.minWidth=s(t,"min.width",this.minWidth);this.maxWidth=s(t,"max.width",this.maxWidth);this.minHeight=s(t,"min.height",this.minHeight);this.maxHeight=s(t,"max.height",this.maxHeight)}this.renderType=s(e,"type",n.AUTO);this.canvas=s(e,"canvas",null);this.context=s(e,"context",null);this.canvasStyle=s(e,"canvasStyle",null);this.customEnvironment=s(e,"customEnvironment",!1);this.sceneConfig=s(e,"scene",null);this.seed=s(e,"seed",[(Date.now()*Math.random()).toString()]);d.RND=new d.RandomDataGenerator(this.seed);this.gameTitle=s(e,"title","");this.gameURL=s(e,"url","https://phaser.io");this.gameVersion=s(e,"version","");this.autoFocus=s(e,"autoFocus",!0);this.domCreateContainer=s(e,"dom.createContainer",!1);this.domBehindCanvas=s(e,"dom.behindCanvas",!1);this.inputKeyboard=s(e,"input.keyboard",!0);this.inputKeyboardEventTarget=s(e,"input.keyboard.target",window);this.inputKeyboardCapture=s(e,"input.keyboard.capture",[]);this.inputMouse=s(e,"input.mouse",!0);this.inputMouseEventTarget=s(e,"input.mouse.target",null);this.inputMouseCapture=s(e,"input.mouse.capture",!0);this.inputTouch=s(e,"input.touch",r.input.touch);this.inputTouchEventTarget=s(e,"input.touch.target",null);this.inputTouchCapture=s(e,"input.touch.capture",!0);this.inputActivePointers=s(e,"input.activePointers",1);this.inputSmoothFactor=s(e,"input.smoothFactor",0);this.inputWindowEvents=s(e,"input.windowEvents",!0);this.inputGamepad=s(e,"input.gamepad",!1);this.inputGamepadEventTarget=s(e,"input.gamepad.target",window);this.disableContextMenu=s(e,"disableContextMenu",!1);this.audio=s(e,"audio");this.hideBanner=!1===s(e,"banner",null);this.hidePhaser=s(e,"banner.hidePhaser",!1);this.bannerTextColor=s(e,"banner.text","#ffffff");this.bannerBackgroundColor=s(e,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]);if(""===this.gameTitle&&this.hidePhaser){this.hideBanner=!0}this.fps=s(e,"fps",null);var i=s(e,"render",e);this.antialias=s(i,"antialias",!0);this.antialiasGL=s(i,"antialiasGL",!0);this.mipmapFilter=s(i,"mipmapFilter","LINEAR");this.desynchronized=s(i,"desynchronized",!1);this.roundPixels=s(i,"roundPixels",!1);this.pixelArt=s(i,"pixelArt",1!==this.zoom);if(this.pixelArt){this.antialias=!1;this.roundPixels=!0}this.transparent=s(i,"transparent",!1);this.clearBeforeRender=s(i,"clearBeforeRender",!0);this.premultipliedAlpha=s(i,"premultipliedAlpha",!0);this.failIfMajorPerformanceCaveat=s(i,"failIfMajorPerformanceCaveat",!1);this.powerPreference=s(i,"powerPreference","default");this.batchSize=s(i,"batchSize",2e3);this.maxLights=s(i,"maxLights",10);var a=s(e,"backgroundColor",0);this.backgroundColor=u(a);if(0===a&&this.transparent){this.backgroundColor.alpha=0}this.preBoot=s(e,"callbacks.preBoot",p);this.postBoot=s(e,"callbacks.postBoot",p);this.physics=s(e,"physics",{});this.defaultPhysicsSystem=s(this.physics,"default",!1);this.loaderBaseURL=s(e,"loader.baseURL","");this.loaderPath=s(e,"loader.path","");this.loaderMaxParallelDownloads=s(e,"loader.maxParallelDownloads",32);this.loaderCrossOrigin=s(e,"loader.crossOrigin",void 0);this.loaderResponseType=s(e,"loader.responseType","");this.loaderAsync=s(e,"loader.async",!0);this.loaderUser=s(e,"loader.user","");this.loaderPassword=s(e,"loader.password","");this.loaderTimeout=s(e,"loader.timeout",0);this.installGlobalPlugins=[];this.installScenePlugins=[];var g=s(e,"plugins",null),h=c.DefaultScene;if(g){if(Array.isArray(g)){this.defaultPlugins=g}else if(l(g)){this.installGlobalPlugins=o(g,"global",[]);this.installScenePlugins=o(g,"scene",[]);if(Array.isArray(g.default)){h=g.default}else if(Array.isArray(g.defaultMerge)){h=h.concat(g.defaultMerge)}}}this.defaultPlugins=h;this.defaultImage=s(e,"images.default","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==");this.missingImage=s(e,"images.missing","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==");if(window){if(window.FORCE_WEBGL){this.renderType=n.WEBGL}else if(window.FORCE_CANVAS){this.renderType=n.CANVAS}}}});e.exports=g},function(e,t,i){e.exports={os:i(116),browser:i(117),features:i(167),input:i(721),audio:i(722),video:i(723),fullscreen:i(724),canvasFeatures:i(313)}},function(e,t,i){var r=i(26),o={supportInverseAlpha:!1,supportNewBlendModes:!1};function a(){var e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",t=new Image;t.onload=function(){var i=new Image;i.onload=function(){var e=r.create(i,6,1),a=e.getContext("2d");a.globalCompositeOperation="multiply";a.drawImage(t,0,0);a.drawImage(i,2,0);if(!a.getImageData(2,0,1,1)){return!1}var n=a.getImageData(2,0,1,1).data;r.remove(i);o.supportNewBlendModes=255===n[0]&&0===n[1]&&0===n[2]};i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX//wCKxvRF"+e};t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/AP804Oa6"+e;return!1}function n(){var e=r.create(this,2,1),t=e.getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)";t.fillRect(0,0,1,1);var i=t.getImageData(0,0,1,1);if(null===i){return!1}t.putImageData(i,1,0);var a=t.getImageData(1,0,1,1);return a.data[0]===i.data[0]&&a.data[1]===i.data[1]&&a.data[2]===i.data[2]&&a.data[3]===i.data[3]}e.exports=function(){if(document!==void 0){o.supportNewBlendModes=a();o.supportInverseAlpha=n()}return o}()},function(e){e.exports=function Between(e,t,i,a){return Math.atan2(a-t,i-e)}},function(e){e.exports=function Normalize(e){e=e%(2*Math.PI);if(0<=e){return e}else{return e+2*Math.PI}}},function(e){e.exports=function DistanceSquared(e,t,i,a){var n=e-i,r=t-a;return n*n+r*r}},function(e){e.exports=function GreaterThan(e,t,i){if(i===void 0){i=1e-4}return e>t-i}},function(e){e.exports=function LessThan(e,t,i){if(i===void 0){i=1e-4}return e<t+i}},function(e,t,i){var a=i(320);e.exports=function Bernstein(e,t){return a(e)/a(t)/a(e-t)}},function(e){e.exports=function Factorial(e){if(0===e){return 1}var t=e;while(--e){t*=e}return t}},function(e){function i(e,t){var i=1-e;return i*i*i*t}function a(e,t){var i=1-e;return 3*i*i*e*t}function n(e,t){return 3*(1-e)*e*e*t}function r(e,t){return e*e*e*t}e.exports=function CubicBezierInterpolation(e,t,o,s,l){return i(e,t)+a(e,o)+n(e,s)+r(e,l)}},function(e){function i(e,t){var i=1-e;return i*i*t}function a(e,t){return 2*(1-e)*e*t}function n(e,t){return e*e*t}e.exports=function QuadraticBezierInterpolation(e,t,r,o){return i(e,t)+a(e,r)+n(e,o)}},function(e,t,i){var a=i(158);e.exports=function SmoothStepInterpolation(e,t,i){return t+(i-t)*a(e,0,1)}},function(e){e.exports=function GetPowerOfTwo(e){var t=Math.log(e)/.6931471805599453;return 1<<Math.ceil(t)}},function(e){e.exports=function SnapCeil(e,t,i,a){if(i===void 0){i=0}if(0===t){return e}e-=i;e=t*Math.ceil(e/t);return a?(i+e)/t:i+e}},function(e){e.exports=function FloatBetween(e,t){return Math.random()*(t-e)+e}},function(e){e.exports=function Rotate(e,t){var i=e.x,a=e.y;e.x=i*Math.cos(t)-a*Math.sin(t);e.y=i*Math.sin(t)+a*Math.cos(t);return e}},function(e){e.exports=function RoundAwayFromZero(e){return 0<e?Math.ceil(e):Math.floor(e)}},function(e,t,i){var a=i(3);e.exports=function TransformXY(e,t,i,n,r,o,s,l){if(l===void 0){l=new a}var p=Math.sin(r),u=Math.cos(r),g=u*o,h=p*o,m=-p*s,c=u*s,d=1/(g*c+m*-h);l.x=c*d*e+-m*d*t+(n*m-i*c)*d;l.y=g*d*t+-h*d*e+(-n*g+i*h)*d;return l}},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t,i,a){this.x=0;this.y=0;this.z=0;this.w=0;if("object"===_typeof(e)){this.x=e.x||0;this.y=e.y||0;this.z=e.z||0;this.w=e.w||0}else{this.x=e||0;this.y=t||0;this.z=i||0;this.w=a||0}},clone:function clone(){return new n(this.x,this.y,this.z,this.w)},copy:function copy(e){this.x=e.x;this.y=e.y;this.z=e.z||0;this.w=e.w||0;return this},equals:function equals(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w},set:function set(e,t,i,a){if("object"===_typeof(e)){this.x=e.x||0;this.y=e.y||0;this.z=e.z||0;this.w=e.w||0}else{this.x=e||0;this.y=t||0;this.z=i||0;this.w=a||0}return this},add:function add(e){this.x+=e.x;this.y+=e.y;this.z+=e.z||0;this.w+=e.w||0;return this},subtract:function subtract(e){this.x-=e.x;this.y-=e.y;this.z-=e.z||0;this.w-=e.w||0;return this},scale:function scale(e){this.x*=e;this.y*=e;this.z*=e;this.w*=e;return this},length:function length(){var e=this.x,t=this.y,i=this.z,a=this.w;return Math.sqrt(e*e+t*t+i*i+a*a)},lengthSq:function lengthSq(){var e=this.x,t=this.y,i=this.z,a=this.w;return e*e+t*t+i*i+a*a},normalize:function normalize(){var e=this.x,t=this.y,i=this.z,a=this.w,n=e*e+t*t+i*i+a*a;if(0<n){n=1/Math.sqrt(n);this.x=e*n;this.y=t*n;this.z=i*n;this.w=a*n}return this},dot:function dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function lerp(e,i){if(i===void 0){i=0}var a=this.x,n=this.y,r=this.z,o=this.w;this.x=a+i*(e.x-a);this.y=n+i*(e.y-n);this.z=r+i*(e.z-r);this.w=o+i*(e.w-o);return this},multiply:function multiply(e){this.x*=e.x;this.y*=e.y;this.z*=e.z||1;this.w*=e.w||1;return this},divide:function divide(e){this.x/=e.x;this.y/=e.y;this.z/=e.z||1;this.w/=e.w||1;return this},distance:function distance(e){var t=e.x-this.x,i=e.y-this.y,a=e.z-this.z||0,n=e.w-this.w||0;return Math.sqrt(t*t+i*i+a*a+n*n)},distanceSq:function distanceSq(e){var t=e.x-this.x,i=e.y-this.y,a=e.z-this.z||0,n=e.w-this.w||0;return t*t+i*i+a*a+n*n},negate:function negate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},transformMat4:function transformMat4(e){var t=this.x,i=this.y,a=this.z,n=this.w,r=e.val;this.x=r[0]*t+r[4]*i+r[8]*a+r[12]*n;this.y=r[1]*t+r[5]*i+r[9]*a+r[13]*n;this.z=r[2]*t+r[6]*i+r[10]*a+r[14]*n;this.w=r[3]*t+r[7]*i+r[11]*a+r[15]*n;return this},transformQuat:function transformQuat(e){var t=this.x,i=this.y,a=this.z,n=e.x,r=e.y,o=e.z,s=e.w,l=s*t+r*a-o*i,d=s*i+o*t-n*a,p=s*a+n*i-r*t,c=-n*t-r*i-o*a;this.x=l*s+c*-n+d*-o-p*-r;this.y=d*s+c*-r+p*-n-l*-o;this.z=p*s+c*-o+l*-r-d*-n;return this},reset:function reset(){this.x=0;this.y=0;this.z=0;this.w=0;return this}});n.prototype.sub=n.prototype.subtract;n.prototype.mul=n.prototype.multiply;n.prototype.div=n.prototype.divide;n.prototype.dist=n.prototype.distance;n.prototype.distSq=n.prototype.distanceSq;n.prototype.len=n.prototype.length;n.prototype.lenSq=n.prototype.lengthSq;e.exports=n},function(e,t,i){var a=i(0),n=new a({initialize:function(e){this.val=new Float32Array(9);if(e){this.copy(e)}else{this.identity()}},clone:function clone(){return new n(this)},set:function set(e){return this.copy(e)},copy:function copy(e){var t=this.val,i=e.val;t[0]=i[0];t[1]=i[1];t[2]=i[2];t[3]=i[3];t[4]=i[4];t[5]=i[5];t[6]=i[6];t[7]=i[7];t[8]=i[8];return this},fromMat4:function fromMat4(e){var t=e.val,i=this.val;i[0]=t[0];i[1]=t[1];i[2]=t[2];i[3]=t[4];i[4]=t[5];i[5]=t[6];i[6]=t[8];i[7]=t[9];i[8]=t[10];return this},fromArray:function fromArray(e){var t=this.val;t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];return this},identity:function identity(){var e=this.val;e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=1;e[5]=0;e[6]=0;e[7]=0;e[8]=1;return this},transpose:function transpose(){var e=this.val,t=e[1],i=e[2],a=e[5];e[1]=e[3];e[2]=e[6];e[3]=t;e[5]=e[7];e[6]=i;e[7]=a;return this},invert:function invert(){var e=this.val,t=e[0],i=e[1],a=e[2],n=e[3],r=e[4],o=e[5],s=e[6],l=e[7],d=e[8],p=d*r-o*l,c=-d*n+o*s,u=l*n-r*s,g=t*p+i*c+a*u;if(!g){return null}g=1/g;e[0]=p*g;e[1]=(-d*i+a*l)*g;e[2]=(o*i-a*r)*g;e[3]=c*g;e[4]=(d*t-a*s)*g;e[5]=(-o*t+a*n)*g;e[6]=u*g;e[7]=(-l*t+i*s)*g;e[8]=(r*t-i*n)*g;return this},adjoint:function adjoint(){var e=this.val,t=e[0],i=e[1],a=e[2],n=e[3],r=e[4],o=e[5],s=e[6],l=e[7],d=e[8];e[0]=r*d-o*l;e[1]=a*l-i*d;e[2]=i*o-a*r;e[3]=o*s-n*d;e[4]=t*d-a*s;e[5]=a*n-t*o;e[6]=n*l-r*s;e[7]=i*s-t*l;e[8]=t*r-i*n;return this},determinant:function determinant(){var e=this.val,t=e[0],i=e[1],a=e[2],n=e[3],r=e[4],o=e[5],s=e[6],l=e[7],d=e[8];return t*(d*r-o*l)+i*(-d*n+o*s)+a*(l*n-r*s)},multiply:function multiply(e){var t=this.val,i=t[0],a=t[1],n=t[2],r=t[3],o=t[4],s=t[5],l=t[6],d=t[7],p=t[8],c=e.val,u=c[0],g=c[1],h=c[2],m=c[3],y=c[4],x=c[5],f=c[6],T=c[7],v=c[8];t[0]=u*i+g*r+h*l;t[1]=u*a+g*o+h*d;t[2]=u*n+g*s+h*p;t[3]=m*i+y*r+x*l;t[4]=m*a+y*o+x*d;t[5]=m*n+y*s+x*p;t[6]=f*i+T*r+v*l;t[7]=f*a+T*o+v*d;t[8]=f*n+T*s+v*p;return this},translate:function translate(e){var t=this.val,i=e.x,a=e.y;t[6]=i*t[0]+a*t[3]+t[6];t[7]=i*t[1]+a*t[4]+t[7];t[8]=i*t[2]+a*t[5]+t[8];return this},rotate:function rotate(e){var t=this.val,i=t[0],a=t[1],n=t[2],r=t[3],o=t[4],l=t[5],d=Math.sin(e),s=Math.cos(e);t[0]=s*i+d*r;t[1]=s*a+d*o;t[2]=s*n+d*l;t[3]=s*r-d*i;t[4]=s*o-d*a;t[5]=s*l-d*n;return this},scale:function scale(e){var t=this.val,i=e.x,a=e.y;t[0]=i*t[0];t[1]=i*t[1];t[2]=i*t[2];t[3]=a*t[3];t[4]=a*t[4];t[5]=a*t[5];return this},fromQuat:function fromQuat(e){var t=e.x,i=e.y,a=e.z,n=e.w,r=t+t,o=i+i,s=a+a,l=t*r,d=t*o,p=t*s,c=i*o,u=i*s,g=a*s,h=n*r,m=n*o,y=n*s,x=this.val;x[0]=1-(c+g);x[3]=d+y;x[6]=p-m;x[1]=d-y;x[4]=1-(l+g);x[7]=u+h;x[2]=p+m;x[5]=u-h;x[8]=1-(l+c);return this},normalFromMat4:function normalFromMat4(e){var t=e.val,i=this.val,a=t[0],n=t[1],r=t[2],o=t[3],s=t[4],l=t[5],d=t[6],p=t[7],c=t[8],u=t[9],g=t[10],h=t[11],m=t[12],y=t[13],x=t[14],f=t[15],T=a*l-n*s,v=a*d-r*s,b=a*p-o*s,E=n*d-r*l,S=n*p-o*l,_=r*p-o*d,A=c*y-u*m,C=c*x-g*m,w=c*f-h*m,P=u*x-g*y,O=u*f-h*y,R=g*f-h*x,L=T*R-v*O+b*P+E*w-S*C+_*A;if(!L){return null}L=1/L;i[0]=(l*R-d*O+p*P)*L;i[1]=(d*w-s*R-p*C)*L;i[2]=(s*O-l*w+p*A)*L;i[3]=(r*O-n*R-o*P)*L;i[4]=(a*R-r*w+o*C)*L;i[5]=(n*w-a*O-o*A)*L;i[6]=(y*_-x*S+f*E)*L;i[7]=(x*b-m*_-f*v)*L;i[8]=(m*S-y*b+f*T)*L;return this}});e.exports=n},function(e,t,i){var a=i(0),n=1e-6,r=new a({initialize:function(e){this.val=new Float32Array(16);if(e){this.copy(e)}else{this.identity()}},clone:function clone(){return new r(this)},set:function set(e){return this.copy(e)},copy:function copy(e){var t=this.val,i=e.val;t[0]=i[0];t[1]=i[1];t[2]=i[2];t[3]=i[3];t[4]=i[4];t[5]=i[5];t[6]=i[6];t[7]=i[7];t[8]=i[8];t[9]=i[9];t[10]=i[10];t[11]=i[11];t[12]=i[12];t[13]=i[13];t[14]=i[14];t[15]=i[15];return this},fromArray:function fromArray(e){var t=this.val;t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return this},zero:function zero(){var e=this.val;e[0]=0;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=0;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=0;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=0;return this},xyz:function xyz(e,t,i){this.identity();var a=this.val;a[12]=e;a[13]=t;a[14]=i;return this},scaling:function scaling(e,t,i){this.zero();var a=this.val;a[0]=e;a[5]=t;a[10]=i;a[15]=1;return this},identity:function identity(){var e=this.val;e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return this},transpose:function transpose(){var e=this.val,t=e[1],i=e[2],a=e[3],n=e[6],r=e[7],o=e[11];e[1]=e[4];e[2]=e[8];e[3]=e[12];e[4]=t;e[6]=e[9];e[7]=e[13];e[8]=i;e[9]=n;e[11]=e[14];e[12]=a;e[13]=r;e[14]=o;return this},invert:function invert(){var e=this.val,t=e[0],i=e[1],a=e[2],n=e[3],r=e[4],o=e[5],s=e[6],l=e[7],d=e[8],p=e[9],c=e[10],u=e[11],g=e[12],h=e[13],m=e[14],y=e[15],x=t*o-i*r,f=t*s-a*r,T=t*l-n*r,v=i*s-a*o,b=i*l-n*o,E=a*l-n*s,S=d*h-p*g,_=d*m-c*g,A=d*y-u*g,C=p*m-c*h,w=p*y-u*h,P=c*y-u*m,O=x*P-f*w+T*C+v*A-b*_+E*S;if(!O){return null}O=1/O;e[0]=(o*P-s*w+l*C)*O;e[1]=(a*w-i*P-n*C)*O;e[2]=(h*E-m*b+y*v)*O;e[3]=(c*b-p*E-u*v)*O;e[4]=(s*A-r*P-l*_)*O;e[5]=(t*P-a*A+n*_)*O;e[6]=(m*T-g*E-y*f)*O;e[7]=(d*E-c*T+u*f)*O;e[8]=(r*w-o*A+l*S)*O;e[9]=(i*A-t*w-n*S)*O;e[10]=(g*b-h*T+y*x)*O;e[11]=(p*T-d*b-u*x)*O;e[12]=(o*_-r*C-s*S)*O;e[13]=(t*C-i*_+a*S)*O;e[14]=(h*f-g*v-m*x)*O;e[15]=(d*v-p*f+c*x)*O;return this},adjoint:function adjoint(){var e=this.val,t=e[0],i=e[1],a=e[2],n=e[3],r=e[4],o=e[5],s=e[6],l=e[7],d=e[8],p=e[9],c=e[10],u=e[11],g=e[12],h=e[13],m=e[14],y=e[15];e[0]=o*(c*y-u*m)-p*(s*y-l*m)+h*(s*u-l*c);e[1]=-(i*(c*y-u*m)-p*(a*y-n*m)+h*(a*u-n*c));e[2]=i*(s*y-l*m)-o*(a*y-n*m)+h*(a*l-n*s);e[3]=-(i*(s*u-l*c)-o*(a*u-n*c)+p*(a*l-n*s));e[4]=-(r*(c*y-u*m)-d*(s*y-l*m)+g*(s*u-l*c));e[5]=t*(c*y-u*m)-d*(a*y-n*m)+g*(a*u-n*c);e[6]=-(t*(s*y-l*m)-r*(a*y-n*m)+g*(a*l-n*s));e[7]=t*(s*u-l*c)-r*(a*u-n*c)+d*(a*l-n*s);e[8]=r*(p*y-u*h)-d*(o*y-l*h)+g*(o*u-l*p);e[9]=-(t*(p*y-u*h)-d*(i*y-n*h)+g*(i*u-n*p));e[10]=t*(o*y-l*h)-r*(i*y-n*h)+g*(i*l-n*o);e[11]=-(t*(o*u-l*p)-r*(i*u-n*p)+d*(i*l-n*o));e[12]=-(r*(p*m-c*h)-d*(o*m-s*h)+g*(o*c-s*p));e[13]=t*(p*m-c*h)-d*(i*m-a*h)+g*(i*c-a*p);e[14]=-(t*(o*m-s*h)-r*(i*m-a*h)+g*(i*s-a*o));e[15]=t*(o*c-s*p)-r*(i*c-a*p)+d*(i*s-a*o);return this},determinant:function determinant(){var e=this.val,t=e[0],i=e[1],a=e[2],n=e[3],r=e[4],o=e[5],s=e[6],l=e[7],d=e[8],p=e[9],c=e[10],u=e[11],g=e[12],h=e[13],m=e[14],y=e[15];return(t*o-i*r)*(c*y-u*m)-(t*s-a*r)*(p*y-u*h)+(t*l-n*r)*(p*m-c*h)+(i*s-a*o)*(d*y-u*g)-(i*l-n*o)*(d*m-c*g)+(a*l-n*s)*(d*h-p*g)},multiply:function multiply(e){var t=this.val,i=t[0],a=t[1],n=t[2],r=t[3],o=t[4],s=t[5],l=t[6],d=t[7],p=t[8],c=t[9],u=t[10],g=t[11],h=t[12],m=t[13],y=t[14],x=t[15],f=e.val,T=f[0],v=f[1],b=f[2],E=f[3];t[0]=T*i+v*o+b*p+E*h;t[1]=T*a+v*s+b*c+E*m;t[2]=T*n+v*l+b*u+E*y;t[3]=T*r+v*d+b*g+E*x;T=f[4];v=f[5];b=f[6];E=f[7];t[4]=T*i+v*o+b*p+E*h;t[5]=T*a+v*s+b*c+E*m;t[6]=T*n+v*l+b*u+E*y;t[7]=T*r+v*d+b*g+E*x;T=f[8];v=f[9];b=f[10];E=f[11];t[8]=T*i+v*o+b*p+E*h;t[9]=T*a+v*s+b*c+E*m;t[10]=T*n+v*l+b*u+E*y;t[11]=T*r+v*d+b*g+E*x;T=f[12];v=f[13];b=f[14];E=f[15];t[12]=T*i+v*o+b*p+E*h;t[13]=T*a+v*s+b*c+E*m;t[14]=T*n+v*l+b*u+E*y;t[15]=T*r+v*d+b*g+E*x;return this},multiplyLocal:function multiplyLocal(e){var t=[],i=this.val,a=e.val;t[0]=i[0]*a[0]+i[1]*a[4]+i[2]*a[8]+i[3]*a[12];t[1]=i[0]*a[1]+i[1]*a[5]+i[2]*a[9]+i[3]*a[13];t[2]=i[0]*a[2]+i[1]*a[6]+i[2]*a[10]+i[3]*a[14];t[3]=i[0]*a[3]+i[1]*a[7]+i[2]*a[11]+i[3]*a[15];t[4]=i[4]*a[0]+i[5]*a[4]+i[6]*a[8]+i[7]*a[12];t[5]=i[4]*a[1]+i[5]*a[5]+i[6]*a[9]+i[7]*a[13];t[6]=i[4]*a[2]+i[5]*a[6]+i[6]*a[10]+i[7]*a[14];t[7]=i[4]*a[3]+i[5]*a[7]+i[6]*a[11]+i[7]*a[15];t[8]=i[8]*a[0]+i[9]*a[4]+i[10]*a[8]+i[11]*a[12];t[9]=i[8]*a[1]+i[9]*a[5]+i[10]*a[9]+i[11]*a[13];t[10]=i[8]*a[2]+i[9]*a[6]+i[10]*a[10]+i[11]*a[14];t[11]=i[8]*a[3]+i[9]*a[7]+i[10]*a[11]+i[11]*a[15];t[12]=i[12]*a[0]+i[13]*a[4]+i[14]*a[8]+i[15]*a[12];t[13]=i[12]*a[1]+i[13]*a[5]+i[14]*a[9]+i[15]*a[13];t[14]=i[12]*a[2]+i[13]*a[6]+i[14]*a[10]+i[15]*a[14];t[15]=i[12]*a[3]+i[13]*a[7]+i[14]*a[11]+i[15]*a[15];return this.fromArray(t)},translate:function translate(e){var t=e.x,i=e.y,n=e.z,r=this.val;r[12]=r[0]*t+r[4]*i+r[8]*n+r[12];r[13]=r[1]*t+r[5]*i+r[9]*n+r[13];r[14]=r[2]*t+r[6]*i+r[10]*n+r[14];r[15]=r[3]*t+r[7]*i+r[11]*n+r[15];return this},translateXYZ:function translateXYZ(e,t,i){var n=this.val;n[12]=n[0]*e+n[4]*t+n[8]*i+n[12];n[13]=n[1]*e+n[5]*t+n[9]*i+n[13];n[14]=n[2]*e+n[6]*t+n[10]*i+n[14];n[15]=n[3]*e+n[7]*t+n[11]*i+n[15];return this},scale:function scale(e){var t=e.x,i=e.y,n=e.z,r=this.val;r[0]=r[0]*t;r[1]=r[1]*t;r[2]=r[2]*t;r[3]=r[3]*t;r[4]=r[4]*i;r[5]=r[5]*i;r[6]=r[6]*i;r[7]=r[7]*i;r[8]=r[8]*n;r[9]=r[9]*n;r[10]=r[10]*n;r[11]=r[11]*n;return this},scaleXYZ:function scaleXYZ(e,t,i){var n=this.val;n[0]=n[0]*e;n[1]=n[1]*e;n[2]=n[2]*e;n[3]=n[3]*e;n[4]=n[4]*t;n[5]=n[5]*t;n[6]=n[6]*t;n[7]=n[7]*t;n[8]=n[8]*i;n[9]=n[9]*i;n[10]=n[10]*i;n[11]=n[11]*i;return this},makeRotationAxis:function makeRotationAxis(e,i){var a=Math.cos(i),n=Math.sin(i),r=1-a,t=e.x,o=e.y,s=e.z,l=r*t,d=r*o;this.fromArray([l*t+a,l*o-n*s,l*s+n*o,0,l*o+n*s,d*o+a,d*s-n*t,0,l*s-n*o,d*s+n*t,r*s*s+a,0,0,0,0,1]);return this},rotate:function rotate(e,i){var r=this.val,a=i.x,o=i.y,l=i.z,d=Math.sqrt(a*a+o*o+l*l);if(Math.abs(d)<n){return null}d=1/d;a*=d;o*=d;l*=d;var p=Math.sin(e),s=Math.cos(e),c=1-s,t=r[0],u=r[1],g=r[2],h=r[3],m=r[4],f=r[5],T=r[6],v=r[7],b=r[8],E=r[9],S=r[10],_=r[11],A=a*a*c+s,C=o*a*c+l*p,w=l*a*c-o*p,P=a*o*c-l*p,O=o*o*c+s,R=l*o*c+a*p,L=a*l*c+o*p,k=o*l*c-a*p,D=l*l*c+s;r[0]=t*A+m*C+b*w;r[1]=u*A+f*C+E*w;r[2]=g*A+T*C+S*w;r[3]=h*A+v*C+_*w;r[4]=t*P+m*O+b*R;r[5]=u*P+f*O+E*R;r[6]=g*P+T*O+S*R;r[7]=h*P+v*O+_*R;r[8]=t*L+m*k+b*D;r[9]=u*L+f*k+E*D;r[10]=g*L+T*k+S*D;r[11]=h*L+v*k+_*D;return this},rotateX:function rotateX(e){var t=this.val,i=Math.sin(e),a=Math.cos(e),n=t[4],r=t[5],o=t[6],s=t[7],l=t[8],d=t[9],p=t[10],c=t[11];t[4]=n*a+l*i;t[5]=r*a+d*i;t[6]=o*a+p*i;t[7]=s*a+c*i;t[8]=l*a-n*i;t[9]=d*a-r*i;t[10]=p*a-o*i;t[11]=c*a-s*i;return this},rotateY:function rotateY(e){var t=this.val,i=Math.sin(e),a=Math.cos(e),n=t[0],r=t[1],o=t[2],s=t[3],l=t[8],d=t[9],p=t[10],c=t[11];t[0]=n*a-l*i;t[1]=r*a-d*i;t[2]=o*a-p*i;t[3]=s*a-c*i;t[8]=n*i+l*a;t[9]=r*i+d*a;t[10]=o*i+p*a;t[11]=s*i+c*a;return this},rotateZ:function rotateZ(e){var t=this.val,i=Math.sin(e),a=Math.cos(e),n=t[0],r=t[1],o=t[2],s=t[3],l=t[4],d=t[5],p=t[6],c=t[7];t[0]=n*a+l*i;t[1]=r*a+d*i;t[2]=o*a+p*i;t[3]=s*a+c*i;t[4]=l*a-n*i;t[5]=d*a-r*i;t[6]=p*a-o*i;t[7]=c*a-s*i;return this},fromRotationTranslation:function fromRotationTranslation(e,t){var i=this.val,a=e.x,n=e.y,r=e.z,o=e.w,s=a+a,l=n+n,d=r+r,p=a*s,c=a*l,u=a*d,g=n*l,h=n*d,m=r*d,y=o*s,x=o*l,f=o*d;i[0]=1-(g+m);i[1]=c+f;i[2]=u-x;i[3]=0;i[4]=c-f;i[5]=1-(p+m);i[6]=h+y;i[7]=0;i[8]=u+x;i[9]=h-y;i[10]=1-(p+g);i[11]=0;i[12]=t.x;i[13]=t.y;i[14]=t.z;i[15]=1;return this},fromQuat:function fromQuat(e){var t=this.val,i=e.x,a=e.y,n=e.z,r=e.w,o=i+i,s=a+a,l=n+n,d=i*o,p=i*s,c=i*l,u=a*s,g=a*l,h=n*l,m=r*o,y=r*s,x=r*l;t[0]=1-(u+h);t[1]=p+x;t[2]=c-y;t[3]=0;t[4]=p-x;t[5]=1-(d+h);t[6]=g+m;t[7]=0;t[8]=c+y;t[9]=g-m;t[10]=1-(d+u);t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return this},frustum:function frustum(e,t,i,a,n,r){var o=this.val,s=1/(t-e),l=1/(a-i),d=1/(n-r);o[0]=2*n*s;o[1]=0;o[2]=0;o[3]=0;o[4]=0;o[5]=2*n*l;o[6]=0;o[7]=0;o[8]=(t+e)*s;o[9]=(a+i)*l;o[10]=(r+n)*d;o[11]=-1;o[12]=0;o[13]=0;o[14]=2*(r*n)*d;o[15]=0;return this},perspective:function perspective(e,t,i,a){var n=this.val,r=1/Math.tan(e/2),o=1/(i-a);n[0]=r/t;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=r;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=(a+i)*o;n[11]=-1;n[12]=0;n[13]=0;n[14]=2*a*i*o;n[15]=0;return this},perspectiveLH:function perspectiveLH(e,t,i,a){var n=this.val;n[0]=2*i/e;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=2*i/t;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=-a/(i-a);n[11]=1;n[12]=0;n[13]=0;n[14]=i*a/(i-a);n[15]=0;return this},ortho:function ortho(e,t,i,a,n,r){var o=this.val,s=e-t,l=i-a,d=n-r;s=0===s?s:1/s;l=0===l?l:1/l;d=0===d?d:1/d;o[0]=-2*s;o[1]=0;o[2]=0;o[3]=0;o[4]=0;o[5]=-2*l;o[6]=0;o[7]=0;o[8]=0;o[9]=0;o[10]=2*d;o[11]=0;o[12]=(e+t)*s;o[13]=(a+i)*l;o[14]=(r+n)*d;o[15]=1;return this},lookAt:function lookAt(e,t,i){var a=this.val,r=e.x,o=e.y,s=e.z,l=i.x,d=i.y,p=i.z,c=t.x,u=t.y,g=t.z;if(Math.abs(r-c)<n&&Math.abs(o-u)<n&&Math.abs(s-g)<n){return this.identity()}var h=r-c,m=o-u,y=s-g,x=1/Math.sqrt(h*h+m*m+y*y);h*=x;m*=x;y*=x;var f=d*y-p*m,T=p*h-l*y,v=l*m-d*h;x=Math.sqrt(f*f+T*T+v*v);if(!x){f=0;T=0;v=0}else{x=1/x;f*=x;T*=x;v*=x}var b=m*v-y*T,E=y*f-h*v,S=h*T-m*f;x=Math.sqrt(b*b+E*E+S*S);if(!x){b=0;E=0;S=0}else{x=1/x;b*=x;E*=x;S*=x}a[0]=f;a[1]=b;a[2]=h;a[3]=0;a[4]=T;a[5]=E;a[6]=m;a[7]=0;a[8]=v;a[9]=S;a[10]=y;a[11]=0;a[12]=-(f*r+T*o+v*s);a[13]=-(b*r+E*o+S*s);a[14]=-(h*r+m*o+y*s);a[15]=1;return this},yawPitchRoll:function yawPitchRoll(e,t,i){this.zero();o.zero();l.zero();var a=this.val,n=o.val,r=l.val,d=Math.sin(i),p=Math.cos(i);a[10]=1;a[15]=1;a[0]=p;a[1]=d;a[4]=-d;a[5]=p;d=Math.sin(t);p=Math.cos(t);n[0]=1;n[15]=1;n[5]=p;n[10]=p;n[9]=-d;n[6]=d;d=Math.sin(e);p=Math.cos(e);r[5]=1;r[15]=1;r[0]=p;r[2]=-d;r[8]=d;r[10]=p;this.multiplyLocal(o);this.multiplyLocal(l);return this},setWorldMatrix:function setWorldMatrix(e,t,i,a,n){this.yawPitchRoll(e.y,e.x,e.z);o.scaling(i.x,i.y,i.z);l.xyz(t.x,t.y,t.z);this.multiplyLocal(o);this.multiplyLocal(l);if(a!==void 0){this.multiplyLocal(a)}if(n!==void 0){this.multiplyLocal(n)}return this}}),o=new r,l=new r;e.exports=r},function(e,t,i){var a=i(0),n=i(172),r=i(331),o=1e-6,s=new Int8Array([1,2,0]),l=new Float32Array([0,0,0]),d=new n(1,0,0),p=new n(0,1,0),c=new n,u=new r,g=new a({initialize:function(e,t,i,a){if("object"===_typeof(e)){this.x=e.x||0;this.y=e.y||0;this.z=e.z||0;this.w=e.w||0}else{this.x=e||0;this.y=t||0;this.z=i||0;this.w=a||0}},copy:function copy(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w;return this},set:function set(e,t,i,a){if("object"===_typeof(e)){this.x=e.x||0;this.y=e.y||0;this.z=e.z||0;this.w=e.w||0}else{this.x=e||0;this.y=t||0;this.z=i||0;this.w=a||0}return this},add:function add(e){this.x+=e.x;this.y+=e.y;this.z+=e.z;this.w+=e.w;return this},subtract:function subtract(e){this.x-=e.x;this.y-=e.y;this.z-=e.z;this.w-=e.w;return this},scale:function scale(e){this.x*=e;this.y*=e;this.z*=e;this.w*=e;return this},length:function length(){var e=this.x,t=this.y,i=this.z,a=this.w;return Math.sqrt(e*e+t*t+i*i+a*a)},lengthSq:function lengthSq(){var e=this.x,t=this.y,i=this.z,a=this.w;return e*e+t*t+i*i+a*a},normalize:function normalize(){var e=this.x,t=this.y,i=this.z,a=this.w,n=e*e+t*t+i*i+a*a;if(0<n){n=1/Math.sqrt(n);this.x=e*n;this.y=t*n;this.z=i*n;this.w=a*n}return this},dot:function dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lerp:function lerp(e,i){if(i===void 0){i=0}var a=this.x,n=this.y,r=this.z,o=this.w;this.x=a+i*(e.x-a);this.y=n+i*(e.y-n);this.z=r+i*(e.z-r);this.w=o+i*(e.w-o);return this},rotationTo:function rotationTo(e,t){var i=e.x*t.x+e.y*t.y+e.z*t.z;if(-.999999>i){if(c.copy(d).cross(e).length()<o){c.copy(p).cross(e)}c.normalize();return this.setAxisAngle(c,Math.PI)}else if(.999999<i){this.x=0;this.y=0;this.z=0;this.w=1;return this}else{c.copy(e).cross(t);this.x=c.x;this.y=c.y;this.z=c.z;this.w=1+i;return this.normalize()}},setAxes:function setAxes(e,t,i){var a=u.val;a[0]=t.x;a[3]=t.y;a[6]=t.z;a[1]=i.x;a[4]=i.y;a[7]=i.z;a[2]=-e.x;a[5]=-e.y;a[8]=-e.z;return this.fromMat3(u).normalize()},identity:function identity(){this.x=0;this.y=0;this.z=0;this.w=1;return this},setAxisAngle:function setAxisAngle(e,t){t=.5*t;var i=Math.sin(t);this.x=i*e.x;this.y=i*e.y;this.z=i*e.z;this.w=Math.cos(t);return this},multiply:function multiply(e){var t=this.x,i=this.y,a=this.z,n=this.w,r=e.x,o=e.y,s=e.z,l=e.w;this.x=t*l+n*r+i*s-a*o;this.y=i*l+n*o+a*r-t*s;this.z=a*l+n*s+t*o-i*r;this.w=n*l-t*r-i*o-a*s;return this},slerp:function slerp(e,i){var t=this.x,a=this.y,n=this.z,r=this.w,s=e.x,l=e.y,d=e.z,p=e.w,c=t*s+a*l+n*d+r*p;if(0>c){c=-c;s=-s;l=-l;d=-d;p=-p}var u=1-i,g=i;if(1-c>o){var h=Math.acos(c),m=Math.sin(h);u=Math.sin((1-i)*h)/m;g=Math.sin(i*h)/m}this.x=u*t+g*s;this.y=u*a+g*l;this.z=u*n+g*d;this.w=u*r+g*p;return this},invert:function invert(){var e=this.x,t=this.y,i=this.z,a=this.w,n=e*e+t*t+i*i+a*a,r=n?1/n:0;this.x=-e*r;this.y=-t*r;this.z=-i*r;this.w=a*r;return this},conjugate:function conjugate(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},rotateX:function rotateX(e){e*=.5;var t=this.x,i=this.y,a=this.z,n=this.w,r=Math.sin(e),o=Math.cos(e);this.x=t*o+n*r;this.y=i*o+a*r;this.z=a*o-i*r;this.w=n*o-t*r;return this},rotateY:function rotateY(e){e*=.5;var t=this.x,i=this.y,a=this.z,n=this.w,r=Math.sin(e),o=Math.cos(e);this.x=t*o-a*r;this.y=i*o+n*r;this.z=a*o+t*r;this.w=n*o-i*r;return this},rotateZ:function rotateZ(e){e*=.5;var t=this.x,i=this.y,a=this.z,n=this.w,r=Math.sin(e),o=Math.cos(e);this.x=t*o+i*r;this.y=i*o-t*r;this.z=a*o+n*r;this.w=n*o-a*r;return this},calculateW:function calculateW(){var e=this.x,t=this.y,i=this.z;this.w=-Math.sqrt(1-e*e-t*t-i*i);return this},fromMat3:function fromMat3(e){var t=e.val,a=t[0]+t[4]+t[8],n;if(0<a){n=Math.sqrt(a+1);this.w=.5*n;n=.5/n;this.x=(t[7]-t[5])*n;this.y=(t[2]-t[6])*n;this.z=(t[3]-t[1])*n}else{var r=0;if(t[4]>t[0]){r=1}if(t[8]>t[3*r+r]){r=2}var o=s[r],d=s[o];n=Math.sqrt(t[3*r+r]-t[3*o+o]-t[3*d+d]+1);l[r]=.5*n;n=.5/n;l[o]=(t[3*o+r]+t[3*r+o])*n;l[d]=(t[3*d+r]+t[3*r+d])*n;this.x=l[0];this.y=l[1];this.z=l[2];this.w=(t[3*d+o]-t[3*o+d])*n}return this}});e.exports=g},function(e,t,i){var a=i(335),n=i(26),r=i(29),o=i(167);e.exports=function CreateRenderer(e){var t=e.config;if((t.customEnvironment||t.canvas)&&t.renderType===r.AUTO){throw new Error("Must set explicit renderType in custom environment")}if(!t.customEnvironment&&!t.canvas&&t.renderType!==r.HEADLESS){if(t.renderType===r.CANVAS||t.renderType!==r.CANVAS&&!o.webGL){if(o.canvas){t.renderType=r.CANVAS}else{throw new Error("Cannot create Canvas or WebGL context, aborting.")}}else{t.renderType=r.WEBGL}}if(!t.antialias){n.disableSmoothing()}var s=e.scale.baseSize,l=s.width,d=s.height;if(t.canvas){e.canvas=t.canvas;e.canvas.width=l;e.canvas.height=d}else{e.canvas=n.create(e,l,d,t.renderType)}if(t.canvasStyle){e.canvas.style=t.canvasStyle}if(!t.antialias){a.setCrisp(e.canvas)}if(t.renderType===r.HEADLESS){return}var p,c;p=i(499);c=i(502);if(t.renderType===r.WEBGL){e.renderer=new c(e)}else{e.renderer=new p(e);e.context=e.renderer.gameContext}}},function(e){e.exports={setCrisp:function setCrisp(e){["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach(function(t){e.style["image-rendering"]=t});e.style.msInterpolationMode="nearest-neighbor";return e},setBicubic:function setBicubic(e){e.style["image-rendering"]="auto";e.style.msInterpolationMode="bicubic";return e}}},function(e,t,i){var a=i(29);e.exports=function DebugHeader(e){var t=e.config;if(t.hideBanner){return}var i="WebGL";if(t.renderType===a.CANVAS){i="Canvas"}else if(t.renderType===a.HEADLESS){i="Headless"}var n=t.audio,r=e.device.audio,o;if(r.webAudio&&!(n&&n.disableWebAudio)){o="Web Audio"}else if(n&&n.noAudio||!r.webAudio&&!r.audioData){o="No Audio"}else{o="HTML5 Audio"}if(!e.device.browser.ie){var s="",l=[s];if(Array.isArray(t.bannerBackgroundColor)){var d;t.bannerBackgroundColor.forEach(function(e){s=s.concat("%c ");l.push("background: "+e);d=e});l[l.length-1]="color: "+t.bannerTextColor+"; background: "+d}else{s=s.concat("%c ");l.push("color: "+t.bannerTextColor+"; background: "+t.bannerBackgroundColor)}l.push("background: #fff");if(t.gameTitle){s=s.concat(t.gameTitle);if(t.gameVersion){s=s.concat(" v"+t.gameVersion)}if(!t.hidePhaser){s=s.concat(" / ")}}"";if(!t.hidePhaser){s=s.concat("Phaser v"+a.VERSION+""+" ("+i+" | "+o+")")}s=s.concat(" %c "+t.gameURL);l[0]=s;console.log.apply(console,l)}else if(window.console){console.log("Phaser v"+a.VERSION+" / https://phaser.io")}}},function(e,t,i){var a=i(0),n=i(6),r=i(1),o=i(338),s=new a({initialize:function(e,t){this.game=e;this.raf=new o;this.started=!1;this.running=!1;this.minFps=n(t,"min",5);this.targetFps=n(t,"target",60);this._min=1e3/this.minFps;this._target=1e3/this.targetFps;this.actualFps=this.targetFps;this.nextFpsUpdate=0;this.framesThisSecond=0;this.callback=r;this.forceSetTimeOut=n(t,"forceSetTimeOut",!1);this.time=0;this.startTime=0;this.lastTime=0;this.frame=0;this.inFocus=!0;this._pauseTime=0;this._coolDown=0;this.delta=0;this.deltaIndex=0;this.deltaHistory=[];this.deltaSmoothingMax=n(t,"deltaHistory",10);this.panicMax=n(t,"panicMax",120);this.rawDelta=0;this.now=0;this.smoothStep=n(t,"smoothStep",!0)},blur:function blur(){this.inFocus=!1},focus:function focus(){this.inFocus=!0;this.resetDelta()},pause:function pause(){this._pauseTime=window.performance.now()},resume:function resume(){this.resetDelta();this.startTime+=this.time-this._pauseTime},resetDelta:function resetDelta(){var e=window.performance.now();this.time=e;this.lastTime=e;this.nextFpsUpdate=e+1e3;this.framesThisSecond=0;for(var t=0;t<this.deltaSmoothingMax;t++){this.deltaHistory[t]=Math.min(this._target,this.deltaHistory[t])}this.delta=0;this.deltaIndex=0;this._coolDown=this.panicMax},start:function start(e){if(this.started){return this}this.started=!0;this.running=!0;for(var t=0;t<this.deltaSmoothingMax;t++){this.deltaHistory[t]=this._target}this.resetDelta();this.startTime=window.performance.now();this.callback=e;this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function step(){var e=window.performance.now();this.now=e;var t=e-this.lastTime;if(0>t){t=0}this.rawDelta=t;var a=this.deltaIndex,n=this.deltaHistory,r=this.deltaSmoothingMax,o=t,s=t;if(this.smoothStep){if(0<this._coolDown||!this.inFocus){this._coolDown--;o=Math.min(o,this._target)}if(o>this._min){o=n[a];o=Math.min(o,this._min)}n[a]=o;this.deltaIndex++;if(this.deltaIndex>r){this.deltaIndex=0}s=0;for(var l=0;l<r;l++){s+=n[l]}s/=r}this.delta=s;this.time+=this.rawDelta;if(e>this.nextFpsUpdate){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps;this.nextFpsUpdate=e+1e3;this.framesThisSecond=0}this.framesThisSecond++;var d=s/this._target;this.callback(e,s,d);this.lastTime=e;this.frame++},tick:function tick(){this.step()},sleep:function sleep(){if(this.running){this.raf.stop();this.running=!1}},wake:function wake(e){if(this.running){this.sleep()}else if(e){this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())}this.raf.start(this.step.bind(this),this.useRAF);this.running=!0;this.step()},getDuration:function getDuration(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function getDurationMS(){return Math.round(this.lastTime-this.startTime)},stop:function stop(){this.running=!1;this.started=!1;this.raf.stop();return this},destroy:function destroy(){this.stop();this.callback=r;this.raf=null;this.game=null}});e.exports=s},function(e,t,i){var a=i(0),n=i(1),r=new a({initialize:function(){this.isRunning=!1;this.callback=n;this.tick=0;this.isSetTimeOut=!1;this.timeOutID=null;this.lastTime=0;this.target=0;var e=this;this.step=function t(){var i=window.performance.now();e.lastTime=e.tick;e.tick=i;e.callback(i);e.timeOutID=window.requestAnimationFrame(t)};this.stepTimeout=function t(){var i=Date.now(),a=Math.min(Math.max(2*e.target+e.tick-i,0),e.target);e.lastTime=e.tick;e.tick=i;e.callback(i);e.timeOutID=window.setTimeout(t,a)}},start:function start(e,t,i){if(this.isRunning){return}this.callback=e;this.isSetTimeOut=t;this.target=i;this.isRunning=!0;this.timeOutID=t?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step)},stop:function stop(){this.isRunning=!1;if(this.isSetTimeOut){clearTimeout(this.timeOutID)}else{window.cancelAnimationFrame(this.timeOutID)}},destroy:function destroy(){this.stop();this.callback=n}});e.exports=r},function(e,t,i){var a=i(18);e.exports=function VisibilityHandler(e){var t,i=e.events;if(document.hidden!==void 0){t="visibilitychange"}else{["webkit","moz","ms"].forEach(function(e){if(document[e+"Hidden"]!==void 0){document.hidden=function(){return document[e+"Hidden"]};t=e+"visibilitychange"}})}var n=function(e){if(document.hidden||"pause"===e.type){i.emit(a.HIDDEN)}else{i.emit(a.VISIBLE)}};if(t){document.addEventListener(t,n,!1)}window.onblur=function(){i.emit(a.BLUR)};window.onfocus=function(){i.emit(a.FOCUS)};if(window.focus&&e.config.autoFocus){window.focus()}}},function(e,t,i){var a=i(341),n=i(26),r=i(6);e.exports=function GenerateTexture(e){var t=r(e,"data",[]),i=r(e,"canvas",null),o=r(e,"palette",a),s=r(e,"pixelWidth",1),l=r(e,"pixelHeight",s),p=r(e,"resizeCanvas",!0),c=r(e,"clearCanvas",!0),u=r(e,"preRender",null),g=r(e,"postRender",null),h=Math.floor(Math.abs(t[0].length*s)),m=Math.floor(Math.abs(t.length*l));if(!i){i=n.create2D(this,h,m);p=!1;c=!1}if(p){i.width=h;i.height=m}var f=i.getContext("2d");if(c){f.clearRect(0,0,h,m)}if(u){u(i,f)}for(var T=0,v;T<t.length;T++){v=t[T];for(var b=0,E;b<v.length;b++){E=v[b];if("."!==E&&" "!==E){f.fillStyle=o[E];f.fillRect(b*s,T*l,s,l)}}}if(g){g(i,f)}return i}},function(e){e.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(e,t,i){var a=i(0),n=i(321),r=i(80),o=i(3),s=new a({Extends:r,initialize:function(e,t,i,a){r.call(this,"CubicBezierCurve");if(Array.isArray(e)){a=new o(e[6],e[7]);i=new o(e[4],e[5]);t=new o(e[2],e[3]);e=new o(e[0],e[1])}this.p0=e;this.p1=t;this.p2=i;this.p3=a},getStartPoint:function getStartPoint(e){if(e===void 0){e=new o}return e.copy(this.p0)},getResolution:function getResolution(e){return e},getPoint:function getPoint(e,t){if(t===void 0){t=new o}var i=this.p0,a=this.p1,r=this.p2,s=this.p3;return t.set(n(e,i.x,a.x,r.x,s.x),n(e,i.y,a.y,r.y,s.y))},draw:function draw(e,t){if(t===void 0){t=32}var a=this.getPoints(t);e.beginPath();e.moveTo(this.p0.x,this.p0.y);for(var n=1;n<a.length;n++){e.lineTo(a[n].x,a[n].y)}e.strokePath();return e},toJSON:function toJSON(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});s.fromJSON=function(e){var t=e.points,i=new o(t[0],t[1]),a=new o(t[2],t[3]),n=new o(t[4],t[5]),r=new o(t[6],t[7]);return new s(i,a,n,r)};e.exports=s},function(e,t,i){var a=i(0),n=i(80),r=i(35),o=i(6),s=i(171),l=i(3),d=new a({Extends:n,initialize:function(e,t,i,a,s,d,p,c){if("object"===_typeof(e)){var u=e;e=o(u,"x",0);t=o(u,"y",0);i=o(u,"xRadius",0);a=o(u,"yRadius",i);s=o(u,"startAngle",0);d=o(u,"endAngle",360);p=o(u,"clockwise",!1);c=o(u,"rotation",0)}else{if(a===void 0){a=i}if(s===void 0){s=0}if(d===void 0){d=360}if(p===void 0){p=!1}if(c===void 0){c=0}}n.call(this,"EllipseCurve");this.p0=new l(e,t);this._xRadius=i;this._yRadius=a;this._startAngle=r(s);this._endAngle=r(d);this._clockwise=p;this._rotation=r(c)},getStartPoint:function getStartPoint(e){if(e===void 0){e=new l}return this.getPoint(0,e)},getResolution:function getResolution(e){return 2*e},getPoint:function getPoint(e,t){if(t===void 0){t=new l}var i=2*Math.PI,a=this._endAngle-this._startAngle,n=Math.abs(a)<Number.EPSILON;while(0>a){a+=i}while(a>i){a-=i}if(a<Number.EPSILON){if(n){a=0}else{a=i}}if(this._clockwise&&!n){if(a===i){a=-i}else{a=a-i}}var r=this._startAngle+e*a,o=this.p0.x+this._xRadius*Math.cos(r),s=this.p0.y+this._yRadius*Math.sin(r);if(0!==this._rotation){var d=Math.cos(this._rotation),p=Math.sin(this._rotation),c=o-this.p0.x,u=s-this.p0.y;o=c*d-u*p+this.p0.x;s=c*p+u*d+this.p0.y}return t.set(o,s)},setXRadius:function setXRadius(e){this.xRadius=e;return this},setYRadius:function setYRadius(e){this.yRadius=e;return this},setWidth:function setWidth(e){this.xRadius=2*e;return this},setHeight:function setHeight(e){this.yRadius=2*e;return this},setStartAngle:function setStartAngle(e){this.startAngle=e;return this},setEndAngle:function setEndAngle(e){this.endAngle=e;return this},setClockwise:function setClockwise(e){this.clockwise=e;return this},setRotation:function setRotation(e){this.rotation=e;return this},x:{get:function get(){return this.p0.x},set:function set(e){this.p0.x=e}},y:{get:function get(){return this.p0.y},set:function set(e){this.p0.y=e}},xRadius:{get:function get(){return this._xRadius},set:function set(e){this._xRadius=e}},yRadius:{get:function get(){return this._yRadius},set:function set(e){this._yRadius=e}},startAngle:{get:function get(){return s(this._startAngle)},set:function set(e){this._startAngle=r(e)}},endAngle:{get:function get(){return s(this._endAngle)},set:function set(e){this._endAngle=r(e)}},clockwise:{get:function get(){return this._clockwise},set:function set(e){this._clockwise=e}},angle:{get:function get(){return s(this._rotation)},set:function set(e){this._rotation=r(e)}},rotation:{get:function get(){return this._rotation},set:function set(e){this._rotation=e}},toJSON:function toJSON(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:s(this._startAngle),endAngle:s(this._endAngle),clockwise:this._clockwise,rotation:s(this._rotation)}}});d.fromJSON=function(e){return new d(e)};e.exports=d},function(e,t,i){var a=i(0),n=i(80),r=i(174),o=i(11),s=i(3),l=new s,d=new a({Extends:n,initialize:function(e,t){n.call(this,"LineCurve");if(Array.isArray(e)){t=new s(e[2],e[3]);e=new s(e[0],e[1])}this.p0=e;this.p1=t;this.arcLengthDivisions=1},getBounds:function getBounds(e){if(e===void 0){e=new o}return r([this.p0,this.p1],e)},getStartPoint:function getStartPoint(e){if(e===void 0){e=new s}return e.copy(this.p0)},getResolution:function getResolution(e){if(e===void 0){e=1}return e},getPoint:function getPoint(e,t){if(t===void 0){t=new s}if(1===e){return t.copy(this.p1)}t.copy(this.p1).subtract(this.p0).scale(e).add(this.p0);return t},getPointAt:function getPointAt(e,t){return this.getPoint(e,t)},getTangent:function getTangent(){var e=l.copy(this.p1).subtract(this.p0);return e.normalize()},getUtoTmapping:function getUtoTmapping(e,i,a){var n;if(i){var r=this.getLengths(a),o=r[r.length-1],s=Math.min(i,o);n=s/o}else{n=e}return n},draw:function draw(e){e.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y);return e},toJSON:function toJSON(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});d.fromJSON=function(e){var t=e.points,i=new s(t[0],t[1]),a=new s(t[2],t[3]);return new d(i,a)};e.exports=d},function(e,t,i){var a=i(0),n=i(80),r=i(322),o=i(3),s=new a({Extends:n,initialize:function(e,t,i){n.call(this,"QuadraticBezier");if(Array.isArray(e)){i=new o(e[4],e[5]);t=new o(e[2],e[3]);e=new o(e[0],e[1])}this.p0=e;this.p1=t;this.p2=i},getStartPoint:function getStartPoint(e){if(e===void 0){e=new o}return e.copy(this.p0)},getResolution:function getResolution(e){return e},getPoint:function getPoint(e,t){if(t===void 0){t=new o}var i=this.p0,a=this.p1,n=this.p2;return t.set(r(e,i.x,a.x,n.x),r(e,i.y,a.y,n.y))},draw:function draw(e,t){if(t===void 0){t=32}var a=this.getPoints(t);e.beginPath();e.moveTo(this.p0.x,this.p0.y);for(var n=1;n<a.length;n++){e.lineTo(a[n].x,a[n].y)}e.strokePath();return e},toJSON:function toJSON(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});s.fromJSON=function(e){var t=e.points,i=new o(t[0],t[1]),a=new o(t[2],t[3]),n=new o(t[4],t[5]);return new s(i,a,n)};e.exports=s},function(e,t,i){var a=i(169),n=i(0),r=i(80),o=i(3),s=new n({Extends:r,initialize:function(e){if(e===void 0){e=[]}r.call(this,"SplineCurve");this.points=[];this.addPoints(e)},addPoints:function addPoints(e){for(var t=0,a;t<e.length;t++){a=new o;if("number"==typeof e[t]){a.x=e[t];a.y=e[t+1];t++}else if(Array.isArray(e[t])){a.x=e[t][0];a.y=e[t][1]}else{a.x=e[t].x;a.y=e[t].y}this.points.push(a)}return this},addPoint:function addPoint(e,t){var i=new o(e,t);this.points.push(i);return i},getStartPoint:function getStartPoint(e){if(e===void 0){e=new o}return e.copy(this.points[0])},getResolution:function getResolution(e){return e*this.points.length},getPoint:function getPoint(e,t){if(t===void 0){t=new o}var i=this.points,n=(i.length-1)*e,r=Math.floor(n),s=n-r,l=i[0===r?r:r-1],d=i[r],p=i[r>i.length-2?i.length-1:r+1],c=i[r>i.length-3?i.length-1:r+2];return t.set(a(s,l.x,d.x,p.x,c.x),a(s,l.y,d.y,p.y,c.y))},toJSON:function toJSON(){for(var e=[],t=0;t<this.points.length;t++){e.push(this.points[t].x);e.push(this.points[t].y)}return{type:this.type,points:e}}});s.fromJSON=function(e){return new s(e.points)};e.exports=s},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t,i,a){if(!t||""===t){t="precision mediump float;\nuniform vec2 resolution;\nvarying vec2 fragCoord;\nvoid main () {\n    vec2 uv = fragCoord / resolution.xy;\n    gl_FragColor = vec4(uv.xyx, 1.0);\n}"}if(!i||""===i){i="precision mediump float;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uViewMatrix;\nuniform vec2 uResolution;\nattribute vec2 inPosition;\nvarying vec2 fragCoord;\nvoid main () {\ngl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);\nfragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);\n}"}if(a===void 0){a=null}this.key=e;this.fragmentSrc=t;this.vertexSrc=i;this.uniforms=a}});e.exports=n},function(e,t,i){var a=i(33);a.ColorToRGBA=i(802);a.ComponentToHex=i(349);a.GetColor=i(162);a.GetColor32=i(292);a.HexStringToColor=i(291);a.HSLToColor=i(803);a.HSVColorWheel=i(804);a.HSVToRGB=i(163);a.HueToComponent=i(350);a.IntegerToColor=i(294);a.IntegerToRGB=i(295);a.Interpolate=i(805);a.ObjectToColor=i(296);a.RandomRGB=i(806);a.RGBStringToColor=i(297);a.RGBToHSV=i(293);a.RGBToString=i(807);a.ValueToColor=i(161);e.exports=a},function(e){e.exports=function ComponentToHex(e){var t=e.toString(16);return 1===t.length?"0"+t:t}},function(e){e.exports=function HueToComponent(e,i,a){if(0>a){a+=1}if(1<a){a-=1}if(a<1/6){return e+6*(i-e)*a}if(a<1/2){return i}if(a<2/3){return e+6*((i-e)*(2/3-a))}return e}},function(e,t,i){var a=i(116);e.exports=function DOMContentLoaded(e){if("complete"===document.readyState||"interactive"===document.readyState){e();return}var t=function(){document.removeEventListener("deviceready",t,!0);document.removeEventListener("DOMContentLoaded",t,!0);window.removeEventListener("load",t,!0);e()};if(!document.body){window.setTimeout(t,20)}else if(a.cordova){document.addEventListener("deviceready",t,!1)}else{document.addEventListener("DOMContentLoaded",t,!0);window.addEventListener("load",t,!0)}}},function(e,t,i){var a=i(175);e.exports=function GetScreenOrientation(e,t){var i=window.screen,n=i?i.orientation||i.mozOrientation||i.msOrientation:!1;if(n&&"string"==typeof n.type){return n.type}else if("string"==typeof n){return n}if(i){return i.height>i.width?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE}else if("number"==typeof window.orientation){return 0===window.orientation||180===window.orientation?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE}else if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches){return a.ORIENTATION.PORTRAIT}else if(window.matchMedia("(orientation: landscape)").matches){return a.ORIENTATION.LANDSCAPE}}return t>e?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE}},function(e){e.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(e){e.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(e){e.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(e){e.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(e){e.exports=function GetTarget(e){var t;if(""!==e){if("string"==typeof e){t=document.getElementById(e)}else if(e&&1===e.nodeType){t=e}}if(!t){t=document.body}return t}},function(e){e.exports=function ParseXML(e){var t="";try{if(window.DOMParser){var i=new DOMParser;t=i.parseFromString(e,"text/xml")}else{t=new ActiveXObject("Microsoft.XMLDOM");t.loadXML(e)}}catch(i){t=null}if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length){return null}else{return t}}},function(e,t,i){var a=i(0),n=i(177),r=i(9),o=i(54),s=i(18),l=i(360),d=i(361),p=i(362),c=i(363),u=i(32),g=i(329),h=new a({initialize:function(e,t){this.game=e;this.scaleManager;this.canvas;this.config=t;this.enabled=!0;this.events=new r;this.isOver=!0;this.defaultCursor="";this.keyboard=t.inputKeyboard?new l(this):null;this.mouse=t.inputMouse?new d(this):null;this.touch=t.inputTouch?new c(this):null;this.pointers=[];this.pointersTotal=t.inputActivePointers;if(t.inputTouch&&1===this.pointersTotal){this.pointersTotal=2}for(var a=0,n;a<=this.pointersTotal;a++){n=new p(this,a);n.smoothFactor=t.inputSmoothFactor;this.pointers.push(n)}this.mousePointer=t.inputMouse?this.pointers[0]:null;this.activePointer=this.pointers[0];this.globalTopOnly=!0;this.time=0;this._tempPoint={x:0,y:0};this._tempHitTest=[];this._tempMatrix=new u;this._tempMatrix2=new u;this._tempSkip=!1;this.mousePointerContainer=[this.mousePointer];e.events.once(s.BOOT,this.boot,this)},boot:function boot(){this.canvas=this.game.canvas;this.scaleManager=this.game.scale;this.events.emit(o.MANAGER_BOOT);this.game.events.on(s.PRE_RENDER,this.preRender,this);this.game.events.once(s.DESTROY,this.destroy,this)},setCanvasOver:function setCanvasOver(e){this.isOver=!0;this.events.emit(o.GAME_OVER,e)},setCanvasOut:function setCanvasOut(e){this.isOver=!1;this.events.emit(o.GAME_OUT,e)},preRender:function preRender(){var e=this.game.loop.now,t=this.game.loop.delta,a=this.game.scene.getScenes(!0,!0);this.time=e;this.events.emit(o.MANAGER_UPDATE);for(var n=0,r;n<a.length;n++){r=a[n];if(r.sys.input&&r.sys.input.updatePoll(e,t)&&this.globalTopOnly){return}}},setDefaultCursor:function setDefaultCursor(e){this.defaultCursor=e;if(this.canvas.style.cursor!==e){this.canvas.style.cursor=e}},setCursor:function setCursor(e){if(e.cursor){this.canvas.style.cursor=e.cursor}},resetCursor:function resetCursor(e){if(e.cursor&&this.canvas){this.canvas.style.cursor=this.defaultCursor}},addPointer:function addPointer(e){if(e===void 0){e=1}var t=[];if(10<this.pointersTotal+e){e=10-this.pointersTotal}for(var a=0;a<e;a++){var n=this.pointers.length,r=new p(this,n);r.smoothFactor=this.config.inputSmoothFactor;this.pointers.push(r);this.pointersTotal++;t.push(r)}return t},updateInputPlugins:function updateInputPlugins(e,t){var a=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var n=0,r;n<a.length;n++){r=a[n];if(r.sys.input){var o=r.sys.input.update(e,t);if(o&&this.globalTopOnly||this._tempSkip){return}}}},onTouchStart:function onTouchStart(e){for(var t=this.pointers,a=[],r=0,o;r<e.changedTouches.length;r++){o=e.changedTouches[r];for(var s=1,l;s<this.pointersTotal;s++){l=t[s];if(!l.active){l.touchstart(o,e);this.activePointer=l;a.push(l);break}}}this.updateInputPlugins(n.TOUCH_START,a)},onTouchMove:function onTouchMove(e){for(var t=this.pointers,a=[],r=0,o;r<e.changedTouches.length;r++){o=e.changedTouches[r];for(var s=1,l;s<this.pointersTotal;s++){l=t[s];if(l.active&&l.identifier===o.identifier){l.touchmove(o,e);this.activePointer=l;a.push(l);break}}}this.updateInputPlugins(n.TOUCH_MOVE,a)},onTouchEnd:function onTouchEnd(e){for(var t=this.pointers,a=[],r=0,o;r<e.changedTouches.length;r++){o=e.changedTouches[r];for(var s=1,l;s<this.pointersTotal;s++){l=t[s];if(l.active&&l.identifier===o.identifier){l.touchend(o,e);a.push(l);break}}}this.updateInputPlugins(n.TOUCH_END,a)},onTouchCancel:function onTouchCancel(e){for(var t=this.pointers,a=[],r=0,o;r<e.changedTouches.length;r++){o=e.changedTouches[r];for(var s=1,l;s<this.pointersTotal;s++){l=t[s];if(l.active&&l.identifier===o.identifier){l.touchcancel(o,e);a.push(l);break}}}this.updateInputPlugins(n.TOUCH_CANCEL,a)},onMouseDown:function onMouseDown(e){this.mousePointer.down(e);this.mousePointer.updateMotion();this.updateInputPlugins(n.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function onMouseMove(e){this.mousePointer.move(e);this.mousePointer.updateMotion();this.updateInputPlugins(n.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function onMouseUp(e){this.mousePointer.up(e);this.mousePointer.updateMotion();this.updateInputPlugins(n.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function onMouseWheel(e){this.mousePointer.wheel(e);this.updateInputPlugins(n.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function onPointerLockChange(e){var t=this.mouse.locked;this.mousePointer.locked=t;this.events.emit(o.POINTERLOCK_CHANGE,e,t)},inputCandidate:function inputCandidate(e,t){var i=e.input;if(!i||!i.enabled||!i.alwaysEnabled&&!e.willRender(t)){return!1}var a=!0,n=e.parentContainer;if(n){do{if(!n.willRender(t)){a=!1;break}n=n.parentContainer}while(n)}return a},hitTest:function hitTest(e,t,a,n){if(n===void 0){n=this._tempHitTest}var r=this._tempPoint,o=a.scrollX,s=a.scrollY;n.length=0;var l=e.x,d=e.y;if(1!==a.resolution){l+=a._x;d+=a._y}a.getWorldPoint(l,d,r);e.worldX=r.x;e.worldY=r.y;for(var p={x:0,y:0},c=this._tempMatrix,u=this._tempMatrix2,h=0,m;h<t.length;h++){m=t[h];if(!this.inputCandidate(m,a)){continue}var f=r.x+o*m.scrollFactorX-o,T=r.y+s*m.scrollFactorY-s;if(m.parentContainer){m.getWorldTransformMatrix(c,u);c.applyInverse(f,T,p)}else{g(f,T,m.x,m.y,m.rotation,m.scaleX,m.scaleY,p)}if(this.pointWithinHitArea(m,p.x,p.y)){n.push(m)}}return n},pointWithinHitArea:function pointWithinHitArea(e,t,i){t+=e.displayOriginX;i+=e.displayOriginY;var a=e.input;if(a&&a.hitAreaCallback(a.hitArea,t,i,e)){a.localX=t;a.localY=i;return!0}else{return!1}},pointWithinInteractiveObject:function pointWithinInteractiveObject(e,t,i){if(!e.hitArea){return!1}t+=e.gameObject.displayOriginX;i+=e.gameObject.displayOriginY;e.localX=t;e.localY=i;return e.hitAreaCallback(e.hitArea,t,i,e)},transformPointer:function transformPointer(e,t,i,n){var r=e.position,o=e.prevPosition;o.x=r.x;o.y=r.y;var s=this.scaleManager.transformX(t),l=this.scaleManager.transformY(i),d=e.smoothFactor;if(!n||0===d){r.x=s;r.y=l}else{r.x=s*d+o.x*(1-d);r.y=l*d+o.y*(1-d)}},destroy:function destroy(){this.events.removeAllListeners();this.game.events.off(s.PRE_RENDER);if(this.keyboard){this.keyboard.destroy()}if(this.mouse){this.mouse.destroy()}if(this.touch){this.touch.destroy()}for(var e=0;e<this.pointers.length;e++){this.pointers[e].destroy()}this.pointers=[];this._tempHitTest=[];this._tempMatrix.destroy();this.canvas=null;this.game=null}});e.exports=h},function(e,t,i){var a=i(121),n=i(0),r=i(18),o=i(54),s=i(122),l=i(0),d=new n({initialize:function(e){this.manager=e;this.queue=[];this.preventDefault=!0;this.captures=[];this.enabled=!1;this.target;this.onKeyDown=l;this.onKeyUp=l;e.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function boot(){var e=this.manager.config;this.enabled=e.inputKeyboard;this.target=e.inputKeyboardEventTarget;this.addCapture(e.inputKeyboardCapture);if(!this.target&&window){this.target=window}if(this.enabled&&this.target){this.startListeners()}this.manager.game.events.on(r.POST_STEP,this.postUpdate,this)},startListeners:function startListeners(){var e=this;this.onKeyDown=function(t){if(t.defaultPrevented||!e.enabled||!e.manager){return}e.queue.push(t);if(!e.manager.useQueue){e.manager.events.emit(o.MANAGER_PROCESS)}var i=t.altKey||t.ctrlKey||t.shiftKey||t.metaKey;if(e.preventDefault&&!i&&-1<e.captures.indexOf(t.keyCode)){t.preventDefault()}};this.onKeyUp=function(t){if(t.defaultPrevented||!e.enabled||!e.manager){return}e.queue.push(t);if(!e.manager.useQueue){e.manager.events.emit(o.MANAGER_PROCESS)}var i=t.altKey||t.ctrlKey||t.shiftKey||t.metaKey;if(e.preventDefault&&!i&&-1<e.captures.indexOf(t.keyCode)){t.preventDefault()}};var t=this.target;if(t){t.addEventListener("keydown",this.onKeyDown,!1);t.addEventListener("keyup",this.onKeyUp,!1);this.enabled=!0}},stopListeners:function stopListeners(){var e=this.target;e.removeEventListener("keydown",this.onKeyDown,!1);e.removeEventListener("keyup",this.onKeyUp,!1);this.enabled=!1},postUpdate:function postUpdate(){this.queue=[]},addCapture:function addCapture(e){if("string"==typeof e){e=e.split(",")}if(!Array.isArray(e)){e=[e]}for(var t=this.captures,a=0,n;a<e.length;a++){n=e[a];if("string"==typeof n){n=s[n.trim().toUpperCase()]}if(-1===t.indexOf(n)){t.push(n)}}this.preventDefault=0<t.length},removeCapture:function removeCapture(e){if("string"==typeof e){e=e.split(",")}if(!Array.isArray(e)){e=[e]}for(var t=this.captures,n=0,r;n<e.length;n++){r=e[n];if("string"==typeof r){r=s[r.toUpperCase()]}a(t,r)}this.preventDefault=0<t.length},clearCaptures:function clearCaptures(){this.captures=[];this.preventDefault=!1},destroy:function destroy(){this.stopListeners();this.clearCaptures();this.queue=[];this.manager.game.events.off(r.POST_RENDER,this.postUpdate,this);this.target=null;this.enabled=!1;this.manager=null}});e.exports=d},function(e,t,i){var a=i(0),n=i(167),r=i(54),o=i(0),s=new a({initialize:function(e){this.manager=e;this.capture=!0;this.enabled=!1;this.target;this.locked=!1;this.onMouseMove=o;this.onMouseDown=o;this.onMouseUp=o;this.onMouseDownWindow=o;this.onMouseUpWindow=o;this.onMouseOver=o;this.onMouseOut=o;this.onMouseWheel=o;this.pointerLockChange=o;e.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function boot(){var e=this.manager.config;this.enabled=e.inputMouse;this.target=e.inputMouseEventTarget;this.capture=e.inputMouseCapture;if(!this.target){this.target=this.manager.game.canvas}else if("string"==typeof this.target){this.target=document.getElementById(this.target)}if(e.disableContextMenu){this.disableContextMenu()}if(this.enabled&&this.target){this.startListeners()}},disableContextMenu:function disableContextMenu(){document.body.addEventListener("contextmenu",function(e){e.preventDefault();return!1});return this},requestPointerLock:function requestPointerLock(){if(n.pointerLock){var e=this.target;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock;e.requestPointerLock()}},releasePointerLock:function releasePointerLock(){if(n.pointerLock){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock;document.exitPointerLock()}},startListeners:function startListeners(){var e=this,t=this.manager.canvas,i=window&&window.focus&&this.manager.game.config.autoFocus;this.onMouseMove=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onMouseMove(t);if(e.capture){t.preventDefault()}}};this.onMouseDown=function(a){if(i){window.focus()}if(!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onMouseDown(a);if(e.capture&&a.target===t){a.preventDefault()}}};this.onMouseDownWindow=function(i){if(!i.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&i.target!==t){e.manager.onMouseDown(i)}};this.onMouseUp=function(i){if(!i.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onMouseUp(i);if(e.capture&&i.target===t){i.preventDefault()}}};this.onMouseUpWindow=function(i){if(!i.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&i.target!==t){e.manager.onMouseUp(i)}};this.onMouseOver=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.setCanvasOver(t)}};this.onMouseOut=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.setCanvasOut(t)}};this.onMouseWheel=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onMouseWheel(t)}};var a=this.target;if(!a){return}var r={passive:!0},o={passive:!1};a.addEventListener("mousemove",this.onMouseMove,this.capture?o:r);a.addEventListener("mousedown",this.onMouseDown,this.capture?o:r);a.addEventListener("mouseup",this.onMouseUp,this.capture?o:r);a.addEventListener("mouseover",this.onMouseOver,this.capture?o:r);a.addEventListener("mouseout",this.onMouseOut,this.capture?o:r);a.addEventListener("wheel",this.onMouseWheel,this.capture?o:r);if(window&&this.manager.game.config.inputWindowEvents){window.addEventListener("mousedown",this.onMouseDownWindow,o);window.addEventListener("mouseup",this.onMouseUpWindow,o)}if(n.pointerLock){this.pointerLockChange=function(t){var i=e.target;e.locked=document.pointerLockElement===i||document.mozPointerLockElement===i||document.webkitPointerLockElement===i?!0:!1;e.manager.onPointerLockChange(t)};document.addEventListener("pointerlockchange",this.pointerLockChange,!0);document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0);document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)}this.enabled=!0},stopListeners:function stopListeners(){var e=this.target;e.removeEventListener("mousemove",this.onMouseMove);e.removeEventListener("mousedown",this.onMouseDown);e.removeEventListener("mouseup",this.onMouseUp);e.removeEventListener("mouseover",this.onMouseOver);e.removeEventListener("mouseout",this.onMouseOut);if(window){window.removeEventListener("mousedown",this.onMouseDownWindow);window.removeEventListener("mouseup",this.onMouseUpWindow)}if(n.pointerLock){document.removeEventListener("pointerlockchange",this.pointerLockChange,!0);document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0);document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0)}},destroy:function destroy(){this.stopListeners();this.target=null;this.enabled=!1;this.manager=null}});e.exports=s},function(e,t,i){var a=i(314),n=i(0),r=i(53),o=i(144),s=i(323),l=i(3),d=new n({initialize:function(e,t){this.manager=e;this.id=t;this.event;this.downElement;this.upElement;this.camera=null;this.button=0;this.buttons=0;this.position=new l;this.prevPosition=new l;this.midPoint=new l(-1,-1);this.velocity=new l;this.angle=0;this.distance=0;this.smoothFactor=0;this.motionFactor=.2;this.worldX=0;this.worldY=0;this.moveTime=0;this.downX=0;this.downY=0;this.downTime=0;this.upX=0;this.upY=0;this.upTime=0;this.primaryDown=!1;this.isDown=!1;this.wasTouch=!1;this.wasCanceled=!1;this.movementX=0;this.movementY=0;this.identifier=0;this.pointerId=null;this.active=0===t?!0:!1;this.locked=!1;this.deltaX=0;this.deltaY=0;this.deltaZ=0},updateWorldPoint:function updateWorldPoint(e){var t=this.x,i=this.y;if(1!==e.resolution){t+=e._x;i+=e._y}var a=e.getWorldPoint(t,i);this.worldX=a.x;this.worldY=a.y;return this},positionToCamera:function positionToCamera(e,t){return e.getWorldPoint(this.x,this.y,t)},updateMotion:function updateMotion(){var e=this.position.x,t=this.position.y,i=this.midPoint.x,n=this.midPoint.y;if(e===i&&t===n){return}var r=s(this.motionFactor,i,e),l=s(this.motionFactor,n,t);if(o(r,e,.1)){r=e}if(o(l,t,.1)){l=t}this.midPoint.set(r,l);var d=e-r,p=t-l;this.velocity.set(d,p);this.angle=a(r,l,e,t);this.distance=Math.sqrt(d*d+p*p)},up:function up(e){if("buttons"in e){this.buttons=e.buttons}this.event=e;this.button=e.button;this.upElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,!1);if(0===e.button){this.primaryDown=!1;this.upX=this.x;this.upY=this.y;this.upTime=e.timeStamp}this.isDown=!1;this.wasTouch=!1},down:function down(e){if("buttons"in e){this.buttons=e.buttons}this.event=e;this.button=e.button;this.downElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,!1);if(0===e.button){this.primaryDown=!0;this.downX=this.x;this.downY=this.y;this.downTime=e.timeStamp}this.isDown=!0;this.wasTouch=!1},move:function move(e){if("buttons"in e){this.buttons=e.buttons}this.event=e;this.manager.transformPointer(this,e.pageX,e.pageY,!0);if(this.locked){this.movementX=e.movementX||e.mozMovementX||e.webkitMovementX||0;this.movementY=e.movementY||e.mozMovementY||e.webkitMovementY||0}this.moveTime=e.timeStamp;this.wasTouch=!1},wheel:function wheel(e){if("buttons"in e){this.buttons=e.buttons}this.event=e;this.manager.transformPointer(this,e.pageX,e.pageY,!1);this.deltaX=e.deltaX;this.deltaY=e.deltaY;this.deltaZ=e.deltaZ;this.wasTouch=!1},touchstart:function touchstart(e,t){if(e.pointerId){this.pointerId=e.pointerId}this.identifier=e.identifier;this.target=e.target;this.active=!0;this.buttons=1;this.event=t;this.downElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,!1);this.primaryDown=!0;this.downX=this.x;this.downY=this.y;this.downTime=t.timeStamp;this.isDown=!0;this.wasTouch=!0;this.wasCanceled=!1;this.updateMotion()},touchmove:function touchmove(e,t){this.event=t;this.manager.transformPointer(this,e.pageX,e.pageY,!0);this.moveTime=t.timeStamp;this.wasTouch=!0;this.updateMotion()},touchend:function touchend(e,t){this.buttons=0;this.event=t;this.upElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,!1);this.primaryDown=!1;this.upX=this.x;this.upY=this.y;this.upTime=t.timeStamp;this.isDown=!1;this.wasTouch=!0;this.wasCanceled=!1;this.active=!1;this.updateMotion()},touchcancel:function touchcancel(e,t){this.buttons=0;this.event=t;this.upElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,!1);this.primaryDown=!1;this.upX=this.x;this.upY=this.y;this.upTime=t.timeStamp;this.isDown=!1;this.wasTouch=!0;this.wasCanceled=!0;this.active=!1},noButtonDown:function noButtonDown(){return 0===this.buttons},leftButtonDown:function leftButtonDown(){return 1&this.buttons?!0:!1},rightButtonDown:function rightButtonDown(){return 2&this.buttons?!0:!1},middleButtonDown:function middleButtonDown(){return 4&this.buttons?!0:!1},backButtonDown:function backButtonDown(){return 8&this.buttons?!0:!1},forwardButtonDown:function forwardButtonDown(){return 16&this.buttons?!0:!1},leftButtonReleased:function leftButtonReleased(){return 0===this.button&&!this.isDown},rightButtonReleased:function rightButtonReleased(){return 2===this.button&&!this.isDown},middleButtonReleased:function middleButtonReleased(){return 1===this.button&&!this.isDown},backButtonReleased:function backButtonReleased(){return 3===this.button&&!this.isDown},forwardButtonReleased:function forwardButtonReleased(){return 4===this.button&&!this.isDown},getDistance:function getDistance(){if(this.isDown){return r(this.downX,this.downY,this.x,this.y)}else{return r(this.downX,this.downY,this.upX,this.upY)}},getDistanceX:function getDistanceX(){if(this.isDown){return Math.abs(this.downX-this.x)}else{return Math.abs(this.downX-this.upX)}},getDistanceY:function getDistanceY(){if(this.isDown){return Math.abs(this.downY-this.y)}else{return Math.abs(this.downY-this.upY)}},getDuration:function getDuration(){if(this.isDown){return this.manager.time-this.downTime}else{return this.upTime-this.downTime}},getAngle:function getAngle(){if(this.isDown){return a(this.downX,this.downY,this.x,this.y)}else{return a(this.downX,this.downY,this.upX,this.upY)}},getInterpolatedPosition:function getInterpolatedPosition(e,a){if(e===void 0){e=10}if(a===void 0){a=[]}for(var n=this.prevPosition.x,r=this.prevPosition.y,o=this.position.x,l=this.position.y,d=0,p;d<e;d++){p=1/e*d;a[d]={x:s(p,n,o),y:s(p,r,l)}}return a},destroy:function destroy(){this.camera=null;this.manager=null;this.position=null},x:{get:function get(){return this.position.x},set:function set(e){this.position.x=e}},y:{get:function get(){return this.position.y},set:function set(e){this.position.y=e}},time:{get:function get(){return this.event?this.event.timeStamp:0}}});e.exports=d},function(e,t,i){var a=i(0),n=i(54),r=i(1),o=new a({initialize:function(e){this.manager=e;this.capture=!0;this.enabled=!1;this.target;this.onTouchStart=r;this.onTouchStartWindow=r;this.onTouchMove=r;this.onTouchEnd=r;this.onTouchEndWindow=r;this.onTouchCancel=r;this.onTouchCancelWindow=r;this.onTouchOver=r;this.onTouchOut=r;e.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function boot(){var e=this.manager.config;this.enabled=e.inputTouch;this.target=e.inputTouchEventTarget;this.capture=e.inputTouchCapture;if(!this.target){this.target=this.manager.game.canvas}if(e.disableContextMenu){this.disableContextMenu()}if(this.enabled&&this.target){this.startListeners()}},disableContextMenu:function disableContextMenu(){document.body.addEventListener("contextmenu",function(e){e.preventDefault();return!1});return this},startListeners:function startListeners(){var e=this,t=this.manager.canvas,i=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(a){if(i){window.focus()}if(!a.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onTouchStart(a);if(e.capture&&a.cancelable&&a.target===t){a.preventDefault()}}};this.onTouchStartWindow=function(i){if(!i.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&i.target!==t){e.manager.onTouchStart(i)}};this.onTouchMove=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onTouchMove(t);if(e.capture&&t.cancelable){t.preventDefault()}}};this.onTouchEnd=function(i){if(!i.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onTouchEnd(i);if(e.capture&&i.cancelable&&i.target===t){i.preventDefault()}}};this.onTouchEndWindow=function(i){if(!i.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&i.target!==t){e.manager.onTouchEnd(i)}};this.onTouchCancel=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onTouchCancel(t);if(e.capture){t.preventDefault()}}};this.onTouchCancelWindow=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.onTouchCancel(t)}};this.onTouchOver=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.setCanvasOver(t)}};this.onTouchOut=function(t){if(!t.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled){e.manager.setCanvasOut(t)}};var a=this.target;if(!a){return}var n={passive:!0},r={passive:!1};a.addEventListener("touchstart",this.onTouchStart,this.capture?r:n);a.addEventListener("touchmove",this.onTouchMove,this.capture?r:n);a.addEventListener("touchend",this.onTouchEnd,this.capture?r:n);a.addEventListener("touchcancel",this.onTouchCancel,this.capture?r:n);a.addEventListener("touchover",this.onTouchOver,this.capture?r:n);a.addEventListener("touchout",this.onTouchOut,this.capture?r:n);if(window&&this.manager.game.config.inputWindowEvents){window.addEventListener("touchstart",this.onTouchStartWindow,r);window.addEventListener("touchend",this.onTouchEndWindow,r);window.addEventListener("touchcancel",this.onTouchCancelWindow,r)}this.enabled=!0},stopListeners:function stopListeners(){var e=this.target;e.removeEventListener("touchstart",this.onTouchStart);e.removeEventListener("touchmove",this.onTouchMove);e.removeEventListener("touchend",this.onTouchEnd);e.removeEventListener("touchcancel",this.onTouchCancel);e.removeEventListener("touchover",this.onTouchOver);e.removeEventListener("touchout",this.onTouchOut);if(window){window.removeEventListener("touchstart",this.onTouchStartWindow);window.removeEventListener("touchend",this.onTouchEndWindow)}},destroy:function destroy(){this.stopListeners();this.target=null;this.enabled=!1;this.manager=null}});e.exports=o},function(e,t,i){var a=i(0),n=i(18),r=i(9),o=i(8),s=i(16),l=i(5),d=i(2),p=i(23),c=i(121),u=new a({Extends:r,initialize:function(e){r.call(this);this.game=e;this.plugins=[];this.scenePlugins=[];this._pendingGlobal=[];this._pendingScene=[];if(e.isBooted){this.boot()}else{e.events.once(n.BOOT,this.boot,this)}},boot:function boot(){var e,t,a,r,o,s,l,p=this.game.config,c=p.installGlobalPlugins;c=c.concat(this._pendingGlobal);for(e=0;e<c.length;e++){t=c[e];a=d(t,"key",null);r=d(t,"plugin",null);o=d(t,"start",!1);s=d(t,"mapping",null);l=d(t,"data",null);if(a){if(r){this.install(a,r,o,s,l)}else{console.warn("Missing `plugin` for key: "+a)}}}c=p.installScenePlugins;c=c.concat(this._pendingScene);for(e=0;e<c.length;e++){t=c[e];a=d(t,"key",null);r=d(t,"plugin",null);s=d(t,"mapping",null);if(a){if(r){this.installScenePlugin(a,r,s)}else{console.warn("Missing `plugin` for key: "+a)}}}this._pendingGlobal=[];this._pendingScene=[];this.game.events.once(n.DESTROY,this.destroy,this)},addToScene:function addToScene(e,t,a){var n,r,o,l=this.game,d=e.scene,c=e.settings.map,u=e.settings.isBooted;for(n=0;n<t.length;n++){r=t[n];if(l[r]){e[r]=l[r];if(c.hasOwnProperty(r)){d[c[r]]=e[r]}}else if("game"===r&&c.hasOwnProperty(r)){d[c[r]]=l}}for(var g=0;g<a.length;g++){o=a[g];for(n=0;n<o.length;n++){r=o[n];if(!p.hasCore(r)){continue}var h=p.getCore(r),m=new h.plugin(d,this);e[h.mapping]=m;if(h.custom){d[h.mapping]=m}else if(c.hasOwnProperty(h.mapping)){d[c[h.mapping]]=m}if(u){m.boot()}}}o=this.plugins;for(n=0;n<o.length;n++){var y=o[n];if(y.mapping){d[y.mapping]=y.plugin}}},getDefaultScenePlugins:function getDefaultScenePlugins(){var e=this.game.config.defaultPlugins;e=e.concat(this.scenePlugins);return e},installScenePlugin:function installScenePlugin(e,t,i,a,n){if(n===void 0){n=!1}if("function"!=typeof t){console.warn("Invalid Scene Plugin: "+e);return}if(!p.hasCore(e)){p.register(e,t,i,!0);this.scenePlugins.push(e)}else if(!n&&p.hasCore(e)){console.warn("Scene Plugin key in use: "+e);return}if(a){var r=new t(a,this);a.sys[e]=r;if(i&&""!==i){a[i]=r}r.boot()}},install:function install(e,t,i,a,n){if(i===void 0){i=!1}if(a===void 0){a=null}if(n===void 0){n=null}if("function"!=typeof t){console.warn("Invalid Plugin: "+e);return null}if(p.hasCustom(e)){console.warn("Plugin key in use: "+e);return null}if(null!==a){i=!0}if(!this.game.isBooted){this._pendingGlobal.push({key:e,plugin:t,start:i,mapping:a,data:n})}else{p.registerCustom(e,t,a,n);if(i){return this.start(e)}}return null},getIndex:function getIndex(e){for(var t=this.plugins,a=0,n;a<t.length;a++){n=t[a];if(n.key===e){return a}}return-1},getEntry:function getEntry(e){var t=this.getIndex(e);if(-1!==t){return this.plugins[t]}},isActive:function isActive(e){var t=this.getEntry(e);return t&&t.active},start:function start(e,t){if(t===void 0){t=e}var i=this.getEntry(t);if(i&&!i.active){i.active=!0;i.plugin.start()}else if(!i){i=this.createEntry(e,t)}return i?i.plugin:null},createEntry:function createEntry(e,t){var i=p.getCustom(e);if(i){var a=new i.plugin(this);i={key:t,plugin:a,active:!0,mapping:i.mapping,data:i.data};this.plugins.push(i);a.init(i.data);a.start()}return i},stop:function stop(e){var t=this.getEntry(e);if(t&&t.active){t.active=!1;t.plugin.stop()}return this},get:function get(e,t){if(t===void 0){t=!0}var i=this.getEntry(e);if(i){return i.plugin}else{var a=this.getClass(e);if(a&&t){i=this.createEntry(e,e);return i?i.plugin:null}else if(a){return a}}return null},getClass:function getClass(e){return p.getCustomClass(e)},removeGlobalPlugin:function removeGlobalPlugin(e){var t=this.getEntry(e);if(t){c(this.plugins,t)}p.removeCustom(e)},removeScenePlugin:function removeScenePlugin(e){c(this.scenePlugins,e);p.remove(e)},registerGameObject:function registerGameObject(e,t,i){if(t){l.register(e,t)}if(i){s.register(e,i)}return this},removeGameObject:function removeGameObject(e,t,i){if(t===void 0){t=!0}if(i===void 0){i=!0}if(t){l.remove(e)}if(i){s.remove(e)}return this},registerFileType:function registerFileType(e,t,i){o.register(e,t);if(i&&i.sys.load){i.sys.load[e]=t}},destroy:function destroy(){for(var e=0;e<this.plugins.length;e++){this.plugins[e].plugin.destroy()}p.destroyCustomPlugins();if(this.game.noReturn){p.destroyCorePlugins()}this.game=null;this.plugins=[];this.scenePlugins=[]}});e.exports=u},function(e,t,i){var a=i(175),n=i(0),r=i(9),o=i(92),s=i(18),l=i(860),d=i(357),p=i(352),c=i(1),u=i(11),g=i(366),h=i(93),m=i(3),y=new n({Extends:r,initialize:function(e){r.call(this);this.game=e;this.canvas;this.canvasBounds=new u;this.parent=null;this.parentIsWindow=!1;this.parentSize=new g;this.gameSize=new g;this.baseSize=new g;this.displaySize=new g;this.scaleMode=a.SCALE_MODE.NONE;this.resolution=1;this.zoom=1;this._resetZoom=!1;this.displayScale=new m(1,1);this.autoRound=!1;this.autoCenter=a.CENTER.NO_CENTER;this.orientation=a.ORIENTATION.LANDSCAPE;this.fullscreen;this.fullscreenTarget=null;this._createdFullscreenTarget=!1;this.dirty=!1;this.resizeInterval=500;this._lastCheck=0;this._checkOrientation=!1;this.listeners={orientationChange:c,windowResize:c,fullScreenChange:c,fullScreenError:c}},preBoot:function preBoot(){this.parseConfig(this.game.config);this.game.events.once("boot",this.boot,this)},boot:function boot(){var e=this.game;this.canvas=e.canvas;this.fullscreen=e.device.fullscreen;if(this.scaleMode!==a.SCALE_MODE.RESIZE){this.displaySize.setAspectMode(this.scaleMode)}if(this.scaleMode===a.SCALE_MODE.NONE){this.resize(this.width,this.height)}else{this.getParentBounds();if(0<this.parentSize.width&&0<this.parentSize.height){this.displaySize.setParent(this.parentSize)}this.refresh()}e.events.on(s.PRE_STEP,this.step,this);e.events.once(s.DESTROY,this.destroy,this);this.startListeners()},parseConfig:function parseConfig(e){this.getParent(e);this.getParentBounds();var t=e.width,i=e.height,n=e.scaleMode,r=e.resolution,o=e.zoom,s=e.autoRound;if("string"==typeof t){var l=this.parentSize.width;if(0===l){l=window.innerWidth}var d=parseInt(t,10)/100;t=Math.floor(l*d)}if("string"==typeof i){var c=this.parentSize.height;if(0===c){c=window.innerHeight}var u=parseInt(i,10)/100;i=Math.floor(c*u)}this.resolution=1;this.scaleMode=n;this.autoRound=s;this.autoCenter=e.autoCenter;this.resizeInterval=e.resizeInterval;if(s){t=Math.floor(t);i=Math.floor(i)}this.gameSize.setSize(t,i);if(o===a.ZOOM.MAX_ZOOM){o=this.getMaxZoom()}this.zoom=o;if(1!==o){this._resetZoom=!0}this.baseSize.setSize(t*r,i*r);if(s){this.baseSize.width=Math.floor(this.baseSize.width);this.baseSize.height=Math.floor(this.baseSize.height)}if(0<e.minWidth){this.displaySize.setMin(e.minWidth*o,e.minHeight*o)}if(0<e.maxWidth){this.displaySize.setMax(e.maxWidth*o,e.maxHeight*o)}this.displaySize.setSize(t,i);this.orientation=p(t,i)},getParent:function getParent(e){var t=e.parent;if(null===t){return}this.parent=d(t);this.parentIsWindow=this.parent===document.body;if(e.expandParent&&e.scaleMode!==a.SCALE_MODE.NONE){var i=this.parent.getBoundingClientRect();if(this.parentIsWindow||0===i.height){document.documentElement.style.height="100%";document.body.style.height="100%";i=this.parent.getBoundingClientRect();if(!this.parentIsWindow&&0===i.height){this.parent.style.overflow="hidden";this.parent.style.width="100%";this.parent.style.height="100%"}}}if(e.fullscreenTarget&&!this.fullscreenTarget){this.fullscreenTarget=d(e.fullscreenTarget)}},getParentBounds:function getParentBounds(){if(!this.parent){return!1}var e=this.parentSize,t=this.parent.getBoundingClientRect();if(this.parentIsWindow&&this.game.device.os.iOS){t.height=l(!0)}var i=this.resolution,a=t.width*i,n=t.height*i;if(e.width!==a||e.height!==n){e.setSize(a,n);return!0}else{return!1}},lockOrientation:function lockOrientation(e){var t=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;if(t){return t(e)}return!1},setParentSize:function setParentSize(e,t){this.parentSize.setSize(e,t);return this.refresh()},setGameSize:function setGameSize(e,t){var i=this.autoRound,a=this.resolution;if(i){e=Math.floor(e);t=Math.floor(t)}var n=this.width,r=this.height;this.gameSize.resize(e,t);this.baseSize.resize(e*a,t*a);if(i){this.baseSize.width=Math.floor(this.baseSize.width);this.baseSize.height=Math.floor(this.baseSize.height)}this.displaySize.setSize(e,t);this.canvas.width=this.baseSize.width;this.canvas.height=this.baseSize.height;return this.refresh(n,r)},resize:function resize(e,t){var i=this.zoom,a=this.resolution,n=this.autoRound;if(n){e=Math.floor(e);t=Math.floor(t)}var r=this.width,o=this.height;this.gameSize.resize(e,t);this.baseSize.resize(e*a,t*a);if(n){this.baseSize.width=Math.floor(this.baseSize.width);this.baseSize.height=Math.floor(this.baseSize.height)}this.displaySize.setSize(e*i*a,t*i*a);this.canvas.width=this.baseSize.width;this.canvas.height=this.baseSize.height;var s=this.canvas.style,l=e*i,d=t*i;if(n){l=Math.floor(l);d=Math.floor(d)}if(l!==e||d!==t){s.width=l+"px";s.height=d+"px"}return this.refresh(r,o)},setZoom:function setZoom(e){this.zoom=e;this._resetZoom=!0;return this.refresh()},setMaxZoom:function setMaxZoom(){this.zoom=this.getMaxZoom();this._resetZoom=!0;return this.refresh()},refresh:function refresh(e,t){if(e===void 0){e=this.width}if(t===void 0){t=this.height}this.updateScale();this.updateBounds();this.updateOrientation();this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var i=this.game.domContainer;if(i){this.baseSize.setCSS(i);var a=this.canvas.style,n=i.style;n.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")";n.marginLeft=a.marginLeft;n.marginTop=a.marginTop}this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,this.resolution,e,t);return this},updateOrientation:function updateOrientation(){if(this._checkOrientation){this._checkOrientation=!1;var e=p(this.width,this.height);if(e!==this.orientation){this.orientation=e;this.emit(o.ORIENTATION_CHANGE,e)}}},updateScale:function updateScale(){var e=this.canvas.style,t=this.gameSize.width,i=this.gameSize.height,n,r,o=this.zoom,s=this.autoRound,l=1;if(this.scaleMode===a.SCALE_MODE.NONE){this.displaySize.setSize(t*o*l,i*o*l);n=this.displaySize.width/l;r=this.displaySize.height/l;if(s){n=Math.floor(n);r=Math.floor(r)}if(this._resetZoom){e.width=n+"px";e.height=r+"px";this._resetZoom=!1}}else if(this.scaleMode===a.SCALE_MODE.RESIZE){this.displaySize.setSize(this.parentSize.width,this.parentSize.height);this.gameSize.setSize(this.displaySize.width,this.displaySize.height);this.baseSize.setSize(this.displaySize.width*l,this.displaySize.height*l);n=this.displaySize.width/l;r=this.displaySize.height/l;if(s){n=Math.floor(n);r=Math.floor(r)}this.canvas.width=n;this.canvas.height=r}else{this.displaySize.setSize(this.parentSize.width,this.parentSize.height);n=this.displaySize.width/l;r=this.displaySize.height/l;if(s){n=Math.floor(n);r=Math.floor(r)}e.width=n+"px";e.height=r+"px"}this.getParentBounds();this.updateCenter()},getMaxZoom:function getMaxZoom(){var e=h(this.parentSize.width,this.gameSize.width,0,!0),t=h(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(e,t),1)},updateCenter:function updateCenter(){var e=this.autoCenter;if(e===a.CENTER.NO_CENTER){return}var t=this.canvas,i=t.style,n=t.getBoundingClientRect(),r=n.width,o=n.height,s=Math.floor((this.parentSize.width-r)/2),l=Math.floor((this.parentSize.height-o)/2);if(e===a.CENTER.CENTER_HORIZONTALLY){l=0}else if(e===a.CENTER.CENTER_VERTICALLY){s=0}i.marginLeft=s+"px";i.marginTop=l+"px"},updateBounds:function updateBounds(){var e=this.canvasBounds,t=this.canvas.getBoundingClientRect();e.x=t.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0);e.y=t.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0);e.width=t.width;e.height=t.height},transformX:function transformX(e){return(e-this.canvasBounds.left)*this.displayScale.x},transformY:function transformY(e){return(e-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function startFullscreen(e){if(e===void 0){e={navigationUI:"hide"}}var t=this.fullscreen;if(!t.available){this.emit(o.FULLSCREEN_UNSUPPORTED);return}if(!t.active){var i=this.getFullscreenTarget(),a;if(t.keyboard){a=i[t.request](Element.ALLOW_KEYBOARD_INPUT)}else{a=i[t.request](e)}if(a){a.then(this.fullscreenSuccessHandler.bind(this)).catch(this.fullscreenErrorHandler.bind(this))}else if(t.active){this.fullscreenSuccessHandler()}else{this.fullscreenErrorHandler()}}},fullscreenSuccessHandler:function fullscreenSuccessHandler(){this.getParentBounds();this.refresh();this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function fullscreenErrorHandler(e){this.removeFullscreenTarget();this.emit(o.FULLSCREEN_FAILED,e)},getFullscreenTarget:function getFullscreenTarget(){if(!this.fullscreenTarget){var e=document.createElement("div");e.style.margin="0";e.style.padding="0";e.style.width="100%";e.style.height="100%";this.fullscreenTarget=e;this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var t=this.canvas.parentNode;t.insertBefore(this.fullscreenTarget,this.canvas);this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function removeFullscreenTarget(){if(this._createdFullscreenTarget){var e=this.fullscreenTarget;if(e&&e.parentNode){var t=e.parentNode;t.insertBefore(this.canvas,e);t.removeChild(e)}}},stopFullscreen:function stopFullscreen(){var e=this.fullscreen;if(!e.available){this.emit(o.FULLSCREEN_UNSUPPORTED);return!1}if(e.active){document[e.cancel]()}this.removeFullscreenTarget();this.getParentBounds();this.emit(o.LEAVE_FULLSCREEN);this.refresh()},toggleFullscreen:function toggleFullscreen(e){if(this.fullscreen.active){this.stopFullscreen()}else{this.startFullscreen(e)}},startListeners:function startListeners(){var e=this,t=this.listeners;t.orientationChange=function(){e._checkOrientation=!0;e.dirty=!0};t.windowResize=function(){e.dirty=!0};window.addEventListener("orientationchange",t.orientationChange,!1);window.addEventListener("resize",t.windowResize,!1);if(this.fullscreen.available){t.fullScreenChange=function(t){return e.onFullScreenChange(t)};t.fullScreenError=function(t){return e.onFullScreenError(t)};["webkit","moz",""].forEach(function(e){document.addEventListener(e+"fullscreenchange",t.fullScreenChange,!1);document.addEventListener(e+"fullscreenerror",t.fullScreenError,!1)});document.addEventListener("MSFullscreenChange",t.fullScreenChange,!1);document.addEventListener("MSFullscreenError",t.fullScreenError,!1)}},onFullScreenChange:function onFullScreenChange(){if(!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement)){this.stopFullscreen()}},onFullScreenError:function onFullScreenError(){this.removeFullscreenTarget()},step:function step(e,t){if(!this.parent){return}this._lastCheck+=t;if(this.dirty||this._lastCheck>this.resizeInterval){if(this.getParentBounds()){this.refresh()}this.dirty=!1;this._lastCheck=0}},stopListeners:function stopListeners(){var e=this.listeners;window.removeEventListener("orientationchange",e.orientationChange,!1);window.removeEventListener("resize",e.windowResize,!1);["webkit","moz",""].forEach(function(t){document.removeEventListener(t+"fullscreenchange",e.fullScreenChange,!1);document.removeEventListener(t+"fullscreenerror",e.fullScreenError,!1)});document.removeEventListener("MSFullscreenChange",e.fullScreenChange,!1);document.removeEventListener("MSFullscreenError",e.fullScreenError,!1)},destroy:function destroy(){this.removeAllListeners();this.stopListeners();this.game=null;this.canvas=null;this.canvasBounds=null;this.parent=null;this.fullscreenTarget=null;this.parentSize.destroy();this.gameSize.destroy();this.baseSize.destroy();this.displaySize.destroy()},isFullscreen:{get:function get(){return this.fullscreen.active}},width:{get:function get(){return this.gameSize.width}},height:{get:function get(){return this.gameSize.height}},isPortrait:{get:function get(){return this.orientation===a.ORIENTATION.PORTRAIT}},isLandscape:{get:function get(){return this.orientation===a.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function get(){return this.height>this.width}},isGameLandscape:{get:function get(){return this.width>this.height}}});e.exports=y},function(e,t,i){var a=i(22),n=i(0),r=i(93),o=i(3),s=new n({initialize:function(e,t,i,a){if(e===void 0){e=0}if(t===void 0){t=e}if(i===void 0){i=0}if(a===void 0){a=null}this._width=e;this._height=t;this._parent=a;this.aspectMode=i;this.aspectRatio=0===t?1:e/t;this.minWidth=0;this.minHeight=0;this.maxWidth=Number.MAX_VALUE;this.maxHeight=Number.MAX_VALUE;this.snapTo=new o},setAspectMode:function setAspectMode(e){if(e===void 0){e=0}this.aspectMode=e;return this.setSize(this._width,this._height)},setSnap:function setSnap(e,t){if(e===void 0){e=0}if(t===void 0){t=e}this.snapTo.set(e,t);return this.setSize(this._width,this._height)},setParent:function setParent(e){this._parent=e;return this.setSize(this._width,this._height)},setMin:function setMin(e,t){if(e===void 0){e=0}if(t===void 0){t=e}this.minWidth=a(e,0,this.maxWidth);this.minHeight=a(t,0,this.maxHeight);return this.setSize(this._width,this._height)},setMax:function setMax(e,t){if(e===void 0){e=Number.MAX_VALUE}if(t===void 0){t=e}this.maxWidth=a(e,this.minWidth,Number.MAX_VALUE);this.maxHeight=a(t,this.minHeight,Number.MAX_VALUE);return this.setSize(this._width,this._height)},setSize:function setSize(e,t){if(e===void 0){e=0}if(t===void 0){t=e}switch(this.aspectMode){case s.NONE:this._width=this.getNewWidth(r(e,this.snapTo.x));this._height=this.getNewHeight(r(t,this.snapTo.y));this.aspectRatio=0===this._height?1:this._width/this._height;break;case s.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(r(e,this.snapTo.x));this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case s.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(r(t,this.snapTo.y));this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case s.FIT:this.constrain(e,t,!0);break;case s.ENVELOP:this.constrain(e,t,!1);break;}return this},setAspectRatio:function setAspectRatio(e){this.aspectRatio=e;return this.setSize(this._width,this._height)},resize:function resize(e,t){this._width=this.getNewWidth(r(e,this.snapTo.x));this._height=this.getNewHeight(r(t,this.snapTo.y));this.aspectRatio=0===this._height?1:this._width/this._height;return this},getNewWidth:function getNewWidth(e,t){if(t===void 0){t=!0}e=a(e,this.minWidth,this.maxWidth);if(t&&this._parent&&e>this._parent.width){e=Math.max(this.minWidth,this._parent.width)}return e},getNewHeight:function getNewHeight(e,t){if(t===void 0){t=!0}e=a(e,this.minHeight,this.maxHeight);if(t&&this._parent&&e>this._parent.height){e=Math.max(this.minHeight,this._parent.height)}return e},constrain:function constrain(e,t,i){if(e===void 0){e=0}if(t===void 0){t=e}if(i===void 0){i=!0}e=this.getNewWidth(e);t=this.getNewHeight(t);var a=this.snapTo,n=0===t?1:e/t;if(i&&this.aspectRatio>n||!i&&this.aspectRatio<n){e=r(e,a.x);t=e/this.aspectRatio;if(0<a.y){t=r(t,a.y);e=t*this.aspectRatio}}else if(i&&this.aspectRatio<n||!i&&this.aspectRatio>n){t=r(t,a.y);e=t*this.aspectRatio;if(0<a.x){e=r(e,a.x);t=e*(1/this.aspectRatio)}}this._width=e;this._height=t;return this},fitTo:function fitTo(e,t){return this.constrain(e,t,!0)},envelop:function envelop(e,t){return this.constrain(e,t,!1)},setWidth:function setWidth(e){return this.setSize(e,this._height)},setHeight:function setHeight(e){return this.setSize(this._width,e)},toString:function toString(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function setCSS(e){if(e&&e.style){e.style.width=this._width+"px";e.style.height=this._height+"px"}},copy:function copy(e){e.setAspectMode(this.aspectMode);e.aspectRatio=this.aspectRatio;return e.setSize(this.width,this.height)},destroy:function destroy(){this._parent=null;this.snapTo=null},width:{get:function get(){return this._width},set:function set(e){this.setSize(e,this._height)}},height:{get:function get(){return this._height},set:function set(e){this.setSize(this._width,e)}}});s.NONE=0;s.WIDTH_CONTROLS_HEIGHT=1;s.HEIGHT_CONTROLS_WIDTH=2;s.FIT=3;s.ENVELOP=4;e.exports=s},function(e,t,i){var a=i(0),n=i(123),r=i(19),o=i(18),s=i(6),l=i(81),d=i(1),p=i(368),c=i(178),u=new a({initialize:function(e,t){this.game=e;this.keys={};this.scenes=[];this._pending=[];this._start=[];this._queue=[];this._data={};this.isProcessing=!1;this.isBooted=!1;this.customViewports=0;if(t){if(!Array.isArray(t)){t=[t]}for(var a=0;a<t.length;a++){this._pending.push({key:"default",scene:t[a],autoStart:0==a,data:{}})}}e.events.once(o.READY,this.bootQueue,this)},bootQueue:function bootQueue(){if(this.isBooted){return}var e,t,a,n;for(e=0;e<this._pending.length;e++){t=this._pending[e];a=t.key;n=t.scene;var r;if(n instanceof p){r=this.createSceneFromInstance(a,n)}else if("object"===_typeof(n)){r=this.createSceneFromObject(a,n)}else if("function"==typeof n){r=this.createSceneFromFunction(a,n)}a=r.sys.settings.key;this.keys[a]=r;this.scenes.push(r);if(this._data[a]){r.sys.settings.data=this._data[a].data;if(this._data[a].autoStart){t.autoStart=!0}}if(t.autoStart||r.sys.settings.active){this._start.push(a)}}this._pending.length=0;this._data={};this.isBooted=!0;for(e=0;e<this._start.length;e++){t=this._start[e];this.start(t)}this._start.length=0},processQueue:function processQueue(){var e=this._pending.length,t=this._queue.length;if(0===e&&0===t){return}var a,n;if(e){for(a=0;a<e;a++){n=this._pending[a];this.add(n.key,n.scene,n.autoStart,n.data)}for(a=0;a<this._start.length;a++){n=this._start[a];this.start(n)}this._start.length=0;this._pending.length=0;return}for(a=0;a<this._queue.length;a++){n=this._queue[a];this[n.op](n.keyA,n.keyB)}this._queue.length=0},add:function add(e,t,i,a){if(i===void 0){i=!1}if(a===void 0){a={}}if(this.isProcessing||!this.isBooted){this._pending.push({key:e,scene:t,autoStart:i,data:a});if(!this.isBooted){this._data[e]={data:a}}return null}e=this.getKey(e,t);var n;if(t instanceof p){n=this.createSceneFromInstance(e,t)}else if("object"===_typeof(t)){t.key=e;n=this.createSceneFromObject(e,t)}else if("function"==typeof t){n=this.createSceneFromFunction(e,t)}n.sys.settings.data=a;e=n.sys.settings.key;this.keys[e]=n;this.scenes.push(n);if(i||n.sys.settings.active){if(this._pending.length){this._start.push(e)}else{this.start(e)}}return n},remove:function remove(e){if(this.isProcessing){this._queue.push({op:"remove",keyA:e,keyB:null})}else{var t=this.getScene(e);if(!t||t.sys.isTransitioning()){return this}var i=this.scenes.indexOf(t),a=t.sys.settings.key;if(-1<i){delete this.keys[a];this.scenes.splice(i,1);if(-1<this._start.indexOf(a)){i=this._start.indexOf(a);this._start.splice(i,1)}t.sys.destroy()}}return this},bootScene:function bootScene(e){var t=e.sys,i=t.settings;if(e.init){e.init.call(e,i.data);i.status=n.INIT;if(i.isTransition){t.events.emit(r.TRANSITION_INIT,i.transitionFrom,i.transitionDuration)}}var a;if(t.load){a=t.load;a.reset()}if(a&&e.preload){e.preload.call(e);if(0===a.list.size){this.create(e)}else{i.status=n.LOADING;a.once(l.COMPLETE,this.loadComplete,this);a.start()}}else{this.create(e)}},loadComplete:function loadComplete(e){var t=e.scene;if(this.game.sound&&this.game.sound.onBlurPausedSounds){this.game.sound.unlock()}this.create(t)},payloadComplete:function payloadComplete(e){this.bootScene(e.scene)},update:function update(e,t){this.processQueue();this.isProcessing=!0;for(var a=this.scenes.length-1,r;0<=a;a--){r=this.scenes[a].sys;if(r.settings.status>n.START&&r.settings.status<=n.RUNNING){r.step(e,t)}}},render:function render(e){for(var t=0,a;t<this.scenes.length;t++){a=this.scenes[t].sys;if(a.settings.visible&&a.settings.status>=n.LOADING&&a.settings.status<n.SLEEPING){a.render(e)}}this.isProcessing=!1},create:function create(e){var t=e.sys,i=t.settings;if(e.create){i.status=n.CREATING;e.create.call(e,i.data);if(i.status===n.DESTROYED){return}}if(i.isTransition){t.events.emit(r.TRANSITION_START,i.transitionFrom,i.transitionDuration)}if(e.update){t.sceneUpdate=e.update}i.status=n.RUNNING;t.events.emit(r.CREATE,e)},createSceneFromFunction:function createSceneFromFunction(e,t){var i=new t;if(i instanceof p){var a=i.sys.settings.key;if(""!==a){e=a}if(this.keys.hasOwnProperty(e)){throw new Error("Cannot add a Scene with duplicate key: "+e)}return this.createSceneFromInstance(e,i)}else{i.sys=new c(i);i.sys.settings.key=e;i.sys.init(this.game);return i}},createSceneFromInstance:function createSceneFromInstance(e,t){var i=t.sys.settings.key;if(""!==i){e=i}else{t.sys.settings.key=e}t.sys.init(this.game);return t},createSceneFromObject:function createSceneFromObject(e,t){var a=new p(t),n=a.sys.settings.key;if(""!==n){e=n}else{a.sys.settings.key=e}a.sys.init(this.game);for(var r=["init","preload","create","update","render"],o=0,l;o<r.length;o++){l=s(t,r[o],null);if(l){a[r[o]]=l}}if(t.hasOwnProperty("extend")){for(var d in t.extend){if(!t.extend.hasOwnProperty(d)){continue}var c=t.extend[d];if("data"==d&&a.hasOwnProperty("data")&&"object"===_typeof(c)){a.data.merge(c)}else if("sys"!=d){a[d]=c}}}return a},getKey:function getKey(e,t){if(!e){e="default"}if("function"==typeof t){return e}else if(t instanceof p){e=t.sys.settings.key}else if("object"===_typeof(t)&&t.hasOwnProperty("key")){e=t.key}if(this.keys.hasOwnProperty(e)){throw new Error("Cannot add a Scene with duplicate key: "+e)}else{return e}},getScenes:function getScenes(e,t){if(e===void 0){e=!0}if(t===void 0){t=!1}for(var a=[],n=this.scenes,r=0,o;r<n.length;r++){o=n[r];if(o&&(!e||e&&o.sys.isActive())){a.push(o)}}return t?a.reverse():a},getScene:function getScene(e){if("string"==typeof e){if(this.keys[e]){return this.keys[e]}}else{for(var t=0;t<this.scenes.length;t++){if(e===this.scenes[t]){return e}}}return null},isActive:function isActive(e){var t=this.getScene(e);if(t){return t.sys.isActive()}return null},isPaused:function isPaused(e){var t=this.getScene(e);if(t){return t.sys.isPaused()}return null},isVisible:function isVisible(e){var t=this.getScene(e);if(t){return t.sys.isVisible()}return null},isSleeping:function isSleeping(e){var t=this.getScene(e);if(t){return t.sys.isSleeping()}return null},pause:function pause(e,t){var i=this.getScene(e);if(i){i.sys.pause(t)}return this},resume:function resume(e,t){var i=this.getScene(e);if(i){i.sys.resume(t)}return this},sleep:function sleep(e,t){var i=this.getScene(e);if(i&&!i.sys.isTransitioning()){i.sys.sleep(t)}return this},wake:function wake(e,t){var i=this.getScene(e);if(i){i.sys.wake(t)}return this},run:function run(e,t){var a=this.getScene(e);if(!a){for(var n=0;n<this._pending.length;n++){if(this._pending[n].key===e){this.queueOp("start",e,t);break}}return this}if(a.sys.isSleeping()){a.sys.wake(t)}else if(a.sys.isPaused()){a.sys.resume(t)}else{this.start(e,t)}},start:function start(e,t){if(!this.isBooted){this._data[e]={autoStart:!0,data:t};return this}var i=this.getScene(e);if(i){if(i.sys.isActive()||i.sys.isPaused()){i.sys.shutdown();i.sys.start(t)}else{i.sys.start(t);var a;if(i.sys.load){a=i.sys.load}if(a&&i.sys.settings.hasOwnProperty("pack")){a.reset();if(a.addPack({payload:i.sys.settings.pack})){i.sys.settings.status=n.LOADING;a.once(l.COMPLETE,this.payloadComplete,this);a.start();return this}}}this.bootScene(i)}return this},stop:function stop(e,t){var i=this.getScene(e);if(i&&!i.sys.isTransitioning()){i.sys.shutdown(t)}return this},switch:function _switch(e,t){var i=this.getScene(e),a=this.getScene(t);if(i&&a&&i!==a){this.sleep(e);if(this.isSleeping(t)){this.wake(t)}else{this.start(t)}}return this},getAt:function getAt(e){return this.scenes[e]},getIndex:function getIndex(e){var t=this.getScene(e);return this.scenes.indexOf(t)},bringToTop:function bringToTop(e){if(this.isProcessing){this._queue.push({op:"bringToTop",keyA:e,keyB:null})}else{var t=this.getIndex(e);if(-1!==t&&t<this.scenes.length){var i=this.getScene(e);this.scenes.splice(t,1);this.scenes.push(i)}}return this},sendToBack:function sendToBack(e){if(this.isProcessing){this._queue.push({op:"sendToBack",keyA:e,keyB:null})}else{var t=this.getIndex(e);if(-1!==t&&0<t){var i=this.getScene(e);this.scenes.splice(t,1);this.scenes.unshift(i)}}return this},moveDown:function moveDown(e){if(this.isProcessing){this._queue.push({op:"moveDown",keyA:e,keyB:null})}else{var t=this.getIndex(e);if(0<t){var i=t-1,a=this.getScene(e),n=this.getAt(i);this.scenes[t]=n;this.scenes[i]=a}}return this},moveUp:function moveUp(e){if(this.isProcessing){this._queue.push({op:"moveUp",keyA:e,keyB:null})}else{var t=this.getIndex(e);if(t<this.scenes.length-1){var i=t+1,a=this.getScene(e),n=this.getAt(i);this.scenes[t]=n;this.scenes[i]=a}}return this},moveAbove:function moveAbove(e,t){if(e===t){return this}if(this.isProcessing){this._queue.push({op:"moveAbove",keyA:e,keyB:t})}else{var i=this.getIndex(e),a=this.getIndex(t);if(-1!==i&&-1!==a){var n=this.getAt(a);this.scenes.splice(a,1);this.scenes.splice(i+1,0,n)}}return this},moveBelow:function moveBelow(e,t){if(e===t){return this}if(this.isProcessing){this._queue.push({op:"moveBelow",keyA:e,keyB:t})}else{var i=this.getIndex(e),a=this.getIndex(t);if(-1!==i&&-1!==a){var n=this.getAt(a);this.scenes.splice(a,1);if(0===i){this.scenes.unshift(n)}else{this.scenes.splice(i,0,n)}}}return this},queueOp:function queueOp(e,t,i){this._queue.push({op:e,keyA:t,keyB:i});return this},swapPosition:function swapPosition(e,t){if(e===t){return this}if(this.isProcessing){this._queue.push({op:"swapPosition",keyA:e,keyB:t})}else{var i=this.getIndex(e),a=this.getIndex(t);if(i!==a&&-1!==i&&-1!==a){var n=this.getAt(i);this.scenes[i]=this.scenes[a];this.scenes[a]=n}}return this},dump:function dump(){for(var e=[],t=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],a=0;a<this.scenes.length;a++){var r=this.scenes[a].sys,o=r.settings.visible&&(r.settings.status===n.RUNNING||r.settings.status===n.PAUSED)?"[*] ":"[-] ";o+=r.settings.key+" ("+t[r.settings.status]+")";e.push(o)}console.log(e.join("\n"))},destroy:function destroy(){for(var e=0,t;e<this.scenes.length;e++){t=this.scenes[e].sys;t.destroy()}this.update=d;this.scenes=[];this._pending=[];this._start=[];this._queue=[];this.game=null}});e.exports=u},function(e,t,i){var a=i(0),n=i(178),r=new a({initialize:function(e){this.sys=new n(this,e);this.game;this.anims;this.cache;this.registry;this.sound;this.textures;this.events;this.cameras;this.add;this.make;this.scene;this.children;this.lights;this.data;this.input;this.load;this.time;this.tweens;this.physics;this.impact;this.matter;this.scale;this.plugins},update:function update(){}});e.exports=r},function(e,t,i){var a=i(123),n=i(6),r=i(107),o=i(873);e.exports={create:function create(e){if("string"==typeof e){e={key:e}}else if(e===void 0){e={}}return{status:a.PENDING,key:n(e,"key",""),active:n(e,"active",!1),visible:n(e,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:n(e,"pack",!1),cameras:n(e,"cameras",null),map:n(e,"map",r(o,n(e,"mapAdd",{}))),physics:n(e,"physics",{}),loader:n(e,"loader",{}),plugins:n(e,"plugins",!1),input:n(e,"input",{})}}}},function(e,t,i){var a=i(26),n=i(371),r=i(0),o=i(33),s=i(29),l=i(9),d=i(119),p=i(18),c=i(340),u=i(6),g=i(373),h=i(180),m=new r({Extends:l,initialize:function(e){l.call(this);this.game=e;this.name="TextureManager";this.list={};this._tempCanvas=a.create2D(this,1,1);this._tempContext=this._tempCanvas.getContext("2d");this._pending=0;e.events.once(p.BOOT,this.boot,this)},boot:function boot(){this._pending=2;this.on(d.LOAD,this.updatePending,this);this.on(d.ERROR,this.updatePending,this);this.addBase64("__DEFAULT",this.game.config.defaultImage);this.addBase64("__MISSING",this.game.config.missingImage);this.game.events.once(p.DESTROY,this.destroy,this)},updatePending:function updatePending(){this._pending--;if(0===this._pending){this.off(d.LOAD);this.off(d.ERROR);this.emit(d.READY)}},checkKey:function checkKey(e){if(this.exists(e)){console.error("Texture key already in use: "+e);return!1}return!0},remove:function remove(e){if("string"==typeof e){if(this.exists(e)){e=this.get(e)}else{console.warn("No texture found matching key: "+e);return this}}if(this.list.hasOwnProperty(e.key)){e.destroy();this.emit(d.REMOVE,e.key)}return this},removeKey:function removeKey(e){if(this.list.hasOwnProperty(e)){delete this.list[e]}return this},addBase64:function addBase64(e,t){if(this.checkKey(e)){var i=this,a=new Image;a.onerror=function(){i.emit(d.ERROR,e)};a.onload=function(){var t=i.create(e,a);g.Image(t,0);i.emit(d.ADD,e,t);i.emit(d.LOAD,e,t)};a.src=t}return this},getBase64:function getBase64(e,t,i,n){if(i===void 0){i="image/png"}if(n===void 0){n=.92}var r="",o=this.getFrame(e,t);if(o&&(o.source.isRenderTexture||o.source.isGLTexture)){console.warn("Cannot getBase64 from WebGL Texture")}else if(o){var s=o.canvasData,l=a.create2D(this,s.width,s.height),d=l.getContext("2d");d.drawImage(o.source.image,s.x,s.y,s.width,s.height,0,0,s.width,s.height);r=l.toDataURL(i,n);a.remove(l)}return r},addImage:function addImage(e,t,i){var a=null;if(this.checkKey(e)){a=this.create(e,t);g.Image(a,0);if(i){a.setDataSource(i)}this.emit(d.ADD,e,a)}return a},addGLTexture:function addGLTexture(e,t,i,a){var n=null;if(this.checkKey(e)){n=this.create(e,t,i,a);n.add("__BASE",0,0,0,i,a);this.emit(d.ADD,e,n)}return n},addRenderTexture:function addRenderTexture(e,t){var i=null;if(this.checkKey(e)){i=this.create(e,t);i.add("__BASE",0,0,0,t.width,t.height);this.emit(d.ADD,e,i)}return i},generate:function generate(e,t){if(this.checkKey(e)){var i=a.create(this,1,1);t.canvas=i;c(t);return this.addCanvas(e,i)}else{return null}},createCanvas:function createCanvas(e,t,i){if(t===void 0){t=256}if(i===void 0){i=256}if(this.checkKey(e)){var n=a.create(this,t,i,s.CANVAS,!0);return this.addCanvas(e,n)}return null},addCanvas:function addCanvas(e,t,i){if(i===void 0){i=!1}var a=null;if(i){a=new n(this,e,t,t.width,t.height)}else if(this.checkKey(e)){a=new n(this,e,t,t.width,t.height);this.list[e]=a;this.emit(d.ADD,e,a)}return a},addAtlas:function addAtlas(e,t,i,a){if(Array.isArray(i.textures)||Array.isArray(i.frames)){return this.addAtlasJSONArray(e,t,i,a)}else{return this.addAtlasJSONHash(e,t,i,a)}},addAtlasJSONArray:function addAtlasJSONArray(e,t,a,n){var r=null;if(this.checkKey(e)){r=this.create(e,t);if(Array.isArray(a)){for(var o=1===a.length,s=0,l;s<r.source.length;s++){l=o?a[0]:a[s];g.JSONArray(r,s,l)}}else{g.JSONArray(r,0,a)}if(n){r.setDataSource(n)}this.emit(d.ADD,e,r)}return r},addAtlasJSONHash:function addAtlasJSONHash(e,t,a,n){var r=null;if(this.checkKey(e)){r=this.create(e,t);if(Array.isArray(a)){for(var o=0;o<a.length;o++){g.JSONHash(r,o,a[o])}}else{g.JSONHash(r,0,a)}if(n){r.setDataSource(n)}this.emit(d.ADD,e,r)}return r},addAtlasXML:function addAtlasXML(e,t,i,a){var n=null;if(this.checkKey(e)){n=this.create(e,t);g.AtlasXML(n,0,i);if(a){n.setDataSource(a)}this.emit(d.ADD,e,n)}return n},addUnityAtlas:function addUnityAtlas(e,t,i,a){var n=null;if(this.checkKey(e)){n=this.create(e,t);g.UnityYAML(n,0,i);if(a){n.setDataSource(a)}this.emit(d.ADD,e,n)}return n},addSpriteSheet:function addSpriteSheet(e,t,i){var a=null;if(this.checkKey(e)){a=this.create(e,t);var n=a.source[0].width,r=a.source[0].height;g.SpriteSheet(a,0,0,0,n,r,i);this.emit(d.ADD,e,a)}return a},addSpriteSheetFromAtlas:function addSpriteSheetFromAtlas(e,t){if(!this.checkKey(e)){return null}var i=u(t,"atlas",null),a=u(t,"frame",null);if(!i||!a){return}var n=this.get(i),r=n.get(a);if(r){var o=this.create(e,r.source.image);if(r.trimmed){g.SpriteSheetFromAtlas(o,r,t)}else{g.SpriteSheet(o,0,r.cutX,r.cutY,r.cutWidth,r.cutHeight,t)}this.emit(d.ADD,e,o);return o}},create:function create(e,t,i,a){var n=null;if(this.checkKey(e)){n=new h(this,e,t,i,a);this.list[e]=n}return n},exists:function exists(e){return this.list.hasOwnProperty(e)},get:function get(e){if(e===void 0){e="__DEFAULT"}if(this.list[e]){return this.list[e]}else if(e instanceof h){return e}else{return this.list.__MISSING}},cloneFrame:function cloneFrame(e,t){if(this.list[e]){return this.list[e].get(t).clone()}},getFrame:function getFrame(e,t){if(this.list[e]){return this.list[e].get(t)}},getTextureKeys:function getTextureKeys(){var e=[];for(var t in this.list){if("__DEFAULT"!=t&&"__MISSING"!=t){e.push(t)}}return e},getPixel:function getPixel(e,t,i,a){var n=this.getFrame(i,a);if(n){e-=n.x;t-=n.y;var r=n.data.cut;e+=r.x;t+=r.y;if(e>=r.x&&e<r.r&&t>=r.y&&t<r.b){var s=this._tempContext;s.clearRect(0,0,1,1);s.drawImage(n.source.image,e,t,1,1,0,0,1,1);var l=s.getImageData(0,0,1,1);return new o(l.data[0],l.data[1],l.data[2],l.data[3])}}return null},getPixelAlpha:function getPixelAlpha(e,t,i,a){var n=this.getFrame(i,a);if(n){e-=n.x;t-=n.y;var r=n.data.cut;e+=r.x;t+=r.y;if(e>=r.x&&e<r.r&&t>=r.y&&t<r.b){var o=this._tempContext;o.clearRect(0,0,1,1);o.drawImage(n.source.image,e,t,1,1,0,0,1,1);var s=o.getImageData(0,0,1,1);return s.data[3]}}return null},setTexture:function setTexture(e,t,i){if(this.list[t]){e.texture=this.list[t];e.frame=e.texture.get(i)}return e},renameTexture:function renameTexture(e,t){var i=this.get(e);if(i&&e!==t){i.key=t;this.list[t]=i;delete this.list[e];return!0}return!1},each:function each(e,t){for(var a=[null],n=1;n<arguments.length;n++){a.push(arguments[n])}for(var r in this.list){a[0]=this.list[r];e.apply(t,a)}},destroy:function destroy(){for(var e in this.list){this.list[e].destroy()}this.list={};this.game=null;a.remove(this._tempCanvas)}});e.exports=m},function(e,t,i){var a=i(0),n=i(22),r=i(33),o=i(29),s=i(118),l=i(180),d=new a({Extends:l,initialize:function(e,t,i,a,n){l.call(this,e,t,i,a,n);this.add("__BASE",0,0,0,a,n);this._source=this.frames.__BASE.source;this.canvas=this._source.image;this.context=this.canvas.getContext("2d");this.width=a;this.height=n;this.imageData=this.context.getImageData(0,0,a,n);this.data=null;if(this.imageData){this.data=this.imageData.data}this.pixels=null;this.buffer;if(this.data){if(this.imageData.data.buffer){this.buffer=this.imageData.data.buffer;this.pixels=new Uint32Array(this.buffer)}else if(window.ArrayBuffer){this.buffer=new ArrayBuffer(this.imageData.data.length);this.pixels=new Uint32Array(this.buffer)}else{this.pixels=this.imageData.data}}},update:function update(){this.imageData=this.context.getImageData(0,0,this.width,this.height);this.data=this.imageData.data;if(this.imageData.data.buffer){this.buffer=this.imageData.data.buffer;this.pixels=new Uint32Array(this.buffer)}else if(window.ArrayBuffer){this.buffer=new ArrayBuffer(this.imageData.data.length);this.pixels=new Uint32Array(this.buffer)}else{this.pixels=this.imageData.data}if(this.manager.game.config.renderType===o.WEBGL){this.refresh()}return this},draw:function draw(e,t,i){this.context.drawImage(i,e,t);return this.update()},drawFrame:function drawFrame(e,t,i,a){if(i===void 0){i=0}if(a===void 0){a=0}var n=this.manager.getFrame(e,t);if(n){var r=n.canvasData,o=n.cutWidth,s=n.cutHeight,l=n.source.resolution;this.context.drawImage(n.source.image,r.x,r.y,o,s,i,a,o/l,s/l);return this.update()}else{return this}},setPixel:function setPixel(e,t,i,a,n,r){if(r===void 0){r=255}e=Math.abs(Math.floor(e));t=Math.abs(Math.floor(t));var o=this.getIndex(e,t);if(-1<o){var s=this.context.getImageData(e,t,1,1);s.data[0]=i;s.data[1]=a;s.data[2]=n;s.data[3]=r;this.context.putImageData(s,e,t)}return this},putData:function putData(e,t,i,a,n,r,o){if(a===void 0){a=0}if(n===void 0){n=0}if(r===void 0){r=e.width}if(o===void 0){o=e.height}this.context.putImageData(e,t,i,a,n,r,o);return this},getData:function getData(e,t,i,a){e=n(Math.floor(e),0,this.width-1);t=n(Math.floor(t),0,this.height-1);i=n(i,1,this.width-e);a=n(a,1,this.height-t);var r=this.context.getImageData(e,t,i,a);return r},getPixel:function getPixel(e,t,i){if(!i){i=new r}var n=this.getIndex(e,t);if(-1<n){var o=this.data,s=o[n+0],l=o[n+1],d=o[n+2],p=o[n+3];i.setTo(s,l,d,p)}return i},getPixels:function getPixels(e,t,i,a){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=this.width}if(a===void 0){a=i}e=Math.abs(Math.round(e));t=Math.abs(Math.round(t));for(var o=n(e,0,this.width),s=n(e+i,0,this.width),l=n(t,0,this.height),d=n(t+a,0,this.height),p=new r,c=[],u=l,g;u<d;u++){g=[];for(var h=o;h<s;h++){p=this.getPixel(h,u,p);g.push({x:h,y:u,color:p.color,alpha:p.alphaGL})}c.push(g)}return c},getIndex:function getIndex(e,t){e=Math.abs(Math.round(e));t=Math.abs(Math.round(t));if(e<this.width&&t<this.height){return 4*(e+t*this.width)}else{return-1}},refresh:function refresh(){this._source.update();return this},getCanvas:function getCanvas(){return this.canvas},getContext:function getContext(){return this.context},clear:function clear(e,t,i,a){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=this.width}if(a===void 0){a=this.height}this.context.clearRect(e,t,i,a);return this.update()},setSize:function setSize(e,t){if(t===void 0){t=e}if(e!==this.width||t!==this.height){this.canvas.width=e;this.canvas.height=t;this._source.width=e;this._source.height=t;this._source.isPowerOf2=s(e,t);this.frames.__BASE.setSize(e,t,0,0);this.refresh()}return this},destroy:function destroy(){l.prototype.destroy.call(this);this._source=null;this.canvas=null;this.context=null;this.imageData=null;this.data=null;this.pixels=null;this.buffer=null}});e.exports=d},function(e,t,i){var a=i(26),n=i(0),r=i(118),o=i(231),s=new n({initialize:function(e,t,i,a,n){if(n===void 0){n=!1}var s=e.manager.game;this.renderer=s.renderer;this.texture=e;this.source=t;this.image=t;this.compressionAlgorithm=null;this.resolution=1;this.width=i||t.naturalWidth||t.videoWidth||t.width||0;this.height=a||t.naturalHeight||t.videoHeight||t.height||0;this.scaleMode=o.DEFAULT;this.isCanvas=t instanceof HTMLCanvasElement;this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&t instanceof HTMLVideoElement;this.isRenderTexture="RenderTexture"===t.type;this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&t instanceof WebGLTexture;this.isPowerOf2=r(this.width,this.height);this.glTexture=null;this.flipY=n;this.init(s)},init:function init(e){if(this.renderer){if(this.renderer.gl){if(this.isCanvas){this.glTexture=this.renderer.createCanvasTexture(this.image,!1,this.flipY)}else if(this.isVideo){this.glTexture=this.renderer.createVideoTexture(this.image,!1,this.flipY)}else if(this.isRenderTexture){this.image=this.source.canvas;this.glTexture=this.renderer.createTextureFromSource(null,this.width,this.height,this.scaleMode)}else if(this.isGLTexture){this.glTexture=this.source}else{this.glTexture=this.renderer.createTextureFromSource(this.image,this.width,this.height,this.scaleMode)}}else if(this.isRenderTexture){this.image=this.source.canvas}}if(!e.config.antialias){this.setFilter(1)}},setFilter:function setFilter(e){if(this.renderer.gl){this.renderer.setTextureFilter(this.glTexture,e)}this.scaleMode=e},setFlipY:function setFlipY(e){if(e===void 0){e=!0}this.flipY=e;return this},update:function update(){var e=this.renderer.gl;if(e&&this.isCanvas){this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY)}else if(e&&this.isVideo){this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY)}},destroy:function destroy(){if(this.glTexture){this.renderer.deleteTexture(this.glTexture)}if(this.isCanvas){a.remove(this.image)}this.renderer=null;this.texture=null;this.source=null;this.image=null;this.glTexture=null}});e.exports=s},function(e,t,i){e.exports={AtlasXML:i(874),Canvas:i(875),Image:i(876),JSONArray:i(877),JSONHash:i(878),SpriteSheet:i(879),SpriteSheetFromAtlas:i(880),UnityYAML:i(881)}},function(e,t,i){var a=i(375),n=i(377),r=i(379);e.exports={create:function create(e){var t=e.config.audio,i=e.device.audio;if(t&&t.noAudio||!i.webAudio&&!i.audioData){return new n(e)}if(i.webAudio&&!(t&&t.disableWebAudio)){return new r(e)}return new a(e)}}},function(e,t,i){var a=i(124),n=i(0),r=i(59),o=i(376),s=new n({Extends:a,initialize:function(e){this.override=!0;this.audioPlayDelay=.1;this.loopEndOffset=.05;this.onBlurPausedSounds=[];this.locked="ontouchstart"in window;this.lockedActionsQueue=this.locked?[]:null;this._mute=!1;this._volume=1;a.call(this,e)},add:function add(e,t){var i=new o(this,e,t);this.sounds.push(i);return i},unlock:function(){this.locked=!1;var e=this;this.game.cache.audio.entries.each(function(t,a){for(var n=0;n<a.length;n++){if("true"===a[n].dataset.locked){e.locked=!0;return!1}}return!0});if(!this.locked){return}var t=!1,i=function(){t=!0},a=function(){if(t){t=!1;return}document.body.removeEventListener("touchmove",i);document.body.removeEventListener("touchend",a);var n=[];e.game.cache.audio.entries.each(function(e,t){for(var a=0,r;a<t.length;a++){r=t[a];if("true"===r.dataset.locked){n.push(r)}}return!0});if(0===n.length){return}var r=n[n.length-1];r.oncanplaythrough=function(){r.oncanplaythrough=null;n.forEach(function(e){e.dataset.locked="false"});e.unlocked=!0};n.forEach(function(e){e.load()})};this.once(r.UNLOCKED,function(){this.forEachActiveSound(function(e){if(null===e.currentMarker&&0===e.duration){e.duration=e.tags[0].duration}e.totalDuration=e.tags[0].duration});while(this.lockedActionsQueue.length){var e=this.lockedActionsQueue.shift();if(e.sound[e.prop].apply){e.sound[e.prop].apply(e.sound,e.value||[])}else{e.sound[e.prop]=e.value}}},this);document.body.addEventListener("touchmove",i,!1);document.body.addEventListener("touchend",a,!1)},onBlur:function onBlur(){this.forEachActiveSound(function(e){if(e.isPlaying){this.onBlurPausedSounds.push(e);e.onBlur()}})},onFocus:function onFocus(){this.onBlurPausedSounds.forEach(function(e){e.onFocus()});this.onBlurPausedSounds.length=0},destroy:function destroy(){a.prototype.destroy.call(this);this.onBlurPausedSounds.length=0;this.onBlurPausedSounds=null},isLocked:function isLocked(e,t,i){if("true"===e.tags[0].dataset.locked){this.lockedActionsQueue.push({sound:e,prop:t,value:i});return!0}return!1},setMute:function setMute(e){this.mute=e;return this},mute:{get:function get(){return this._mute},set:function set(e){this._mute=e;this.forEachActiveSound(function(e){e.updateMute()});this.emit(r.GLOBAL_MUTE,this,e)}},setVolume:function setVolume(e){this.volume=e;return this},volume:{get:function get(){return this._volume},set:function set(e){this._volume=e;this.forEachActiveSound(function(e){e.updateVolume()});this.emit(r.GLOBAL_VOLUME,this,e)}}});e.exports=s},function(e,t,i){var a=i(125),n=i(0),r=i(59),o=new n({Extends:a,initialize:function(e,t,i){if(i===void 0){i={}}this.tags=e.game.cache.audio.get(t);if(!this.tags){throw new Error("There is no audio asset with key \""+t+"\" in the audio cache")}this.audio=null;this.startTime=0;this.previousTime=0;this.duration=this.tags[0].duration;this.totalDuration=this.tags[0].duration;a.call(this,e,t,i)},play:function play(e,t){if(this.manager.isLocked(this,"play",[e,t])){return!1}if(!a.prototype.play.call(this,e,t)){return!1}if(!this.pickAndPlayAudioTag()){return!1}this.emit(r.PLAY,this);return!0},pause:function pause(){if(this.manager.isLocked(this,"pause")){return!1}if(0<this.startTime){return!1}if(!a.prototype.pause.call(this)){return!1}this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0);this.stopAndReleaseAudioTag();this.emit(r.PAUSE,this);return!0},resume:function resume(){if(this.manager.isLocked(this,"resume")){return!1}if(0<this.startTime){return!1}if(!a.prototype.resume.call(this)){return!1}if(!this.pickAndPlayAudioTag()){return!1}this.emit(r.RESUME,this);return!0},stop:function stop(){if(this.manager.isLocked(this,"stop")){return!1}if(!a.prototype.stop.call(this)){return!1}this.stopAndReleaseAudioTag();this.emit(r.STOP,this);return!0},pickAndPlayAudioTag:function pickAndPlayAudioTag(){if(!this.pickAudioTag()){this.reset();return!1}var e=this.currentConfig.seek,t=this.currentConfig.delay,i=(this.currentMarker?this.currentMarker.start:0)+e;this.previousTime=i;this.audio.currentTime=i;this.applyConfig();if(0===t){this.startTime=0;if(this.audio.paused){this.playCatchPromise()}}else{this.startTime=window.performance.now()+1e3*t;if(!this.audio.paused){this.audio.pause()}}this.resetConfig();return!0},pickAudioTag:function pickAudioTag(){if(this.audio){return!0}for(var e=0,t;e<this.tags.length;e++){t=this.tags[e];if("false"===t.dataset.used){t.dataset.used="true";this.audio=t;return!0}}if(!this.manager.override){return!1}var a=[];this.manager.forEachActiveSound(function(e){if(e.key===this.key&&e.audio){a.push(e)}},this);a.sort(function(e,t){if(e.loop===t.loop){return t.seek/t.duration-e.seek/e.duration}return e.loop?1:-1});var n=a[0];this.audio=n.audio;n.reset();n.audio=null;n.startTime=0;n.previousTime=0;return!0},playCatchPromise:function playCatchPromise(){var e=this.audio.play();if(e){e.catch(function(e){console.warn(e)})}},stopAndReleaseAudioTag:function stopAndReleaseAudioTag(){this.audio.pause();this.audio.dataset.used="false";this.audio=null;this.startTime=0;this.previousTime=0},reset:function reset(){a.prototype.stop.call(this)},onBlur:function onBlur(){this.isPlaying=!1;this.isPaused=!0;this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0);this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3);this.stopAndReleaseAudioTag()},onFocus:function onFocus(){this.isPlaying=!0;this.isPaused=!1;this.pickAndPlayAudioTag()},update:function update(e){if(!this.isPlaying){return}if(0<this.startTime){if(this.startTime<e-this.manager.audioPlayDelay){this.audio.currentTime+=Math.max(0,e-this.startTime)/1e3;this.startTime=0;this.previousTime=this.audio.currentTime;this.playCatchPromise()}return}var t=this.currentMarker?this.currentMarker.start:0,i=t+this.duration,a=this.audio.currentTime;if(this.currentConfig.loop){if(a>=i-this.manager.loopEndOffset){this.audio.currentTime=t+Math.max(0,a-i);a=this.audio.currentTime}else if(a<t){this.audio.currentTime+=t;a=this.audio.currentTime}if(a<this.previousTime){this.emit(r.LOOPED,this)}}else if(a>=i){this.reset();this.stopAndReleaseAudioTag();this.emit(r.COMPLETE,this);return}this.previousTime=a},destroy:function destroy(){a.prototype.destroy.call(this);this.tags=null;if(this.audio){this.stopAndReleaseAudioTag()}},updateMute:function updateMute(){if(this.audio){this.audio.muted=this.currentConfig.mute||this.manager.mute}},updateVolume:function updateVolume(){if(this.audio){this.audio.volume=this.currentConfig.volume*this.manager.volume}},calculateRate:function calculateRate(){a.prototype.calculateRate.call(this);if(this.audio){this.audio.playbackRate=this.totalRate}},mute:{get:function get(){return this.currentConfig.mute},set:function set(e){this.currentConfig.mute=e;if(this.manager.isLocked(this,"mute",e)){return}this.updateMute();this.emit(r.MUTE,this,e)}},setMute:function setMute(e){this.mute=e;return this},volume:{get:function get(){return this.currentConfig.volume},set:function set(e){this.currentConfig.volume=e;if(this.manager.isLocked(this,"volume",e)){return}this.updateVolume();this.emit(r.VOLUME,this,e)}},setVolume:function setVolume(e){this.volume=e;return this},rate:{get:function get(){return this.currentConfig.rate},set:function set(e){this.currentConfig.rate=e;if(this.manager.isLocked(this,r.RATE,e)){}else{this.calculateRate();this.emit(r.RATE,this,e)}}},setRate:function setRate(e){this.rate=e;return this},detune:{get:function get(){return this.currentConfig.detune},set:function set(e){this.currentConfig.detune=e;if(this.manager.isLocked(this,r.DETUNE,e)){}else{this.calculateRate();this.emit(r.DETUNE,this,e)}}},setDetune:function setDetune(e){this.detune=e;return this},seek:{get:function get(){if(this.isPlaying){return this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0)}else if(this.isPaused){return this.currentConfig.seek}else{return 0}},set:function set(e){if(this.manager.isLocked(this,"seek",e)){return}if(0<this.startTime){return}if(this.isPlaying||this.isPaused){e=Math.min(Math.max(0,e),this.duration);if(this.isPlaying){this.previousTime=e;this.audio.currentTime=e}else if(this.isPaused){this.currentConfig.seek=e}this.emit(r.SEEK,this,e)}}},setSeek:function setSeek(e){this.seek=e;return this},loop:{get:function get(){return this.currentConfig.loop},set:function set(e){this.currentConfig.loop=e;if(this.manager.isLocked(this,"loop",e)){return}if(this.audio){this.audio.loop=e}this.emit(r.LOOP,this,e)}},setLoop:function setLoop(e){this.loop=e;return this}});e.exports=o},function(e,t,i){var a=i(124),n=i(0),r=i(9),o=i(378),s=i(1),l=new n({Extends:r,initialize:function(e){r.call(this);this.game=e;this.sounds=[];this.mute=!1;this.volume=1;this.rate=1;this.detune=0;this.pauseOnBlur=!0;this.locked=!1},add:function add(e,t){var i=new o(this,e,t);this.sounds.push(i);return i},addAudioSprite:function addAudioSprite(e,t){var i=this.add(e,t);i.spritemap={};return i},play:function play(){return!1},playAudioSprite:function playAudioSprite(){return!1},remove:function remove(e){return a.prototype.remove.call(this,e)},removeByKey:function removeByKey(e){return a.prototype.removeByKey.call(this,e)},pauseAll:s,resumeAll:s,stopAll:s,update:s,setRate:s,setDetune:s,setMute:s,setVolume:s,forEachActiveSound:function forEachActiveSound(e,t){a.prototype.forEachActiveSound.call(this,e,t)},destroy:function destroy(){a.prototype.destroy.call(this)}});e.exports=l},function(e,t,i){var a=i(125),n=i(0),r=i(9),o=i(17),s=new n({Extends:r,initialize:function(e,t,i){if(void 0===i){i={}}r.call(this);this.manager=e;this.key=t;this.isPlaying=!1;this.isPaused=!1;this.totalRate=1;this.duration=0;this.totalDuration=0;this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0},i);this.currentConfig=this.config;this.mute=!1;this.volume=1;this.rate=1;this.detune=0;this.seek=0;this.loop=!1;this.markers={};this.currentMarker=null;this.pendingRemove=!1},addMarker:function addMarker(){return!1},updateMarker:function updateMarker(){return!1},removeMarker:function removeMarker(){return null},play:function play(){return!1},pause:function pause(){return!1},resume:function resume(){return!1},stop:function stop(){return!1},destroy:function destroy(){this.manager.remove(this);a.prototype.destroy.call(this)}});e.exports=s},function(e,t,i){var a=i(380),n=i(124),r=i(0),o=i(59),s=i(381),l=new r({Extends:n,initialize:function(e){this.context=this.createAudioContext(e);this.masterMuteNode=this.context.createGain();this.masterVolumeNode=this.context.createGain();this.masterMuteNode.connect(this.masterVolumeNode);this.masterVolumeNode.connect(this.context.destination);this.destination=this.masterMuteNode;this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window);n.call(this,e);if(this.locked){this.unlock()}},createAudioContext:function createAudioContext(e){var t=e.config.audio;if(t&&t.context){t.context.resume();return t.context}return new AudioContext},setAudioContext:function setAudioContext(e){if(this.context){this.context.close()}if(this.masterMuteNode){this.masterMuteNode.disconnect()}if(this.masterVolumeNode){this.masterVolumeNode.disconnect()}this.context=e;this.masterMuteNode=e.createGain();this.masterVolumeNode=e.createGain();this.masterMuteNode.connect(this.masterVolumeNode);this.masterVolumeNode.connect(e.destination);this.destination=this.masterMuteNode;return this},add:function add(e,t){var i=new s(this,e,t);this.sounds.push(i);return i},decodeAudio:function decodeAudio(e,t){var n;if(!Array.isArray(e)){n=[{key:e,data:t}]}else{n=e}for(var r=this.game.cache.audio,s=n.length,l=0;l<n.length;l++){var d=n[l],p=d.key,c=d.data;if("string"==typeof c){c=a(c)}var u=function(e,t){r.add(e,t);this.emit(o.DECODED,e);s--;if(0===s){this.emit(o.DECODED_ALL)}}.bind(this,p),g=function(e,t){console.error("Error decoding audio: "+e+" - ",t?t.message:"");s--;if(0===s){this.emit(o.DECODED_ALL)}}.bind(this,p);this.context.decodeAudioData(c,u,g)}},unlock:function unlock(){var e=this,t=document.body,i=function i(){if(e.context){e.context.resume().then(function(){t.removeEventListener("touchstart",i);t.removeEventListener("touchend",i);t.removeEventListener("click",i);t.removeEventListener("keydown",i);e.unlocked=!0},function(){t.removeEventListener("touchstart",i);t.removeEventListener("touchend",i);t.removeEventListener("click",i);t.removeEventListener("keydown",i)})}};if(t){t.addEventListener("touchstart",i,!1);t.addEventListener("touchend",i,!1);t.addEventListener("click",i,!1);t.addEventListener("keydown",i,!1)}},onBlur:function onBlur(){if(!this.locked){this.context.suspend()}},onFocus:function onFocus(){if(!this.locked){this.context.resume()}},destroy:function destroy(){this.destination=null;this.masterVolumeNode.disconnect();this.masterVolumeNode=null;this.masterMuteNode.disconnect();this.masterMuteNode=null;if(this.game.config.audio&&this.game.config.audio.context){this.context.suspend()}else{var e=this;this.context.close().then(function(){e.context=null})}n.prototype.destroy.call(this)},setMute:function setMute(e){this.mute=e;return this},mute:{get:function get(){return 0===this.masterMuteNode.gain.value},set:function set(e){this.masterMuteNode.gain.setValueAtTime(e?0:1,0);this.emit(o.GLOBAL_MUTE,this,e)}},setVolume:function setVolume(e){this.volume=e;return this},volume:{get:function get(){return this.masterVolumeNode.gain.value},set:function set(e){this.masterVolumeNode.gain.setValueAtTime(e,0);this.emit(o.GLOBAL_VOLUME,this,e)}}});e.exports=l},function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=new Uint8Array(256),n=0;n<t.length;n++){a[t.charCodeAt(n)]=n}var r=function(e){e=e.substr(e.indexOf(",")+1);var t=e.length,n=.75*t,r=0,o,s,l,d;if("="===e[t-1]){n--;if("="===e[t-2]){n--}}for(var c=new ArrayBuffer(n),u=new Uint8Array(c),g=0;g<t;g+=4){o=a[e.charCodeAt(g)];s=a[e.charCodeAt(g+1)];l=a[e.charCodeAt(g+2)];d=a[e.charCodeAt(g+3)];u[r++]=o<<2|s>>4;u[r++]=(15&s)<<4|l>>2;u[r++]=(3&l)<<6|63&d}return c};e.exports=r},function(e,t,i){var a=i(125),n=i(0),r=i(59),o=new n({Extends:a,initialize:function(e,t,i){if(i===void 0){i={}}this.audioBuffer=e.game.cache.audio.get(t);if(!this.audioBuffer){throw new Error("There is no audio asset with key \""+t+"\" in the audio cache")}this.source=null;this.loopSource=null;this.muteNode=e.context.createGain();this.volumeNode=e.context.createGain();this.playTime=0;this.startTime=0;this.loopTime=0;this.rateUpdates=[];this.hasEnded=!1;this.hasLooped=!1;this.muteNode.connect(this.volumeNode);this.volumeNode.connect(e.destination);this.duration=this.audioBuffer.duration;this.totalDuration=this.audioBuffer.duration;a.call(this,e,t,i)},play:function play(e,t){if(!a.prototype.play.call(this,e,t)){return!1}this.stopAndRemoveBufferSource();this.createAndStartBufferSource();this.emit(r.PLAY,this);return!0},pause:function pause(){if(this.manager.context.currentTime<this.startTime){return!1}if(!a.prototype.pause.call(this)){return!1}this.currentConfig.seek=this.getCurrentTime();this.stopAndRemoveBufferSource();this.emit(r.PAUSE,this);return!0},resume:function resume(){if(this.manager.context.currentTime<this.startTime){return!1}if(!a.prototype.resume.call(this)){return!1}this.createAndStartBufferSource();this.emit(r.RESUME,this);return!0},stop:function stop(){if(!a.prototype.stop.call(this)){return!1}this.stopAndRemoveBufferSource();this.emit(r.STOP,this);return!0},createAndStartBufferSource:function createAndStartBufferSource(){var e=this.currentConfig.seek,t=this.currentConfig.delay,i=this.manager.context.currentTime+t,a=(this.currentMarker?this.currentMarker.start:0)+e,n=this.duration-e;this.playTime=i-e;this.startTime=i;this.source=this.createBufferSource();this.applyConfig();this.source.start(Math.max(0,i),Math.max(0,a),Math.max(0,n));this.resetConfig()},createAndStartLoopBufferSource:function createAndStartLoopBufferSource(){var e=this.getLoopTime(),t=this.currentMarker?this.currentMarker.start:0,i=this.duration;this.loopTime=e;this.loopSource=this.createBufferSource();this.loopSource.playbackRate.setValueAtTime(this.totalRate,0);this.loopSource.start(Math.max(0,e),Math.max(0,t),Math.max(0,i))},createBufferSource:function createBufferSource(){var e=this,t=this.manager.context.createBufferSource();t.buffer=this.audioBuffer;t.connect(this.muteNode);t.onended=function(t){if(t.target===e.source){if(e.currentConfig.loop){e.hasLooped=!0}else{e.hasEnded=!0}}};return t},stopAndRemoveBufferSource:function stopAndRemoveBufferSource(){if(this.source){this.source.stop();this.source.disconnect();this.source=null}this.playTime=0;this.startTime=0;this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function stopAndRemoveLoopBufferSource(){if(this.loopSource){this.loopSource.stop();this.loopSource.disconnect();this.loopSource=null}this.loopTime=0},applyConfig:function applyConfig(){this.rateUpdates.length=0;this.rateUpdates.push({time:0,rate:1});a.prototype.applyConfig.call(this)},update:function update(){if(this.hasEnded){this.hasEnded=!1;a.prototype.stop.call(this);this.stopAndRemoveBufferSource();this.emit(r.COMPLETE,this)}else if(this.hasLooped){this.hasLooped=!1;this.source=this.loopSource;this.loopSource=null;this.playTime=this.startTime=this.loopTime;this.rateUpdates.length=0;this.rateUpdates.push({time:0,rate:this.totalRate});this.createAndStartLoopBufferSource();this.emit(r.LOOPED,this)}},destroy:function destroy(){a.prototype.destroy.call(this);this.audioBuffer=null;this.stopAndRemoveBufferSource();this.muteNode.disconnect();this.muteNode=null;this.volumeNode.disconnect();this.volumeNode=null;this.rateUpdates.length=0;this.rateUpdates=null},calculateRate:function calculateRate(){a.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;if(this.source&&"number"==typeof this.totalRate){this.source.playbackRate.setValueAtTime(this.totalRate,e)}if(this.isPlaying){this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate});if(this.loopSource){this.stopAndRemoveLoopBufferSource();this.createAndStartLoopBufferSource()}}},getCurrentTime:function getCurrentTime(){for(var e=0,t=0,a;t<this.rateUpdates.length;t++){a=0;if(t<this.rateUpdates.length-1){a=this.rateUpdates[t+1].time}else{a=this.manager.context.currentTime-this.playTime}e+=(a-this.rateUpdates[t].time)*this.rateUpdates[t].rate}return e},getLoopTime:function getLoopTime(){for(var e=0,t=0;t<this.rateUpdates.length-1;t++){e+=(this.rateUpdates[t+1].time-this.rateUpdates[t].time)*this.rateUpdates[t].rate}var a=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+a.time+(this.duration-e)/a.rate},rate:{get:function get(){return this.currentConfig.rate},set:function set(e){this.currentConfig.rate=e;this.calculateRate();this.emit(r.RATE,this,e)}},setRate:function setRate(e){this.rate=e;return this},detune:{get:function get(){return this.currentConfig.detune},set:function set(e){this.currentConfig.detune=e;this.calculateRate();this.emit(r.DETUNE,this,e)}},setDetune:function setDetune(e){this.detune=e;return this},mute:{get:function get(){return 0===this.muteNode.gain.value},set:function set(e){this.currentConfig.mute=e;this.muteNode.gain.setValueAtTime(e?0:1,0);this.emit(r.MUTE,this,e)}},setMute:function setMute(e){this.mute=e;return this},volume:{get:function get(){return this.volumeNode.gain.value},set:function set(e){this.currentConfig.volume=e;this.volumeNode.gain.setValueAtTime(e,0);this.emit(r.VOLUME,this,e)}},setVolume:function setVolume(e){this.volume=e;return this},seek:{get:function get(){if(this.isPlaying){if(this.manager.context.currentTime<this.startTime){return this.startTime-this.playTime}return this.getCurrentTime()}else if(this.isPaused){return this.currentConfig.seek}else{return 0}},set:function set(e){if(this.manager.context.currentTime<this.startTime){return}if(this.isPlaying||this.isPaused){e=Math.min(Math.max(0,e),this.duration);this.currentConfig.seek=e;if(this.isPlaying){this.stopAndRemoveBufferSource();this.createAndStartBufferSource()}this.emit(r.SEEK,this,e)}}},setSeek:function setSeek(e){this.seek=e;return this},loop:{get:function get(){return this.currentConfig.loop},set:function set(e){this.currentConfig.loop=e;if(this.isPlaying){this.stopAndRemoveLoopBufferSource();if(e){this.createAndStartLoopBufferSource()}}this.emit(r.LOOP,this,e)}},setLoop:function setLoop(e){this.loop=e;return this}});e.exports=o},function(e){e.exports=function TransposeMatrix(e){for(var t=e.length,a=e[0].length,n=Array(a),r=0;r<a;r++){n[r]=Array(t);for(var o=t-1;-1<o;o--){n[r][o]=e[o][r]}}return n}},function(e){function a(e,t,i){var a=e[t];e[t]=e[i];e[i]=a}function n(e,t){return e<t?-1:e>t?1:0}var r=function(e,o,l,d,p){if(l===void 0){l=0}if(d===void 0){d=e.length-1}if(p===void 0){p=n}while(d>l){if(600<d-l){var c=d-l+1,u=o-l+1,g=Math.log(c),h=.5*Math.exp(2*g/3),s=.5*Math.sqrt(g*h*(c-h)/c)*(0>u-c/2?-1:1),m=Math.max(l,Math.floor(o-u*h/c+s)),y=Math.min(d,Math.floor(o+(c-u)*h/c+s));r(e,o,m,y,p)}var x=e[o],t=l,f=d;a(e,l,o);if(0<p(e[d],x)){a(e,l,d)}while(t<f){a(e,t,f);t++;f--;while(0>p(e[t],x)){t++}while(0<p(e[f],x)){f--}}if(0===p(e[l],x)){a(e,l,f)}else{f++;a(e,f,d)}if(f<=o){l=f+1}if(o<=f){d=f-1}}};e.exports=r},function(e,t,i){var n=i(6),r=i(114),o=function(e,t,a){for(var n=[],r=0;r<e.length;r++){for(var o=0;o<t.length;o++){for(var s=0;s<a;s++){n.push({a:e[r],b:t[o]})}}}return n};e.exports=function Range(e,t,a){var s=n(a,"max",0),l=n(a,"qty",1),d=n(a,"random",!1),p=n(a,"randomB",!1),c=n(a,"repeat",0),u=n(a,"yoyo",!1),g=[];if(p){r(t)}if(-1===c){if(0===s){c=0}else{var h=e.length*t.length*l;if(u){h*=2}c=Math.ceil(s/h)}}for(var m=0,y;m<=c;m++){y=o(e,t,l);if(d){r(y)}g=g.concat(y);if(u){y.reverse();g=g.concat(y)}}if(s){g.splice(s)}return g}},function(e,t,i){var a=i(15),n=function(e,t){var i=a(t,"anims",null);if(null===i){return e}if("string"==typeof i){e.anims.play(i)}else if("object"===_typeof(i)){var n=e.anims,r=a(i,"key",void 0),o=a(i,"startFrame",void 0),s=a(i,"delay",0),l=a(i,"repeat",0),d=a(i,"repeatDelay",0),p=a(i,"yoyo",!1),c=a(i,"play",!1),u=a(i,"delayedPlay",0);n.setDelay(s);n.setRepeat(l);n.setRepeatDelay(d);n.setYoyo(p);if(c){n.play(r,o)}else if(0<u){n.delayedPlay(u,r,o)}else{n.load(r)}}return e};e.exports=n},function(e,t,i){var a=i(11);e.exports=function Union(e,t,i){if(i===void 0){i=new a}var n=Math.min(e.x,t.x),r=Math.min(e.y,t.y),o=Math.max(e.right,t.right)-n,s=Math.max(e.bottom,t.bottom)-r;return i.setTo(n,r,o,s)}},function(e,t,i){var a=i(0),n=i(12),r=i(950),o=i(14),s=i(7),l=i(176),d=i(19),p=i(330),c=new a({Extends:o,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Origin,n.ScrollFactor,n.Transform,n.Visible,r],initialize:function(e,t,i,a,n,r){o.call(this,e,"DOMElement");this.parent=e.sys.game.domContainer;this.cache=e.sys.cache.html;this.node;this.transformOnly=!1;this.skewX=0;this.skewY=0;this.rotate3d=new p;this.rotate3dAngle="deg";this.width=0;this.height=0;this.displayWidth=0;this.displayHeight=0;this.handler=this.dispatchNativeEvent.bind(this);this.setPosition(t,i);if("string"==typeof a){if("#"===a[0]){this.setElement(a.substr(1),n,r)}else{this.createElement(a,n,r)}}else if(a){this.setElement(a,n,r)}e.sys.events.on(d.SLEEP,this.handleSceneEvent,this);e.sys.events.on(d.WAKE,this.handleSceneEvent,this)},handleSceneEvent:function handleSceneEvent(e){var t=this.node,i=t.style;if(t){i.display=e.settings.visible?"block":"none"}},setSkew:function setSkew(e,t){if(e===void 0){e=0}if(t===void 0){t=e}this.skewX=e;this.skewY=t;return this},setPerspective:function setPerspective(e){this.parent.style.perspective=e+"px";return this},perspective:{get:function get(){return parseFloat(this.parent.style.perspective)},set:function set(e){this.parent.style.perspective=e+"px"}},addListener:function addListener(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++){this.node.addEventListener(e[t],this.handler,!1)}}return this},removeListener:function removeListener(e){if(this.node){e=e.split(" ");for(var t=0;t<e.length;t++){this.node.removeEventListener(e[t],this.handler)}}return this},dispatchNativeEvent:function dispatchNativeEvent(e){this.emit(e.type,e)},createElement:function createElement(e,t,i){return this.setElement(document.createElement(e),t,i)},setElement:function setElement(e,t,i){this.removeElement();var a;if("string"==typeof e){if("#"===e[0]){e=e.substr(1)}a=document.getElementById(e)}else if("object"===_typeof(e)&&1===e.nodeType){a=e}if(!a){return this}this.node=a;if(t&&s(t)){for(var n in t){a.style[n]=t[n]}}else if("string"==typeof t){a.style=t}a.style.zIndex="0";a.style.display="inline";a.style.position="absolute";a.phaser=this;if(this.parent){this.parent.appendChild(a)}if(i){a.innerText=i}return this.updateSize()},createFromCache:function createFromCache(e,t){var i=this.cache.get(e);if(i){this.createFromHTML(i,t)}return this},createFromHTML:function createFromHTML(e,t){if(t===void 0){t="div"}this.removeElement();var i=document.createElement(t);this.node=i;i.style.zIndex="0";i.style.display="inline";i.style.position="absolute";i.phaser=this;if(this.parent){this.parent.appendChild(i)}i.innerHTML=e;return this.updateSize()},removeElement:function removeElement(){if(this.node){l(this.node);this.node=null}return this},updateSize:function updateSize(){var e=this.node,t=e.getBoundingClientRect();this.width=e.clientWidth;this.height=e.clientHeight;this.displayWidth=t.width||0;this.displayHeight=t.height||0;return this},getChildByProperty:function getChildByProperty(e,t){if(this.node){for(var a=this.node.querySelectorAll("*"),n=0;n<a.length;n++){if(a[n][e]===t){return a[n]}}}return null},getChildByID:function getChildByID(e){return this.getChildByProperty("id",e)},getChildByName:function getChildByName(e){return this.getChildByProperty("name",e)},setClassName:function setClassName(e){if(this.node){this.node.className=e;this.updateSize()}return this},setText:function setText(e){if(this.node){this.node.innerText=e;this.updateSize()}return this},setHTML:function setHTML(e){if(this.node){this.node.innerHTML=e;this.updateSize()}return this},preUpdate:function preUpdate(){var e=this.parentContainer,t=this.node;if(t&&e&&!e.willRender()){t.style.display="none"}},willRender:function willRender(){return!0},preDestroy:function preDestroy(){this.removeElement();this.scene.sys.events.off(d.SLEEP,this.handleSceneEvent,this);this.scene.sys.events.off(d.WAKE,this.handleSceneEvent,this)}});e.exports=c},function(e,t,i){var a=i(951),n=i(14);e.exports=function DOMElementCSSRenderer(e,t,i,r,o){var s=t.node,l=s.style,d=t.scene.sys.settings;if(!s||!l||!d.visible||n.RENDER_MASK!==t.renderFlags||0!==t.cameraFilter&&t.cameraFilter&r.id||t.parentContainer&&!t.parentContainer.willRender()){if(s){l.display="none"}return}var p=t.parentContainer,c=r.alpha*t.alpha;if(p){c*=p.alpha}var u=e._tempMatrix1,g=e._tempMatrix2,h=e._tempMatrix3,m=0,y=0,x="0%",f="0%";if(o){m=t.width*t.scaleX*t.originX;y=t.height*t.scaleY*t.originY;g.applyITRS(t.x-m,t.y-y,t.rotation,t.scaleX,t.scaleY);u.copyFrom(r.matrix);u.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);g.e=t.x-m;g.f=t.y-y;u.multiply(g,h)}else{m=t.width*t.originX;y=t.height*t.originY;g.applyITRS(t.x-m,t.y-y,t.rotation,t.scaleX,t.scaleY);u.copyFrom(r.matrix);x=100*t.originX+"%";f=100*t.originY+"%";g.e-=r.scrollX*t.scrollFactorX;g.f-=r.scrollY*t.scrollFactorY;u.multiply(g,h)}if(!t.transformOnly){l.display="block";l.opacity=c;l.zIndex=t._depth;l.pointerEvents="auto";l.mixBlendMode=a[t._blendMode]}l.transform=h.getCSSMatrix()+" skew("+t.skewX+"rad, "+t.skewY+"rad) rotate3d("+t.rotate3d.x+","+t.rotate3d.y+","+t.rotate3d.z+","+t.rotate3d.w+t.rotate3dAngle+")";l.transformOrigin=x+" "+f}},function(e,t,i){var a=i(0),n=i(12),r=i(14),o=i(955),s=new a({Extends:r,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.Origin,n.ScrollFactor,n.Size,n.Texture,n.Tint,n.Transform,n.Visible,o],initialize:function(e){r.call(this,e,"Extern")},preUpdate:function preUpdate(){},render:function render(){}});e.exports=s},function(e,t,i){var a=i(191),n=i(87),r=i(13),o=i(4);e.exports=function GetPoint(e,t,i){if(i===void 0){i=new o}var s=n(t,0,r.PI2);return a(e,s,i)}},function(e,t,i){var a=i(392),n=i(191),r=i(87),o=i(13);e.exports=function GetPoints(e,t,s,l){if(l===void 0){l=[]}if(!t){t=a(e)/s}for(var d=0,p;d<t;d++){p=r(d/t,0,o.PI2);l.push(n(e,p))}return l}},function(e){e.exports=function Circumference(e){var t=e.width/2,i=e.height/2,a=Math.pow(t-i,2)/Math.pow(t+i,2);return Math.PI*(t+i)*(1+3*a/(10+Math.sqrt(4-3*a)))}},function(e,t,i){var a=i(190),n=i(27);e.exports=function GraphicsCanvasRenderer(e,t,i,r,o,s,l){var d=t.commandBuffer,p=d.length,c=s||e.currentContext;if(0===p||!n(e,c,t,r,o)){return}var u=1,g=1,h=0,m=0,y=1,x=0,f=0,T=0;c.beginPath();for(var v=0,b;v<p;++v){b=d[v];switch(b){case a.ARC:c.arc(d[v+1],d[v+2],d[v+3],d[v+4],d[v+5],d[v+6]);v+=7;break;case a.LINE_STYLE:y=d[v+1];h=d[v+2];u=d[v+3];x=(16711680&h)>>>16;f=(65280&h)>>>8;T=255&h;c.strokeStyle="rgba("+x+","+f+","+T+","+u+")";c.lineWidth=y;v+=3;break;case a.FILL_STYLE:m=d[v+1];g=d[v+2];x=(16711680&m)>>>16;f=(65280&m)>>>8;T=255&m;c.fillStyle="rgba("+x+","+f+","+T+","+g+")";v+=2;break;case a.BEGIN_PATH:c.beginPath();break;case a.CLOSE_PATH:c.closePath();break;case a.FILL_PATH:if(!l){c.fill()}break;case a.STROKE_PATH:if(!l){c.stroke()}break;case a.FILL_RECT:if(!l){c.fillRect(d[v+1],d[v+2],d[v+3],d[v+4])}else{c.rect(d[v+1],d[v+2],d[v+3],d[v+4])}v+=4;break;case a.FILL_TRIANGLE:c.beginPath();c.moveTo(d[v+1],d[v+2]);c.lineTo(d[v+3],d[v+4]);c.lineTo(d[v+5],d[v+6]);c.closePath();if(!l){c.fill()}v+=6;break;case a.STROKE_TRIANGLE:c.beginPath();c.moveTo(d[v+1],d[v+2]);c.lineTo(d[v+3],d[v+4]);c.lineTo(d[v+5],d[v+6]);c.closePath();if(!l){c.stroke()}v+=6;break;case a.LINE_TO:c.lineTo(d[v+1],d[v+2]);v+=2;break;case a.MOVE_TO:c.moveTo(d[v+1],d[v+2]);v+=2;break;case a.LINE_FX_TO:c.lineTo(d[v+1],d[v+2]);v+=5;break;case a.MOVE_FX_TO:c.moveTo(d[v+1],d[v+2]);v+=5;break;case a.SAVE:c.save();break;case a.RESTORE:c.restore();break;case a.TRANSLATE:c.translate(d[v+1],d[v+2]);v+=2;break;case a.SCALE:c.scale(d[v+1],d[v+2]);v+=2;break;case a.ROTATE:c.rotate(d[v+1]);v+=1;break;case a.GRADIENT_FILL_STYLE:v+=5;break;case a.GRADIENT_LINE_STYLE:v+=6;break;case a.SET_TEXTURE:v+=2;break;}}c.restore()}},function(e,t,i){var a=i(0),n=i(2),r=new a({initialize:function(e,t,i,a,r){if("object"===_typeof(e)){var o=e;e=n(o,"x",0);t=n(o,"y",0);i=n(o,"power",0);a=n(o,"epsilon",100);r=n(o,"gravity",50)}else{if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=100}if(r===void 0){r=50}}this.x=e;this.y=t;this.active=!0;this._gravity=r;this._power=0;this._epsilon=0;this.power=i;this.epsilon=a},update:function update(e,t){var i=this.x-e.x,a=this.y-e.y,n=i*i+a*a;if(0===n){return}var r=Math.sqrt(n);if(n<this._epsilon){n=this._epsilon}var o=100*(this._power*t/(n*r));e.velocityX+=i*o;e.velocityY+=a*o},epsilon:{get:function get(){return Math.sqrt(this._epsilon)},set:function set(e){this._epsilon=e*e}},power:{get:function get(){return this._power/this._gravity},set:function set(e){this._power=e*this._gravity}},gravity:{get:function get(){return this._gravity},set:function set(e){var t=this.power;this._gravity=e;this.power=t}}});e.exports=r},function(e,t,i){var a=i(0),n=i(35),r=i(53),o=new a({initialize:function(e){this.emitter=e;this.frame=null;this.x=0;this.y=0;this.velocityX=0;this.velocityY=0;this.accelerationX=0;this.accelerationY=0;this.maxVelocityX=1e4;this.maxVelocityY=1e4;this.bounce=0;this.scaleX=1;this.scaleY=1;this.alpha=1;this.angle=0;this.rotation=0;this.tint=16777215;this.life=1e3;this.lifeCurrent=1e3;this.delayCurrent=0;this.lifeT=0;this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function isAlive(){return 0<this.lifeCurrent},resetPosition:function resetPosition(){this.x=0;this.y=0},fire:function fire(e,t){var i=this.emitter;this.frame=i.getFrame();if(i.emitZone){i.emitZone.getPoint(this)}if(e===void 0){if(i.follow){this.x+=i.follow.x+i.followOffset.x}this.x+=i.x.onEmit(this,"x")}else{this.x+=e}if(t===void 0){if(i.follow){this.y+=i.follow.y+i.followOffset.y}this.y+=i.y.onEmit(this,"y")}else{this.y+=t}this.life=i.lifespan.onEmit(this,"lifespan");this.lifeCurrent=this.life;this.lifeT=0;var a=i.speedX.onEmit(this,"speedX"),o=i.speedY?i.speedY.onEmit(this,"speedY"):a;if(i.radial){var s=n(i.angle.onEmit(this,"angle"));this.velocityX=Math.cos(s)*Math.abs(a);this.velocityY=Math.sin(s)*Math.abs(o)}else if(i.moveTo){var l=i.moveToX.onEmit(this,"moveToX"),d=i.moveToY?i.moveToY.onEmit(this,"moveToY"):l,p=Math.atan2(d-this.y,l-this.x),c=r(this.x,this.y,l,d)/(this.life/1e3);this.velocityX=Math.cos(p)*c;this.velocityY=Math.sin(p)*c}else{this.velocityX=a;this.velocityY=o}if(i.acceleration){this.accelerationX=i.accelerationX.onEmit(this,"accelerationX");this.accelerationY=i.accelerationY.onEmit(this,"accelerationY")}this.maxVelocityX=i.maxVelocityX.onEmit(this,"maxVelocityX");this.maxVelocityY=i.maxVelocityY.onEmit(this,"maxVelocityY");this.delayCurrent=i.delay.onEmit(this,"delay");this.scaleX=i.scaleX.onEmit(this,"scaleX");this.scaleY=i.scaleY?i.scaleY.onEmit(this,"scaleY"):this.scaleX;this.angle=i.rotate.onEmit(this,"rotate");this.rotation=n(this.angle);this.bounce=i.bounce.onEmit(this,"bounce");this.alpha=i.alpha.onEmit(this,"alpha");this.tint=i.tint.onEmit(this,"tint")},computeVelocity:function computeVelocity(e,t,a,n){var r=this.velocityX,o=this.velocityY,s=this.accelerationX,l=this.accelerationY,d=this.maxVelocityX,p=this.maxVelocityY;r+=e.gravityX*a;o+=e.gravityY*a;if(s){r+=s*a}if(l){o+=l*a}if(r>d){r=d}else if(r<-d){r=-d}if(o>p){o=p}else if(o<-p){o=-p}this.velocityX=r;this.velocityY=o;for(var c=0;c<n.length;c++){n[c].update(this,t,a)}},checkBounds:function checkBounds(e){var t=e.bounds,i=-this.bounce;if(this.x<t.x&&e.collideLeft){this.x=t.x;this.velocityX*=i}else if(this.x>t.right&&e.collideRight){this.x=t.right;this.velocityX*=i}if(this.y<t.y&&e.collideTop){this.y=t.y;this.velocityY*=i}else if(this.y>t.bottom&&e.collideBottom){this.y=t.bottom;this.velocityY*=i}},update:function update(e,i,a){if(0<this.delayCurrent){this.delayCurrent-=e;return!1}var r=this.emitter,o=1-this.lifeCurrent/this.life;this.lifeT=o;this.computeVelocity(r,e,i,a);this.x+=this.velocityX*i;this.y+=this.velocityY*i;if(r.bounds){this.checkBounds(r)}if(r.deathZone&&r.deathZone.willKill(this)){this.lifeCurrent=0;return!0}this.scaleX=r.scaleX.onUpdate(this,"scaleX",o,this.scaleX);if(r.scaleY){this.scaleY=r.scaleY.onUpdate(this,"scaleY",o,this.scaleY)}else{this.scaleY=this.scaleX}this.angle=r.rotate.onUpdate(this,"rotate",o,this.angle);this.rotation=n(this.angle);this.alpha=r.alpha.onUpdate(this,"alpha",o,this.alpha);this.tint=r.tint.onUpdate(this,"tint",o,this.tint);this.lifeCurrent-=e;return 0>=this.lifeCurrent}});e.exports=o},function(e,t,i){var a=i(52),n=i(0),r=i(12),o=i(397),s=i(398),l=i(967),d=i(2),p=i(183),c=i(399),u=i(99),g=i(395),h=i(400),m=i(11),y=i(128),x=i(3),f=i(58),T=new n({Mixins:[r.BlendMode,r.Mask,r.ScrollFactor,r.Visible],initialize:function(e,t){this.manager=e;this.texture=e.texture;this.frames=[e.defaultFrame];this.defaultFrame=e.defaultFrame;this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"];this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"];this.name="";this.particleClass=g;this.x=new l(t,"x",0,!0);this.y=new l(t,"y",0,!0);this.radial=!0;this.gravityX=0;this.gravityY=0;this.acceleration=!1;this.accelerationX=new l(t,"accelerationX",0,!0);this.accelerationY=new l(t,"accelerationY",0,!0);this.maxVelocityX=new l(t,"maxVelocityX",1e4,!0);this.maxVelocityY=new l(t,"maxVelocityY",1e4,!0);this.speedX=new l(t,"speedX",0,!0);this.speedY=new l(t,"speedY",0,!0);this.moveTo=!1;this.moveToX=new l(t,"moveToX",0,!0);this.moveToY=new l(t,"moveToY",0,!0);this.bounce=new l(t,"bounce",0,!0);this.scaleX=new l(t,"scaleX",1);this.scaleY=new l(t,"scaleY",1);this.tint=new l(t,"tint",4294967295);this.alpha=new l(t,"alpha",1);this.lifespan=new l(t,"lifespan",1e3,!0);this.angle=new l(t,"angle",{min:0,max:360},!0);this.rotate=new l(t,"rotate",0);this.emitCallback=null;this.emitCallbackScope=null;this.deathCallback=null;this.deathCallbackScope=null;this.maxParticles=0;this.quantity=new l(t,"quantity",1,!0);this.delay=new l(t,"delay",0,!0);this.frequency=0;this.on=!0;this.particleBringToTop=!0;this.timeScale=1;this.emitZone=null;this.deathZone=null;this.bounds=null;this.collideLeft=!0;this.collideRight=!0;this.collideTop=!0;this.collideBottom=!0;this.active=!0;this.visible=!0;this.blendMode=a.NORMAL;this.follow=null;this.followOffset=new x;this.trackVisible=!1;this.currentFrame=0;this.randomFrame=!0;this.frameQuantity=1;this.dead=[];this.alive=[];this._counter=0;this._frameCounter=0;if(t){this.fromJSON(t)}},fromJSON:function fromJSON(e){if(!e){return this}var t=0,a="";for(t=0;t<this.configFastMap.length;t++){a=this.configFastMap[t];if(u(e,a)){this[a]=d(e,a)}}for(t=0;t<this.configOpMap.length;t++){a=this.configOpMap[t];if(u(e,a)){this[a].loadConfig(e)}}this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue;this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue;if(u(e,"speed")){this.speedX.loadConfig(e,"speed");this.speedY=null}if(c(e,["speedX","speedY"])||this.moveTo){this.radial=!1}if(u(e,"scale")){this.scaleX.loadConfig(e,"scale");this.scaleY=null}if(u(e,"callbackScope")){var n=d(e,"callbackScope",null);this.emitCallbackScope=n;this.deathCallbackScope=n}if(u(e,"emitZone")){this.setEmitZone(e.emitZone)}if(u(e,"deathZone")){this.setDeathZone(e.deathZone)}if(u(e,"bounds")){this.setBounds(e.bounds)}if(u(e,"followOffset")){this.followOffset.setFromObject(d(e,"followOffset",0))}if(u(e,"frame")){this.setFrame(e.frame)}return this},toJSON:function toJSON(e){if(e===void 0){e={}}var t=0,a="";for(t=0;t<this.configFastMap.length;t++){a=this.configFastMap[t];e[a]=this[a]}for(t=0;t<this.configOpMap.length;t++){a=this.configOpMap[t];if(this[a]){e[a]=this[a].toJSON()}}if(!this.speedY){delete e.speedX;e.speed=this.speedX.toJSON()}if(!this.scaleY){delete e.scaleX;e.scale=this.scaleX.toJSON()}return e},startFollow:function startFollow(e,t,i,a){if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=!1}this.follow=e;this.followOffset.set(t,i);this.trackVisible=a;return this},stopFollow:function stopFollow(){this.follow=null;this.followOffset.set(0,0);this.trackVisible=!1;return this},getFrame:function getFrame(){if(1===this.frames.length){return this.defaultFrame}else if(this.randomFrame){return p(this.frames)}else{var e=this.frames[this.currentFrame];this._frameCounter++;if(this._frameCounter===this.frameQuantity){this._frameCounter=0;this.currentFrame=f(this.currentFrame+1,0,this._frameLength)}return e}},setFrame:function setFrame(e,i,a){if(i===void 0){i=!0}if(a===void 0){a=1}this.randomFrame=i;this.frameQuantity=a;this.currentFrame=0;this._frameCounter=0;var n=_typeof(e);if(Array.isArray(e)||"string"===n||"number"===n){this.manager.setEmitterFrames(e,this)}else if("object"===n){var t=e;e=d(t,"frames",null);if(e){this.manager.setEmitterFrames(e,this)}var r=d(t,"cycle",!1);this.randomFrame=r?!1:!0;this.frameQuantity=d(t,"quantity",a)}this._frameLength=this.frames.length;if(1===this._frameLength){this.frameQuantity=1;this.randomFrame=!1}return this},setRadial:function setRadial(e){if(e===void 0){e=!0}this.radial=e;return this},setPosition:function setPosition(e,t){this.x.onChange(e);this.y.onChange(t);return this},setBounds:function setBounds(e,t,i,a){if("object"===_typeof(e)){var n=e;e=n.x;t=n.y;i=u(n,"w")?n.w:n.width;a=u(n,"h")?n.h:n.height}if(this.bounds){this.bounds.setTo(e,t,i,a)}else{this.bounds=new m(e,t,i,a)}return this},setSpeedX:function setSpeedX(e){this.speedX.onChange(e);this.radial=!1;return this},setSpeedY:function setSpeedY(e){if(this.speedY){this.speedY.onChange(e);this.radial=!1}return this},setSpeed:function setSpeed(e){this.speedX.onChange(e);this.speedY=null;this.radial=!0;return this},setScaleX:function setScaleX(e){this.scaleX.onChange(e);return this},setScaleY:function setScaleY(e){this.scaleY.onChange(e);return this},setScale:function setScale(e){this.scaleX.onChange(e);this.scaleY=null;return this},setGravityX:function setGravityX(e){this.gravityX=e;return this},setGravityY:function setGravityY(e){this.gravityY=e;return this},setGravity:function setGravity(e,t){this.gravityX=e;this.gravityY=t;return this},setAlpha:function setAlpha(e){this.alpha.onChange(e);return this},setTint:function setTint(e){this.tint.onChange(e);return this},setEmitterAngle:function setEmitterAngle(e){this.angle.onChange(e);return this},setAngle:function setAngle(e){this.angle.onChange(e);return this},setLifespan:function setLifespan(e){this.lifespan.onChange(e);return this},setQuantity:function setQuantity(e){this.quantity.onChange(e);return this},setFrequency:function setFrequency(e,t){this.frequency=e;this._counter=0;if(t){this.quantity.onChange(t)}return this},setEmitZone:function setEmitZone(e){if(e===void 0){this.emitZone=null}else{var t=d(e,"type","random"),i=d(e,"source",null);switch(t){case"random":this.emitZone=new h(i);break;case"edge":var a=d(e,"quantity",1),n=d(e,"stepRate",0),r=d(e,"yoyo",!1),o=d(e,"seamless",!0);this.emitZone=new s(i,a,n,r,o);break;}}return this},setDeathZone:function setDeathZone(e){if(e===void 0){this.deathZone=null}else{var t=d(e,"type","onEnter"),i=d(e,"source",null);if(i&&"function"==typeof i.contains){var a="onEnter"===t?!0:!1;this.deathZone=new o(i,a)}}return this},reserve:function reserve(e){for(var t=this.dead,a=0;a<e;a++){t.push(new this.particleClass(this))}return this},getAliveParticleCount:function getAliveParticleCount(){return this.alive.length},getDeadParticleCount:function getDeadParticleCount(){return this.dead.length},getParticleCount:function getParticleCount(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function atLimit(){return 0<this.maxParticles&&this.getParticleCount()===this.maxParticles},onParticleEmit:function onParticleEmit(e,t){if(e===void 0){this.emitCallback=null;this.emitCallbackScope=null}else if("function"==typeof e){this.emitCallback=e;if(t){this.emitCallbackScope=t}}return this},onParticleDeath:function onParticleDeath(e,t){if(e===void 0){this.deathCallback=null;this.deathCallbackScope=null}else if("function"==typeof e){this.deathCallback=e;if(t){this.deathCallbackScope=t}}return this},killAll:function killAll(){var e=this.dead,t=this.alive;while(0<t.length){e.push(t.pop())}return this},forEachAlive:function forEachAlive(e,t){for(var i=this.alive,a=i.length,n=0;n<a;++n){e.call(t,i[n],this)}return this},forEachDead:function forEachDead(e,t){for(var i=this.dead,a=i.length,n=0;n<a;++n){e.call(t,i[n],this)}return this},start:function start(){this.on=!0;this._counter=0;return this},stop:function stop(){this.on=!1;return this},pause:function pause(){this.active=!1;return this},resume:function resume(){this.active=!0;return this},remove:function remove(){this.manager.removeEmitter(this);return this},depthSort:function depthSort(){y.inplace(this.alive,this.depthSortCallback);return this},flow:function flow(e,t){if(t===void 0){t=1}this.frequency=e;this.quantity.onChange(t);return this.start()},explode:function explode(e,t,i){this.frequency=-1;return this.emitParticle(e,t,i)},emitParticleAt:function emitParticleAt(e,t,i){return this.emitParticle(i,e,t)},emitParticle:function emitParticle(e,t,a){if(this.atLimit()){return}if(e===void 0){e=this.quantity.onEmit()}for(var n=this.dead,r=0,o;r<e;r++){o=n.pop();if(!o){o=new this.particleClass(this)}o.fire(t,a);if(this.particleBringToTop){this.alive.push(o)}else{this.alive.unshift(o)}if(this.emitCallback){this.emitCallback.call(this.emitCallbackScope,o,this)}if(this.atLimit()){break}}return o},preUpdate:function preUpdate(e,t){t*=this.timeScale;var a=t/1e3;if(this.trackVisible){this.visible=this.follow.visible}var n=this.manager.getProcessors(),r=this.alive,o=this.dead,s=0,l=[],d=r.length;for(s=0;s<d;s++){var p=r[s];if(p.update(t,a,n)){l.push({index:s,particle:p})}}d=l.length;if(0<d){var c=this.deathCallback,u=this.deathCallbackScope;for(s=d-1;0<=s;s--){var g=l[s];r.splice(g.index,1);o.push(g.particle);if(c){c.call(u,g.particle)}g.particle.resetPosition()}}if(!this.on){return}if(0===this.frequency){this.emitParticle()}else if(0<this.frequency){this._counter-=t;if(0>=this._counter){this.emitParticle();this._counter=this.frequency-Math.abs(this._counter)}}},depthSortCallback:function depthSortCallback(e,t){return e.y-t.y}});e.exports=T},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t){this.source=e;this.killOnEnter=t},willKill:function willKill(e){var t=this.source.contains(e.x,e.y);return t&&this.killOnEnter||!t&&!this.killOnEnter}});e.exports=n},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t,i,a,n){if(a===void 0){a=!1}if(n===void 0){n=!0}this.source=e;this.points=[];this.quantity=t;this.stepRate=i;this.yoyo=a;this.counter=-1;this.seamless=n;this._length=0;this._direction=0;this.updateSource()},updateSource:function updateSource(){this.points=this.source.getPoints(this.quantity,this.stepRate);if(this.seamless){var e=this.points[0],t=this.points[this.points.length-1];if(e.x===t.x&&e.y===t.y){this.points.pop()}}var i=this._length;this._length=this.points.length;if(this._length<i&&this.counter>this._length){this.counter=this._length-1}return this},changeSource:function changeSource(e){this.source=e;return this.updateSource()},getPoint:function getPoint(e){if(0===this._direction){this.counter++;if(this.counter>=this._length){if(this.yoyo){this._direction=1;this.counter=this._length-1}else{this.counter=0}}}else{this.counter--;if(-1===this.counter){if(this.yoyo){this._direction=0;this.counter=0}else{this.counter=this._length-1}}}var t=this.points[this.counter];if(t){e.x=t.x;e.y=t.y}}});e.exports=n},function(e){e.exports=function HasAny(e,t){for(var a=0;a<t.length;a++){if(e.hasOwnProperty(t[a])){return!0}}return!1}},function(e,t,i){var a=i(0),n=i(3),r=new a({initialize:function(e){this.source=e;this._tempVec=new n},getPoint:function getPoint(e){var t=this._tempVec;this.source.getRandomPoint(t);e.x=t.x;e.y=t.y}});e.exports=r},function(e,t,i){var a=i(0),n=i(12),r=i(69),o=new a({Extends:r,Mixins:[n.PathFollower],initialize:function(e,t,i,a,n,o){r.call(this,e,i,a,n,o);this.path=t},preUpdate:function preUpdate(e,t){this.anims.update(e,t);this.pathUpdate(e)}});e.exports=o},function(e,t,i){var a=i(990),n=i(0),r=i(35),o=i(66),s=i(65),l=i(13),d=i(30),p=new n({Extends:d,Mixins:[a],initialize:function(e,t,i,a,n,r,o,l,p){if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=128}if(n===void 0){n=0}if(r===void 0){r=360}if(o===void 0){o=!1}d.call(this,e,"Arc",new s(0,0,a));this._startAngle=n;this._endAngle=r;this._anticlockwise=o;this._iterations=.01;this.setPosition(t,i);var c=2*this.geom.radius;this.setSize(c,c);if(l!==void 0){this.setFillStyle(l,p)}this.updateDisplayOrigin();this.updateData()},iterations:{get:function get(){return this._iterations},set:function set(e){this._iterations=e;this.updateData()}},radius:{get:function get(){return this.geom.radius},set:function set(e){this.geom.radius=e;var t=2*e;this.setSize(t,t);this.updateDisplayOrigin();this.updateData()}},startAngle:{get:function get(){return this._startAngle},set:function set(e){this._startAngle=e;this.updateData()}},endAngle:{get:function get(){return this._endAngle},set:function set(e){this._endAngle=e;this.updateData()}},anticlockwise:{get:function get(){return this._anticlockwise},set:function set(e){this._anticlockwise=e;this.updateData()}},setRadius:function setRadius(e){this.radius=e;return this},setIterations:function setIterations(e){if(e===void 0){e=.01}this.iterations=e;return this},setStartAngle:function setStartAngle(e,t){this._startAngle=e;if(t!==void 0){this._anticlockwise=t}return this.updateData()},setEndAngle:function setEndAngle(e,t){this._endAngle=e;if(t!==void 0){this._anticlockwise=t}return this.updateData()},updateData:function updateData(){var e=this._iterations,t=e,i=this.geom.radius,a=r(this._startAngle),n=r(this._endAngle),s=this._anticlockwise,d=i,p=i;n-=a;if(s){if(n<-l.PI2){n=-l.PI2}else if(0<n){n=-l.PI2+n%l.PI2}}else if(n>l.PI2){n=l.PI2}else if(0>n){n=l.PI2+n%l.PI2}var c=[d+Math.cos(a)*i,p+Math.sin(a)*i],u;while(1>t){u=n*t+a;c.push(d+Math.cos(u)*i,p+Math.sin(u)*i);t+=e}u=n+a;c.push(d+Math.cos(u)*i,p+Math.sin(u)*i);c.push(d+Math.cos(a)*i,p+Math.sin(a)*i);this.pathIndexes=o(c);this.pathData=c;return this}});e.exports=p},function(e,t,i){var a=i(0),n=i(993),r=i(66),o=i(11),s=i(30),l=new a({Extends:s,Mixins:[n],initialize:function(e,t,i,a,n,r){if(t===void 0){t=0}if(i===void 0){i=0}s.call(this,e,"Curve",a);this._smoothness=32;this._curveBounds=new o;this.closePath=!1;this.setPosition(t,i);if(n!==void 0){this.setFillStyle(n,r)}this.updateData()},smoothness:{get:function get(){return this._smoothness},set:function set(e){this._smoothness=e;this.updateData()}},setSmoothness:function setSmoothness(e){this._smoothness=e;return this.updateData()},updateData:function updateData(){var e=this._curveBounds,t=this._smoothness;this.geom.getBounds(e,t);this.setSize(e.width,e.height);this.updateDisplayOrigin();for(var a=[],n=this.geom.getPoints(t),o=0;o<n.length;o++){a.push(n[o].x,n[o].y)}a.push(n[0].x,n[0].y);this.pathIndexes=r(a);this.pathData=a;return this}});e.exports=l},function(e,t,i){var a=i(0),n=i(66),r=i(996),o=i(95),s=i(30),l=new a({Extends:s,Mixins:[r],initialize:function(e,t,i,a,n,r,l){if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=128}if(n===void 0){n=128}s.call(this,e,"Ellipse",new o(a/2,n/2,a,n));this._smoothness=64;this.setPosition(t,i);this.width=a;this.height=n;if(r!==void 0){this.setFillStyle(r,l)}this.updateDisplayOrigin();this.updateData()},smoothness:{get:function get(){return this._smoothness},set:function set(e){this._smoothness=e;this.updateData()}},setSize:function setSize(e,t){this.geom.setSize(e,t);return this.updateData()},setSmoothness:function setSmoothness(e){this._smoothness=e;return this.updateData()},updateData:function updateData(){for(var e=[],t=this.geom.getPoints(this._smoothness),a=0;a<t.length;a++){e.push(t[a].x,t[a].y)}e.push(t[0].x,t[0].y);this.pathIndexes=n(e);this.pathData=e;return this}});e.exports=l},function(e,t,i){var a=i(0),n=i(30),r=i(999),o=new a({Extends:n,Mixins:[r],initialize:function(e,t,i,a,r,o,s,l,d,p,c){if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=128}if(r===void 0){r=128}if(o===void 0){o=32}if(s===void 0){s=32}n.call(this,e,"Grid",null);this.cellWidth=o;this.cellHeight=s;this.showCells=!0;this.outlineFillColor=0;this.outlineFillAlpha=0;this.showOutline=!0;this.showAltCells=!1;this.altFillColor;this.altFillAlpha;this.setPosition(t,i);this.setSize(a,r);if(l!==void 0){this.setFillStyle(l,d)}if(p!==void 0){this.setOutlineStyle(p,c)}this.updateDisplayOrigin()},setFillStyle:function setFillStyle(e,t){if(t===void 0){t=1}if(e===void 0){this.showCells=!1}else{this.fillColor=e;this.fillAlpha=t;this.showCells=!0}return this},setAltFillStyle:function setAltFillStyle(e,t){if(t===void 0){t=1}if(e===void 0){this.showAltCells=!1}else{this.altFillColor=e;this.altFillAlpha=t;this.showAltCells=!0}return this},setOutlineStyle:function setOutlineStyle(e,t){if(t===void 0){t=1}if(e===void 0){this.showOutline=!1}else{this.outlineFillColor=e;this.outlineFillAlpha=t;this.showOutline=!0}return this}});e.exports=o},function(e,t,i){var a=i(1002),n=i(0),r=i(30),o=new n({Extends:r,Mixins:[a],initialize:function(e,t,i,a,n,o,s,l){if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=48}if(n===void 0){n=32}if(o===void 0){o=15658734}if(s===void 0){s=10066329}if(l===void 0){l=13421772}r.call(this,e,"IsoBox",null);this.projection=4;this.fillTop=o;this.fillLeft=s;this.fillRight=l;this.showTop=!0;this.showLeft=!0;this.showRight=!0;this.isFilled=!0;this.setPosition(t,i);this.setSize(a,n);this.updateDisplayOrigin()},setProjection:function setProjection(e){this.projection=e;return this},setFaces:function setFaces(e,t,i){if(e===void 0){e=!0}if(t===void 0){t=!0}if(i===void 0){i=!0}this.showTop=e;this.showLeft=t;this.showRight=i;return this},setFillStyle:function setFillStyle(e,t,i){this.fillTop=e;this.fillLeft=t;this.fillRight=i;this.isFilled=!0;return this}});e.exports=o},function(e,t,i){var a=i(0),n=i(1005),r=i(30),o=new a({Extends:r,Mixins:[n],initialize:function(e,t,i,a,n,o,s,l,d){if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=48}if(n===void 0){n=32}if(o===void 0){o=!1}if(s===void 0){s=15658734}if(l===void 0){l=10066329}if(d===void 0){d=13421772}r.call(this,e,"IsoTriangle",null);this.projection=4;this.fillTop=s;this.fillLeft=l;this.fillRight=d;this.showTop=!0;this.showLeft=!0;this.showRight=!0;this.isReversed=o;this.isFilled=!0;this.setPosition(t,i);this.setSize(a,n);this.updateDisplayOrigin()},setProjection:function setProjection(e){this.projection=e;return this},setReversed:function setReversed(e){this.isReversed=e;return this},setFaces:function setFaces(e,t,i){if(e===void 0){e=!0}if(t===void 0){t=!0}if(i===void 0){i=!0}this.showTop=e;this.showLeft=t;this.showRight=i;return this},setFillStyle:function setFillStyle(e,t,i){this.fillTop=e;this.fillLeft=t;this.fillRight=i;this.isFilled=!0;return this}});e.exports=o},function(e,t,i){var a=i(0),n=i(30),r=i(56),o=i(1008),s=new a({Extends:n,Mixins:[o],initialize:function(e,t,i,a,o,s,l,d,p){if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=0}if(o===void 0){o=0}if(s===void 0){s=128}if(l===void 0){l=0}n.call(this,e,"Line",new r(a,o,s,l));var c=this.geom.right-this.geom.left,u=this.geom.bottom-this.geom.top;this.lineWidth=1;this._startWidth=1;this._endWidth=1;this.setPosition(t,i);this.setSize(c,u);if(d!==void 0){this.setStrokeStyle(1,d,p)}this.updateDisplayOrigin()},setLineWidth:function setLineWidth(e,t){if(t===void 0){t=e}this._startWidth=e;this._endWidth=t;this.lineWidth=e;return this},setTo:function setTo(e,t,i,a){this.geom.setTo(e,t,i,a);return this}});e.exports=s},function(e,t,i){var a=i(1011),n=i(0),r=i(66),o=i(410),s=i(198),l=i(30),d=i(413),p=new n({Extends:l,Mixins:[a],initialize:function(e,t,i,a,n,r){if(t===void 0){t=0}if(i===void 0){i=0}l.call(this,e,"Polygon",new s(a));var d=o(this.geom);this.setPosition(t,i);this.setSize(d.width,d.height);if(n!==void 0){this.setFillStyle(n,r)}this.updateDisplayOrigin();this.updateData()},smooth:function smooth(e){if(e===void 0){e=1}for(var t=0;t<e;t++){d(this.geom)}return this.updateData()},updateData:function updateData(){for(var e=[],t=this.geom.points,a=0;a<t.length;a++){e.push(t[a].x,t[a].y)}e.push(t[0].x,t[0].y);this.pathIndexes=r(e);this.pathData=e;return this}});e.exports=p},function(e,t,i){var a=i(11);e.exports=function GetAABB(e,t){if(t===void 0){t=new a}for(var n=1/0,r=1/0,o=-n,s=-r,l,d=0;d<e.points.length;d++){l=e.points[d];n=Math.min(n,l.x);r=Math.min(r,l.y);o=Math.max(o,l.x);s=Math.max(s,l.y)}t.x=n;t.y=r;t.width=o-n;t.height=s-r;return t}},function(e,t,i){var a=i(57),n=i(56),r=i(412);e.exports=function GetPoints(e,t,o,s){if(s===void 0){s=[]}var l=e.points,d=r(e);if(!t){t=d/o}for(var p=0;p<t;p++){for(var c=d*(p/t),u=0,g=0;g<l.length;g++){var h=l[g],m=l[(g+1)%l.length],y=new n(h.x,h.y,m.x,m.y),x=a(y);if(c<u||c>u+x){u+=x;continue}var f=y.getPoint((c-u)/x);s.push(f);break}}return s}},function(e,t,i){var a=i(57),n=i(56);e.exports=function Perimeter(e){for(var t=e.points,r=0,o=0;o<t.length;o++){var s=t[o],l=t[(o+1)%t.length],d=new n(s.x,s.y,l.x,l.y);r+=a(d)}return r}},function(e){var t=function(e,t){e[0]=t[0];e[1]=t[1];return e};e.exports=function Smooth(e){var a,n=[],r=e.points;for(a=0;a<r.length;a++){n.push([r[a].x,r[a].y])}var o=[];if(0<n.length){o.push(t([0,0],n[0]))}for(a=0;a<n.length-1;a++){var s=n[a],l=n[a+1],d=s[0],p=s[1],c=l[0],u=l[1];o.push([.85*d+.15*c,.85*p+.15*u]);o.push([.15*d+.85*c,.15*p+.85*u])}if(1<n.length){o.push(t([0,0],n[n.length-1]))}return e.setTo(o)}},function(e,t,i){var a=i(0),n=i(11),r=i(30),o=i(1014),s=new a({Extends:r,Mixins:[o],initialize:function(e,t,i,a,o,s,l){if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=128}if(o===void 0){o=128}r.call(this,e,"Rectangle",new n(0,0,a,o));this.setPosition(t,i);this.setSize(a,o);if(s!==void 0){this.setFillStyle(s,l)}this.updateDisplayOrigin();this.updateData()},updateData:function updateData(){var e=[],t=this.geom,i=this._tempLine;t.getLineA(i);e.push(i.x1,i.y1,i.x2,i.y2);t.getLineB(i);e.push(i.x2,i.y2);t.getLineC(i);e.push(i.x2,i.y2);t.getLineD(i);e.push(i.x2,i.y2);this.pathData=e;return this}});e.exports=s},function(e,t,i){var a=i(1017),n=i(0),r=i(66),o=i(30),s=new n({Extends:o,Mixins:[a],initialize:function(e,t,i,a,n,r,s,l){if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=5}if(n===void 0){n=32}if(r===void 0){r=64}o.call(this,e,"Star",null);this._points=a;this._innerRadius=n;this._outerRadius=r;this.setPosition(t,i);this.setSize(2*r,2*r);if(s!==void 0){this.setFillStyle(s,l)}this.updateDisplayOrigin();this.updateData()},setPoints:function setPoints(e){this._points=e;return this.updateData()},setInnerRadius:function setInnerRadius(e){this._innerRadius=e;return this.updateData()},setOuterRadius:function setOuterRadius(e){this._outerRadius=e;return this.updateData()},points:{get:function get(){return this._points},set:function set(e){this._points=e;this.updateData()}},innerRadius:{get:function get(){return this._innerRadius},set:function set(e){this._innerRadius=e;this.updateData()}},outerRadius:{get:function get(){return this._outerRadius},set:function set(e){this._outerRadius=e;this.updateData()}},updateData:function updateData(){var e=[],t=this._points,a=this._innerRadius,n=this._outerRadius,o=3*(Math.PI/2),s=Math.PI/t,l=n,d=n;e.push(l,d+-n);for(var p=0;p<t;p++){e.push(l+Math.cos(o)*n,d+Math.sin(o)*n);o+=s;e.push(l+Math.cos(o)*a,d+Math.sin(o)*a);o+=s}e.push(l,d+-n);this.pathIndexes=r(e);this.pathData=e;return this}});e.exports=s},function(e,t,i){var a=i(0),n=i(30),r=i(71),o=i(1020),s=new a({Extends:n,Mixins:[o],initialize:function(e,t,i,a,o,s,l,d,p,c,u){if(t===void 0){t=0}if(i===void 0){i=0}if(a===void 0){a=0}if(o===void 0){o=128}if(s===void 0){s=64}if(l===void 0){l=0}if(d===void 0){d=128}if(p===void 0){p=128}n.call(this,e,"Triangle",new r(a,o,s,l,d,p));var g=this.geom.right-this.geom.left,h=this.geom.bottom-this.geom.top;this.setPosition(t,i);this.setSize(g,h);if(c!==void 0){this.setFillStyle(c,u)}this.updateDisplayOrigin();this.updateData()},setTo:function setTo(e,t,i,a,n,r){this.geom.setTo(e,t,i,a,n,r);return this.updateData()},updateData:function updateData(){var e=[],t=this.geom,i=this._tempLine;t.getLineA(i);e.push(i.x1,i.y1,i.x2,i.y2);t.getLineB(i);e.push(i.x2,i.y2);t.getLineC(i);e.push(i.x2,i.y2);this.pathData=e;return this}});e.exports=s},function(e,t,i){var a=i(4),n=i(57);e.exports=function GetPoint(e,t,i){if(i===void 0){i=new a}var r=e.getLineA(),o=e.getLineB(),s=e.getLineC();if(0>=t||1<=t){i.x=r.x1;i.y=r.y1;return i}var l=n(r),d=n(o),c=n(s),u=(l+d+c)*t,g=0;if(u<l){g=u/l;i.x=r.x1+(r.x2-r.x1)*g;i.y=r.y1+(r.y2-r.y1)*g}else if(u>l+d){u-=l+d;g=u/c;i.x=s.x1+(s.x2-s.x1)*g;i.y=s.y1+(s.y2-s.y1)*g}else{u-=l;g=u/d;i.x=o.x1+(o.x2-o.x1)*g;i.y=o.y1+(o.y2-o.y1)*g}return i}},function(e,t,i){var a=i(57),n=i(4);e.exports=function GetPoints(e,t,r,o){if(o===void 0){o=[]}var s=e.getLineA(),l=e.getLineB(),d=e.getLineC(),c=a(s),u=a(l),g=a(d),h=c+u+g;if(!t){t=h/r}for(var m=0;m<t;m++){var y=h*(m/t),x=0,f=new n;if(y<c){x=y/c;f.x=s.x1+(s.x2-s.x1)*x;f.y=s.y1+(s.y2-s.y1)*x}else if(y>c+u){y-=c+u;x=y/g;f.x=d.x1+(d.x2-d.x1)*x;f.y=d.y1+(d.y2-d.y1)*x}else{y-=c;x=y/u;f.x=l.x1+(l.x2-l.x1)*x;f.y=l.y1+(l.y2-l.y1)*x}o.push(f)}return o}},function(e){e.exports=function SetValue(e,t,a){if(!e||"number"==typeof e){return!1}else if(e.hasOwnProperty(t)){e[t]=a;return!0}else if(-1!==t.indexOf(".")){for(var n=t.split("."),r=e,o=e,s=0;s<n.length;s++){if(r.hasOwnProperty(n[s])){o=r;r=r[n[s]]}else{return!1}}o[n[n.length-1]]=a;return!0}return!1}},function(e,t,i){var a=i(0),n=i(10),r=new a({initialize:function(e,t,i,a,n,r,o){this.x=e;this.y=t;this.radius=i;this.r=a;this.g=n;this.b=r;this.intensity=o;this.scrollFactorX=1;this.scrollFactorY=1},set:function set(e,t,i,a,n,r,o){this.x=e;this.y=t;this.radius=i;this.r=a;this.g=n;this.b=r;this.intensity=o;this.scrollFactorX=1;this.scrollFactorY=1;return this},setScrollFactor:function setScrollFactor(e,t){if(e===void 0){e=1}if(t===void 0){t=e}this.scrollFactorX=e;this.scrollFactorY=t;return this},setColor:function setColor(e){var t=n.getFloatsFromUintRGB(e);this.r=t[0];this.g=t[1];this.b=t[2];return this},setIntensity:function setIntensity(e){this.intensity=e;return this},setPosition:function setPosition(e,t){this.x=e;this.y=t;return this},setRadius:function setRadius(e){this.radius=e;return this}});e.exports=r},function(e,t,i){var a=i(0),n=i(420),r=i(10),o=new a({initialize:function(){this.lightPool=[];this.lights=[];this.culledLights=[];this.ambientColor={r:.1,g:.1,b:.1};this.active=!1;this.maxLights=-1},enable:function enable(){if(-1===this.maxLights){this.maxLights=this.scene.sys.game.renderer.config.maxLights}this.active=!0;return this},disable:function disable(){this.active=!1;return this},cull:function cull(e){var t=this.lights,i=this.culledLights,a=t.length,n=e.x+e.width/2,r=e.y+e.height/2,o=(e.width+e.height)/2,s={x:0,y:0},l=e.matrix,d=this.systems.game.config.height;i.length=0;for(var p=0,c;p<a&&i.length<this.maxLights;p++){c=t[p];l.transformPoint(c.x,c.y,s);var u=n-(s.x-e.scrollX*c.scrollFactorX*e.zoom),g=r-(d-(s.y-e.scrollY*c.scrollFactorY*e.zoom)),h=Math.sqrt(u*u+g*g);if(h<c.radius+o){i.push(t[p])}}return i},forEachLight:function forEachLight(e){if(!e){return}for(var t=this.lights,i=t.length,a=0;a<i;++a){e(t[a])}return this},setAmbientColor:function setAmbientColor(e){var t=r.getFloatsFromUintRGB(e);this.ambientColor.r=t[0];this.ambientColor.g=t[1];this.ambientColor.b=t[2];return this},getMaxVisibleLights:function getMaxVisibleLights(){return 10},getLightCount:function getLightCount(){return this.lights.length},addLight:function addLight(e,t,i,a,o){var s=null,l=null;e=e===void 0?0:e;t=t===void 0?0:t;a=a===void 0?16777215:a;i=i===void 0?100:i;o=o===void 0?1:o;s=r.getFloatsFromUintRGB(a);l=null;if(0<this.lightPool.length){l=this.lightPool.pop();l.set(e,t,i,s[0],s[1],s[2],o)}else{l=new n(e,t,i,s[0],s[1],s[2],o)}this.lights.push(l);return l},removeLight:function removeLight(e){var t=this.lights.indexOf(e);if(0<=t){this.lightPool.push(e);this.lights.splice(t,1)}return this},shutdown:function shutdown(){while(0<this.lights.length){this.lightPool.push(this.lights.pop())}this.ambientColor={r:.1,g:.1,b:.1};this.culledLights.length=0;this.lights.length=0},destroy:function destroy(){this.shutdown()}});e.exports=o},function(e,t,i){var a=i(46),n=i(17),r={Circle:i(1078),Ellipse:i(1088),Intersects:i(423),Line:i(1107),Point:i(1128),Polygon:i(1142),Rectangle:i(436),Triangle:i(1172)};r=n(!1,r,a);e.exports=r},function(e,t,i){e.exports={CircleToCircle:i(202),CircleToRectangle:i(203),GetCircleToCircle:i(1098),GetCircleToRectangle:i(1099),GetLineToCircle:i(204),GetLineToRectangle:i(206),GetRectangleIntersection:i(1100),GetRectangleToRectangle:i(1101),GetRectangleToTriangle:i(1102),GetTriangleToCircle:i(1103),GetTriangleToLine:i(428),GetTriangleToTriangle:i(1104),LineToCircle:i(205),LineToLine:i(84),LineToRectangle:i(424),PointToLine:i(432),PointToLineSegment:i(1105),RectangleToRectangle:i(131),RectangleToTriangle:i(425),RectangleToValues:i(1106),TriangleToCircle:i(427),TriangleToLine:i(429),TriangleToTriangle:i(430)}},function(e){e.exports=function LineToRectangle(e,i){var a=e.x1,n=e.y1,r=e.x2,o=e.y2,s=i.x,l=i.y,d=i.right,p=i.bottom,c=0;if(a>=s&&a<=d&&n>=l&&n<=p||r>=s&&r<=d&&o>=l&&o<=p){return!0}if(a<s&&r>=s){c=n+(o-n)*(s-a)/(r-a);if(c>l&&c<=p){return!0}}else if(a>d&&r<=d){c=n+(o-n)*(d-a)/(r-a);if(c>=l&&c<=p){return!0}}if(n<l&&o>=l){c=a+(r-a)*(l-n)/(o-n);if(c>=s&&c<=d){return!0}}else if(n>p&&o<=p){c=a+(r-a)*(p-n)/(o-n);if(c>=s&&c<=d){return!0}}return!1}},function(e,t,i){var a=i(84),n=i(47),r=i(207),o=i(426);e.exports=function RectangleToTriangle(e,t){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top){return!1}var i=t.getLineA(),s=t.getLineB(),l=t.getLineC();if(n(e,i.x1,i.y1)||n(e,i.x2,i.y2)){return!0}if(n(e,s.x1,s.y1)||n(e,s.x2,s.y2)){return!0}if(n(e,l.x1,l.y1)||n(e,l.x2,l.y2)){return!0}var d=e.getLineA(),p=e.getLineB(),c=e.getLineC(),u=e.getLineD();if(a(i,d)||a(i,p)||a(i,c)||a(i,u)){return!0}if(a(s,d)||a(s,p)||a(s,c)||a(s,u)){return!0}if(a(l,d)||a(l,p)||a(l,c)||a(l,u)){return!0}var g=o(e),h=r(t,g,!0);return 0<h.length}},function(e){e.exports=function Decompose(e,t){if(t===void 0){t=[]}t.push({x:e.x,y:e.y});t.push({x:e.right,y:e.y});t.push({x:e.right,y:e.bottom});t.push({x:e.x,y:e.bottom});return t}},function(e,t,i){var a=i(205),n=i(83);e.exports=function TriangleToCircle(e,t){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top){return!1}if(n(e,t.x,t.y)){return!0}if(a(e.getLineA(),t)){return!0}if(a(e.getLineB(),t)){return!0}if(a(e.getLineC(),t)){return!0}return!1}},function(e,t,i){var a=i(4),n=i(429),r=i(84);e.exports=function GetTriangleToLine(e,t,o){if(o===void 0){o=[]}if(n(e,t)){for(var s=e.getLineA(),l=e.getLineB(),d=e.getLineC(),p=[new a,new a,new a],c=[r(s,t,p[0]),r(l,t,p[1]),r(d,t,p[2])],u=0;3>u;u++){if(c[u]){o.push(p[u])}}}return o}},function(e,t,i){var a=i(83),n=i(84);e.exports=function TriangleToLine(e,t){if(a(e,t.getPointA())||a(e,t.getPointB())){return!0}if(n(e.getLineA(),t)){return!0}if(n(e.getLineB(),t)){return!0}if(n(e.getLineC(),t)){return!0}return!1}},function(e,t,i){var a=i(207),n=i(431),r=i(84);e.exports=function TriangleToTriangle(e,t){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top){return!1}var i=e.getLineA(),o=e.getLineB(),s=e.getLineC(),l=t.getLineA(),d=t.getLineB(),p=t.getLineC();if(r(i,l)||r(i,d)||r(i,p)){return!0}if(r(o,l)||r(o,d)||r(o,p)){return!0}if(r(s,l)||r(s,d)||r(s,p)){return!0}var c=n(e),u=a(t,c,!0);if(0<u.length){return!0}c=n(t);u=a(e,c,!0);if(0<u.length){return!0}return!1}},function(e){e.exports=function Decompose(e,t){if(t===void 0){t=[]}t.push({x:e.x1,y:e.y1});t.push({x:e.x2,y:e.y2});t.push({x:e.x3,y:e.y3});return t}},function(e){e.exports=function PointToLine(e,t,i){if(i===void 0){i=1}var a=t.x1,n=t.y1,o=t.x2,s=t.y2,l=e.x,d=e.y,p=(o-a)*(o-a)+(s-n)*(s-n);if(0===p){return!1}var c=((l-a)*(o-a)+(d-n)*(s-n))/p;if(0>c){return Math.sqrt((a-l)*(a-l)+(n-d)*(n-d))<=i}else if(0<=c&&1>=c){return Math.abs(((n-d)*(o-a)-(a-l)*(s-n))/p)*Math.sqrt(p)<=i}else{return Math.sqrt((o-l)*(o-l)+(s-d)*(s-d))<=i}}},function(e,t,i){var a=i(13),n=i(58),r=i(85);e.exports=function NormalAngle(e){var t=r(e)-a.TAU;return n(t,-Math.PI,Math.PI)}},function(e){e.exports=function GetMagnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}},function(e){e.exports=function GetMagnitudeSq(e){return e.x*e.x+e.y*e.y}},function(e,t,i){var a=i(11);a.Area=i(1147);a.Ceil=i(1148);a.CeilAll=i(1149);a.CenterOn=i(165);a.Clone=i(1150);a.Contains=i(47);a.ContainsPoint=i(1151);a.ContainsRect=i(437);a.CopyFrom=i(1152);a.Decompose=i(426);a.Equals=i(1153);a.FitInside=i(1154);a.FitOutside=i(1155);a.Floor=i(1156);a.FloorAll=i(1157);a.FromPoints=i(174);a.GetAspectRatio=i(209);a.GetCenter=i(1158);a.GetPoint=i(149);a.GetPoints=i(271);a.GetSize=i(1159);a.Inflate=i(1160);a.Intersection=i(1161);a.MarchingAnts=i(282);a.MergePoints=i(1162);a.MergeRect=i(1163);a.MergeXY=i(1164);a.Offset=i(1165);a.OffsetPoint=i(1166);a.Overlaps=i(1167);a.Perimeter=i(112);a.PerimeterPoint=i(1168);a.Random=i(152);a.RandomOutside=i(1169);a.SameDimensions=i(1170);a.Scale=i(1171);a.Union=i(386);e.exports=a},function(e){e.exports=function ContainsRect(e,t){if(t.width*t.height>e.width*e.height){return!1}return t.x>e.x&&t.x<e.right&&t.right>e.x&&t.right<e.right&&t.y>e.y&&t.y<e.bottom&&t.bottom>e.y&&t.bottom<e.bottom}},function(e,t,i){var a=i(4);e.exports=function Centroid(e,t){if(t===void 0){t=new a}t.x=(e.x1+e.x2+e.x3)/3;t.y=(e.y1+e.y2+e.y3)/3;return t}},function(e){e.exports=function Offset(e,t,i){e.x1+=t;e.y1+=i;e.x2+=t;e.y2+=i;e.x3+=t;e.y3+=i;return e}},function(e,t,i){var n=i(4);function a(e,t,i,a){var n=e-i,r=t-a;return Math.sqrt(n*n+r*r)}e.exports=function InCenter(e,t){if(t===void 0){t=new n}var i=e.x1,r=e.y1,o=e.x2,s=e.y2,l=e.x3,d=e.y3,c=a(l,d,o,s),u=a(i,r,l,d),g=a(o,s,i,r),h=c+u+g;t.x=(i*c+o*u+l*g)/h;t.y=(r*c+s*u+d*g)/h;return t}},function(e){e.exports=function CreateInteractiveObject(e,t,i){return{gameObject:e,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:t,hitAreaCallback:i,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t){this.pad=e;this.events=e.events;this.index=t;this.value=0;this.threshold=.1},update:function update(e){this.value=e},getValue:function getValue(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function destroy(){this.pad=null;this.events=null}});e.exports=n},function(e,t,i){var a=i(0),n=i(211),r=new a({initialize:function(e,t){this.pad=e;this.events=e.manager;this.index=t;this.value=0;this.threshold=1;this.pressed=!1},update:function update(e){this.value=e;var t=this.pad,i=this.index;if(e>=this.threshold){if(!this.pressed){this.pressed=!0;this.events.emit(n.BUTTON_DOWN,t,this,e);this.pad.emit(n.GAMEPAD_BUTTON_DOWN,i,e,this)}}else if(this.pressed){this.pressed=!1;this.events.emit(n.BUTTON_UP,t,this,e);this.pad.emit(n.GAMEPAD_BUTTON_UP,i,e,this)}},destroy:function destroy(){this.pad=null;this.events=null}});e.exports=r},function(e,t,i){var a=i(442),n=i(443),r=i(0),o=i(9),s=i(3),l=new r({Extends:o,initialize:function(e,t){o.call(this);this.manager=e;this.pad=t;this.id=t.id;this.index=t.index;for(var r=[],l=0;l<t.buttons.length;l++){r.push(new n(this,l))}this.buttons=r;var d=[];for(l=0;l<t.axes.length;l++){d.push(new a(this,l))}this.axes=d;this.vibration=t.vibrationActuator;var p={value:0,pressed:!1};this._LCLeft=r[14]?r[14]:p;this._LCRight=r[15]?r[15]:p;this._LCTop=r[12]?r[12]:p;this._LCBottom=r[13]?r[13]:p;this._RCLeft=r[2]?r[2]:p;this._RCRight=r[1]?r[1]:p;this._RCTop=r[3]?r[3]:p;this._RCBottom=r[0]?r[0]:p;this._FBLeftTop=r[4]?r[4]:p;this._FBLeftBottom=r[6]?r[6]:p;this._FBRightTop=r[5]?r[5]:p;this._FBRightBottom=r[7]?r[7]:p;var c={value:0};this._HAxisLeft=d[0]?d[0]:c;this._VAxisLeft=d[1]?d[1]:c;this._HAxisRight=d[2]?d[2]:c;this._VAxisRight=d[3]?d[3]:c;this.leftStick=new s;this.rightStick=new s},getAxisTotal:function getAxisTotal(){return this.axes.length},getAxisValue:function getAxisValue(e){return this.axes[e].getValue()},setAxisThreshold:function setAxisThreshold(e){for(var t=0;t<this.axes.length;t++){this.axes[t].threshold=e}},getButtonTotal:function getButtonTotal(){return this.buttons.length},getButtonValue:function getButtonValue(e){return this.buttons[e].value},isButtonDown:function isButtonDown(e){return this.buttons[e].pressed},update:function update(e){var t,a=this.buttons,n=e.buttons,r=a.length;for(t=0;t<r;t++){a[t].update(n[t].value)}var o=this.axes,s=e.axes;r=o.length;for(t=0;t<r;t++){o[t].update(s[t])}if(2<=r){this.leftStick.set(o[0].getValue(),o[1].getValue());if(4<=r){this.rightStick.set(o[2].getValue(),o[3].getValue())}}},destroy:function destroy(){this.removeAllListeners();this.manager=null;this.pad=null;var e;for(e=0;e<this.buttons.length;e++){this.buttons[e].destroy()}for(e=0;e<this.axes.length;e++){this.axes[e].destroy()}this.buttons=[];this.axes=[]},connected:{get:function get(){return this.pad.connected}},timestamp:{get:function get(){return this.pad.timestamp}},left:{get:function get(){return this._LCLeft.pressed}},right:{get:function get(){return this._LCRight.pressed}},up:{get:function get(){return this._LCTop.pressed}},down:{get:function get(){return this._LCBottom.pressed}},A:{get:function get(){return this._RCBottom.pressed}},Y:{get:function get(){return this._RCTop.pressed}},X:{get:function get(){return this._RCLeft.pressed}},B:{get:function get(){return this._RCRight.pressed}},L1:{get:function get(){return this._FBLeftTop.value}},L2:{get:function get(){return this._FBLeftBottom.value}},R1:{get:function get(){return this._FBRightTop.value}},R2:{get:function get(){return this._FBRightBottom.value}}});e.exports=l},function(e,t,i){var a=i(0),n=i(9),r=i(133),o=new a({Extends:n,initialize:function(e,t){n.call(this);this.plugin=e;this.keyCode=t;this.originalEvent=void 0;this.enabled=!0;this.isDown=!1;this.isUp=!0;this.altKey=!1;this.ctrlKey=!1;this.shiftKey=!1;this.metaKey=!1;this.location=0;this.timeDown=0;this.duration=0;this.timeUp=0;this.emitOnRepeat=!1;this.repeats=0;this._justDown=!1;this._justUp=!1;this._tick=-1},setEmitOnRepeat:function setEmitOnRepeat(e){this.emitOnRepeat=e;return this},onDown:function onDown(e){this.originalEvent=e;if(!this.enabled){return}this.altKey=e.altKey;this.ctrlKey=e.ctrlKey;this.shiftKey=e.shiftKey;this.metaKey=e.metaKey;this.location=e.location;this.repeats++;if(!this.isDown){this.isDown=!0;this.isUp=!1;this.timeDown=e.timeStamp;this.duration=0;this._justDown=!0;this._justUp=!1;this.emit(r.DOWN,this,e)}else if(this.emitOnRepeat){this.emit(r.DOWN,this,e)}},onUp:function onUp(e){this.originalEvent=e;if(!this.enabled){return}this.isDown=!1;this.isUp=!0;this.timeUp=e.timeStamp;this.duration=this.timeUp-this.timeDown;this.repeats=0;this._justDown=!1;this._justUp=!0;this._tick=-1;this.emit(r.UP,this,e)},reset:function reset(){this.preventDefault=!0;this.enabled=!0;this.isDown=!1;this.isUp=!0;this.altKey=!1;this.ctrlKey=!1;this.shiftKey=!1;this.metaKey=!1;this.timeDown=0;this.duration=0;this.timeUp=0;this.repeats=0;this._justDown=!1;this._justUp=!1;this._tick=-1;return this},getDuration:function getDuration(){if(this.isDown){return this.plugin.game.loop.time-this.timeDown}else{return 0}},destroy:function destroy(){this.removeAllListeners();this.originalEvent=null;this.plugin=null}});e.exports=o},function(e,t,i){var a=i(0),n=i(133),r=i(2),o=i(1211),s=i(1213),l=new a({initialize:function(e,t,a){if(a===void 0){a={}}if(2>t.length){return!1}this.manager=e;this.enabled=!0;this.keyCodes=[];for(var l=0,d;l<t.length;l++){d=t[l];if("string"==typeof d){this.keyCodes.push(d.toUpperCase().charCodeAt(0))}else if("number"==typeof d){this.keyCodes.push(d)}else if(d.hasOwnProperty("keyCode")){this.keyCodes.push(d.keyCode)}}this.current=this.keyCodes[0];this.index=0;this.size=this.keyCodes.length;this.timeLastMatched=0;this.matched=!1;this.timeMatched=0;this.resetOnWrongKey=r(a,"resetOnWrongKey",!0);this.maxKeyDelay=r(a,"maxKeyDelay",0);this.resetOnMatch=r(a,"resetOnMatch",!1);this.deleteOnMatch=r(a,"deleteOnMatch",!1);var p=this;this.onKeyDown=function onKeyDownHandler(e){if(p.matched||!p.enabled){return}var t=o(e,p);if(t){p.manager.emit(n.COMBO_MATCH,p,e);if(p.resetOnMatch){s(p)}else if(p.deleteOnMatch){p.destroy()}}};this.manager.on(n.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function get(){return this.index/this.size}},destroy:function destroy(){this.enabled=!1;this.keyCodes=[];this.manager.off(n.ANY_KEY_DOWN,this.onKeyDown);this.manager=null}});e.exports=l},function(e,t,i){var a=i(212);e.exports=function XHRLoader(e,t){var i=a(t,e.xhrSettings),n=new XMLHttpRequest;n.open("GET",e.src,i.async,i.user,i.password);n.responseType=e.xhrSettings.responseType;n.timeout=i.timeout;if(i.header&&i.headerValue){n.setRequestHeader(i.header,i.headerValue)}if(i.requestedWith){n.setRequestHeader("X-Requested-With",i.requestedWith)}if(i.overrideMimeType){n.overrideMimeType(i.overrideMimeType)}n.onload=e.onLoad.bind(e,n);n.onerror=e.onError.bind(e,n);n.onprogress=e.onProgress.bind(e);n.send();return n}},function(e,t,i){var a=i(0),n=i(29),r=i(21),o=i(8),s=i(2),l=i(449),d=i(7),p=new a({Extends:r,initialize:function(e,t,i,a,n){if(d(t)){var o=t;t=s(o,"key");a=s(o,"xhrSettings");n=s(o,"context",n)}var l={type:"audio",cache:e.cacheManager.audio,extension:i.type,responseType:"arraybuffer",key:t,url:i.url,xhrSettings:a,config:{context:n}};r.call(this,e,l)},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(e){t.data=e;t.onProcessComplete()},function(i){console.error("Error decoding audio: "+this.key+" - ",i?i.message:null);t.onProcessError()});this.config.context=null}});p.create=function(e,t,i,a,n){var r=e.systems.game,o=r.config.audio,c=r.device.audio;if(d(t)){i=s(t,"url",[]);a=s(t,"config",{})}var u=p.getAudioURL(r,i);if(!u){return null}if(c.webAudio&&!(o&&o.disableWebAudio)){return new p(e,t,u,n,r.sound.context)}else{return new l(e,t,u,a)}};p.getAudioURL=function(e,t){if(!Array.isArray(t)){t=[t]}for(var a=0,n;a<t.length;a++){n=s(t[a],"url",t[a]);if(0===n.indexOf("blob:")||0===n.indexOf("data:")){return n}var r=n.match(/\.([a-zA-Z0-9]+)($|\?)/);r=s(t[a],"type",r?r[1]:"").toLowerCase();if(e.device.audio[r]){return{url:n,type:r}}}return null};o.register("audio",function(e,t,a,n){var r=this.systems.game,o=r.config.audio,s=r.device.audio;if(o&&o.noAudio||!s.webAudio&&!s.audioData){return this}var l;if(Array.isArray(e)){for(var d=0;d<e.length;d++){l=p.create(this,e[d]);if(l){this.addFile(l)}}}else{l=p.create(this,e,t,a,n);if(l){this.addFile(l)}}return this});e.exports=p},function(e,t,i){var a=i(0),n=i(81),r=i(21),o=i(2),s=i(134),l=i(7),d=new a({Extends:r,initialize:function(e,t,i,a){if(l(t)){var n=t;t=o(n,"key");a=o(n,"config",a)}var s={type:"audio",cache:e.cacheManager.audio,extension:i.type,key:t,url:i.url,config:a};r.call(this,e,s);this.locked="ontouchstart"in window;this.loaded=!1;this.filesLoaded=0;this.filesTotal=0},onLoad:function onLoad(){if(this.loaded){return}this.loaded=!0;this.loader.nextFile(this,!0)},onError:function onError(){for(var e=0,t;e<this.data.length;e++){t=this.data[e];t.oncanplaythrough=null;t.onerror=null}this.loader.nextFile(this,!1)},onProgress:function onProgress(e){var t=e.target;t.oncanplaythrough=null;t.onerror=null;this.filesLoaded++;this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1);this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete);if(this.filesLoaded===this.filesTotal){this.onLoad()}},load:function load(){this.data=[];var e=this.config&&this.config.instances||1;this.filesTotal=e;this.filesLoaded=0;this.percentComplete=0;for(var t=0,a;t<e;t++){a=new Audio;a.dataset={};a.dataset.name=this.key+("0"+t).slice(-2);a.dataset.used="false";if(this.locked){a.dataset.locked="true"}else{a.dataset.locked="false";a.preload="auto";a.oncanplaythrough=this.onProgress.bind(this);a.onerror=this.onError.bind(this)}this.data.push(a)}for(t=0;t<this.data.length;t++){a=this.data[t];a.src=s(this,this.loader.baseURL);if(!this.locked){a.load()}}if(this.locked){setTimeout(this.onLoad.bind(this))}}});e.exports=d},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=new a({Extends:r,initialize:function(e,t,i,a){var n="js";if(l(t)){var o=t;t=s(o,"key");i=s(o,"url");a=s(o,"xhrSettings");n=s(o,"extension",n)}var d={type:"script",cache:!1,extension:n,responseType:"text",key:t,url:i,xhrSettings:a};r.call(this,e,d)},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;this.data=document.createElement("script");this.data.language="javascript";this.data.type="text/javascript";this.data.defer=!1;this.data.text=this.xhrLoader.responseText;document.head.appendChild(this.data);this.onProcessComplete()}});o.register("script",function(e,t,a){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new d(this,e[n]))}}else{this.addFile(new d(this,e,t,a))}return this});e.exports=d},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=new a({Extends:r,initialize:function(e,t,i,a){var n="txt";if(l(t)){var o=t;t=s(o,"key");i=s(o,"url");a=s(o,"xhrSettings");n=s(o,"extension",n)}var d={type:"text",cache:e.cacheManager.text,extension:n,responseType:"text",key:t,url:i,xhrSettings:a};r.call(this,e,d)},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()}});o.register("text",function(e,t,a){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new d(this,e[n]))}}else{this.addFile(new d(this,e,t,a))}return this});e.exports=d},function(e,t,i){var a=i(453),n=i(136),r=i(0),o=i(50),s=i(454),l=i(455),d=new r({initialize:function(e){this.world=e;this.scene=e.scene;this.sys=e.scene.sys},collider:function collider(e,t,i,a,n){return this.world.addCollider(e,t,i,a,n)},overlap:function overlap(e,t,i,a,n){return this.world.addOverlap(e,t,i,a,n)},existing:function existing(e,t){var i=t?o.STATIC_BODY:o.DYNAMIC_BODY;this.world.enableBody(e,i);return e},staticImage:function staticImage(e,t,i,n){var r=new a(this.scene,e,t,i,n);this.sys.displayList.add(r);this.world.enableBody(r,o.STATIC_BODY);return r},image:function(e,t,i,n){var r=new a(this.scene,e,t,i,n);this.sys.displayList.add(r);this.world.enableBody(r,o.DYNAMIC_BODY);return r},staticSprite:function staticSprite(e,t,i,a){var r=new n(this.scene,e,t,i,a);this.sys.displayList.add(r);this.sys.updateList.add(r);this.world.enableBody(r,o.STATIC_BODY);return r},sprite:function(e,t,i,a){var r=new n(this.scene,e,t,i,a);this.sys.displayList.add(r);this.sys.updateList.add(r);this.world.enableBody(r,o.DYNAMIC_BODY);return r},staticGroup:function staticGroup(e,t){return this.sys.updateList.add(new l(this.world,this.world.scene,e,t))},group:function group(e,t){return this.sys.updateList.add(new s(this.world,this.world.scene,e,t))},destroy:function destroy(){this.world=null;this.scene=null;this.sys=null}});e.exports=d},function(e,t,i){var a=i(0),n=i(214),r=i(98),o=new a({Extends:r,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Size,n.Velocity],initialize:function(e,t,i,a,n){r.call(this,e,t,i,a,n);this.body=null}});e.exports=o},function(e,t,i){var a=i(136),n=i(0),r=i(50),o=i(2),s=i(97),l=i(7),d=new n({Extends:s,initialize:function(e,t,i,n){if(!i&&!n){n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}}else if(l(i)){n=i;i=null;n.internalCreateCallback=this.createCallbackHandler;n.internalRemoveCallback=this.removeCallbackHandler}else if(Array.isArray(i)&&l(i[0])){n=i[0];var d=this;i.forEach(function(e){e.internalCreateCallback=d.createCallbackHandler;e.internalRemoveCallback=d.removeCallbackHandler})}else{n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}}this.world=e;n.classType=o(n,"classType",a);this.physicsType=r.DYNAMIC_BODY;this.defaults={setCollideWorldBounds:o(n,"collideWorldBounds",!1),setBoundsRectangle:o(n,"customBoundsRectangle",null),setAccelerationX:o(n,"accelerationX",0),setAccelerationY:o(n,"accelerationY",0),setAllowDrag:o(n,"allowDrag",!0),setAllowGravity:o(n,"allowGravity",!0),setAllowRotation:o(n,"allowRotation",!0),setBounceX:o(n,"bounceX",0),setBounceY:o(n,"bounceY",0),setDragX:o(n,"dragX",0),setDragY:o(n,"dragY",0),setEnable:o(n,"enable",!0),setGravityX:o(n,"gravityX",0),setGravityY:o(n,"gravityY",0),setFrictionX:o(n,"frictionX",0),setFrictionY:o(n,"frictionY",0),setVelocityX:o(n,"velocityX",0),setVelocityY:o(n,"velocityY",0),setAngularVelocity:o(n,"angularVelocity",0),setAngularAcceleration:o(n,"angularAcceleration",0),setAngularDrag:o(n,"angularDrag",0),setMass:o(n,"mass",1),setImmovable:o(n,"immovable",!1)};if(Array.isArray(i)){n=null}s.call(this,t,i,n);this.type="PhysicsGroup"},createCallbackHandler:function createCallbackHandler(e){if(!e.body){this.world.enableBody(e,r.DYNAMIC_BODY)}var t=e.body;for(var i in this.defaults){t[i](this.defaults[i])}},removeCallbackHandler:function removeCallbackHandler(e){if(e.body){this.world.disableBody(e)}},setVelocity:function setVelocity(e,t,a){if(a===void 0){a=0}for(var n=this.getChildren(),r=0;r<n.length;r++){n[r].body.velocity.set(e+r*a,t+r*a)}return this},setVelocityX:function setVelocityX(e,t){if(t===void 0){t=0}for(var a=this.getChildren(),n=0;n<a.length;n++){a[n].body.velocity.x=e+n*t}return this},setVelocityY:function setVelocityY(e,t){if(t===void 0){t=0}for(var a=this.getChildren(),n=0;n<a.length;n++){a[n].body.velocity.y=e+n*t}return this}});e.exports=d},function(e,t,i){var a=i(136),n=i(0),r=i(50),o=i(2),s=i(97),l=i(7),d=new n({Extends:s,initialize:function(e,t,i,n){if(!i&&!n){n={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:a}}else if(l(i)){n=i;i=null;n.internalCreateCallback=this.createCallbackHandler;n.internalRemoveCallback=this.removeCallbackHandler;n.createMultipleCallback=this.createMultipleCallbackHandler;n.classType=o(n,"classType",a)}else if(Array.isArray(i)&&l(i[0])){n=i;i=null;n.forEach(function(e){e.internalCreateCallback=this.createCallbackHandler;e.internalRemoveCallback=this.removeCallbackHandler;e.createMultipleCallback=this.createMultipleCallbackHandler;e.classType=o(e,"classType",a)})}this.world=e;this.physicsType=r.STATIC_BODY;s.call(this,t,i,n);this.type="StaticPhysicsGroup"},createCallbackHandler:function createCallbackHandler(e){if(!e.body){this.world.enableBody(e,r.STATIC_BODY)}},removeCallbackHandler:function removeCallbackHandler(e){if(e.body){this.world.disableBody(e)}},createMultipleCallbackHandler:function createMultipleCallbackHandler(){this.refresh()},refresh:function refresh(){for(var e=this.children.entries,t=0;t<e.length;t++){e[t].body.reset()}return this}});e.exports=d},function(e){e.exports=function OverlapRect(e,t,i,a,n,r,o){if(r===void 0){r=!0}if(o===void 0){o=!1}var s=[],l=[],d=e.treeMinMax;d.minX=t;d.minY=i;d.maxX=t+a;d.maxY=i+n;if(o){l=e.staticTree.search(d)}if(r&&e.useTree){s=e.tree.search(d)}else if(r){var p=e.bodies,c={position:{x:t,y:i},left:t,top:i,right:t+a,bottom:i+n,isCircle:!1},u=e.intersects;p.iterate(function(e){if(u(e,c)){s.push(e)}})}return l.concat(s)}},function(e,t,i){var a=i(458),n=i(22),r=i(0),o=i(459),s=i(50),l=i(53),d=i(9),p=i(215),c=i(144),u=i(317),g=i(318),h=i(460),m=i(461),y=i(6),x=i(184),f=i(1270),T=i(11),v=i(462),b=i(1271),E=i(1276),S=i(1277),_=i(108),A=i(464),C=i(463),w=i(32),P=i(3),O=i(58),R=new r({Extends:d,initialize:function(e,t){d.call(this);this.scene=e;this.bodies=new _;this.staticBodies=new _;this.pendingDestroy=new _;this.colliders=new x;this.gravity=new P(y(t,"gravity.x",0),y(t,"gravity.y",0));this.bounds=new T(y(t,"x",0),y(t,"y",0),y(t,"width",e.sys.scale.width),y(t,"height",e.sys.scale.height));this.checkCollision={up:y(t,"checkCollision.up",!0),down:y(t,"checkCollision.down",!0),left:y(t,"checkCollision.left",!0),right:y(t,"checkCollision.right",!0)};this.fps=y(t,"fps",60);this._elapsed=0;this._frameTime=1/this.fps;this._frameTimeMS=1e3*this._frameTime;this.stepsLastFrame=0;this.timeScale=y(t,"timeScale",1);this.OVERLAP_BIAS=y(t,"overlapBias",4);this.TILE_BIAS=y(t,"tileBias",16);this.forceX=y(t,"forceX",!1);this.isPaused=y(t,"isPaused",!1);this._total=0;this.drawDebug=y(t,"debug",!1);this.debugGraphic;this.defaults={debugShowBody:y(t,"debugShowBody",!0),debugShowStaticBody:y(t,"debugShowStaticBody",!0),debugShowVelocity:y(t,"debugShowVelocity",!0),bodyDebugColor:y(t,"debugBodyColor",16711935),staticBodyDebugColor:y(t,"debugStaticBodyColor",255),velocityDebugColor:y(t,"debugVelocityColor",65280)};this.maxEntries=y(t,"maxEntries",16);this.useTree=y(t,"useTree",!0);this.tree=new v(this.maxEntries);this.staticTree=new v(this.maxEntries);this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0};this._tempMatrix=new w;this._tempMatrix2=new w;if(this.drawDebug){this.createDebugGraphic()}},enable:function enable(e,t){if(t===void 0){t=s.DYNAMIC_BODY}if(!Array.isArray(e)){e=[e]}for(var a=0,n;a<e.length;a++){n=e[a];if(n.isParent){for(var r=n.getChildren(),o=0,l;o<r.length;o++){l=r[o];if(l.isParent){this.enable(l,t)}else{this.enableBody(l,t)}}}else{this.enableBody(n,t)}}},enableBody:function enableBody(e,t){if(t===void 0){t=s.DYNAMIC_BODY}if(!e.body){if(t===s.DYNAMIC_BODY){e.body=new a(this,e)}else if(t===s.STATIC_BODY){e.body=new A(this,e)}}this.add(e.body);return e},add:function add(e){if(e.physicsType===s.DYNAMIC_BODY){this.bodies.set(e)}else if(e.physicsType===s.STATIC_BODY){this.staticBodies.set(e);this.staticTree.insert(e)}e.enable=!0;return e},disable:function disable(e){if(!Array.isArray(e)){e=[e]}for(var t=0,a;t<e.length;t++){a=e[t];if(a.isParent){for(var n=a.getChildren(),r=0,o;r<n.length;r++){o=n[r];if(o.isParent){this.disable(o)}else{this.disableBody(o.body)}}}else{this.disableBody(a.body)}}},disableBody:function disableBody(e){this.remove(e);e.enable=!1},remove:function remove(e){if(e.physicsType===s.DYNAMIC_BODY){this.tree.remove(e);this.bodies.delete(e)}else if(e.physicsType===s.STATIC_BODY){this.staticBodies.delete(e);this.staticTree.remove(e)}},createDebugGraphic:function createDebugGraphic(){var e=this.scene.sys.add.graphics({x:0,y:0});e.setDepth(Number.MAX_VALUE);this.debugGraphic=e;this.drawDebug=!0;return e},setBounds:function setBounds(e,t,i,a,n,r,o,s){this.bounds.setTo(e,t,i,a);if(n!==void 0){this.setBoundsCollision(n,r,o,s)}return this},setBoundsCollision:function setBoundsCollision(e,t,i,a){if(e===void 0){e=!0}if(t===void 0){t=!0}if(i===void 0){i=!0}if(a===void 0){a=!0}this.checkCollision.left=e;this.checkCollision.right=t;this.checkCollision.up=i;this.checkCollision.down=a;return this},pause:function pause(){this.isPaused=!0;this.emit(p.PAUSE);return this},resume:function resume(){this.isPaused=!1;this.emit(p.RESUME);return this},addCollider:function addCollider(e,t,i,a,n){if(i===void 0){i=null}if(a===void 0){a=null}if(n===void 0){n=i}var r=new o(this,!1,e,t,i,a,n);this.colliders.add(r);return r},addOverlap:function addOverlap(e,t,i,a,n){if(i===void 0){i=null}if(a===void 0){a=null}if(n===void 0){n=i}var r=new o(this,!0,e,t,i,a,n);this.colliders.add(r);return r},removeCollider:function removeCollider(e){this.colliders.remove(e);return this},setFPS:function setFPS(e){this.fps=e;this._frameTime=1/this.fps;this._frameTimeMS=1e3*this._frameTime;return this},update:function update(e,t){if(this.isPaused||0===this.bodies.size){return}var a,n=this._frameTime,r=this._frameTimeMS*this.timeScale;this._elapsed+=t;var o,s=this.bodies.entries,l=this._elapsed>=r;for(a=0;a<s.length;a++){o=s[a];if(o.enable){o.preUpdate(l,n)}}if(l){this._elapsed-=r;this.stepsLastFrame=1;if(this.useTree){this.tree.clear();this.tree.load(s)}var d=this.colliders.update();for(a=0;a<d.length;a++){var c=d[a];if(c.active){c.update()}}this.emit(p.WORLD_STEP)}while(this._elapsed>=r){this._elapsed-=r;this.step(n)}},step:function step(e){var t,a,n=this.bodies.entries,r=n.length;for(t=0;t<r;t++){a=n[t];if(a.enable){a.update(e)}}if(this.useTree){this.tree.clear();this.tree.load(n)}var o=this.colliders.update();for(t=0;t<o.length;t++){var s=o[t];if(s.active){s.update()}}this.emit(p.WORLD_STEP);this.stepsLastFrame++},postUpdate:function postUpdate(){var e,t,a=this.bodies.entries,n=a.length,r=this.bodies,o=this.staticBodies;if(this.stepsLastFrame){this.stepsLastFrame=0;for(e=0;e<n;e++){t=a[e];if(t.enable){t.postUpdate()}}}if(this.drawDebug){var l=this.debugGraphic;l.clear();for(e=0;e<n;e++){t=a[e];if(t.willDrawDebug()){t.drawDebug(l)}}a=o.entries;n=a.length;for(e=0;e<n;e++){t=a[e];if(t.willDrawDebug()){t.drawDebug(l)}}}var d=this.pendingDestroy;if(0<d.size){var p=this.tree,c=this.staticTree;a=d.entries;n=a.length;for(e=0;e<n;e++){t=a[e];if(t.physicsType===s.DYNAMIC_BODY){p.remove(t);r.delete(t)}else if(t.physicsType===s.STATIC_BODY){c.remove(t);o.delete(t)}t.world=void 0;t.gameObject=void 0}d.clear()}},updateMotion:function updateMotion(e,t){if(e.allowRotation){this.computeAngularVelocity(e,t)}this.computeVelocity(e,t)},computeAngularVelocity:function computeAngularVelocity(e,t){var i=e.angularVelocity,a=e.angularAcceleration,r=e.angularDrag,o=e.maxAngular;if(a){i+=a*t}else if(e.allowDrag&&r){r*=t;if(u(i-r,0,.1)){i-=r}else if(g(i+r,0,.1)){i+=r}else{i=0}}i=n(i,-o,o);var s=i-e.angularVelocity;e.angularVelocity+=s;e.rotation+=e.angularVelocity*t},computeVelocity:function computeVelocity(e,t){var i=e.velocity.x,a=e.acceleration.x,r=e.drag.x,o=e.maxVelocity.x,s=e.velocity.y,l=e.acceleration.y,d=e.drag.y,p=e.maxVelocity.y,h=e.speed,m=e.maxSpeed,y=e.allowDrag,x=e.useDamping;if(e.allowGravity){i+=(this.gravity.x+e.gravity.x)*t;s+=(this.gravity.y+e.gravity.y)*t}if(a){i+=a*t}else if(y&&r){if(x){i*=r;h=Math.sqrt(i*i+s*s);if(c(h,0,.001)){i=0}}else{r*=t;if(u(i-r,0,.01)){i-=r}else if(g(i+r,0,.01)){i+=r}else{i=0}}}if(l){s+=l*t}else if(y&&d){if(x){s*=d;h=Math.sqrt(i*i+s*s);if(c(h,0,.001)){s=0}}else{d*=t;if(u(s-d,0,.01)){s-=d}else if(g(s+d,0,.01)){s+=d}else{s=0}}}i=n(i,-o,o);s=n(s,-p,p);e.velocity.set(i,s);if(-1<m&&h>m){e.velocity.normalize().scale(m);h=m}e.speed=h},separate:function separate(e,t,i,a,n){if(!e.enable||!t.enable||e.checkCollision.none||t.checkCollision.none||!this.intersects(e,t)){return!1}if(i&&!1===i.call(a,e.gameObject,t.gameObject)){return!1}if(e.isCircle&&t.isCircle){return this.separateCircle(e,t,n)}if(e.isCircle!==t.isCircle){var r=e.isCircle?t:e,o=e.isCircle?e:t,s={x:r.x,y:r.y,right:r.right,bottom:r.bottom},l=o.center;if(l.y<s.y||l.y>s.bottom){if(l.x<s.x||l.x>s.right){return this.separateCircle(e,t,n)}}}var d=!1,c=!1;if(this.forceX||Math.abs(this.gravity.y+e.gravity.y)<Math.abs(this.gravity.x+e.gravity.x)){d=E(e,t,n,this.OVERLAP_BIAS);if(this.intersects(e,t)){c=S(e,t,n,this.OVERLAP_BIAS)}}else{c=S(e,t,n,this.OVERLAP_BIAS);if(this.intersects(e,t)){d=E(e,t,n,this.OVERLAP_BIAS)}}var u=d||c;if(u){if(n){if(e.onOverlap||t.onOverlap){this.emit(p.OVERLAP,e.gameObject,t.gameObject,e,t)}}else if(e.onCollide||t.onCollide){this.emit(p.COLLIDE,e.gameObject,t.gameObject,e,t)}}return u},separateCircle:function separateCircle(e,t,i,a){h(e,t,!1,a);m(e,t,!1,a);var n=0;if(e.isCircle!==t.isCircle){var r={x:t.isCircle?e.position.x:t.position.x,y:t.isCircle?e.position.y:t.position.y,right:t.isCircle?e.right:t.right,bottom:t.isCircle?e.bottom:t.bottom},o={x:e.isCircle?e.center.x:t.center.x,y:e.isCircle?e.center.y:t.center.y,radius:e.isCircle?e.halfWidth:t.halfWidth};if(o.y<r.y){if(o.x<r.x){n=l(o.x,o.y,r.x,r.y)-o.radius}else if(o.x>r.right){n=l(o.x,o.y,r.right,r.y)-o.radius}}else if(o.y>r.bottom){if(o.x<r.x){n=l(o.x,o.y,r.x,r.bottom)-o.radius}else if(o.x>r.right){n=l(o.x,o.y,r.right,r.bottom)-o.radius}}n*=-1}else{n=e.halfWidth+t.halfWidth-l(e.center.x,e.center.y,t.center.x,t.center.y)}if(i||0==n||e.immovable&&t.immovable||e.customSeparateX||t.customSeparateX){if(0!=n&&(e.onOverlap||t.onOverlap)){this.emit(p.OVERLAP,e.gameObject,t.gameObject,e,t)}return 0!=n}var s=e.center.x-t.center.x,c=e.center.y-t.center.y,u=Math.sqrt(Math.pow(s,2)+Math.pow(c,2)),d=(t.center.x-e.center.x)/u||0,g=(t.center.y-e.center.y)/u||0,y=2*(e.velocity.x*d+e.velocity.y*g-t.velocity.x*d-t.velocity.y*g)/(e.mass+t.mass);if(!e.immovable){e.velocity.x=e.velocity.x-y*e.mass*d;e.velocity.y=e.velocity.y-y*e.mass*g}if(!t.immovable){t.velocity.x=t.velocity.x+y*t.mass*d;t.velocity.y=t.velocity.y+y*t.mass*g}var x=t.velocity.x-e.velocity.x,f=t.velocity.y-e.velocity.y,T=Math.atan2(f,x),v=this._frameTime;if(!e.immovable&&!t.immovable){n/=2}if(!e.immovable){e.x+=e.velocity.x*v-n*Math.cos(T);e.y+=e.velocity.y*v-n*Math.sin(T)}if(!t.immovable){t.x+=t.velocity.x*v+n*Math.cos(T);t.y+=t.velocity.y*v+n*Math.sin(T)}e.velocity.x*=e.bounce.x;e.velocity.y*=e.bounce.y;t.velocity.x*=t.bounce.x;t.velocity.y*=t.bounce.y;if(e.onCollide||t.onCollide){this.emit(p.COLLIDE,e.gameObject,t.gameObject,e,t)}return!0},intersects:function intersects(e,t){if(e===t){return!1}if(!e.isCircle&&!t.isCircle){return!(e.right<=t.position.x||e.bottom<=t.position.y||e.position.x>=t.right||e.position.y>=t.bottom)}else if(e.isCircle){if(t.isCircle){return l(e.center.x,e.center.y,t.center.x,t.center.y)<=e.halfWidth+t.halfWidth}else{return this.circleBodyIntersects(e,t)}}else{return this.circleBodyIntersects(t,e)}},circleBodyIntersects:function circleBodyIntersects(e,t){var i=n(e.center.x,t.left,t.right),a=n(e.center.y,t.top,t.bottom),r=(e.center.x-i)*(e.center.x-i),o=(e.center.y-a)*(e.center.y-a);return r+o<=e.halfWidth*e.halfWidth},overlap:function overlap(e,t,i,a,n){if(i===void 0){i=null}if(a===void 0){a=null}if(n===void 0){n=i}return this.collideObjects(e,t,i,a,n,!0)},collide:function collide(e,t,i,a,n){if(i===void 0){i=null}if(a===void 0){a=null}if(n===void 0){n=i}return this.collideObjects(e,t,i,a,n,!1)},collideObjects:function collideObjects(e,t,a,n,r,o){var s,l;if(e.isParent&&e.physicsType===void 0){e=e.children.entries}if(t&&t.isParent&&t.physicsType===void 0){t=t.children.entries}var d=Array.isArray(e),p=Array.isArray(t);this._total=0;if(!d&&!p){this.collideHandler(e,t,a,n,r,o)}else if(!d&&p){for(s=0;s<t.length;s++){this.collideHandler(e,t[s],a,n,r,o)}}else if(d&&!p){if(!t){for(s=0;s<e.length;s++){var c=e[s];for(l=s+1;l<e.length;l++){if(s===l){continue}this.collideHandler(c,e[l],a,n,r,o)}}}else{for(s=0;s<e.length;s++){this.collideHandler(e[s],t,a,n,r,o)}}}else{for(s=0;s<e.length;s++){for(l=0;l<t.length;l++){this.collideHandler(e[s],t[l],a,n,r,o)}}}return 0<this._total},collideHandler:function collideHandler(e,t,i,a,n,r){if(t===void 0&&e.isParent){return this.collideGroupVsGroup(e,e,i,a,n,r)}if(!e||!t){return!1}if(e.body){if(t.body){return this.collideSpriteVsSprite(e,t,i,a,n,r)}else if(t.isParent){return this.collideSpriteVsGroup(e,t,i,a,n,r)}else if(t.isTilemap){return this.collideSpriteVsTilemapLayer(e,t,i,a,n,r)}}else if(e.isParent){if(t.body){return this.collideSpriteVsGroup(t,e,i,a,n,r)}else if(t.isParent){return this.collideGroupVsGroup(e,t,i,a,n,r)}else if(t.isTilemap){return this.collideGroupVsTilemapLayer(e,t,i,a,n,r)}}else if(e.isTilemap){if(t.body){return this.collideSpriteVsTilemapLayer(t,e,i,a,n,r)}else if(t.isParent){return this.collideGroupVsTilemapLayer(t,e,i,a,n,r)}}},collideSpriteVsSprite:function collideSpriteVsSprite(e,t,i,a,n,r){if(!e.body||!t.body){return!1}if(this.separate(e.body,t.body,a,n,r)){if(i){i.call(n,e,t)}this._total++}return!0},collideSpriteVsGroup:function collideSpriteVsGroup(e,t,a,n,r,o){var l=e.body;if(0===t.length||!l||!l.enable){return}var d,p,c;if(this.useTree){var u=this.treeMinMax;u.minX=l.left;u.minY=l.top;u.maxX=l.right;u.maxY=l.bottom;var g=t.physicsType===s.DYNAMIC_BODY?this.tree.search(u):this.staticTree.search(u);p=g.length;for(d=0;d<p;d++){c=g[d];if(l===c||!c.enable||!t.contains(c.gameObject)){continue}if(this.separate(l,c,n,r,o)){if(a){a.call(r,l.gameObject,c.gameObject)}this._total++}}}else{var h=t.getChildren(),m=t.children.entries.indexOf(e);p=h.length;for(d=0;d<p;d++){c=h[d].body;if(!c||d===m||!c.enable){continue}if(this.separate(l,c,n,r,o)){if(a){a.call(r,l.gameObject,c.gameObject)}this._total++}}}},collideGroupVsTilemapLayer:function collideGroupVsTilemapLayer(e,t,a,n,r,o){var s=e.getChildren();if(0===s.length){return!1}for(var l=!1,d=0;d<s.length;d++){if(s[d].body){if(this.collideSpriteVsTilemapLayer(s[d],t,a,n,r,o)){l=!0}}}return l},collideTiles:function collideTiles(e,t,i,a,n){if(!e.body.enable||0===t.length){return!1}else{return this.collideSpriteVsTilesHandler(e,t,i,a,n,!1,!1)}},overlapTiles:function overlapTiles(e,t,i,a,n){if(!e.body.enable||0===t.length){return!1}else{return this.collideSpriteVsTilesHandler(e,t,i,a,n,!0,!1)}},collideSpriteVsTilemapLayer:function collideSpriteVsTilemapLayer(e,t,i,a,n,r){var o=e.body;if(!o.enable){return!1}var s=o.position.x,l=o.position.y,d=o.width,p=o.height,c=t.layer;if(c.tileWidth>c.baseTileWidth){var u=(c.tileWidth-c.baseTileWidth)*t.scaleX;s-=u;d+=u}if(c.tileHeight>c.baseTileHeight){var g=(c.tileHeight-c.baseTileHeight)*t.scaleY;p+=g}var m=t.getTilesWithinWorldXY(s,l,d,p);if(0===m.length){return!1}else{return this.collideSpriteVsTilesHandler(e,m,i,a,n,r,!0)}},collideSpriteVsTilesHandler:function collideSpriteVsTilesHandler(e,t,a,n,r,o,s){for(var l=e.body,d,c={left:0,right:0,top:0,bottom:0},u,g=!1,h=0;h<t.length;h++){d=t[h];u=d.tilemapLayer;c.left=u.tileToWorldX(d.x);c.top=u.tileToWorldY(d.y);if(d.baseHeight!==d.height){c.top-=(d.height-d.baseHeight)*u.scaleY}c.right=c.left+d.width*u.scaleX;c.bottom=c.top+d.height*u.scaleY;if(C(c,l)&&(!n||n.call(r,e,d))&&f(d,e)&&(o||b(h,l,d,c,u,this.TILE_BIAS,s))){this._total++;g=!0;if(a){a.call(r,e,d)}if(o&&l.onOverlap){this.emit(p.TILE_OVERLAP,e,d,l)}else if(l.onCollide){this.emit(p.TILE_COLLIDE,e,d,l)}}}return g},collideGroupVsGroup:function collideGroupVsGroup(e,t,a,n,r,o){if(0===e.length||0===t.length){return}for(var s=e.getChildren(),l=0;l<s.length;l++){this.collideSpriteVsGroup(s[l],t,a,n,r,o)}},wrap:function wrap(e,t){if(e.body){this.wrapObject(e,t)}else if(e.getChildren){this.wrapArray(e.getChildren(),t)}else if(Array.isArray(e)){this.wrapArray(e,t)}else{this.wrapObject(e,t)}},wrapArray:function wrapArray(e,t){for(var a=0;a<e.length;a++){this.wrapObject(e[a],t)}},wrapObject:function wrapObject(e,t){if(t===void 0){t=0}e.x=O(e.x,this.bounds.left-t,this.bounds.right+t);e.y=O(e.y,this.bounds.top-t,this.bounds.bottom+t)},shutdown:function shutdown(){this.tree.clear();this.staticTree.clear();this.bodies.clear();this.staticBodies.clear();this.colliders.destroy();this.removeAllListeners()},destroy:function destroy(){this.shutdown();this.scene=null}});e.exports=R},function(e,t,i){var a=i(0),n=i(50),r=i(215),o=i(171),s=i(11),l=i(47),d=i(3),p=new a({initialize:function(e,t){var i=t.width?t.width:64,a=t.height?t.height:64;this.world=e;this.gameObject=t;this.transform={x:t.x,y:t.y,rotation:t.angle,scaleX:t.scaleX,scaleY:t.scaleY,displayOriginX:t.displayOriginX,displayOriginY:t.displayOriginY};this.debugShowBody=e.defaults.debugShowBody;this.debugShowVelocity=e.defaults.debugShowVelocity;this.debugBodyColor=e.defaults.bodyDebugColor;this.enable=!0;this.isCircle=!1;this.radius=0;this.offset=new d;this.position=new d(t.x,t.y);this.prev=new d(t.x,t.y);this.prevFrame=new d(t.x,t.y);this.allowRotation=!0;this.rotation=t.angle;this.preRotation=t.angle;this.width=i;this.height=a;this.sourceWidth=i;this.sourceHeight=a;if(t.frame){this.sourceWidth=t.frame.realWidth;this.sourceHeight=t.frame.realHeight}this.halfWidth=Math.abs(i/2);this.halfHeight=Math.abs(a/2);this.center=new d(t.x+this.halfWidth,t.y+this.halfHeight);this.velocity=new d;this.newVelocity=new d;this.deltaMax=new d;this.acceleration=new d;this.allowDrag=!0;this.drag=new d;this.allowGravity=!0;this.gravity=new d;this.bounce=new d;this.worldBounce=null;this.customBoundsRectangle=e.bounds;this.onWorldBounds=!1;this.onCollide=!1;this.onOverlap=!1;this.maxVelocity=new d(1e4,1e4);this.maxSpeed=-1;this.friction=new d(1,0);this.useDamping=!1;this.angularVelocity=0;this.angularAcceleration=0;this.angularDrag=0;this.maxAngular=1e3;this.mass=1;this.angle=0;this.speed=0;this.facing=n.FACING_NONE;this.immovable=!1;this.moves=!0;this.customSeparateX=!1;this.customSeparateY=!1;this.overlapX=0;this.overlapY=0;this.overlapR=0;this.embedded=!1;this.collideWorldBounds=!1;this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0};this.touching={none:!0,up:!1,down:!1,left:!1,right:!1};this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1};this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1};this.syncBounds=!1;this.physicsType=n.DYNAMIC_BODY;this._sx=t.scaleX;this._sy=t.scaleY;this._dx=0;this._dy=0;this._tx=0;this._ty=0;this._bounds=new s},updateBounds:function updateBounds(){var e=this.gameObject,t=this.transform;if(e.parentContainer){var i=e.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);t.x=i.tx;t.y=i.ty;t.rotation=o(i.rotation);t.scaleX=i.scaleX;t.scaleY=i.scaleY;t.displayOriginX=e.displayOriginX;t.displayOriginY=e.displayOriginY}else{t.x=e.x;t.y=e.y;t.rotation=e.angle;t.scaleX=e.scaleX;t.scaleY=e.scaleY;t.displayOriginX=e.displayOriginX;t.displayOriginY=e.displayOriginY}var a=!1;if(this.syncBounds){var n=e.getBounds(this._bounds);this.width=n.width;this.height=n.height;a=!0}else{var r=Math.abs(t.scaleX),s=Math.abs(t.scaleY);if(this._sx!==r||this._sy!==s){this.width=this.sourceWidth*r;this.height=this.sourceHeight*s;this._sx=r;this._sy=s;a=!0}}if(a){this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.updateCenter()}},updateCenter:function updateCenter(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},resetFlags:function resetFlags(){this.wasTouching.none=this.touching.none;this.wasTouching.up=this.touching.up;this.wasTouching.down=this.touching.down;this.wasTouching.left=this.touching.left;this.wasTouching.right=this.touching.right;this.touching.none=!0;this.touching.up=!1;this.touching.down=!1;this.touching.left=!1;this.touching.right=!1;this.blocked.none=!0;this.blocked.up=!1;this.blocked.down=!1;this.blocked.left=!1;this.blocked.right=!1;this.overlapR=0;this.overlapX=0;this.overlapY=0;this.embedded=!1},preUpdate:function preUpdate(e,t){if(e){this.resetFlags()}this.updateBounds();var i=this.transform;this.position.x=i.x+i.scaleX*(this.offset.x-i.displayOriginX);this.position.y=i.y+i.scaleY*(this.offset.y-i.displayOriginY);this.updateCenter();this.rotation=i.rotation;this.preRotation=this.rotation;if(this.moves){this.prev.x=this.position.x;this.prev.y=this.position.y;this.prevFrame.x=this.position.x;this.prevFrame.y=this.position.y}if(e){this.update(t)}},update:function update(e){this.prev.x=this.position.x;this.prev.y=this.position.y;if(this.moves){this.world.updateMotion(this,e);var t=this.velocity.x,i=this.velocity.y;this.newVelocity.set(t*e,i*e);this.position.add(this.newVelocity);this.updateCenter();this.angle=Math.atan2(i,t);this.speed=Math.sqrt(t*t+i*i);if(this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){this.world.emit(r.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}}this._dx=this.position.x-this.prev.x;this._dy=this.position.y-this.prev.y},postUpdate:function postUpdate(){var e=this.position.x-this.prevFrame.x,t=this.position.y-this.prevFrame.y;if(this.moves){var i=this.deltaMax.x,a=this.deltaMax.y;if(0!==i&&0!==e){if(0>e&&e<-i){e=-i}else if(0<e&&e>i){e=i}}if(0!==a&&0!==t){if(0>t&&t<-a){t=-a}else if(0<t&&t>a){t=a}}this.gameObject.x+=e;this.gameObject.y+=t}if(0>e){this.facing=n.FACING_LEFT}else if(0<e){this.facing=n.FACING_RIGHT}if(0>t){this.facing=n.FACING_UP}else if(0<t){this.facing=n.FACING_DOWN}if(this.allowRotation){this.gameObject.angle+=this.deltaZ()}this._tx=e;this._ty=t},setBoundsRectangle:function setBoundsRectangle(e){this.customBoundsRectangle=!e?this.world.bounds:e;return this},checkWorldBounds:function checkWorldBounds(){var e=this.position,t=this.customBoundsRectangle,i=this.world.checkCollision,a=this.worldBounce?-this.worldBounce.x:-this.bounce.x,n=this.worldBounce?-this.worldBounce.y:-this.bounce.y,r=!1;if(e.x<t.x&&i.left){e.x=t.x;this.velocity.x*=a;this.blocked.left=!0;r=!0}else if(this.right>t.right&&i.right){e.x=t.right-this.width;this.velocity.x*=a;this.blocked.right=!0;r=!0}if(e.y<t.y&&i.up){e.y=t.y;this.velocity.y*=n;this.blocked.up=!0;r=!0}else if(this.bottom>t.bottom&&i.down){e.y=t.bottom-this.height;this.velocity.y*=n;this.blocked.down=!0;r=!0}if(r){this.blocked.none=!1}return r},setOffset:function setOffset(e,t){if(t===void 0){t=e}this.offset.set(e,t);this.updateCenter();return this},setSize:function setSize(e,t,i){if(i===void 0){i=!0}var a=this.gameObject;if(!e&&a.frame){e=a.frame.realWidth}if(!t&&a.frame){t=a.frame.realHeight}this.sourceWidth=e;this.sourceHeight=t;this.width=this.sourceWidth*this._sx;this.height=this.sourceHeight*this._sy;this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.updateCenter();if(i&&a.getCenter){var n=a.displayWidth/2,r=a.displayHeight/2;this.offset.set(n-this.halfWidth,r-this.halfHeight)}this.isCircle=!1;this.radius=0;return this},setCircle:function setCircle(e,t,i){if(t===void 0){t=this.offset.x}if(i===void 0){i=this.offset.y}if(0<e){this.isCircle=!0;this.radius=e;this.sourceWidth=2*e;this.sourceHeight=2*e;this.width=this.sourceWidth*this._sx;this.height=this.sourceHeight*this._sy;this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.offset.set(t,i);this.updateCenter()}else{this.isCircle=!1}return this},reset:function reset(e,t){this.stop();var i=this.gameObject;i.setPosition(e,t);if(i.getTopLeft){i.getTopLeft(this.position)}else{this.position.set(e,t)}this.prev.copy(this.position);this.prevFrame.copy(this.position);this.rotation=i.angle;this.preRotation=i.angle;this.updateBounds();this.updateCenter()},stop:function stop(){this.velocity.set(0);this.acceleration.set(0);this.speed=0;this.angularVelocity=0;this.angularAcceleration=0;return this},getBounds:function getBounds(e){e.x=this.x;e.y=this.y;e.right=this.right;e.bottom=this.bottom;return e},hitTest:function hitTest(e,t){if(!this.isCircle){return l(this,e,t)}if(0<this.radius&&e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom){var i=(this.center.x-e)*(this.center.x-e),a=(this.center.y-t)*(this.center.y-t);return i+a<=this.radius*this.radius}return!1},onFloor:function onFloor(){return this.blocked.down},onCeiling:function onCeiling(){return this.blocked.up},onWall:function onWall(){return this.blocked.left||this.blocked.right},deltaAbsX:function deltaAbsX(){return 0<this._dx?this._dx:-this._dx},deltaAbsY:function deltaAbsY(){return 0<this._dy?this._dy:-this._dy},deltaX:function deltaX(){return this._dx},deltaY:function deltaY(){return this._dy},deltaXFinal:function deltaXFinal(){return this._tx},deltaYFinal:function deltaYFinal(){return this._ty},deltaZ:function deltaZ(){return this.rotation-this.preRotation},destroy:function destroy(){this.enable=!1;if(this.world){this.world.pendingDestroy.set(this)}},drawDebug:function drawDebug(e){var t=this.position,i=t.x+this.halfWidth,a=t.y+this.halfHeight;if(this.debugShowBody){e.lineStyle(e.defaultStrokeWidth,this.debugBodyColor);if(this.isCircle){e.strokeCircle(i,a,this.width/2)}else{if(this.checkCollision.up){e.lineBetween(t.x,t.y,t.x+this.width,t.y)}if(this.checkCollision.right){e.lineBetween(t.x+this.width,t.y,t.x+this.width,t.y+this.height)}if(this.checkCollision.down){e.lineBetween(t.x,t.y+this.height,t.x+this.width,t.y+this.height)}if(this.checkCollision.left){e.lineBetween(t.x,t.y,t.x,t.y+this.height)}}}if(this.debugShowVelocity){e.lineStyle(e.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1);e.lineBetween(i,a,i+this.velocity.x/2,a+this.velocity.y/2)}},willDrawDebug:function willDrawDebug(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function setCollideWorldBounds(e,t,i){if(e===void 0){e=!0}this.collideWorldBounds=e;var a=t!==void 0,n=i!==void 0;if(a||n){if(!this.worldBounce){this.worldBounce=new d}if(a){this.worldBounce.x=t}if(n){this.worldBounce.y=i}}return this},setVelocity:function setVelocity(e,t){this.velocity.set(e,t);e=this.velocity.x;t=this.velocity.y;this.speed=Math.sqrt(e*e+t*t);return this},setVelocityX:function setVelocityX(e){this.velocity.x=e;var t=e,i=this.velocity.y;this.speed=Math.sqrt(t*t+i*i);return this},setVelocityY:function setVelocityY(e){this.velocity.y=e;var t=this.velocity.x,i=e;this.speed=Math.sqrt(t*t+i*i);return this},setMaxVelocity:function setMaxVelocity(e,t){this.maxVelocity.set(e,t);return this},setMaxSpeed:function setMaxSpeed(e){this.maxSpeed=e;return this},setBounce:function setBounce(e,t){this.bounce.set(e,t);return this},setBounceX:function setBounceX(e){this.bounce.x=e;return this},setBounceY:function setBounceY(e){this.bounce.y=e;return this},setAcceleration:function setAcceleration(e,t){this.acceleration.set(e,t);return this},setAccelerationX:function setAccelerationX(e){this.acceleration.x=e;return this},setAccelerationY:function setAccelerationY(e){this.acceleration.y=e;return this},setAllowDrag:function setAllowDrag(e){if(e===void 0){e=!0}this.allowDrag=e;return this},setAllowGravity:function setAllowGravity(e){if(e===void 0){e=!0}this.allowGravity=e;return this},setAllowRotation:function setAllowRotation(e){if(e===void 0){e=!0}this.allowRotation=e;return this},setDrag:function setDrag(e,t){this.drag.set(e,t);return this},setDragX:function setDragX(e){this.drag.x=e;return this},setDragY:function setDragY(e){this.drag.y=e;return this},setGravity:function setGravity(e,t){this.gravity.set(e,t);return this},setGravityX:function setGravityX(e){this.gravity.x=e;return this},setGravityY:function setGravityY(e){this.gravity.y=e;return this},setFriction:function setFriction(e,t){this.friction.set(e,t);return this},setFrictionX:function setFrictionX(e){this.friction.x=e;return this},setFrictionY:function setFrictionY(e){this.friction.y=e;return this},setAngularVelocity:function setAngularVelocity(e){this.angularVelocity=e;return this},setAngularAcceleration:function setAngularAcceleration(e){this.angularAcceleration=e;return this},setAngularDrag:function setAngularDrag(e){this.angularDrag=e;return this},setMass:function setMass(e){this.mass=e;return this},setImmovable:function setImmovable(e){if(e===void 0){e=!0}this.immovable=e;return this},setEnable:function setEnable(e){if(e===void 0){e=!0}this.enable=e;return this},x:{get:function get(){return this.position.x},set:function set(e){this.position.x=e}},y:{get:function get(){return this.position.y},set:function set(e){this.position.y=e}},left:{get:function get(){return this.position.x}},right:{get:function get(){return this.position.x+this.width}},top:{get:function get(){return this.position.y}},bottom:{get:function get(){return this.position.y+this.height}}});e.exports=p},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t,i,a,n,r,o){this.world=e;this.name="";this.active=!0;this.overlapOnly=t;this.object1=i;this.object2=a;this.collideCallback=n;this.processCallback=r;this.callbackContext=o},setName:function setName(e){this.name=e;return this},update:function update(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function destroy(){this.world.removeCollider(this);this.active=!1;this.world=null;this.object1=null;this.object2=null;this.collideCallback=null;this.processCallback=null;this.callbackContext=null}});e.exports=n},function(e,t,i){var a=i(50);e.exports=function GetOverlapX(e,t,i,n){var r=0,o=e.deltaAbsX()+t.deltaAbsX()+n;if(0===e._dx&&0===t._dx){e.embedded=!0;t.embedded=!0}else if(e._dx>t._dx){r=e.right-t.x;if(r>o&&!i||!1===e.checkCollision.right||!1===t.checkCollision.left){r=0}else{e.touching.none=!1;e.touching.right=!0;t.touching.none=!1;t.touching.left=!0;if(t.physicsType===a.STATIC_BODY){e.blocked.none=!1;e.blocked.right=!0}if(e.physicsType===a.STATIC_BODY){t.blocked.none=!1;t.blocked.left=!0}}}else if(e._dx<t._dx){r=e.x-t.width-t.x;if(-r>o&&!i||!1===e.checkCollision.left||!1===t.checkCollision.right){r=0}else{e.touching.none=!1;e.touching.left=!0;t.touching.none=!1;t.touching.right=!0;if(t.physicsType===a.STATIC_BODY){e.blocked.none=!1;e.blocked.left=!0}if(e.physicsType===a.STATIC_BODY){t.blocked.none=!1;t.blocked.right=!0}}}e.overlapX=r;t.overlapX=r;return r}},function(e,t,i){var a=i(50);e.exports=function GetOverlapY(e,t,i,n){var r=0,o=e.deltaAbsY()+t.deltaAbsY()+n;if(0===e._dy&&0===t._dy){e.embedded=!0;t.embedded=!0}else if(e._dy>t._dy){r=e.bottom-t.y;if(r>o&&!i||!1===e.checkCollision.down||!1===t.checkCollision.up){r=0}else{e.touching.none=!1;e.touching.down=!0;t.touching.none=!1;t.touching.up=!0;if(t.physicsType===a.STATIC_BODY){e.blocked.none=!1;e.blocked.down=!0}if(e.physicsType===a.STATIC_BODY){t.blocked.none=!1;t.blocked.up=!0}}}else if(e._dy<t._dy){r=e.y-t.bottom;if(-r>o&&!i||!1===e.checkCollision.up||!1===t.checkCollision.down){r=0}else{e.touching.none=!1;e.touching.up=!0;t.touching.none=!1;t.touching.down=!0;if(t.physicsType===a.STATIC_BODY){e.blocked.none=!1;e.blocked.up=!0}if(e.physicsType===a.STATIC_BODY){t.blocked.none=!1;t.blocked.down=!0}}}e.overlapY=r;t.overlapY=r;return r}},function(e,t,i){var f,T=i(383);function a(e){if(!(this instanceof a))return new a(e,[".left",".top",".right",".bottom"]);this._maxEntries=Math.max(4,e||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()}a.prototype=(f={all:function all(){return this._all(this.data,[])},search:function search(e){var t=this.data,a=[],n=this.toBBox;if(!m(e,t))return a;var r=[],o,s,l,d;while(t){for(o=0,s=t.children.length;o<s;o++){l=t.children[o];d=t.leaf?n(l):l;if(m(e,d)){if(t.leaf)a.push(l);else if(h(e,d))this._all(l,a);else r.push(l)}}t=r.pop()}return a},collides:function collides(e){var t=this.data,a=this.toBBox;if(!m(e,t))return!1;var n=[],r,o,s,l;while(t){for(r=0,o=t.children.length;r<o;r++){s=t.children[r];l=t.leaf?a(s):s;if(m(e,l)){if(t.leaf||h(e,l))return!0;n.push(s)}}t=n.pop()}return!1},load:function load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(var t=0,a=e.length;t<a;t++){this.insert(e[t])}return this}var n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length){this.data=n}else if(this.data.height===n.height){this._splitRoot(this.data,n)}else{if(this.data.height<n.height){var r=this.data;this.data=n;n=r}this._insert(n,this.data.height-n.height-1,!0)}return this},insert:function insert(e){if(e)this._insert(e,this.data.height-1);return this},clear:function clear(){this.data=y([]);return this},remove:function remove(e,t){if(!e)return this;var a=this.data,r=this.toBBox(e),o=[],s=[],l,d,p,c;while(a||o.length){if(!a){a=o.pop();d=o[o.length-1];l=s.pop();c=!0}if(a.leaf){p=n(e,a.children,t);if(-1!==p){a.children.splice(p,1);o.push(a);this._condense(o);return this}}if(!c&&!a.leaf&&h(a,r)){o.push(a);s.push(l);l=0;d=a;a=a.children[0]}else if(d){l++;a=d.children[l];c=!1}else a=null}return this},toBBox:function toBBox(e){return e},compareMinX:l,compareMinY:d,toJSON:function toJSON(){return this.data},fromJSON:function fromJSON(e){this.data=e;return this},_all:function _all(e,t){var i=[];while(e){if(e.leaf)t.push.apply(t,e.children);else i.push.apply(i,e.children);e=i.pop()}return t},_build:function _build(e,t,a,n){var o=a-t+1,s=this._maxEntries,l;if(o<=s){l=y(e.slice(t,a+1));r(l,this.toBBox);return l}if(!n){n=Math.ceil(Math.log(o)/Math.log(s));s=Math.ceil(o/Math.pow(s,n-1))}l=y([]);l.leaf=!1;l.height=n;var d=Math.ceil(o/s),p=d*Math.ceil(Math.sqrt(s)),c,u,g,h;x(e,t,a,p,this.compareMinX);for(c=t;c<=a;c+=p){g=Math.min(c+p-1,a);x(e,c,g,d,this.compareMinY);for(u=c;u<=g;u+=d){h=Math.min(u+d-1,g);l.children.push(this._build(e,u,h,n-1))}}r(l,this.toBBox);return l},_chooseSubtree:function _chooseSubtree(e,t,a,n){var r,o,s,l,d,c,g,h;while(!0){n.push(t);if(t.leaf||n.length-1===a)break;g=h=1/0;for(r=0,o=t.children.length;r<o;r++){s=t.children[r];d=p(s);c=u(e,s)-d;if(c<h){h=c;g=d<g?d:g;l=s}else if(c===h){if(d<g){g=d;l=s}}}t=l||t.children[0]}return t},_insert:function _insert(e,t,i){var a=this.toBBox,n=i?e:a(e),r=[],o=this._chooseSubtree(n,this.data,t,r);o.children.push(e);s(o,n);while(0<=t){if(r[t].children.length>this._maxEntries){this._split(r,t);t--}else break}this._adjustParentBBoxes(n,r,t)},_split:function _split(e,t){var i=e[t],a=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,a);var o=this._chooseSplitIndex(i,n,a),s=y(i.children.splice(o,i.children.length-o));s.height=i.height;s.leaf=i.leaf;r(i,this.toBBox);r(s,this.toBBox);if(t)e[t-1].children.push(s);else this._splitRoot(i,s)},_splitRoot:function _splitRoot(e,t){this.data=y([e,t]);this.data.height=e.height+1;this.data.leaf=!1;r(this.data,this.toBBox)},_chooseSplitIndex:function _chooseSplitIndex(e,t,a){var n,r,s,l,d,c,u,h;c=u=1/0;for(n=t;n<=a-t;n++){r=o(e,0,n,this.toBBox);s=o(e,n,a,this.toBBox);l=g(r,s);d=p(r)+p(s);if(l<c){c=l;h=n;u=d<u?d:u}else if(l===c){if(d<u){u=d;h=n}}}return h},_chooseSplitAxis:function _chooseSplitAxis(e,t,i){var a=e.leaf?this.compareMinX:l,n=e.leaf?this.compareMinY:d,r=this._allDistMargin(e,t,i,a),o=this._allDistMargin(e,t,i,n);if(r<o)e.children.sort(a)},_allDistMargin:function _allDistMargin(e,t,a,n){e.children.sort(n);var r=this.toBBox,l=o(e,0,t,r),d=o(e,a-t,a,r),p=c(l)+c(d),u,g;for(u=t;u<a-t;u++){g=e.children[u];s(l,e.leaf?r(g):g);p+=c(l)}for(u=a-t-1;u>=t;u--){g=e.children[u];s(d,e.leaf?r(g):g);p+=c(d)}return p},_adjustParentBBoxes:function _adjustParentBBoxes(e,t,a){for(var n=a;0<=n;n--){s(t[n],e)}},_condense:function _condense(e){for(var t=e.length-1,a;0<=t;t--){if(0===e[t].children.length){if(0<t){a=e[t-1].children;a.splice(a.indexOf(e[t]),1)}else this.clear()}else r(e[t],this.toBBox)}}},_defineProperty(f,"compareMinX",function compareMinX(e,t){return e.left-t.left}),_defineProperty(f,"compareMinY",function compareMinY(e,t){return e.top-t.top}),_defineProperty(f,"toBBox",function toBBox(e){return{minX:e.left,minY:e.top,maxX:e.right,maxY:e.bottom}}),f);function n(e,t,a){if(!a)return t.indexOf(e);for(var n=0;n<t.length;n++){if(a(e,t[n]))return n}return-1}function r(e,t){o(e,0,e.children.length,t,e)}function o(e,t,a,n,r){if(!r)r=y(null);r.minX=1/0;r.minY=1/0;r.maxX=-Infinity;r.maxY=-Infinity;for(var o=t,l;o<a;o++){l=e.children[o];s(r,e.leaf?n(l):l)}return r}function s(e,t){e.minX=Math.min(e.minX,t.minX);e.minY=Math.min(e.minY,t.minY);e.maxX=Math.max(e.maxX,t.maxX);e.maxY=Math.max(e.maxY,t.maxY);return e}function l(e,t){return e.minX-t.minX}function d(e,t){return e.minY-t.minY}function p(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function c(e){return e.maxX-e.minX+(e.maxY-e.minY)}function u(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function g(e,t){var i=Math.max(e.minX,t.minX),a=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),r=Math.min(e.maxY,t.maxY);return Math.max(0,n-i)*Math.max(0,r-a)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function m(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function y(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-Infinity,maxY:-Infinity}}function x(e,t,i,a,n){var r=[t,i],o;while(r.length){i=r.pop();t=r.pop();if(i-t<=a)continue;o=t+Math.ceil((i-t)/a/2)*a;T(e,o,t,i,n);r.push(t,o,o,i)}}e.exports=a},function(e){e.exports=function TileIntersectsBody(e,t){return!(t.right<=e.left||t.bottom<=e.top||t.position.x>=e.right||t.position.y>=e.bottom)}},function(e,t,i){var a=i(55),n=i(0),r=i(50),o=i(47),s=i(3),l=new n({initialize:function(e,t){var i=t.width?t.width:64,a=t.height?t.height:64;this.world=e;this.gameObject=t;this.debugShowBody=e.defaults.debugShowStaticBody;this.debugBodyColor=e.defaults.staticBodyDebugColor;this.enable=!0;this.isCircle=!1;this.radius=0;this.offset=new s;this.position=new s(t.x-t.displayOriginX,t.y-t.displayOriginY);this.width=i;this.height=a;this.halfWidth=Math.abs(this.width/2);this.halfHeight=Math.abs(this.height/2);this.center=new s(t.x+this.halfWidth,t.y+this.halfHeight);this.velocity=s.ZERO;this.allowGravity=!1;this.gravity=s.ZERO;this.bounce=s.ZERO;this.onWorldBounds=!1;this.onCollide=!1;this.onOverlap=!1;this.mass=1;this.immovable=!0;this.customSeparateX=!1;this.customSeparateY=!1;this.overlapX=0;this.overlapY=0;this.overlapR=0;this.embedded=!1;this.collideWorldBounds=!1;this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0};this.touching={none:!0,up:!1,down:!1,left:!1,right:!1};this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1};this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1};this.physicsType=r.STATIC_BODY;this._dx=0;this._dy=0},setGameObject:function setGameObject(e,t){if(e&&e!==this.gameObject){this.gameObject.body=null;e.body=this;this.gameObject=e}if(t){this.updateFromGameObject()}return this},updateFromGameObject:function updateFromGameObject(){this.world.staticTree.remove(this);var e=this.gameObject;e.getTopLeft(this.position);this.width=e.displayWidth;this.height=e.displayHeight;this.halfWidth=Math.abs(this.width/2);this.halfHeight=Math.abs(this.height/2);this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight);this.world.staticTree.insert(this);return this},setOffset:function setOffset(e,t){if(t===void 0){t=e}this.world.staticTree.remove(this);this.position.x-=this.offset.x;this.position.y-=this.offset.y;this.offset.set(e,t);this.position.x+=this.offset.x;this.position.y+=this.offset.y;this.updateCenter();this.world.staticTree.insert(this);return this},setSize:function setSize(e,t,i){if(i===void 0){i=!0}var a=this.gameObject;if(!e&&a.frame){e=a.frame.realWidth}if(!t&&a.frame){t=a.frame.realHeight}this.world.staticTree.remove(this);this.width=e;this.height=t;this.halfWidth=Math.floor(e/2);this.halfHeight=Math.floor(t/2);if(i&&a.getCenter){var n=a.displayWidth/2,r=a.displayHeight/2;this.position.x-=this.offset.x;this.position.y-=this.offset.y;this.offset.set(n-this.halfWidth,r-this.halfHeight);this.position.x+=this.offset.x;this.position.y+=this.offset.y}this.updateCenter();this.isCircle=!1;this.radius=0;this.world.staticTree.insert(this);return this},setCircle:function setCircle(e,t,i){if(t===void 0){t=this.offset.x}if(i===void 0){i=this.offset.y}if(0<e){this.world.staticTree.remove(this);this.isCircle=!0;this.radius=e;this.width=2*e;this.height=2*e;this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.offset.set(t,i);this.updateCenter();this.world.staticTree.insert(this)}else{this.isCircle=!1}return this},updateCenter:function updateCenter(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function reset(e,t){var i=this.gameObject;if(e===void 0){e=i.x}if(t===void 0){t=i.y}this.world.staticTree.remove(this);i.setPosition(e,t);i.getTopLeft(this.position);this.updateCenter();this.world.staticTree.insert(this)},stop:function stop(){return this},getBounds:function getBounds(e){e.x=this.x;e.y=this.y;e.right=this.right;e.bottom=this.bottom;return e},hitTest:function hitTest(e,t){return this.isCircle?a(this,e,t):o(this,e,t)},postUpdate:function postUpdate(){},deltaAbsX:function deltaAbsX(){return 0},deltaAbsY:function deltaAbsY(){return 0},deltaX:function deltaX(){return 0},deltaY:function deltaY(){return 0},deltaZ:function deltaZ(){return 0},destroy:function destroy(){this.enable=!1;this.world.pendingDestroy.set(this)},drawDebug:function drawDebug(e){var t=this.position,i=t.x+this.halfWidth,a=t.y+this.halfHeight;if(this.debugShowBody){e.lineStyle(e.defaultStrokeWidth,this.debugBodyColor,1);if(this.isCircle){e.strokeCircle(i,a,this.width/2)}else{e.strokeRect(t.x,t.y,this.width,this.height)}}},willDrawDebug:function willDrawDebug(){return this.debugShowBody},setMass:function setMass(e){if(0>=e){e=.1}this.mass=e;return this},x:{get:function get(){return this.position.x},set:function set(e){this.world.staticTree.remove(this);this.position.x=e;this.world.staticTree.insert(this)}},y:{get:function get(){return this.position.y},set:function set(e){this.world.staticTree.remove(this);this.position.y=e;this.world.staticTree.insert(this)}},left:{get:function get(){return this.position.x}},right:{get:function get(){return this.position.x+this.width}},top:{get:function get(){return this.position.y}},bottom:{get:function get(){return this.position.y+this.height}}});e.exports=l},function(e){e.exports={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8}},function(e){e.exports={NONE:0,A:1,B:2,BOTH:3}},function(e){var t={};e.exports=t;(function(){t.create=function(e,i){var a=e.bodyA,n=e.bodyB,r={id:t.id(a,n),bodyA:a,bodyB:n,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:a.isSensor||n.isSensor,timeCreated:i,timeUpdated:i,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};t.update(r,e,i);return r};t.update=function(e,a,n){e.collision=a;if(a.collided){var r=a.supports,o=e.activeContacts,s=a.parentA,l=a.parentB;e.inverseMass=s.inverseMass+l.inverseMass;e.friction=Math.min(s.friction,l.friction);e.frictionStatic=Math.max(s.frictionStatic,l.frictionStatic);e.restitution=Math.max(s.restitution,l.restitution);e.slop=Math.max(s.slop,l.slop);for(var d=0;d<r.length;d++){o[d]=r[d].contact}var p=r.length;if(p<o.length){o.length=p}e.separation=a.depth;t.setActive(e,!0,n)}else{if(!0===e.isActive)t.setActive(e,!1,n)}};t.setActive=function(e,t,i){if(t){e.isActive=!0;e.timeUpdated=i}else{e.isActive=!1;e.activeContacts.length=0}};t.id=function(e,t){if(e.id<t.id){return"A"+e.id+"B"+t.id}else{return"A"+t.id+"B"+e.id}}})()},function(e,t,i){var a=i(0),n=new a({initialize:function(e){this.pluginManager=e;this.game=e.game},init:function init(){},start:function start(){},stop:function stop(){},destroy:function destroy(){this.pluginManager=null;this.game=null;this.scene=null;this.systems=null}});e.exports=n},function(e,t,i){var a=i(24);e.exports=function ReplaceByIndex(e,t,n,r,o,s,l){for(var d=a(n,r,o,s,null,l),p=0;p<d.length;p++){if(d[p]&&d[p].index===e){d[p].index=t}}}},function(e,t,i){var a=i(103);e.exports=function HasTileAt(e,t,i){if(a(e,t,i)){var n=i.data[t][e];return null!==n&&-1<n.index}else{return!1}}},function(e,t,i){var a=i(74),n=i(103),r=i(217);e.exports=function RemoveTileAt(e,t,i,o,s){if(i===void 0){i=!1}if(o===void 0){o=!0}if(!n(e,t,s)){return null}var l=s.data[t][e];if(!l){return null}else{s.data[t][e]=i?null:new a(s,-1,e,t,l.width,l.height)}if(o&&l&&l.collides){r(e,t,s)}return l}},function(e,t,i){var a=i(31),n=i(220),r=i(473),o=i(474),s=i(485);e.exports=function Parse(e,t,i,l,d,p){var c;switch(t){case a.ARRAY_2D:c=n(e,i,l,d,p);break;case a.CSV:c=r(e,i,l,d,p);break;case a.TILED_JSON:c=o(e,i,p);break;case a.WELTMEISTER:c=s(e,i,p);break;default:console.warn("Unrecognized tilemap data format: "+t);c=null;}return c}},function(e,t,i){var a=i(31),n=i(220);e.exports=function ParseCSV(e,t,i,r,o){var s=t.trim().split("\n").map(function(e){return e.split(",")}),l=n(e,s,i,r,o);l.format=a.CSV;return l}},function(e,t,i){var a=i(31),n=i(105),r=i(475),o=i(477),s=i(478),l=i(481),d=i(483),p=i(484);e.exports=function ParseJSONTiled(e,t,i){if("orthogonal"!==t.orientation){console.warn("Only orthogonal map types are supported in this version of Phaser");return null}var c=new n({width:t.width,height:t.height,name:e,tileWidth:t.tilewidth,tileHeight:t.tileheight,orientation:t.orientation,format:a.TILED_JSON,version:t.version,properties:t.properties,renderOrder:t.renderorder,infinite:t.infinite});c.layers=r(t,i);c.images=o(t);var u=s(t);c.tilesets=u.tilesets;c.imageCollections=u.imageCollections;c.objects=l(t);c.tiles=d(c);p(c);return c}},function(e,t,i){var a=i(476),n=i(2),r=i(104),o=i(221),s=i(74),l=i(222);e.exports=function ParseTileLayers(e,d){var p=n(e,"infinite",!1),u=[],g=[],h=l(e);while(h.i<h.layers.length||0<g.length){if(h.i>=h.layers.length){if(1>g.length){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}h=g.pop();continue}var m=h.layers[h.i];h.i++;if("tilelayer"!==m.type){if("group"===m.type){var f=l(e,m,h);g.push(h);h=f}continue}if(m.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+m.name+"'");continue}else if(m.encoding&&"base64"===m.encoding){if(m.chunks){for(var T=0;T<m.chunks.length;T++){m.chunks[T].data=a(m.chunks[T].data)}}if(m.data){m.data=a(m.data)}delete m.encoding}var v,b,E,S,_=[],A=0;if(p){var C=n(m,"startx",0)+m.x,w=n(m,"starty",0)+m.y;v=new r({name:h.name+m.name,x:h.x+n(m,"offsetx",0)+C*e.tilewidth,y:h.y+n(m,"offsety",0)+w*e.tileheight,width:m.width,height:m.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:h.opacity*m.opacity,visible:h.visible&&m.visible,properties:n(m,"properties",{})});for(var P=0;P<m.height;P++){_.push([null]);for(var O=0;O<m.width;O++){_[P][O]=null}}for(P=0,z=m.chunks.length;P<z;P++){for(var R=m.chunks[P],L=R.x-C,D=R.y-w,F=0,I=0,M=R.data.length;I<M;I++){var B=A+L,Y=F+D;b=o(R.data[I]);if(0<b.gid){E=new s(v,b.gid,B,Y,e.tilewidth,e.tileheight);E.rotation=b.rotation;E.flipX=b.flipped;_[Y][B]=E}else{S=d?null:new s(v,-1,B,Y,e.tilewidth,e.tileheight);_[Y][B]=S}A++;if(A===R.width){F++;A=0}}}}else{v=new r({name:h.name+m.name,x:h.x+n(m,"offsetx",0)+m.x,y:h.y+n(m,"offsety",0)+m.y,width:m.width,height:m.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,alpha:h.opacity*m.opacity,visible:h.visible&&m.visible,properties:n(m,"properties",{})});for(var N=[],X=0,z=m.data.length;X<z;X++){b=o(m.data[X]);if(0<b.gid){E=new s(v,b.gid,A,_.length,e.tilewidth,e.tileheight);E.rotation=b.rotation;E.flipX=b.flipped;N.push(E)}else{S=d?null:new s(v,-1,A,_.length,e.tilewidth,e.tileheight);N.push(S)}A++;if(A===m.width){_.push(N);A=0;N=[]}}}v.data=_;u.push(v)}return u}},function(e){e.exports=function Base64Decode(e){for(var t=window.atob(e),a=t.length,n=Array(a/4),r=0;r<a;r+=4){n[r/4]=(t.charCodeAt(r)|t.charCodeAt(r+1)<<8|t.charCodeAt(r+2)<<16|t.charCodeAt(r+3)<<24)>>>0}return n}},function(e,t,i){var a=i(2),n=i(222);e.exports=function ParseImageLayers(e){var t=[],i=[],r=n(e);while(r.i<r.layers.length||0<i.length){if(r.i>=r.layers.length){if(1>i.length){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}r=i.pop();continue}var o=r.layers[r.i];r.i++;if("imagelayer"!==o.type){if("group"===o.type){var s=n(e,o,r);i.push(r);r=s}continue}var l=a(o,"offsetx",0)+a(o,"startx",0),d=a(o,"offsety",0)+a(o,"starty",0);t.push({name:r.name+o.name,image:o.image,x:r.x+l+o.x,y:r.y+d+o.y,alpha:r.opacity*o.opacity,visible:r.visible&&o.visible,properties:a(o,"properties",{})})}return t}},function(e,t,i){var a=i(141),n=i(479),r=i(223);e.exports=function ParseTilesets(e){for(var o=[],s=[],l=null,d,p=0,c;p<e.tilesets.length;p++){c=e.tilesets[p];if(c.source){console.warn("Phaser can't load external tilesets. Use the Embed Tileset button and then export the map again.")}else if(c.image){var u=new a(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing);if(1<e.version){if(Array.isArray(c.tiles)){for(var g={},h={},m=0,y;m<c.tiles.length;m++){y=c.tiles[m];if(y.properties){var x={};y.properties.forEach(function(e){x[e.name]=e.value});h[y.id]=x}if(y.objectgroup){g[y.id]={objectgroup:y.objectgroup};if(y.objectgroup.objects){var f=y.objectgroup.objects.map(function(e){return r(e)});g[y.id].objectgroup.objects=f}}if(y.animation){if(g.hasOwnProperty(y.id)){g[y.id].animation=y.animation}else{g[y.id]={animation:y.animation}}}}u.tileData=g;u.tileProperties=h}}else{if(c.tileproperties){u.tileProperties=c.tileproperties}if(c.tiles){u.tileData=c.tiles;for(d in u.tileData){var T=u.tileData[d].objectgroup;if(T&&T.objects){var v=T.objects.map(function(e){return r(e)});u.tileData[d].objectgroup.objects=v}}}}u.updateTileData(c.imagewidth,c.imageheight);o.push(u)}else{var b=new n(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,c.properties);for(d in c.tiles){var E=c.tiles[d].image,S=c.firstgid+parseInt(d,10);b.addImage(S,E)}s.push(b)}if(l){l.lastgid=c.firstgid-1}l=c}return{tilesets:o,imageCollections:s}}},function(e,t,i){var a=i(0),n=new a({initialize:function(e,t,i,a,n,r,o){if(i===void 0||0>=i){i=32}if(a===void 0||0>=a){a=32}if(n===void 0){n=0}if(r===void 0){r=0}this.name=e;this.firstgid=0|t;this.imageWidth=0|i;this.imageHeight=0|a;this.imageMargin=0|n;this.imageSpacing=0|r;this.properties=o||{};this.images=[];this.total=0},containsImageIndex:function containsImageIndex(e){return e>=this.firstgid&&e<this.firstgid+this.total},addImage:function addImage(e,t){this.images.push({gid:e,image:t});this.total++;return this}});e.exports=n},function(e,t,i){var a=i(99);e.exports=function Pick(e,t){for(var n={},r=0,o;r<t.length;r++){o=t[r];if(a(e,o)){n[o]=e[o]}}return n}},function(e,t,i){var a=i(2),n=i(223),r=i(482),o=i(222);e.exports=function ParseObjectLayers(e){var t=[],i=[],s=o(e);while(s.i<s.layers.length||0<i.length){if(s.i>=s.layers.length){if(1>i.length){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=i.pop();continue}var l=s.layers[s.i];s.i++;l.opacity*=s.opacity;l.visible=s.visible&&l.visible;if("objectgroup"!==l.type){if("group"===l.type){var d=o(e,l,s);i.push(s);s=d}continue}l.name=s.name+l.name;for(var p=s.x+a(l,"startx",0)+a(l,"offsetx",0),c=s.y+a(l,"starty",0)+a(l,"offsety",0),u=[],g=0,h;g<l.objects.length;g++){h=n(l.objects[g],p,c);u.push(h)}var m=new r(l);m.objects=u;t.push(m)}return t}},function(e,t,i){var a=i(0),n=i(2),r=new a({initialize:function(e){if(e===void 0){e={}}this.name=n(e,"name","object layer");this.opacity=n(e,"opacity",1);this.properties=n(e,"properties",{});this.propertyTypes=n(e,"propertytypes",{});this.type=n(e,"type","objectgroup");this.visible=n(e,"visible",!0);this.objects=n(e,"objects",[])}});e.exports=r},function(e){e.exports=function BuildTilesetIndex(e){for(var a=[],n=0;n<e.tilesets.length;n++){for(var r=e.tilesets[n],o=r.tileMargin,s=r.tileMargin,l=0,d=0,p=0,c=r.firstgid;c<r.firstgid+r.total;c++){a[c]=[o,s,n];o+=r.tileWidth+r.tileSpacing;l++;if(l===r.total){break}d++;if(d===r.columns){o=r.tileMargin;s+=r.tileHeight+r.tileSpacing;d=0;p++;if(p===r.rows){break}}}}return a}},function(e,t,i){var a=i(17);e.exports=function AssignTileProperties(e){for(var t,n,r,o,s,l=0;l<e.layers.length;l++){t=e.layers[l];o=null;for(var d=0;d<t.data.length;d++){s=t.data[d];for(var p=0;p<s.length;p++){n=s[p];if(null===n||0>n.index){continue}r=e.tiles[n.index][2];o=e.tilesets[r];n.width=o.tileWidth;n.height=o.tileHeight;if(o.tileProperties&&o.tileProperties[n.index-o.firstgid]){n.properties=a(n.properties,o.tileProperties[n.index-o.firstgid])}}}}}},function(e,t,i){var a=i(31),n=i(105),r=i(486),o=i(487);e.exports=function ParseWeltmeister(e,t,s){if(0===t.layer.length){console.warn("No layers found in the Weltmeister map: "+e);return null}for(var l=0,d=0,p=0;p<t.layer.length;p++){if(t.layer[p].width>l){l=t.layer[p].width}if(t.layer[p].height>d){d=t.layer[p].height}}var c=new n({width:l,height:d,name:e,tileWidth:t.layer[0].tilesize,tileHeight:t.layer[0].tilesize,format:a.WELTMEISTER});c.layers=r(t,s);c.tilesets=o(t);return c}},function(e,t,i){var a=i(104),n=i(74);e.exports=function ParseTileLayers(e,t){for(var r=[],o=0;o<e.layer.length;o++){for(var s=e.layer[o],l=new a({name:s.name,width:s.width,height:s.height,tileWidth:s.tilesize,tileHeight:s.tilesize,visible:1===s.visible}),d=[],p=[],c=0;c<s.data.length;c++){for(var u=0;u<s.data[c].length;u++){var g=s.data[c][u]-1,h;if(-1<g){h=new n(l,g,u,c,s.tilesize,s.tilesize)}else{h=t?null:new n(l,-1,u,c,s.tilesize,s.tilesize)}d.push(h)}p.push(d);d=[]}l.data=p;r.push(l)}return r}},function(e,t,i){var a=i(141);e.exports=function ParseTilesets(e){for(var t=[],n=[],r=0;r<e.layer.length;r++){var o=e.layer[r],s=o.tilesetName;if(""!==s&&-1===n.indexOf(s)){n.push(s);t.push(new a(s,0,o.tilesize,o.tilesize,0,0))}}return t}},function(e,t,i){var a=i(0),n=i(35),r=i(489),o=i(17),s=i(31),l=i(104),d=i(327),p=i(79),c=i(490),u=i(74),g=i(137),h=i(141),m=new a({initialize:function(e,t){this.scene=e;this.tileWidth=t.tileWidth;this.tileHeight=t.tileHeight;this.width=t.width;this.height=t.height;this.orientation=t.orientation;this.renderOrder=t.renderOrder;this.format=t.format;this.version=t.version;this.properties=t.properties;this.widthInPixels=t.widthInPixels;this.heightInPixels=t.heightInPixels;this.imageCollections=t.imageCollections;this.images=t.images;this.layers=t.layers;this.tilesets=t.tilesets;this.objects=t.objects;this.currentLayerIndex=0},setRenderOrder:function setRenderOrder(e){var t=["right-down","left-down","right-up","left-up"];if("number"==typeof e){e=t[e]}if(-1<t.indexOf(e)){this.renderOrder=e}return this},addTilesetImage:function addTilesetImage(e,t,i,a,n,r,o){if(e===void 0){return null}if(t===void 0||null===t){t=e}if(!this.scene.sys.textures.exists(t)){console.warn("Invalid Tileset Image: "+t);return null}var l=this.scene.sys.textures.get(t),d=this.getTilesetIndex(e);if(null===d&&this.format===s.TILED_JSON){console.warn("No data found for Tileset: "+e);return null}var p=this.tilesets[d];if(p){p.setTileSize(i,a);p.setSpacing(n,r);p.setImage(l);return p}if(i===void 0){i=this.tileWidth}if(a===void 0){a=this.tileHeight}if(n===void 0){n=0}if(r===void 0){r=0}if(o===void 0){o=0}p=new h(e,o,i,a,n,r);p.setImage(l);this.tilesets.push(p);return p},convertLayerToStatic:function convertLayerToStatic(e){e=this.getLayer(e);if(null===e){return null}var t=e.tilemapLayer;if(!t||!(t instanceof r)){return null}var i=new c(t.scene,t.tilemap,t.layerIndex,t.tileset,t.x,t.y);this.scene.sys.displayList.add(i);t.destroy();return i},copy:function copy(e,t,i,a,n,r,o,s){s=this.getLayer(s);if(this._isStaticCall(s,"copy")){return this}if(null!==s){g.Copy(e,t,i,a,n,r,o,s);return this}else{return null}},createBlankDynamicLayer:function createBlankDynamicLayer(e,t,i,a,n,o,s,d){if(i===void 0){i=0}if(a===void 0){a=0}if(n===void 0){n=this.width}if(o===void 0){o=this.height}if(s===void 0){s=this.tileWidth}if(d===void 0){d=this.tileHeight}var p=this.getLayerIndex(e);if(null!==p){console.warn("Invalid Tilemap Layer ID: "+e);return null}for(var c=new l({name:e,tileWidth:s,tileHeight:d,width:n,height:o}),g,h=0;h<o;h++){g=[];for(var m=0;m<n;m++){g.push(new u(c,-1,m,h,s,d,this.tileWidth,this.tileHeight))}c.data.push(g)}this.layers.push(c);this.currentLayerIndex=this.layers.length-1;var f=new r(this.scene,this,this.currentLayerIndex,t,i,a);f.setRenderOrder(this.renderOrder);this.scene.sys.displayList.add(f);return f},createDynamicLayer:function createDynamicLayer(e,t,i,a){var n=this.getLayerIndex(e);if(null===n){console.warn("Invalid Tilemap Layer ID: "+e);if("string"==typeof e){console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t"))}return null}var o=this.layers[n];if(o.tilemapLayer){console.warn("Tilemap Layer ID already exists:"+e);return null}this.currentLayerIndex=n;if(i===void 0){i=o.x}if(a===void 0){a=o.y}var s=new r(this.scene,this,n,t,i,a);s.setRenderOrder(this.renderOrder);this.scene.sys.displayList.add(s);return s},createFromObjects:function createFromObjects(e,t,a,r){if(a===void 0){a={}}if(r===void 0){r=this.scene}var s=this.getObjectLayer(e);if(!s){console.warn("Cannot create from object. Invalid objectgroup name given: "+e);if("string"==typeof layerID){console.warn("Valid objectgroup names:\n\t"+this.getObjectLayerNames().join(",\n\t"))}return null}for(var l=s.objects,p=[],c=0;c<l.length;c++){var u=!1,g=l[c];if(g.gid!==void 0&&"number"==typeof t&&g.gid===t||g.id!==void 0&&"number"==typeof t&&g.id===t||g.name!==void 0&&"string"==typeof t&&g.name===t){u=!0}if(u){var h=o({},a,g.properties);h.x=g.x;h.y=g.y;var m=r.make.sprite(h);m.name=g.name;if(g.width){m.displayWidth=g.width}if(g.height){m.displayHeight=g.height}var y={x:m.originX*m.displayWidth,y:(m.originY-1)*m.displayHeight};if(g.rotation){var x=n(g.rotation);d(y,x);m.rotation=x}m.x+=y.x;m.y+=y.y;if(g.flippedHorizontal!==void 0||g.flippedVertical!==void 0){m.setFlip(g.flippedHorizontal,g.flippedVertical)}if(!g.visible){m.visible=!1}for(var f in g.properties){if(m.hasOwnProperty(f)){continue}m.setData(f,g.properties[f])}p.push(m)}}return p},createFromTiles:function createFromTiles(e,t,i,a,n,r){r=this.getLayer(r);if(null===r){return null}return g.CreateFromTiles(e,t,i,a,n,r)},createStaticLayer:function createStaticLayer(e,t,i,a){var n=this.getLayerIndex(e);if(null===n){console.warn("Invalid Tilemap Layer ID: "+e);if("string"==typeof e){console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t"))}return null}var r=this.layers[n];if(r.tilemapLayer){console.warn("Tilemap Layer ID already exists:"+e);return null}this.currentLayerIndex=n;if(i===void 0&&this.layers[n].x){i=this.layers[n].x}if(a===void 0&&this.layers[n].y){a=this.layers[n].y}var o=new c(this.scene,this,n,t,i,a);o.setRenderOrder(this.renderOrder);this.scene.sys.displayList.add(o);return o},destroy:function destroy(){this.removeAllLayers();this.tilesets.length=0;this.objects.length=0;this.scene=void 0},fill:function fill(e,t,i,a,n,r,o){o=this.getLayer(o);if(null===o){return null}if(this._isStaticCall(o,"fill")){return this}g.Fill(e,t,i,a,n,r,o);return this},filterObjects:function filterObjects(e,t,i){if("string"==typeof e){var a=e;e=this.getObjectLayer(e);if(!e){console.warn("No object layer found with the name: "+a);return null}}return e.objects.filter(t,i)},filterTiles:function filterTiles(e,t,i,a,n,r,o,s){s=this.getLayer(s);if(null===s){return null}return g.FilterTiles(e,t,i,a,n,r,o,s)},findByIndex:function findByIndex(e,t,i,a){a=this.getLayer(a);if(null===a){return null}return g.FindByIndex(e,t,i,a)},findObject:function findObject(e,t,i){if("string"==typeof e){var a=e;e=this.getObjectLayer(e);if(!e){console.warn("No object layer found with the name: "+a);return null}}return e.objects.find(t,i)||null},findTile:function findTile(e,t,i,a,n,r,o,s){s=this.getLayer(s);if(null===s){return null}return g.FindTile(e,t,i,a,n,r,o,s)},forEachTile:function forEachTile(e,t,i,a,n,r,o,s){s=this.getLayer(s);if(null===s){return null}g.ForEachTile(e,t,i,a,n,r,o,s);return this},getImageIndex:function getImageIndex(e){return this.getIndex(this.images,e)},getImageLayerNames:function getImageLayerNames(){if(!this.images||!Array.isArray(this.images)){return[]}return this.images.map(function(e){return e.name})},getIndex:function getIndex(e,t){for(var a=0;a<e.length;a++){if(e[a].name===t){return a}}return null},getLayer:function getLayer(e){var t=this.getLayerIndex(e);return null!==t?this.layers[t]:null},getObjectLayer:function getObjectLayer(e){var t=this.getIndex(this.objects,e);return null!==t?this.objects[t]:null},getObjectLayerNames:function getObjectLayerNames(){if(!this.objects||!Array.isArray(this.objects)){return[]}return this.objects.map(function(e){return e.name})},getLayerIndex:function getLayerIndex(e){if(e===void 0){return this.currentLayerIndex}else if("string"==typeof e){return this.getLayerIndexByName(e)}else if("number"==typeof e&&e<this.layers.length){return e}else if(e instanceof c||e instanceof r){return e.layerIndex}else{return null}},getLayerIndexByName:function getLayerIndexByName(e){return this.getIndex(this.layers,e)},getTileAt:function getTileAt(e,t,i,a){a=this.getLayer(a);if(null===a){return null}return g.GetTileAt(e,t,i,a)},getTileAtWorldXY:function getTileAtWorldXY(e,t,i,a,n){n=this.getLayer(n);if(null===n){return null}return g.GetTileAtWorldXY(e,t,i,a,n)},getTileLayerNames:function getTileLayerNames(){if(!this.layers||!Array.isArray(this.layers)){return[]}return this.layers.map(function(e){return e.name})},getTilesWithin:function getTilesWithin(e,t,i,a,n,r){r=this.getLayer(r);if(null===r){return null}return g.GetTilesWithin(e,t,i,a,n,r)},getTilesWithinShape:function getTilesWithinShape(e,t,i,a){a=this.getLayer(a);if(null===a){return null}return g.GetTilesWithinShape(e,t,i,a)},getTilesWithinWorldXY:function getTilesWithinWorldXY(e,t,i,a,n,r,o){o=this.getLayer(o);if(null===o){return null}return g.GetTilesWithinWorldXY(e,t,i,a,n,r,o)},getTileset:function getTileset(e){var t=this.getIndex(this.tilesets,e);return null!==t?this.tilesets[t]:null},getTilesetIndex:function getTilesetIndex(e){return this.getIndex(this.tilesets,e)},hasTileAt:function hasTileAt(e,t,i){i=this.getLayer(i);if(null===i){return null}return g.HasTileAt(e,t,i)},hasTileAtWorldXY:function hasTileAtWorldXY(e,t,i,a){a=this.getLayer(a);if(null===a){return null}return g.HasTileAtWorldXY(e,t,i,a)},layer:{get:function get(){return this.layers[this.currentLayerIndex]},set:function set(e){this.setLayer(e)}},putTileAt:function putTileAt(e,t,i,a,n){n=this.getLayer(n);if(this._isStaticCall(n,"putTileAt")){return null}if(null===n){return null}return g.PutTileAt(e,t,i,a,n)},putTileAtWorldXY:function putTileAtWorldXY(e,t,i,a,n,r){r=this.getLayer(r);if(this._isStaticCall(r,"putTileAtWorldXY")){return null}if(null===r){return null}return g.PutTileAtWorldXY(e,t,i,a,n,r)},putTilesAt:function putTilesAt(e,t,i,a,n){n=this.getLayer(n);if(this._isStaticCall(n,"putTilesAt")){return this}if(null===n){return null}g.PutTilesAt(e,t,i,a,n);return this},randomize:function randomize(e,t,i,a,n,r){r=this.getLayer(r);if(this._isStaticCall(r,"randomize")){return this}if(null===r){return null}g.Randomize(e,t,i,a,n,r);return this},calculateFacesAt:function calculateFacesAt(e,t,i){i=this.getLayer(i);if(null===i){return null}g.CalculateFacesAt(e,t,i);return this},calculateFacesWithin:function calculateFacesWithin(e,t,i,a,n){n=this.getLayer(n);if(null===n){return null}g.CalculateFacesWithin(e,t,i,a,n);return this},removeLayer:function removeLayer(e){var t=this.getLayerIndex(e);if(null!==t){p(this.layers,t);for(var a=t;a<this.layers.length;a++){if(this.layers[a].tilemapLayer){this.layers[a].tilemapLayer.layerIndex--}}if(this.currentLayerIndex===t){this.currentLayerIndex=0}return this}else{return null}},destroyLayer:function destroyLayer(e){var t=this.getLayerIndex(e);if(null!==t){e=this.layers[t];e.destroy();p(this.layers,t);if(this.currentLayerIndex===t){this.currentLayerIndex=0}return this}else{return null}},removeAllLayers:function removeAllLayers(){for(var e=this.layers,t=0;t<e.length;t++){if(e[t].tilemapLayer){e[t].tilemapLayer.destroy(!1)}}e.length=0;this.currentLayerIndex=0;return this},removeTile:function removeTile(e,t,a){if(t===void 0){t=-1}if(a===void 0){a=!0}var n=[];if(!Array.isArray(e)){e=[e]}for(var r=0,o;r<e.length;r++){o=e[r];n.push(this.removeTileAt(o.x,o.y,!0,a,o.tilemapLayer));if(-1<t){this.putTileAt(t,o.x,o.y,a,o.tilemapLayer)}}return n},removeTileAt:function removeTileAt(e,t,i,a,n){n=this.getLayer(n);if(this._isStaticCall(n,"removeTileAt")){return null}if(null===n){return null}return g.RemoveTileAt(e,t,i,a,n)},removeTileAtWorldXY:function removeTileAtWorldXY(e,t,i,a,n,r){r=this.getLayer(r);if(this._isStaticCall(r,"removeTileAtWorldXY")){return null}if(null===r){return null}return g.RemoveTileAtWorldXY(e,t,i,a,n,r)},renderDebug:function renderDebug(e,t,i){i=this.getLayer(i);if(null===i){return null}g.RenderDebug(e,t,i);return this},renderDebugFull:function renderDebugFull(e,t){for(var a=this.layers,n=0;n<a.length;n++){g.RenderDebug(e,t,a[n])}return this},replaceByIndex:function replaceByIndex(e,t,i,a,n,r,o){o=this.getLayer(o);if(this._isStaticCall(o,"replaceByIndex")){return this}if(null===o){return null}g.ReplaceByIndex(e,t,i,a,n,r,o);return this},setCollision:function setCollision(e,t,i,a,n){a=this.getLayer(a);if(null===a){return null}g.SetCollision(e,t,i,a,n);return this},setCollisionBetween:function setCollisionBetween(e,t,i,a,n){n=this.getLayer(n);if(null===n){return null}g.SetCollisionBetween(e,t,i,a,n);return this},setCollisionByProperty:function setCollisionByProperty(e,t,i,a){a=this.getLayer(a);if(null===a){return null}g.SetCollisionByProperty(e,t,i,a);return this},setCollisionByExclusion:function setCollisionByExclusion(e,t,i,a){a=this.getLayer(a);if(null===a){return null}g.SetCollisionByExclusion(e,t,i,a);return this},setCollisionFromCollisionGroup:function setCollisionFromCollisionGroup(e,t,i){i=this.getLayer(i);if(null===i){return null}g.SetCollisionFromCollisionGroup(e,t,i);return this},setTileIndexCallback:function setTileIndexCallback(e,t,i,a){a=this.getLayer(a);if(null===a){return null}g.SetTileIndexCallback(e,t,i,a);return this},setTileLocationCallback:function setTileLocationCallback(e,t,i,a,n,r,o){o=this.getLayer(o);if(null===o){return null}g.SetTileLocationCallback(e,t,i,a,n,r,o);return this},setLayer:function setLayer(e){var t=this.getLayerIndex(e);if(null!==t){this.currentLayerIndex=t}return this},setBaseTileSize:function setBaseTileSize(e,t){this.tileWidth=e;this.tileHeight=t;this.widthInPixels=this.width*e;this.heightInPixels=this.height*t;for(var a=0;a<this.layers.length;a++){this.layers[a].baseTileWidth=e;this.layers[a].baseTileHeight=t;for(var n=this.layers[a].data,r=this.layers[a].width,o=this.layers[a].height,s=0;s<o;s++){for(var l=0,d;l<r;l++){d=n[s][l];if(null!==d){d.setSize(void 0,void 0,e,t)}}}}return this},setLayerTileSize:function setLayerTileSize(e,t,i){i=this.getLayer(i);if(null===i){return this}i.tileWidth=e;i.tileHeight=t;for(var a=i.data,n=i.width,r=i.height,o=0;o<r;o++){for(var s=0,l;s<n;s++){l=a[o][s];if(null!==l){l.setSize(e,t)}}}return this},shuffle:function shuffle(e,t,i,a,n){n=this.getLayer(n);if(this._isStaticCall(n,"shuffle")){return this}if(null===n){return null}g.Shuffle(e,t,i,a,n);return this},swapByIndex:function swapByIndex(e,t,i,a,n,r,o){o=this.getLayer(o);if(this._isStaticCall(o,"swapByIndex")){return this}if(null===o){return null}g.SwapByIndex(e,t,i,a,n,r,o);return this},tileToWorldX:function tileToWorldX(e,t,i){i=this.getLayer(i);if(null===i){return null}return g.TileToWorldX(e,t,i)},tileToWorldY:function tileToWorldY(e,t,i){i=this.getLayer(i);if(null===i){return null}return g.TileToWorldY(e,t,i)},tileToWorldXY:function tileToWorldXY(e,t,i,a,n){n=this.getLayer(n);if(null===n){return null}return g.TileToWorldXY(e,t,i,a,n)},weightedRandomize:function weightedRandomize(e,t,i,a,n,r){r=this.getLayer(r);if(this._isStaticCall(r,"weightedRandomize")){return this}if(null===r){return null}g.WeightedRandomize(e,t,i,a,n,r);return this},worldToTileX:function worldToTileX(e,t,i,a){a=this.getLayer(a);if(null===a){return null}return g.WorldToTileX(e,t,i,a)},worldToTileY:function worldToTileY(e,t,i,a){a=this.getLayer(a);if(null===a){return null}return g.WorldToTileY(e,t,i,a)},worldToTileXY:function worldToTileXY(e,t,i,a,n,r){r=this.getLayer(r);if(null===r){return null}return g.WorldToTileXY(e,t,i,a,n,r)},_isStaticCall:function _isStaticCall(e,t){if(e.tilemapLayer instanceof c){console.warn(t+": You cannot change the tiles in a static tilemap layer");return!0}else{return!1}}});e.exports=m},function(e,t,i){var a=i(0),n=i(12),r=i(1333),o=i(14),s=i(137),l=new a({Extends:o,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Origin,n.Pipeline,n.Transform,n.Visible,n.ScrollFactor,r],initialize:function(e,t,i,a,n,r){o.call(this,e,"DynamicTilemapLayer");this.isTilemap=!0;this.tilemap=t;this.layerIndex=i;this.layer=t.layers[i];this.layer.tilemapLayer=this;this.tileset=[];this.culledTiles=[];this.skipCull=!1;this.tilesDrawn=0;this.tilesTotal=this.layer.width*this.layer.height;this.cullPaddingX=1;this.cullPaddingY=1;this.cullCallback=s.CullTiles;this._renderOrder=0;this.gidMap=[];this.setTilesets(a);this.setAlpha(this.layer.alpha);this.setPosition(n,r);this.setOrigin();this.setSize(t.tileWidth*this.layer.width,t.tileHeight*this.layer.height);this.initPipeline("TextureTintPipeline")},setTilesets:function setTilesets(e){var a=[],n=[],r=this.tilemap;if(!Array.isArray(e)){e=[e]}for(var o=0,l;o<e.length;o++){l=e[o];if("string"==typeof l){l=r.getTileset(l)}if(l){n.push(l);for(var d=l.firstgid,s=0;s<l.total;s++){a[d+s]=l}}}this.gidMap=a;this.tileset=n},setRenderOrder:function setRenderOrder(e){if("string"==typeof e){e=["right-down","left-down","right-up","left-up"].indexOf(e)}if(0<=e&&4>e){this._renderOrder=e}return this},calculateFacesAt:function calculateFacesAt(e,t){s.CalculateFacesAt(e,t,this.layer);return this},calculateFacesWithin:function calculateFacesWithin(e,t,i,a){s.CalculateFacesWithin(e,t,i,a,this.layer);return this},createFromTiles:function createFromTiles(e,t,i,a,n){return s.CreateFromTiles(e,t,i,a,n,this.layer)},cull:function cull(e){return this.cullCallback(this.layer,e,this.culledTiles,this._renderOrder)},copy:function copy(e,t,i,a,n,r,o){s.Copy(e,t,i,a,n,r,o,this.layer);return this},destroy:function destroy(e){if(e===void 0){e=!0}if(!this.tilemap){return}if(this.layer.tilemapLayer===this){this.layer.tilemapLayer=void 0}if(e){this.tilemap.removeLayer(this)}this.tilemap=void 0;this.layer=void 0;this.culledTiles.length=0;this.cullCallback=null;this.gidMap=[];this.tileset=[];o.prototype.destroy.call(this)},fill:function fill(e,t,i,a,n,r){s.Fill(e,t,i,a,n,r,this.layer);return this},filterTiles:function filterTiles(e,t,i,a,n,r,o){return s.FilterTiles(e,t,i,a,n,r,o,this.layer)},findByIndex:function findByIndex(e,t,i){return s.FindByIndex(e,t,i,this.layer)},findTile:function findTile(e,t,i,a,n,r,o){return s.FindTile(e,t,i,a,n,r,o,this.layer)},forEachTile:function forEachTile(e,t,i,a,n,r,o){s.ForEachTile(e,t,i,a,n,r,o,this.layer);return this},getTileAt:function getTileAt(e,t,i){return s.GetTileAt(e,t,i,this.layer)},getTileAtWorldXY:function getTileAtWorldXY(e,t,i,a){return s.GetTileAtWorldXY(e,t,i,a,this.layer)},getTilesWithin:function getTilesWithin(e,t,i,a,n){return s.GetTilesWithin(e,t,i,a,n,this.layer)},getTilesWithinShape:function getTilesWithinShape(e,t,i){return s.GetTilesWithinShape(e,t,i,this.layer)},getTilesWithinWorldXY:function getTilesWithinWorldXY(e,t,i,a,n,r){return s.GetTilesWithinWorldXY(e,t,i,a,n,r,this.layer)},hasTileAt:function hasTileAt(e,t){return s.HasTileAt(e,t,this.layer)},hasTileAtWorldXY:function hasTileAtWorldXY(e,t,i){return s.HasTileAtWorldXY(e,t,i,this.layer)},putTileAt:function putTileAt(e,t,i,a){return s.PutTileAt(e,t,i,a,this.layer)},putTileAtWorldXY:function putTileAtWorldXY(e,t,i,a,n){return s.PutTileAtWorldXY(e,t,i,a,n,this.layer)},putTilesAt:function putTilesAt(e,t,i,a){s.PutTilesAt(e,t,i,a,this.layer);return this},randomize:function randomize(e,t,i,a,n){s.Randomize(e,t,i,a,n,this.layer);return this},removeTileAt:function removeTileAt(e,t,i,a){return s.RemoveTileAt(e,t,i,a,this.layer)},removeTileAtWorldXY:function removeTileAtWorldXY(e,t,i,a,n){return s.RemoveTileAtWorldXY(e,t,i,a,n,this.layer)},renderDebug:function renderDebug(e,t){s.RenderDebug(e,t,this.layer);return this},replaceByIndex:function replaceByIndex(e,t,i,a,n,r){s.ReplaceByIndex(e,t,i,a,n,r,this.layer);return this},setSkipCull:function setSkipCull(e){if(e===void 0){e=!0}this.skipCull=e;return this},setCullPadding:function setCullPadding(e,t){if(e===void 0){e=1}if(t===void 0){t=1}this.cullPaddingX=e;this.cullPaddingY=t;return this},setCollision:function setCollision(e,t,i,a){s.SetCollision(e,t,i,this.layer,a);return this},setCollisionBetween:function setCollisionBetween(e,t,i,a){s.SetCollisionBetween(e,t,i,a,this.layer);return this},setCollisionByProperty:function setCollisionByProperty(e,t,i){s.SetCollisionByProperty(e,t,i,this.layer);return this},setCollisionByExclusion:function setCollisionByExclusion(e,t,i){s.SetCollisionByExclusion(e,t,i,this.layer);return this},setCollisionFromCollisionGroup:function setCollisionFromCollisionGroup(e,t){s.SetCollisionFromCollisionGroup(e,t,this.layer);return this},setTileIndexCallback:function setTileIndexCallback(e,t,i){s.SetTileIndexCallback(e,t,i,this.layer);return this},setTileLocationCallback:function setTileLocationCallback(e,t,i,a,n,r){s.SetTileLocationCallback(e,t,i,a,n,r,this.layer);return this},shuffle:function shuffle(e,t,i,a){s.Shuffle(e,t,i,a,this.layer);return this},swapByIndex:function swapByIndex(e,t,i,a,n,r){s.SwapByIndex(e,t,i,a,n,r,this.layer);return this},tileToWorldX:function tileToWorldX(e,t){return s.TileToWorldX(e,t,this.layer)},tileToWorldY:function tileToWorldY(e,t){return s.TileToWorldY(e,t,this.layer)},tileToWorldXY:function tileToWorldXY(e,t,i,a){return s.TileToWorldXY(e,t,i,a,this.layer)},weightedRandomize:function weightedRandomize(e,t,i,a,n){s.WeightedRandomize(e,t,i,a,n,this.layer);return this},worldToTileX:function worldToTileX(e,t,i){return s.WorldToTileX(e,t,i,this.layer)},worldToTileY:function worldToTileY(e,t,i){return s.WorldToTileY(e,t,i,this.layer)},worldToTileXY:function worldToTileXY(e,t,i,a,n){return s.WorldToTileXY(e,t,i,a,n,this.layer)}});e.exports=l},function(e,t,i){var a=i(0),n=i(12),r=i(18),o=i(14),s=i(1336),l=i(137),d=i(32),p=i(10),c=new a({Extends:o,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Origin,n.Pipeline,n.Transform,n.Visible,n.ScrollFactor,s],initialize:function(e,t,i,a,n,s){o.call(this,e,"StaticTilemapLayer");this.isTilemap=!0;this.tilemap=t;this.layerIndex=i;this.layer=t.layers[i];this.layer.tilemapLayer=this;this.tileset=[];this.culledTiles=[];this.skipCull=!1;this.tilesDrawn=0;this.tilesTotal=this.layer.width*this.layer.height;this.cullPaddingX=1;this.cullPaddingY=1;this.cullCallback=l.CullTiles;this.renderer=e.sys.game.renderer;this.vertexBuffer=[];this.bufferData=[];this.vertexViewF32=[];this.vertexViewU32=[];this.dirty=[];this.vertexCount=[];this._renderOrder=0;this._tempMatrix=new d;this.gidMap=[];this.setTilesets(a);this.setAlpha(this.layer.alpha);this.setPosition(n,s);this.setOrigin();this.setSize(t.tileWidth*this.layer.width,t.tileHeight*this.layer.height);this.updateVBOData();this.initPipeline("TextureTintPipeline");e.sys.game.events.on(r.CONTEXT_RESTORED,function(){this.updateVBOData()},this)},setTilesets:function setTilesets(e){var a=[],n=[],r=this.tilemap;if(!Array.isArray(e)){e=[e]}for(var o=0,l;o<e.length;o++){l=e[o];if("string"==typeof l){l=r.getTileset(l)}if(l){n.push(l);for(var d=l.firstgid,s=0;s<l.total;s++){a[d+s]=l}}}this.gidMap=a;this.tileset=n},updateVBOData:function updateVBOData(){for(var e=0;e<this.tileset.length;e++){this.dirty[e]=!0;this.vertexCount[e]=0;this.vertexBuffer[e]=null;this.bufferData[e]=null;this.vertexViewF32[e]=null;this.vertexViewU32[e]=null}return this},upload:function upload(e,t){var i=this.renderer,a=i.gl,n=i.pipelines.TextureTintPipeline;if(this.dirty[t]){var r=this.tileset[t],o=this.layer.width,s=this.layer.height,l=r.image.source[0].width,d=r.image.source[0].height,p=this.layer.data,c,u,g,h=this._renderOrder,m=r.firstgid,y=r.firstgid+r.total,x=this.vertexBuffer[t],f=this.bufferData[t],T=-1,v=6*(o*s*n.vertexSize);this.vertexCount[t]=0;if(null===f){f=new ArrayBuffer(v);this.bufferData[t]=f;this.vertexViewF32[t]=new Float32Array(f);this.vertexViewU32[t]=new Uint32Array(f)}if(0===h){for(u=0;u<s;u++){for(g=0;g<o;g++){c=p[u][g];if(!c||c.index<m||c.index>y||!c.visible){continue}T=this.batchTile(T,c,r,l,d,e,t)}}}else if(1===h){for(u=0;u<s;u++){for(g=o-1;0<=g;g--){c=p[u][g];if(!c||c.index<m||c.index>y||!c.visible){continue}T=this.batchTile(T,c,r,l,d,e,t)}}}else if(2===h){for(u=s-1;0<=u;u--){for(g=0;g<o;g++){c=p[u][g];if(!c||c.index<m||c.index>y||!c.visible){continue}T=this.batchTile(T,c,r,l,d,e,t)}}}else if(3===h){for(u=s-1;0<=u;u--){for(g=o-1;0<=g;g--){c=p[u][g];if(!c||c.index<m||c.index>y||!c.visible){continue}T=this.batchTile(T,c,r,l,d,e,t)}}}this.dirty[t]=!1;if(null===x){x=i.createVertexBuffer(f,a.STATIC_DRAW);this.vertexBuffer[t]=x}else{i.setVertexBuffer(x);a.bufferSubData(a.ARRAY_BUFFER,0,f)}}return this},batchTile:function batchTile(e,t,i,a,n,r,o){var s=i.getTileTextureCoordinates(t.index);if(!s){return e}var l=i.tileWidth,d=i.tileHeight,c=l/2,u=d/2,g=s.x/a,h=s.y/n,m=(s.x+l)/a,f=(s.y+d)/n,T=this._tempMatrix,v=-c,b=-u;if(t.flipX){l*=-1;v+=i.tileWidth}if(t.flipY){d*=-1;b+=i.tileHeight}var E=v+l,S=b+d;T.applyITRS(c+t.pixelX,u+t.pixelY,t.rotation,1,1);var _=p.getTintAppendFloatAlpha(16777215,r.alpha*this.alpha*t.alpha),A=T.getX(v,b),C=T.getY(v,b),w=T.getX(v,S),P=T.getY(v,S),O=T.getX(E,S),R=T.getY(E,S),L=T.getX(E,b),k=T.getY(E,b);if(r.roundPixels){A=Math.round(A);C=Math.round(C);w=Math.round(w);P=Math.round(P);O=Math.round(O);R=Math.round(R);L=Math.round(L);k=Math.round(k)}var D=this.vertexViewF32[o],F=this.vertexViewU32[o];D[++e]=A;D[++e]=C;D[++e]=g;D[++e]=h;D[++e]=0;F[++e]=_;D[++e]=w;D[++e]=P;D[++e]=g;D[++e]=f;D[++e]=0;F[++e]=_;D[++e]=O;D[++e]=R;D[++e]=m;D[++e]=f;D[++e]=0;F[++e]=_;D[++e]=A;D[++e]=C;D[++e]=g;D[++e]=h;D[++e]=0;F[++e]=_;D[++e]=O;D[++e]=R;D[++e]=m;D[++e]=f;D[++e]=0;F[++e]=_;D[++e]=L;D[++e]=k;D[++e]=m;D[++e]=h;D[++e]=0;F[++e]=_;this.vertexCount[o]+=6;return e},setRenderOrder:function setRenderOrder(e){if("string"==typeof e){e=["right-down","left-down","right-up","left-up"].indexOf(e)}if(0<=e&&4>e){this._renderOrder=e;for(var t=0;t<this.tileset.length;t++){this.dirty[t]=!0}}return this},calculateFacesAt:function calculateFacesAt(e,t){l.CalculateFacesAt(e,t,this.layer);return this},calculateFacesWithin:function calculateFacesWithin(e,t,i,a){l.CalculateFacesWithin(e,t,i,a,this.layer);return this},createFromTiles:function createFromTiles(e,t,i,a,n){return l.CreateFromTiles(e,t,i,a,n,this.layer)},cull:function cull(e){return this.cullCallback(this.layer,e,this.culledTiles)},setSkipCull:function setSkipCull(e){if(e===void 0){e=!0}this.skipCull=e;return this},setCullPadding:function setCullPadding(e,t){if(e===void 0){e=1}if(t===void 0){t=1}this.cullPaddingX=e;this.cullPaddingY=t;return this},findByIndex:function findByIndex(e,t,i){return l.FindByIndex(e,t,i,this.layer)},findTile:function findTile(e,t,i,a,n,r,o){return l.FindTile(e,t,i,a,n,r,o,this.layer)},filterTiles:function filterTiles(e,t,i,a,n,r,o){return l.FilterTiles(e,t,i,a,n,r,o,this.layer)},forEachTile:function forEachTile(e,t,i,a,n,r,o){l.ForEachTile(e,t,i,a,n,r,o,this.layer);return this},getTileAt:function getTileAt(e,t,i){return l.GetTileAt(e,t,i,this.layer)},getTileAtWorldXY:function getTileAtWorldXY(e,t,i,a){return l.GetTileAtWorldXY(e,t,i,a,this.layer)},getTilesWithin:function getTilesWithin(e,t,i,a,n){return l.GetTilesWithin(e,t,i,a,n,this.layer)},getTilesWithinWorldXY:function getTilesWithinWorldXY(e,t,i,a,n,r){return l.GetTilesWithinWorldXY(e,t,i,a,n,r,this.layer)},getTilesWithinShape:function getTilesWithinShape(e,t,i){return l.GetTilesWithinShape(e,t,i,this.layer)},hasTileAt:function hasTileAt(e,t){return l.HasTileAt(e,t,this.layer)},hasTileAtWorldXY:function hasTileAtWorldXY(e,t,i){return l.HasTileAtWorldXY(e,t,i,this.layer)},renderDebug:function renderDebug(e,t){l.RenderDebug(e,t,this.layer);return this},setCollision:function setCollision(e,t,i,a){l.SetCollision(e,t,i,this.layer,a);return this},setCollisionBetween:function setCollisionBetween(e,t,i,a){l.SetCollisionBetween(e,t,i,a,this.layer);return this},setCollisionByProperty:function setCollisionByProperty(e,t,i){l.SetCollisionByProperty(e,t,i,this.layer);return this},setCollisionByExclusion:function setCollisionByExclusion(e,t,i){l.SetCollisionByExclusion(e,t,i,this.layer);return this},setTileIndexCallback:function setTileIndexCallback(e,t,i){l.SetTileIndexCallback(e,t,i,this.layer);return this},setCollisionFromCollisionGroup:function setCollisionFromCollisionGroup(e,t){l.SetCollisionFromCollisionGroup(e,t,this.layer);return this},setTileLocationCallback:function setTileLocationCallback(e,t,i,a,n,r){l.SetTileLocationCallback(e,t,i,a,n,r,this.layer);return this},tileToWorldX:function tileToWorldX(e,t){return l.TileToWorldX(e,t,this.layer)},tileToWorldY:function tileToWorldY(e,t){return l.TileToWorldY(e,t,this.layer)},tileToWorldXY:function tileToWorldXY(e,t,i,a){return l.TileToWorldXY(e,t,i,a,this.layer)},worldToTileX:function worldToTileX(e,t,i){return l.WorldToTileX(e,t,i,this.layer)},worldToTileY:function worldToTileY(e,t,i){return l.WorldToTileY(e,t,i,this.layer)},worldToTileXY:function worldToTileXY(e,t,i,a,n){return l.WorldToTileXY(e,t,i,a,n,this.layer)},destroy:function destroy(e){if(e===void 0){e=!0}if(!this.tilemap){return}if(this.layer.tilemapLayer===this){this.layer.tilemapLayer=void 0}if(e){this.tilemap.removeLayer(this)}this.tilemap=void 0;this.layer=void 0;this.culledTiles.length=0;this.cullCallback=null;for(var t=0;t<this.tileset.length;t++){this.dirty[t]=!0;this.vertexCount[t]=0;this.vertexBuffer[t]=null;this.bufferData[t]=null;this.vertexViewF32[t]=null;this.vertexViewU32[t]=null}this.gidMap=[];this.tileset=[];o.prototype.destroy.call(this)}});e.exports=c},function(e,t,i){var a=i(0),n=i(2),r=new a({initialize:function(e){this.delay=0;this.repeat=0;this.repeatCount=0;this.loop=!1;this.callback;this.callbackScope;this.args;this.timeScale=1;this.startAt=0;this.elapsed=0;this.paused=!1;this.hasDispatched=!1;this.reset(e)},reset:function reset(e){this.delay=n(e,"delay",0);this.repeat=n(e,"repeat",0);this.loop=n(e,"loop",!1);this.callback=n(e,"callback",void 0);this.callbackScope=n(e,"callbackScope",this.callback);this.args=n(e,"args",[]);this.timeScale=n(e,"timeScale",1);this.startAt=n(e,"startAt",0);this.paused=n(e,"paused",!1);this.elapsed=this.startAt;this.hasDispatched=!1;this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat;return this},getProgress:function getProgress(){return this.elapsed/this.delay},getOverallProgress:function getOverallProgress(){if(0<this.repeat){var e=this.delay+this.delay*this.repeat,t=this.elapsed+this.delay*(this.repeat-this.repeatCount);return t/e}else{return this.getProgress()}},getRepeatCount:function getRepeatCount(){return this.repeatCount},getElapsed:function getElapsed(){return this.elapsed},getElapsedSeconds:function getElapsedSeconds(){return .001*this.elapsed},remove:function remove(e){if(e===void 0){e=!1}this.elapsed=this.delay;this.hasDispatched=!e;this.repeatCount=0},destroy:function destroy(){this.callback=void 0;this.callbackScope=void 0;this.args=[]}});e.exports=r},function(e,t,i){var a=i(1345);e.exports=function GetProps(e){var t,i=[];if(e.hasOwnProperty("props")){for(t in e.props){if("_"!==t.substr(0,1)){i.push({key:t,value:e.props[t]})}}}else{for(t in e){if(-1===a.indexOf(t)&&"_"!==t.substr(0,1)){i.push({key:t,value:e[t]})}}}return i}},function(e,t,i){var a=i(6);e.exports=function GetTweens(e){var t=a(e,"tweens",null);if(null===t){return[]}else if("function"==typeof t){t=t.call()}if(!Array.isArray(t)){t=[t]}return t}},function(e,t,i){var a=i(227),n=i(15),r=i(88),o=i(82),s=i(142),l=i(6),d=i(226),p=i(228),c=i(230);e.exports=function NumberTweenBuilder(e,t,u){if(u===void 0){u=a}var g=l(t,"from",0),h=l(t,"to",1),m=[{value:g}],y=s(t,"delay",u.delay),x=s(t,"duration",u.duration),f=l(t,"easeParams",u.easeParams),T=o(l(t,"ease",u.ease),f),v=s(t,"hold",u.hold),b=s(t,"repeat",u.repeat),E=s(t,"repeatDelay",u.repeatDelay),S=r(t,"yoyo",u.yoyo),_=[],A=d("value",h),C=c(m[0],0,"value",A.getEnd,A.getStart,A.getActive,T,y,x,S,v,b,E,!1,!1);C.start=g;C.current=g;C.to=h;_.push(C);var w=new p(e,_,m);w.offset=n(t,"offset",null);w.completeDelay=n(t,"completeDelay",0);w.loop=Math.round(n(t,"loop",0));w.loopDelay=Math.round(n(t,"loopDelay",0));w.paused=r(t,"paused",!1);w.useFrames=r(t,"useFrames",!1);for(var P=l(t,"callbackScope",w),O=[w,null],R=p.TYPES,L=0;L<R.length;L++){var k=R[L],D=l(t,k,!1);if(D){var F=l(t,k+"Scope",P),I=l(t,k+"Params",[]);w.setCallback(k,D,O.concat(I),F)}}return w}},function(e,t,i){var a=i(82),n=i(6),r=i(13);e.exports=function StaggerBuilder(e,t){if(t===void 0){t={}}var i,o=n(t,"start",0),s=n(t,"ease",null),l=n(t,"grid",null),d=n(t,"from",0),p="center"===d,c="last"===d,u="number"==typeof d,g=Array.isArray(e),h=g?parseFloat(e[0]):parseFloat(e),m=g?parseFloat(e[1]):0,y=Math.max(h,m);if(g){o+=h}if(l){var x=l[0],f=l[1],T=0,v=0,b=0,E=0,S=[];if(c){T=x-1;v=f-1}else if(u){T=d%x;v=Math.floor(d/x)}else if(p){T=(x-1)/2;v=(f-1)/2}for(var _=r.MIN_SAFE_INTEGER,A=0;A<f;A++){S[A]=[];for(var C=0;C<x;C++){b=T-C;E=v-A;var w=Math.sqrt(b*b+E*E);if(w>_){_=w}S[A][C]=w}}}var P=s?a(s):null;if(l){i=function(e,t,i,a){var n=0,r=a%x,s=Math.floor(a/x);if(0<=r&&r<x&&0<=s&&s<f){n=S[s][r]}var l;if(g){var d=m-h;if(P){l=n/_*d*P(n/_)}else{l=n/_*d}}else if(P){l=n*h*P(n/_)}else{l=n*h}return l+o}}else{i=function(e,t,i,a,n){n--;var r;if("first"===d){r=a}else if(p){r=Math.abs(n/2-a)}else if(c){r=n-a}else if(u){r=Math.abs(d-a)}var s;if(g){var l;if(p){l=(m-h)/n*(2*r)}else{l=(m-h)/n*r}if(P){s=l*P(r/n)}else{s=l}}else if(P){s=n*y*P(r/n)}else{s=r*h}return s+o}}return i}},function(e,t,i){var a=i(67),n=i(227),r=i(15),o=i(88),s=i(82),l=i(142),d=i(225),p=i(493),c=i(6),u=i(497),g=i(143);e.exports=function TimelineBuilder(e,t){var h=new u(e),m=p(t);if(0===m.length){h.paused=!0;return h}var y=a(n);y.targets=d(t);var x=r(t,"totalDuration",0);if(0<x){y.duration=Math.floor(x/m.length)}else{y.duration=l(t,"duration",y.duration)}y.delay=l(t,"delay",y.delay);y.easeParams=c(t,"easeParams",y.easeParams);y.ease=s(c(t,"ease",y.ease),y.easeParams);y.hold=l(t,"hold",y.hold);y.repeat=l(t,"repeat",y.repeat);y.repeatDelay=l(t,"repeatDelay",y.repeatDelay);y.yoyo=o(t,"yoyo",y.yoyo);y.flipX=o(t,"flipX",y.flipX);y.flipY=o(t,"flipY",y.flipY);for(var f=0;f<m.length;f++){h.queue(g(h,m[f],y))}h.completeDelay=r(t,"completeDelay",0);h.loop=Math.round(r(t,"loop",0));h.loopDelay=Math.round(r(t,"loopDelay",0));h.paused=o(t,"paused",!1);h.useFrames=o(t,"useFrames",!1);var T=c(t,"callbackScope",h),v=[h],b=c(t,"onStart",!1);if(b){var E=c(t,"onStartScope",T),S=c(t,"onStartParams",[]);h.setCallback("onStart",b,v.concat(S),E)}var _=c(t,"onUpdate",!1);if(_){var A=c(t,"onUpdateScope",T),C=c(t,"onUpdateParams",[]);h.setCallback("onUpdate",_,v.concat(C),A)}var w=c(t,"onLoop",!1);if(w){var P=c(t,"onLoopScope",T),O=c(t,"onLoopParams",[]);h.setCallback("onLoop",w,v.concat(O),P)}var R=c(t,"onYoyo",!1);if(R){var L=c(t,"onYoyoScope",T),k=c(t,"onYoyoParams",[]);h.setCallback("onYoyo",R,v.concat(null,k),L)}var D=c(t,"onComplete",!1);if(D){var F=c(t,"onCompleteScope",T),I=c(t,"onCompleteParams",[]);h.setCallback("onComplete",D,v.concat(I),F)}return h}},function(e,t,i){var a=i(0),n=i(9),r=i(229),o=i(143),s=i(89),l=new a({Extends:n,initialize:function(e){n.call(this);this.manager=e;this.isTimeline=!0;this.data=[];this.totalData=0;this.useFrames=!1;this.timeScale=1;this.loop=0;this.loopDelay=0;this.loopCounter=0;this.completeDelay=0;this.countdown=0;this.state=s.PENDING_ADD;this._pausedState=s.PENDING_ADD;this.paused=!1;this.elapsed=0;this.totalElapsed=0;this.duration=0;this.progress=0;this.totalDuration=0;this.totalProgress=0;this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null};this.callbackScope},dispatchTimelineEvent:function dispatchTimelineEvent(e,t){this.emit(e,this);if(t){t.func.apply(t.scope,t.params)}},setTimeScale:function setTimeScale(e){this.timeScale=e;return this},getTimeScale:function getTimeScale(){return this.timeScale},isPlaying:function isPlaying(){return this.state===s.ACTIVE},add:function add(e){return this.queue(o(this,e))},queue:function queue(e){if(!this.isPlaying()){e.parent=this;e.parentIsTimeline=!0;this.data.push(e);this.totalData=this.data.length}return this},hasOffset:function hasOffset(e){return null!==e.offset},isOffsetAbsolute:function isOffsetAbsolute(e){return"number"==typeof e},isOffsetRelative:function isOffsetRelative(e){var i=_typeof(e);if("string"===i){var t=e[0];if("-"===t||"+"===t){return!0}}return!1},getRelativeOffset:function getRelativeOffset(e,t){var i=e[0],a=parseFloat(e.substr(2)),n=t;switch(i){case"+":n+=a;break;case"-":n-=a;break;}return Math.max(0,n)},calcDuration:function calcDuration(){for(var e=0,t=0,a=0,n=0,r;n<this.totalData;n++){r=this.data[n];r.init();if(this.hasOffset(r)){if(this.isOffsetAbsolute(r.offset)){r.calculatedOffset=r.offset;if(0===r.offset){a=0}}else if(this.isOffsetRelative(r.offset)){r.calculatedOffset=this.getRelativeOffset(r.offset,e)}}else{r.calculatedOffset=a}e=r.totalDuration+r.calculatedOffset;t+=r.totalDuration;a+=r.totalDuration}this.duration=t;this.loopCounter=-1===this.loop?999999999999:this.loop;if(0<this.loopCounter){this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter}else{this.totalDuration=this.duration+this.completeDelay}},init:function init(){this.calcDuration();this.progress=0;this.totalProgress=0;if(this.paused){this.state=s.PAUSED;return!1}else{return!0}},resetTweens:function resetTweens(e){for(var t=0,a;t<this.totalData;t++){a=this.data[t];a.play(e)}},setCallback:function setCallback(e,t,i,a){if(-1!==l.TYPES.indexOf(e)){this.callbacks[e]={func:t,scope:a,params:i}}return this},makeActive:function makeActive(e){return this.manager.makeActive(e)},play:function play(){if(this.state===s.ACTIVE){return}if(this.paused){this.paused=!1;this.manager.makeActive(this);return}else{this.resetTweens(!1);this.state=s.ACTIVE}this.dispatchTimelineEvent(r.TIMELINE_START,this.callbacks.onStart)},nextState:function nextState(){if(0<this.loopCounter){this.elapsed=0;this.progress=0;this.loopCounter--;this.resetTweens(!0);if(0<this.loopDelay){this.countdown=this.loopDelay;this.state=s.LOOP_DELAY}else{this.state=s.ACTIVE;this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop)}}else if(0<this.completeDelay){this.state=s.COMPLETE_DELAY;this.countdown=this.completeDelay}else{this.state=s.PENDING_REMOVE;this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete)}},update:function update(e,t){if(this.state===s.PAUSED){return}if(this.useFrames){t=1*this.manager.timeScale}t*=this.timeScale;this.elapsed+=t;this.progress=Math.min(this.elapsed/this.duration,1);this.totalElapsed+=t;this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1);switch(this.state){case s.ACTIVE:for(var a=this.totalData,n=0,o;n<this.totalData;n++){o=this.data[n];if(o.update(e,t)){a--}}this.dispatchTimelineEvent(r.TIMELINE_UPDATE,this.callbacks.onUpdate);if(0===a){this.nextState()}break;case s.LOOP_DELAY:this.countdown-=t;if(0>=this.countdown){this.state=s.ACTIVE;this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop)}break;case s.COMPLETE_DELAY:this.countdown-=t;if(0>=this.countdown){this.state=s.PENDING_REMOVE;this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete)}break;}return this.state===s.PENDING_REMOVE},stop:function stop(){this.state=s.PENDING_REMOVE},pause:function pause(){if(this.state===s.PAUSED){return}this.paused=!0;this._pausedState=this.state;this.state=s.PAUSED;this.emit(r.TIMELINE_PAUSE,this);return this},resume:function resume(){if(this.state===s.PAUSED){this.paused=!1;this.state=this._pausedState;this.emit(r.TIMELINE_RESUME,this)}return this},hasTarget:function hasTarget(e){for(var t=0;t<this.data.length;t++){if(this.data[t].hasTarget(e)){return!0}}return!1},destroy:function destroy(){for(var e=0;e<this.data.length;e++){this.data[e].stop()}}});l.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"];e.exports=l},function(e,t,i){var a=i(148),n=i(0),r=i(111),o=new n({initialize:function(e){this.parent=e;this.animationManager=e.scene.sys.anims;this.animationManager.once(r.REMOVE_ANIMATION,this.remove,this);this.isPlaying=!1;this.currentAnim=null;this.currentFrame=null;this.nextAnim=null;this._timeScale=1;this.frameRate=0;this.duration=0;this.msPerFrame=0;this.skipMissedFrames=!0;this._delay=0;this._repeat=0;this._repeatDelay=0;this._yoyo=!1;this.forward=!0;this._reverse=!1;this.accumulator=0;this.nextTick=0;this.repeatCounter=0;this.pendingRepeat=!1;this._paused=!1;this._wasPlaying=!1;this._pendingStop=0;this._pendingStopValue},chain:function chain(e){if(e instanceof a){e=e.key}this.nextAnim=e;return this.parent},setDelay:function setDelay(e){if(e===void 0){e=0}this._delay=e;return this.parent},getDelay:function getDelay(){return this._delay},delayedPlay:function delayedPlay(e,t,i){this.play(t,!0,i);this.nextTick+=e;return this.parent},getCurrentKey:function getCurrentKey(){if(this.currentAnim){return this.currentAnim.key}},load:function load(e,t){if(t===void 0){t=0}if(this.isPlaying){this.stop()}this.animationManager.load(this,e,t);return this.parent},pause:function pause(e){if(!this._paused){this._paused=!0;this._wasPlaying=this.isPlaying;this.isPlaying=!1}if(e!==void 0){this.updateFrame(e)}return this.parent},resume:function resume(e){if(this._paused){this._paused=!1;this.isPlaying=this._wasPlaying}if(e!==void 0){this.updateFrame(e)}return this.parent},isPaused:{get:function get(){return this._paused}},play:function play(e,t,i){if(t===void 0){t=!1}if(i===void 0){i=0}if(e instanceof a){e=e.key}if(t&&this.isPlaying&&this.currentAnim.key===e){return this.parent}this.forward=!0;this._reverse=!1;this._paused=!1;this._wasPlaying=!0;return this._startAnimation(e,i)},playReverse:function playReverse(e,t,i){if(t===void 0){t=!1}if(i===void 0){i=0}if(e instanceof a){e=e.key}if(t&&this.isPlaying&&this.currentAnim.key===e){return this.parent}this.forward=!1;this._reverse=!0;return this._startAnimation(e,i)},_startAnimation:function _startAnimation(e,t){this.load(e,t);var i=this.currentAnim,a=this.parent;if(!i){return a}this.repeatCounter=-1===this._repeat?Number.MAX_VALUE:this._repeat;i.getFirstTick(this);this.isPlaying=!0;this.pendingRepeat=!1;if(i.showOnStart){a.visible=!0}var n=this.currentFrame;i.emit(r.ANIMATION_START,i,n,a);a.emit(r.SPRITE_ANIMATION_KEY_START+e,i,n,a);a.emit(r.SPRITE_ANIMATION_START,i,n,a);return a},reverse:function reverse(){if(this.isPlaying){this._reverse=!this._reverse;this.forward=!this.forward}return this.parent},getProgress:function getProgress(){var e=this.currentFrame.progress;if(!this.forward){e=1-e}return e},setProgress:function setProgress(e){if(!this.forward){e=1-e}this.setCurrentFrame(this.currentAnim.getFrameByProgress(e));return this.parent},remove:function remove(e,t){if(t===void 0){t=this.currentAnim}if(this.isPlaying&&t.key===this.currentAnim.key){this.stop();this.setCurrentFrame(this.currentAnim.frames[0])}},getRepeat:function getRepeat(){return this._repeat},setRepeat:function setRepeat(e){this._repeat=e;this.repeatCounter=-1===e?Number.MAX_VALUE:e;return this.parent},getRepeatDelay:function getRepeatDelay(){return this._repeatDelay},setRepeatDelay:function setRepeatDelay(e){this._repeatDelay=e;return this.parent},restart:function restart(e){if(e===void 0){e=!1}var t=this.currentAnim;t.getFirstTick(this,e);this.forward=!0;this.isPlaying=!0;this.pendingRepeat=!1;this._paused=!1;this.updateFrame(t.frames[0]);var i=this.parent,a=this.currentFrame;t.emit(r.ANIMATION_RESTART,t,a,i);i.emit(r.SPRITE_ANIMATION_KEY_RESTART+t.key,t,a,i);i.emit(r.SPRITE_ANIMATION_RESTART,t,a,i);return this.parent},stop:function stop(){this._pendingStop=0;this.isPlaying=!1;var e=this.parent,t=this.currentAnim,i=this.currentFrame;if(t){t.emit(r.ANIMATION_COMPLETE,t,i,e);e.emit(r.SPRITE_ANIMATION_KEY_COMPLETE+t.key,t,i,e);e.emit(r.SPRITE_ANIMATION_COMPLETE,t,i,e)}if(this.nextAnim){var a=this.nextAnim;this.nextAnim=null;this.play(a)}return e},stopAfterDelay:function stopAfterDelay(e){this._pendingStop=1;this._pendingStopValue=e;return this.parent},stopOnRepeat:function stopOnRepeat(){this._pendingStop=2;return this.parent},stopOnFrame:function stopOnFrame(e){this._pendingStop=3;this._pendingStopValue=e;return this.parent},setTimeScale:function setTimeScale(e){if(e===void 0){e=1}this._timeScale=e;return this.parent},getTimeScale:function getTimeScale(){return this._timeScale},getTotalFrames:function getTotalFrames(){return this.currentAnim.frames.length},update:function update(e,t){if(!this.currentAnim||!this.isPlaying||this.currentAnim.paused){return}this.accumulator+=t*this._timeScale;if(1===this._pendingStop){this._pendingStopValue-=t;if(0>=this._pendingStopValue){return this.currentAnim.completeAnimation(this)}}if(this.accumulator>=this.nextTick){this.currentAnim.setFrame(this)}},setCurrentFrame:function setCurrentFrame(e){var t=this.parent;this.currentFrame=e;t.texture=e.frame.texture;t.frame=e.frame;if(t.isCropped){t.frame.updateCropUVs(t._crop,t.flipX,t.flipY)}t.setSizeToFrame();if(e.frame.customPivot){t.setOrigin(e.frame.pivotX,e.frame.pivotY)}else{t.updateDisplayOrigin()}return t},updateFrame:function updateFrame(e){var t=this.setCurrentFrame(e);if(this.isPlaying){if(e.setAlpha){t.alpha=e.alpha}var i=this.currentAnim;t.emit(r.SPRITE_ANIMATION_KEY_UPDATE+i.key,i,e,t);t.emit(r.SPRITE_ANIMATION_UPDATE,i,e,t);if(3===this._pendingStop&&this._pendingStopValue===e){this.currentAnim.completeAnimation(this)}}},nextFrame:function nextFrame(){if(this.currentAnim){this.currentAnim.nextFrame(this)}return this.parent},previousFrame:function previousFrame(){if(this.currentAnim){this.currentAnim.previousFrame(this)}return this.parent},setYoyo:function setYoyo(e){if(e===void 0){e=!1}this._yoyo=e;return this.parent},getYoyo:function getYoyo(){return this._yoyo},destroy:function destroy(){this.animationManager.off(r.REMOVE_ANIMATION,this.remove,this);this.animationManager=null;this.parent=null;this.currentAnim=null;this.currentFrame=null}});e.exports=o},function(e,t,i){var a=i(500),n=i(48),r=i(0),o=i(29),s=i(501),l=i(92),d=i(32),p=new r({initialize:function(e){this.game=e;this.type=o.CANVAS;this.drawCount=0;this.width=0;this.height=0;this.config={clearBeforeRender:e.config.clearBeforeRender,backgroundColor:e.config.backgroundColor,resolution:e.config.resolution,antialias:e.config.antialias,roundPixels:e.config.roundPixels};this.gameCanvas=e.canvas;var t={alpha:e.config.transparent,desynchronized:e.config.desynchronized};this.gameContext=this.game.config.context?this.game.config.context:this.gameCanvas.getContext("2d",t);this.currentContext=this.gameContext;this.antialias=e.config.antialias;this.blendModes=s();this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92};this._tempMatrix1=new d;this._tempMatrix2=new d;this._tempMatrix3=new d;this._tempMatrix4=new d;this.init()},init:function init(){this.game.scale.on(l.RESIZE,this.onResize,this);var e=this.game.scale.baseSize;this.resize(e.width,e.height)},onResize:function onResize(e,t){if(t.width!==this.width||t.height!==this.height){this.resize(t.width,t.height)}},resize:function resize(e,t){this.width=e;this.height=t},resetTransform:function resetTransform(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function setBlendMode(e){this.currentContext.globalCompositeOperation=e;return this},setContext:function setContext(e){this.currentContext=e?e:this.gameContext;return this},setAlpha:function setAlpha(e){this.currentContext.globalAlpha=e;return this},preRender:function preRender(){var e=this.gameContext,t=this.config,i=this.width,a=this.height;e.globalAlpha=1;e.globalCompositeOperation="source-over";e.setTransform(1,0,0,1,0,0);if(t.clearBeforeRender){e.clearRect(0,0,i,a)}if(!t.transparent){e.fillStyle=t.backgroundColor.rgba;e.fillRect(0,0,i,a)}e.save();this.drawCount=0},render:function render(e,t,a,r){var o=t.list,s=o.length,l=r._cx,d=r._cy,p=r._cw,c=r._ch,u=r.renderToTexture?r.context:e.sys.context;u.save();if(this.game.scene.customViewports){u.beginPath();u.rect(l,d,p,c);u.clip()}this.currentContext=u;var g=r.mask;if(g){g.preRenderCanvas(this,null,r._maskCamera)}if(!r.transparent){u.fillStyle=r.backgroundColor.rgba;u.fillRect(l,d,p,c)}u.globalAlpha=r.alpha;u.globalCompositeOperation="source-over";this.drawCount+=o.length;if(r.renderToTexture){r.emit(n.PRE_RENDER,r)}r.matrix.copyToContext(u);for(var h=0,m;h<s;h++){m=o[h];if(!m.willRender(r)){continue}if(m.mask){m.mask.preRenderCanvas(this,m,r)}m.renderCanvas(this,m,a,r);if(m.mask){m.mask.postRenderCanvas(this,m,r)}}u.setTransform(1,0,0,1,0,0);u.globalCompositeOperation="source-over";u.globalAlpha=1;r.flashEffect.postRenderCanvas(u);r.fadeEffect.postRenderCanvas(u);r.dirty=!1;if(g){g.postRenderCanvas(this)}u.restore();if(r.renderToTexture){r.emit(n.POST_RENDER,r);e.sys.context.drawImage(r.canvas,l,d)}},postRender:function postRender(){var e=this.gameContext;e.restore();var t=this.snapshotState;if(t.callback){a(this.gameCanvas,t);t.callback=null}},snapshotCanvas:function snapshotCanvas(e,t,i,n,r,o,s,l,d){if(i===void 0){i=!1}this.snapshotArea(n,r,o,s,t,l,d);var p=this.snapshotState;p.getPixel=i;a(this.canvas,p);p.callback=null;return this},snapshot:function snapshot(e,t,i){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,e,t,i)},snapshotArea:function snapshotArea(e,t,i,a,n,r,o){var s=this.snapshotState;s.callback=n;s.type=r;s.encoder=o;s.getPixel=!1;s.x=e;s.y=t;s.width=Math.min(i,this.gameCanvas.width);s.height=Math.min(a,this.gameCanvas.height);return this},snapshotPixel:function snapshotPixel(e,t,i){this.snapshotArea(e,t,1,1,i);this.snapshotState.getPixel=!0;return this},batchSprite:function batchSprite(e,t,i,a){var n=i.alpha*e.alpha;if(0==n){return}var r=this.currentContext,o=this._tempMatrix1,s=this._tempMatrix2,l=this._tempMatrix3,d=t.canvasData,p=d.x,c=d.y,u=t.cutWidth,g=t.cutHeight,h=t.customPivot,m=t.source.resolution,f=e.displayOriginX,T=e.displayOriginY,v=-f+t.x,b=-T+t.y;if(e.isCropped){var E=e._crop;if(E.flipX!==e.flipX||E.flipY!==e.flipY){t.updateCropUVs(E,e.flipX,e.flipY)}u=E.cw;g=E.ch;p=E.cx;c=E.cy;v=-f+E.x;b=-T+E.y;if(e.flipX){if(0<=v){v=-(v+u)}else if(0>v){v=Math.abs(v)-u}}if(e.flipY){if(0<=b){b=-(b+g)}else if(0>b){b=Math.abs(b)-g}}}var S=1,_=1;if(e.flipX){if(!h){v+=-t.realWidth+2*f}S=-1}if(e.flipY){if(!h){b+=-t.realHeight+2*T}_=-1}s.applyITRS(e.x,e.y,e.rotation,e.scaleX*S,e.scaleY*_);o.copyFrom(i.matrix);if(a){o.multiplyWithOffset(a,-i.scrollX*e.scrollFactorX,-i.scrollY*e.scrollFactorY);s.e=e.x;s.f=e.y;o.multiply(s,l)}else{s.e-=i.scrollX*e.scrollFactorX;s.f-=i.scrollY*e.scrollFactorY;o.multiply(s,l)}r.save();l.setToContext(r);r.globalCompositeOperation=this.blendModes[e.blendMode];r.globalAlpha=n;r.imageSmoothingEnabled=!(!this.antialias||t.source.scaleMode);r.drawImage(t.source.image,p,c,u,g,v,b,u/m,g/m);r.restore()},destroy:function destroy(){this.gameCanvas=null;this.gameContext=null;this.game=null}});e.exports=p},function(e,t,i){var a=i(26),n=i(33),r=i(2);e.exports=function CanvasSnapshot(e,t){var i=r(t,"callback"),o=r(t,"type","image/png"),s=r(t,"encoder",.92),l=Math.abs(Math.round(r(t,"x",0))),d=Math.abs(Math.round(r(t,"y",0))),p=r(t,"width",e.width),c=r(t,"height",e.height),u=r(t,"getPixel",!1);if(u){var g=e.getContext("2d"),h=g.getImageData(l,d,1,1),m=h.data;i.call(null,new n(m[0],m[1],m[2],m[3]/255))}else if(0!==l||0!==d||p!==e.width||c!==e.height){var y=a.createWebGL(this,p,c),x=y.getContext("2d");x.drawImage(e,l,d,p,c,0,0,p,c);var f=new Image;f.onerror=function(){i.call(null);a.remove(y)};f.onload=function(){i.call(null,f);a.remove(y)};f.src=y.toDataURL(o,s)}else{var T=new Image;T.onerror=function(){i.call(null)};T.onload=function(){i.call(null,T)};T.src=e.toDataURL(o,s)}}},function(e,t,i){var a=i(52),n=i(313);e.exports=function GetBlendModes(){var e=[],t=n.supportNewBlendModes,i="source-over";e[a.NORMAL]=i;e[a.ADD]="lighter";e[a.MULTIPLY]=t?"multiply":i;e[a.SCREEN]=t?"screen":i;e[a.OVERLAY]=t?"overlay":i;e[a.DARKEN]=t?"darken":i;e[a.LIGHTEN]=t?"lighten":i;e[a.COLOR_DODGE]=t?"color-dodge":i;e[a.COLOR_BURN]=t?"color-burn":i;e[a.HARD_LIGHT]=t?"hard-light":i;e[a.SOFT_LIGHT]=t?"soft-light":i;e[a.DIFFERENCE]=t?"difference":i;e[a.EXCLUSION]=t?"exclusion":i;e[a.HUE]=t?"hue":i;e[a.SATURATION]=t?"saturation":i;e[a.COLOR]=t?"color":i;e[a.LUMINOSITY]=t?"luminosity":i;e[a.ERASE]="destination-out";e[a.SOURCE_IN]="source-in";e[a.SOURCE_OUT]="source-out";e[a.SOURCE_ATOP]="source-atop";e[a.DESTINATION_OVER]="destination-over";e[a.DESTINATION_IN]="destination-in";e[a.DESTINATION_OUT]="destination-out";e[a.DESTINATION_ATOP]="destination-atop";e[a.LIGHTER]="lighter";e[a.COPY]="copy";e[a.XOR]="xor";return e}},function(e,t,i){var a=i(91),n=i(48),r=i(0),o=i(29),s=i(18),l=i(118),d=i(1),p=i(92),c=i(79),u=i(119),g=i(32),h=i(10),m=i(503),y=i(504),x=i(505),f=i(235),T=new r({initialize:function(e){var t=e.config,i={alpha:t.transparent,desynchronized:t.desynchronized,depth:!1,antialias:t.antialiasGL,premultipliedAlpha:t.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:t.failIfMajorPerformanceCaveat,powerPreference:t.powerPreference};this.config={clearBeforeRender:t.clearBeforeRender,antialias:t.antialias,backgroundColor:t.backgroundColor,contextCreation:i,resolution:t.resolution,roundPixels:t.roundPixels,maxTextures:t.maxTextures,maxTextureSize:t.maxTextureSize,batchSize:t.batchSize,maxLights:t.maxLights,mipmapFilter:t.mipmapFilter};this.game=e;this.type=o.WEBGL;this.width=0;this.height=0;this.canvas=e.canvas;this.blendModes=[];this.nativeTextures=[];this.contextLost=!1;this.pipelines=null;this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0};this.currentActiveTextureUnit=0;this.currentTextures=Array(16);this.currentFramebuffer=null;this.currentPipeline=null;this.currentProgram=null;this.currentVertexBuffer=null;this.currentIndexBuffer=null;this.currentBlendMode=1/0;this.currentScissorEnabled=!1;this.currentScissor=null;this.scissorStack=[];this.contextLostHandler=d;this.contextRestoredHandler=d;this.gl=null;this.supportedExtensions=null;this.extensions={};this.glFormats=[];this.compression={ETC1:!1,PVRTC:!1,S3TC:!1};this.drawingBufferHeight=0;this.blankTexture=null;this.defaultCamera=new a(0,0,0,0);this._tempMatrix1=new g;this._tempMatrix2=new g;this._tempMatrix3=new g;this._tempMatrix4=new g;this.maskCount=0;this.maskStack=[];this.currentMask={mask:null,camera:null};this.currentCameraMask={mask:null,camera:null};this.glFuncMap=null;this.currentType="";this.newType=!1;this.nextTypeMatch=!1;this.mipmapFilter=null;this.init(this.config)},init:function init(e){var t,a=this.game,n=this.canvas,r=e.backgroundColor;if(a.config.context){t=a.config.context}else{t=n.getContext("webgl",e.contextCreation)||n.getContext("experimental-webgl",e.contextCreation)}if(!t||t.isContextLost()){this.contextLost=!0;throw new Error("WebGL unsupported")}this.gl=t;var l=this;this.contextLostHandler=function(e){l.contextLost=!0;l.game.events.emit(s.CONTEXT_LOST,l);e.preventDefault()};this.contextRestoredHandler=function(){l.contextLost=!1;l.init(l.config);l.game.events.emit(s.CONTEXT_RESTORED,l)};n.addEventListener("webglcontextlost",this.contextLostHandler,!1);n.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1);a.context=t;for(var d=0;27>=d;d++){this.blendModes.push({func:[t.ONE,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_ADD})}this.blendModes[1].func=[t.ONE,t.DST_ALPHA];this.blendModes[2].func=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA];this.blendModes[3].func=[t.ONE,t.ONE_MINUS_SRC_COLOR];this.blendModes[17]={func:[t.ZERO,t.ONE_MINUS_SRC_ALPHA],equation:t.FUNC_REVERSE_SUBTRACT};this.glFormats[0]=t.BYTE;this.glFormats[1]=t.SHORT;this.glFormats[2]=t.UNSIGNED_BYTE;this.glFormats[3]=t.UNSIGNED_SHORT;this.glFormats[4]=t.FLOAT;this.glFuncMap={mat2:{func:t.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:t.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:t.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:t.uniform1f,length:1},"1fv":{func:t.uniform1fv,length:1},"1i":{func:t.uniform1i,length:1},"1iv":{func:t.uniform1iv,length:1},"2f":{func:t.uniform2f,length:2},"2fv":{func:t.uniform2fv,length:1},"2i":{func:t.uniform2i,length:2},"2iv":{func:t.uniform2iv,length:1},"3f":{func:t.uniform3f,length:3},"3fv":{func:t.uniform3fv,length:1},"3i":{func:t.uniform3i,length:3},"3iv":{func:t.uniform3iv,length:1},"4f":{func:t.uniform4f,length:4},"4fv":{func:t.uniform4fv,length:1},"4i":{func:t.uniform4i,length:4},"4iv":{func:t.uniform4iv,length:1}};var p=t.getSupportedExtensions();if(!e.maxTextures){e.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}if(!e.maxTextureSize){e.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}var c="WEBKIT_WEBGL_compressed_texture_";this.compression.ETC1=t.getExtension("WEBGL_compressed_texture_etc1")||t.getExtension(c+"etc1");this.compression.PVRTC=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension(c+"pvrtc");this.compression.S3TC=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension(c+"s3tc");this.supportedExtensions=p;t.disable(t.DEPTH_TEST);t.disable(t.CULL_FACE);t.enable(t.BLEND);t.clearColor(r.redGL,r.greenGL,r.blueGL,r.alphaGL);this.mipmapFilter=t[e.mipmapFilter];for(var g=0;g<this.currentTextures.length;++g){this.currentTextures[g]=null}this.pipelines={};this.addPipeline("TextureTintPipeline",new f({game:a,renderer:this}));this.addPipeline("BitmapMaskPipeline",new y({game:a,renderer:this}));this.addPipeline("Light2D",new x({game:a,renderer:this,maxLights:e.maxLights}));this.setBlendMode(o.BlendModes.NORMAL);a.textures.once(u.READY,this.boot,this);return this},boot:function boot(){for(var e in this.pipelines){this.pipelines[e].boot()}var t=this.game.textures.getFrame("__DEFAULT");this.pipelines.TextureTintPipeline.currentFrame=t;this.blankTexture=t;var i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,null);i.enable(i.SCISSOR_TEST);this.setPipeline(this.pipelines.TextureTintPipeline);this.game.scale.on(p.RESIZE,this.onResize,this);var a=this.game.scale.baseSize;this.resize(a.width,a.height,this.game.scale.resolution)},onResize:function onResize(e,t,i,a){if(t.width!==this.width||t.height!==this.height||a!==this.resolution){this.resize(t.width,t.height,a)}},resize:function resize(e,t,i){var a=this.gl,n=this.pipelines;this.width=e;this.height=t;this.resolution=i;a.viewport(0,0,e,t);for(var r in n){n[r].resize(e,t,i)}this.drawingBufferHeight=a.drawingBufferHeight;a.scissor(0,a.drawingBufferHeight-t,e,t);this.defaultCamera.setSize(e,t);return this},hasExtension:function hasExtension(e){return this.supportedExtensions?this.supportedExtensions.indexOf(e):!1},getExtension:function getExtension(e){if(!this.hasExtension(e)){return null}if(!(e in this.extensions)){this.extensions[e]=this.gl.getExtension(e)}return this.extensions[e]},flush:function flush(){if(this.currentPipeline){this.currentPipeline.flush()}},hasPipeline:function hasPipeline(e){return e in this.pipelines},getPipeline:function getPipeline(e){return this.hasPipeline(e)?this.pipelines[e]:null},removePipeline:function removePipeline(e){delete this.pipelines[e];return this},addPipeline:function addPipeline(e,t){if(!this.hasPipeline(e)){this.pipelines[e]=t}else{console.warn("Pipeline exists: "+e)}t.name=e;this.pipelines[e].resize(this.width,this.height,this.config.resolution);return t},pushScissor:function pushScissor(e,t,i,a,n){if(n===void 0){n=this.drawingBufferHeight}var r=this.scissorStack,o=[e,t,i,a];r.push(o);this.setScissor(e,t,i,a,n);this.currentScissor=o;return o},setScissor:function(e,t,i,a,n){if(n===void 0){n=this.drawingBufferHeight}var r=this.gl,o=this.currentScissor,s=0<i&&0<a;if(o&&s){var l=o[0],d=o[1],p=o[2],c=o[3];s=l!==e||d!==t||p!==i||c!==a}if(s){this.flush();r.scissor(e,n-t-a,i,a)}},popScissor:function popScissor(){var e=this.scissorStack;e.pop();var t=e[e.length-1];if(t){this.setScissor(t[0],t[1],t[2],t[3])}this.currentScissor=t},setPipeline:function setPipeline(e,t){if(this.currentPipeline!==e||this.currentPipeline.vertexBuffer!==this.currentVertexBuffer||this.currentPipeline.program!==this.currentProgram){this.flush();this.currentPipeline=e;this.currentPipeline.bind()}this.currentPipeline.onBind(t);return this.currentPipeline},hasActiveStencilMask:function hasActiveStencilMask(){var e=this.currentMask.mask,t=this.currentCameraMask.mask;return e&&e.isStencil||t&&t.isStencil},rebindPipeline:function rebindPipeline(e){var t=this.gl;t.disable(t.DEPTH_TEST);t.disable(t.CULL_FACE);if(this.hasActiveStencilMask()){t.clear(t.DEPTH_BUFFER_BIT)}else{t.disable(t.STENCIL_TEST);t.clear(t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}t.viewport(0,0,this.width,this.height);this.setBlendMode(0,!0);t.activeTexture(t.TEXTURE0);t.bindTexture(t.TEXTURE_2D,this.blankTexture.glTexture);this.currentActiveTextureUnit=0;this.currentTextures[0]=this.blankTexture.glTexture;this.currentPipeline=e;this.currentPipeline.bind();this.currentPipeline.onBind()},clearPipeline:function clearPipeline(){this.flush();this.currentPipeline=null;this.currentProgram=null;this.currentVertexBuffer=null;this.currentIndexBuffer=null;this.setBlendMode(0,!0)},setBlendMode:function setBlendMode(e,t){if(t===void 0){t=!1}var i=this.gl,a=this.blendModes[e];if(t||e!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==e){this.flush();i.enable(i.BLEND);i.blendEquation(a.equation);if(2<a.func.length){i.blendFuncSeparate(a.func[0],a.func[1],a.func[2],a.func[3])}else{i.blendFunc(a.func[0],a.func[1])}this.currentBlendMode=e;return!0}return!1},addBlendMode:function addBlendMode(e,t){var i=this.blendModes.push({func:e,equation:t});return i-1},updateBlendMode:function updateBlendMode(e,t,i){if(this.blendModes[e]){this.blendModes[e].func=t;if(i){this.blendModes[e].equation=i}}return this},removeBlendMode:function removeBlendMode(e){if(17<e&&this.blendModes[e]){this.blendModes.splice(e,1)}return this},setBlankTexture:function setBlankTexture(e){if(e===void 0){e=!1}if(e||0!==this.currentActiveTextureUnit||!this.currentTextures[0]){this.setTexture2D(this.blankTexture.glTexture,0)}},setTexture2D:function setTexture2D(e,t,i){if(i===void 0){i=!0}var a=this.gl;if(e!==this.currentTextures[t]){if(i){this.flush()}if(this.currentActiveTextureUnit!==t){a.activeTexture(a.TEXTURE0+t);this.currentActiveTextureUnit=t}a.bindTexture(a.TEXTURE_2D,e);this.currentTextures[t]=e}return this},setFramebuffer:function setFramebuffer(e,t){if(t===void 0){t=!1}var i=this.gl,a=this.width,n=this.height;if(e!==this.currentFramebuffer){if(e&&e.renderTexture){a=e.renderTexture.width;n=e.renderTexture.height}else{this.flush()}i.bindFramebuffer(i.FRAMEBUFFER,e);i.viewport(0,0,a,n);if(t){if(e){this.drawingBufferHeight=n;this.pushScissor(0,0,a,n)}else{this.drawingBufferHeight=this.height;this.popScissor()}}this.currentFramebuffer=e}return this},setProgram:function setProgram(e){var t=this.gl;if(e!==this.currentProgram){this.flush();t.useProgram(e);this.currentProgram=e}return this},setVertexBuffer:function setVertexBuffer(e){var t=this.gl;if(e!==this.currentVertexBuffer){this.flush();t.bindBuffer(t.ARRAY_BUFFER,e);this.currentVertexBuffer=e}return this},setIndexBuffer:function setIndexBuffer(e){var t=this.gl;if(e!==this.currentIndexBuffer){this.flush();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e);this.currentIndexBuffer=e}return this},createTextureFromSource:function createTextureFromSource(e,t,i,a){var n=this.gl,r=n.NEAREST,s=n.NEAREST,d=n.CLAMP_TO_EDGE,p=null;t=e?e.width:t;i=e?e.height:i;var c=l(t,i);if(c){d=n.REPEAT}if(a===o.ScaleModes.LINEAR&&this.config.antialias){r=c?this.mipmapFilter:n.LINEAR;s=n.LINEAR}if(!e&&"number"==typeof t&&"number"==typeof i){p=this.createTexture2D(0,r,s,d,d,n.RGBA,null,t,i)}else{p=this.createTexture2D(0,r,s,d,d,n.RGBA,e)}return p},createTexture2D:function createTexture2D(e,t,i,a,n,r,o,s,d,p,c,u){p=p===void 0||null===p?!0:p;if(c===void 0){c=!1}if(u===void 0){u=!1}var g=this.gl,h=g.createTexture();this.setTexture2D(h,0);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,t);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,i);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,n);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,a);g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,u);if(null===o||o===void 0){g.texImage2D(g.TEXTURE_2D,e,r,s,d,0,r,g.UNSIGNED_BYTE,null)}else{if(!c){s=o.width;d=o.height}g.texImage2D(g.TEXTURE_2D,e,r,r,g.UNSIGNED_BYTE,o)}if(l(s,d)){g.generateMipmap(g.TEXTURE_2D)}this.setTexture2D(null,0);h.isAlphaPremultiplied=p;h.isRenderTexture=!1;h.width=s;h.height=d;this.nativeTextures.push(h);return h},createFramebuffer:function createFramebuffer(e,t,i,a){var n=this.gl,r=n.createFramebuffer(),o=0;this.setFramebuffer(r);if(a){var s=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,s);n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e,t);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,s)}i.isRenderTexture=!0;i.isAlphaPremultiplied=!1;n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,i,0);o=n.checkFramebufferStatus(n.FRAMEBUFFER);if(o!==n.FRAMEBUFFER_COMPLETE){throw new Error("Framebuffer incomplete. Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[o])}r.renderTexture=i;this.setFramebuffer(null);return r},createProgram:function createProgram(e,t){var i=this.gl,a=i.createProgram(),n=i.createShader(i.VERTEX_SHADER),r=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(n,e);i.shaderSource(r,t);i.compileShader(n);i.compileShader(r);if(!i.getShaderParameter(n,i.COMPILE_STATUS)){throw new Error("Failed to compile Vertex Shader:\n"+i.getShaderInfoLog(n))}if(!i.getShaderParameter(r,i.COMPILE_STATUS)){throw new Error("Failed to compile Fragment Shader:\n"+i.getShaderInfoLog(r))}i.attachShader(a,n);i.attachShader(a,r);i.linkProgram(a);if(!i.getProgramParameter(a,i.LINK_STATUS)){throw new Error("Failed to link program:\n"+i.getProgramInfoLog(a))}return a},createVertexBuffer:function createVertexBuffer(e,t){var i=this.gl,a=i.createBuffer();this.setVertexBuffer(a);i.bufferData(i.ARRAY_BUFFER,e,t);this.setVertexBuffer(null);return a},createIndexBuffer:function createIndexBuffer(e,t){var i=this.gl,a=i.createBuffer();this.setIndexBuffer(a);i.bufferData(i.ELEMENT_ARRAY_BUFFER,e,t);this.setIndexBuffer(null);return a},deleteTexture:function deleteTexture(e){var t=this.nativeTextures.indexOf(e);if(-1!==t){c(this.nativeTextures,t)}this.gl.deleteTexture(e);if(this.currentTextures[0]===e&&!this.game.pendingDestroy){this.setBlankTexture(!0)}return this},deleteFramebuffer:function deleteFramebuffer(e){this.gl.deleteFramebuffer(e);return this},deleteProgram:function deleteProgram(e){this.gl.deleteProgram(e);return this},deleteBuffer:function deleteBuffer(e){this.gl.deleteBuffer(e);return this},preRenderCamera:function preRenderCamera(e){var t=e._cx,i=e._cy,a=e._cw,r=e._ch,o=this.pipelines.TextureTintPipeline,s=e.backgroundColor;if(e.renderToTexture){this.flush();this.pushScissor(t,i,a,-r);this.setFramebuffer(e.framebuffer);var l=this.gl;l.clearColor(0,0,0,0);l.clear(l.COLOR_BUFFER_BIT);o.projOrtho(t,a+t,i,r+i,-1e3,1e3);if(e.mask){this.currentCameraMask.mask=e.mask;this.currentCameraMask.camera=e._maskCamera;e.mask.preRenderWebGL(this,e,e._maskCamera)}if(0<s.alphaGL){o.drawFillRect(t,i,a+t,r+i,h.getTintFromFloats(s.redGL,s.greenGL,s.blueGL,1),s.alphaGL)}e.emit(n.PRE_RENDER,e)}else{this.pushScissor(t,i,a,r);if(e.mask){this.currentCameraMask.mask=e.mask;this.currentCameraMask.camera=e._maskCamera;e.mask.preRenderWebGL(this,e,e._maskCamera)}if(0<s.alphaGL){o.drawFillRect(t,i,a,r,h.getTintFromFloats(s.redGL,s.greenGL,s.blueGL,1),s.alphaGL)}}},getCurrentStencilMask:function getCurrentStencilMask(){var e=null,t=this.maskStack,i=this.currentCameraMask;if(0<t.length){e=t[t.length-1]}else if(i.mask&&i.mask.isStencil){e=i}return e},postRenderCamera:function postRenderCamera(e){var t=this.pipelines.TextureTintPipeline;e.flashEffect.postRenderWebGL(t,h.getTintFromFloats);e.fadeEffect.postRenderWebGL(t,h.getTintFromFloats);e.dirty=!1;this.popScissor();if(e.renderToTexture){t.flush();this.setFramebuffer(null);e.emit(n.POST_RENDER,e);t.projOrtho(0,t.width,t.height,0,-1e3,1e3);var i=h.getTintAppendFloatAlpha,a=e.pipeline?e.pipeline:t;a.batchTexture(e,e.glTexture,e.width,e.height,e.x,e.y,e.width,e.height,e.zoom,e.zoom,e.rotation,e.flipX,!e.flipY,1,1,0,0,0,0,e.width,e.height,i(e._tintTL,e._alphaTL),i(e._tintTR,e._alphaTR),i(e._tintBL,e._alphaBL),i(e._tintBR,e._alphaBR),e._isTinted&&e.tintFill,0,0,this.defaultCamera,null);this.setBlankTexture(!0)}if(e.mask){this.currentCameraMask.mask=null;e.mask.postRenderWebGL(this,e._maskCamera)}},preRender:function preRender(){if(this.contextLost){return}var e=this.gl,t=this.pipelines;e.bindFramebuffer(e.FRAMEBUFFER,null);if(this.config.clearBeforeRender){var i=this.config.backgroundColor;e.clearColor(i.redGL,i.greenGL,i.blueGL,i.alphaGL);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT)}e.enable(e.SCISSOR_TEST);for(var a in t){t[a].onPreRender()}this.currentScissor=[0,0,this.width,this.height];this.scissorStack=[this.currentScissor];if(this.game.scene.customViewports){e.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height)}this.currentMask.mask=null;this.currentCameraMask.mask=null;this.maskStack.length=0;this.setPipeline(this.pipelines.TextureTintPipeline)},render:function render(e,t,a,n){if(this.contextLost){return}var r=t.list,s=r.length,l=this.pipelines;for(var d in l){l[d].onRender(e,n)}this.preRenderCamera(n);if(0===s){this.setBlendMode(o.BlendModes.NORMAL);this.postRenderCamera(n);return}this.currentType="";for(var p=this.currentMask,c=0,u;c<s;c++){u=r[c];if(!u.willRender(n)){continue}if(u.blendMode!==this.currentBlendMode){this.setBlendMode(u.blendMode)}var g=u.mask;p=this.currentMask;if(p.mask&&p.mask!==g){p.mask.postRenderWebGL(this,p.camera)}if(g&&p.mask!==g){g.preRenderWebGL(this,u,n)}var h=u.type;if(h!==this.currentType){this.newType=!0;this.currentType=h}this.nextTypeMatch=c<s-1?r[c+1].type===this.currentType:!1;u.renderWebGL(this,u,a,n);this.newType=!1}p=this.currentMask;if(p.mask){p.mask.postRenderWebGL(this,p.camera)}this.setBlendMode(o.BlendModes.NORMAL);this.postRenderCamera(n)},postRender:function postRender(){if(this.contextLost){return}this.flush();var e=this.snapshotState;if(e.callback){m(this.canvas,e);e.callback=null}var t=this.pipelines;for(var i in t){t[i].onPostRender()}},snapshot:function snapshot(e,t,i){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,e,t,i)},snapshotArea:function snapshotArea(e,t,i,a,n,r,o){var s=this.snapshotState;s.callback=n;s.type=r;s.encoder=o;s.getPixel=!1;s.x=e;s.y=t;s.width=Math.min(i,this.gl.drawingBufferWidth);s.height=Math.min(a,this.gl.drawingBufferHeight);return this},snapshotPixel:function snapshotPixel(e,t,i){this.snapshotArea(e,t,1,1,i);this.snapshotState.getPixel=!0;return this},snapshotFramebuffer:function snapshotFramebuffer(e,t,i,a,n,r,o,s,l,d,p){if(n===void 0){n=!1}if(r===void 0){r=0}if(o===void 0){o=0}if(s===void 0){s=t}if(l===void 0){l=i}var c=this.currentFramebuffer;this.snapshotArea(r,o,s,l,a,d,p);var u=this.snapshotState;u.getPixel=n;u.isFramebuffer=!0;u.bufferWidth=t;u.bufferHeight=i;this.setFramebuffer(e);m(this.canvas,u);this.setFramebuffer(c);u.callback=null;u.isFramebuffer=!1;return this},canvasToTexture:function canvasToTexture(e,t,i,a){if(i===void 0){i=!1}if(a===void 0){a=!1}if(!t){return this.createCanvasTexture(e,i,a)}else{return this.updateCanvasTexture(e,t,a)}},createCanvasTexture:function createCanvasTexture(e,t,i){if(t===void 0){t=!1}if(i===void 0){i=!1}var a=this.gl,n=a.NEAREST,r=a.NEAREST,o=e.width,s=e.height,d=a.CLAMP_TO_EDGE,p=l(o,s);if(!t&&p){d=a.REPEAT}if(this.config.antialias){n=p?this.mipmapFilter:a.LINEAR;r=a.LINEAR}return this.createTexture2D(0,n,r,d,d,a.RGBA,e,o,s,!0,!1,i)},updateCanvasTexture:function updateCanvasTexture(e,t,i){if(i===void 0){i=!1}var a=this.gl,n=e.width,r=e.height;if(0<n&&0<r){this.setTexture2D(t,0);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,i);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e);t.width=n;t.height=r;this.setTexture2D(null,0)}return t},createVideoTexture:function createVideoTexture(e,t,i){if(t===void 0){t=!1}if(i===void 0){i=!1}var a=this.gl,n=a.NEAREST,r=a.NEAREST,o=e.videoWidth,s=e.videoHeight,d=a.CLAMP_TO_EDGE,p=l(o,s);if(!t&&p){d=a.REPEAT}if(this.config.antialias){n=p?this.mipmapFilter:a.LINEAR;r=a.LINEAR}return this.createTexture2D(0,n,r,d,d,a.RGBA,e,o,s,!0,!0,i)},updateVideoTexture:function updateVideoTexture(e,t,i){if(i===void 0){i=!1}var a=this.gl,n=e.videoWidth,r=e.videoHeight;if(0<n&&0<r){this.setTexture2D(t,0);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,i);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e);t.width=n;t.height=r;this.setTexture2D(null,0)}return t},setTextureFilter:function setTextureFilter(e,t){var i=this.gl,a=[i.LINEAR,i.NEAREST][t];this.setTexture2D(e,0);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,a);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,a);this.setTexture2D(null,0);return this},setFloat1:function setFloat1(e,t,i){this.setProgram(e);this.gl.uniform1f(this.gl.getUniformLocation(e,t),i);return this},setFloat2:function setFloat2(e,t,i,a){this.setProgram(e);this.gl.uniform2f(this.gl.getUniformLocation(e,t),i,a);return this},setFloat3:function setFloat3(e,t,i,a,n){this.setProgram(e);this.gl.uniform3f(this.gl.getUniformLocation(e,t),i,a,n);return this},setFloat4:function setFloat4(e,t,i,a,n,r){this.setProgram(e);this.gl.uniform4f(this.gl.getUniformLocation(e,t),i,a,n,r);return this},setFloat1v:function setFloat1v(e,t,i){this.setProgram(e);this.gl.uniform1fv(this.gl.getUniformLocation(e,t),i);return this},setFloat2v:function setFloat2v(e,t,i){this.setProgram(e);this.gl.uniform2fv(this.gl.getUniformLocation(e,t),i);return this},setFloat3v:function setFloat3v(e,t,i){this.setProgram(e);this.gl.uniform3fv(this.gl.getUniformLocation(e,t),i);return this},setFloat4v:function setFloat4v(e,t,i){this.setProgram(e);this.gl.uniform4fv(this.gl.getUniformLocation(e,t),i);return this},setInt1:function setInt1(e,t,i){this.setProgram(e);this.gl.uniform1i(this.gl.getUniformLocation(e,t),i);return this},setInt2:function setInt2(e,t,i,a){this.setProgram(e);this.gl.uniform2i(this.gl.getUniformLocation(e,t),i,a);return this},setInt3:function setInt3(e,t,i,a,n){this.setProgram(e);this.gl.uniform3i(this.gl.getUniformLocation(e,t),i,a,n);return this},setInt4:function setInt4(e,t,i,a,n,r){this.setProgram(e);this.gl.uniform4i(this.gl.getUniformLocation(e,t),i,a,n,r);return this},setMatrix2:function setMatrix2(e,t,i,a){this.setProgram(e);this.gl.uniformMatrix2fv(this.gl.getUniformLocation(e,t),i,a);return this},setMatrix3:function setMatrix3(e,t,i,a){this.setProgram(e);this.gl.uniformMatrix3fv(this.gl.getUniformLocation(e,t),i,a);return this},setMatrix4:function setMatrix4(e,t,i,a){this.setProgram(e);this.gl.uniformMatrix4fv(this.gl.getUniformLocation(e,t),i,a);return this},getMaxTextures:function getMaxTextures(){return this.config.maxTextures},getMaxTextureSize:function getMaxTextureSize(){return this.config.maxTextureSize},destroy:function destroy(){for(var e=0;e<this.nativeTextures.length;e++){this.gl.deleteTexture(this.nativeTextures[e])}this.nativeTextures=[];for(var t in this.pipelines){this.pipelines[t].destroy();delete this.pipelines[t]}this.defaultCamera.destroy();this.currentMask=null;this.currentCameraMask=null;this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1);this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);this.game=null;this.gl=null;this.canvas=null;this.maskStack=[];this.contextLost=!0;this.extensions={}}});e.exports=T},function(e,t,i){var a=i(26),n=i(33),r=i(2);e.exports=function WebGLSnapshot(e,t){var i=e.getContext("experimental-webgl"),o=r(t,"callback"),s=r(t,"type","image/png"),l=r(t,"encoder",.92),d=r(t,"x",0),p=r(t,"y",0),c=r(t,"getPixel",!1),u=r(t,"isFramebuffer",!1),g=u?r(t,"bufferWidth",1):i.drawingBufferWidth,h=u?r(t,"bufferHeight",1):i.drawingBufferHeight;if(c){var m=new Uint8Array(4),y=u?p:h-p;i.readPixels(d,y,1,1,i.RGBA,i.UNSIGNED_BYTE,m);o.call(null,new n(m[0],m[1],m[2],m[3]/255))}else{var x=r(t,"width",g),f=r(t,"height",h),T=4*(x*f),v=new Uint8Array(T);i.readPixels(d,h-p-f,x,f,i.RGBA,i.UNSIGNED_BYTE,v);for(var b=a.createWebGL(this,x,f),E=b.getContext("2d"),S=E.getImageData(0,0,x,f),_=S.data,A=0;A<f;A++){for(var C=0;C<x;C++){var w=4*((f-A)*x+C),P=u?T-4*(A*x+(x-C)):4*(A*x+C);_[P+0]=v[w+0];_[P+1]=v[w+1];_[P+2]=v[w+2];_[P+3]=v[w+3]}}E.putImageData(S,0,0);var O=new Image;O.onerror=function(){o.call(null);a.remove(b)};O.onload=function(){o.call(null,O);a.remove(b)};O.src=b.toDataURL(s,l)}}},function(e,t,i){var a=i(0),n=i(776),r=i(777),o=i(234),s=new a({Extends:o,initialize:function(e){o.call(this,{game:e.game,renderer:e.renderer,gl:e.renderer.gl,topology:e.topology?e.topology:e.renderer.gl.TRIANGLES,vertShader:e.vertShader?e.vertShader:r,fragShader:e.fragShader?e.fragShader:n,vertexCapacity:e.vertexCapacity?e.vertexCapacity:3,vertexSize:e.vertexSize?e.vertexSize:2*Float32Array.BYTES_PER_ELEMENT,vertices:new Float32Array([-1,1,-1,-7,7,1]).buffer,attributes:[{name:"inPosition",size:2,type:e.renderer.gl.FLOAT,normalized:!1,offset:0}]});this.vertexViewF32=new Float32Array(this.vertexData);this.maxQuads=1;this.resolutionDirty=!0},onBind:function onBind(){o.prototype.onBind.call(this);var e=this.renderer,t=this.program;if(this.resolutionDirty){e.setFloat2(t,"uResolution",this.width,this.height);e.setInt1(t,"uMainSampler",0);e.setInt1(t,"uMaskSampler",1);this.resolutionDirty=!1}return this},resize:function resize(e,t,i){o.prototype.resize.call(this,e,t,i);this.resolutionDirty=!0;return this},beginMask:function beginMask(e,t,i){var a=this.renderer,n=this.gl,r=e.bitmapMask;if(r&&n){a.flush();e.prevFramebuffer=a.currentFramebuffer;a.setFramebuffer(e.mainFramebuffer);n.disable(n.STENCIL_TEST);n.clearColor(0,0,0,0);n.clear(n.COLOR_BUFFER_BIT);if(a.currentCameraMask.mask!==e){a.currentMask.mask=e;a.currentMask.camera=i}}},endMask:function endMask(e,t){var i=this.gl,a=this.renderer,n=e.bitmapMask;if(n&&i){a.flush();a.setFramebuffer(e.maskFramebuffer);i.clearColor(0,0,0,0);i.clear(i.COLOR_BUFFER_BIT);a.setBlendMode(0,!0);n.renderWebGL(a,n,0,t);a.flush();a.setFramebuffer(e.prevFramebuffer);var r=a.getCurrentStencilMask();if(r){i.enable(i.STENCIL_TEST);r.mask.applyStencil(a,r.camera,!0)}else{a.currentMask.mask=null}a.setPipeline(this);i.activeTexture(i.TEXTURE1);i.bindTexture(i.TEXTURE_2D,e.maskTexture);i.activeTexture(i.TEXTURE0);i.bindTexture(i.TEXTURE_2D,e.mainTexture);i.uniform1i(i.getUniformLocation(this.program,"uInvertMaskAlpha"),e.invertAlpha);i.drawArrays(this.topology,0,3)}}});e.exports=s},function(e,t,i){var a=i(0),n=i(778),r=i(235),o=10,s=new a({Extends:r,initialize:function(e){o=e.maxLights;e.fragShader=n.replace("%LIGHT_COUNT%",o.toString());r.call(this,e);this.defaultNormalMap;this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1])},boot:function boot(){this.defaultNormalMap=this.game.textures.getFrame("__DEFAULT")},onBind:function onBind(e){r.prototype.onBind.call(this);var t=this.renderer,i=this.program;this.mvpUpdate();t.setInt1(i,"uNormSampler",1);t.setFloat2(i,"uResolution",this.width,this.height);if(e){this.setNormalMap(e)}return this},onRender:function onRender(e,t){this.active=!1;var i=e.sys.lights;if(!i||0>=i.lights.length||!i.active){return this}var a=i.cull(t),n=Math.min(a.length,o);if(0===n){return this}this.active=!0;var r=this.renderer,s=this.program,l=t.matrix,d={x:0,y:0},p=r.height,c;for(c=0;c<o;++c){r.setFloat1(s,"uLights["+c+"].radius",0)}r.setFloat4(s,"uCamera",t.x,t.y,t.rotation,t.zoom);r.setFloat3(s,"uAmbientLightColor",i.ambientColor.r,i.ambientColor.g,i.ambientColor.b);for(c=0;c<n;++c){var u=a[c],g="uLights["+c+"].";l.transformPoint(u.x,u.y,d);r.setFloat2(s,g+"position",d.x-t.scrollX*u.scrollFactorX*t.zoom,p-(d.y-t.scrollY*u.scrollFactorY*t.zoom));r.setFloat3(s,g+"color",u.r,u.g,u.b);r.setFloat1(s,g+"intensity",u.intensity);r.setFloat1(s,g+"radius",u.radius)}this.currentNormalMapRotation=null;return this},batchTexture:function batchTexture(e,t,i,a,n,r,o,s,l,d,p,c,u,g,h,m,f,T,v,b,E,S,_,A,C,w,P,O,R,L){if(!this.active){return}this.renderer.setPipeline(this);var k;if(e.displayTexture){k=e.displayTexture.dataSource[e.displayFrame.sourceIndex]}else if(e.texture){k=e.texture.dataSource[e.frame.sourceIndex]}else if(e.tileset){if(Array.isArray(e.tileset)){k=e.tileset[0].image.dataSource[0]}else{k=e.tileset.image.dataSource[0]}}if(!k){console.warn("Normal map missing or invalid");return}this.setTexture2D(k.glTexture,1);this.setNormalMapRotation(p);var D=this._tempMatrix1,F=this._tempMatrix2,I=this._tempMatrix3,M=T/i+P,B=v/a+O,Y=(T+b)/i+P,N=(v+E)/a+O,X=o,z=s,U=-m,G=-f;if(e.isCropped){var W=e._crop;X=W.width;z=W.height;o=W.width;s=W.height;T=W.x;v=W.y;var V=T,H=v;if(c){V=b-W.x-W.width}if(u&&!t.isRenderTexture){H=E-W.y-W.height}M=V/i+P;B=H/a+O;Y=(V+W.width)/i+P;N=(H+W.height)/a+O;U=-m+T;G=-f+v}u=u^(t.isRenderTexture?1:0);if(c){X*=-1;U+=o}if(u){z*=-1;G+=s}var j=U+X,K=G+z;F.applyITRS(n,r,p,l,d);D.copyFrom(R.matrix);if(L){D.multiplyWithOffset(L,-R.scrollX*g,-R.scrollY*h);F.e=n;F.f=r;D.multiply(F,I)}else{F.e-=R.scrollX*g;F.f-=R.scrollY*h;D.multiply(F,I)}var q=I.getX(U,G),J=I.getY(U,G),Z=I.getX(U,K),Q=I.getY(U,K),$=I.getX(j,K),ee=I.getY(j,K),te=I.getX(j,G),ie=I.getY(j,G);if(R.roundPixels){q=Math.round(q);J=Math.round(J);Z=Math.round(Z);Q=Math.round(Q);$=Math.round($);ee=Math.round(ee);te=Math.round(te);ie=Math.round(ie)}this.setTexture2D(t,0);this.batchQuad(q,J,Z,Q,$,ee,te,ie,M,B,Y,N,S,_,A,C,w,t,0)},setNormalMap:function setNormalMap(e){if(!this.active||!e){return}var t;if(e.texture){t=e.texture.dataSource[e.frame.sourceIndex]}if(!t){t=this.defaultNormalMap}this.setTexture2D(t.glTexture,1);this.renderer.setPipeline(e.defaultPipeline)},setNormalMapRotation:function setNormalMapRotation(e){if(e!==this.currentNormalMapRotation||0===this.batches.length){if(0<this.batches.length){this.flush()}var t=this.inverseRotationMatrix;if(e){var i=-e,a=Math.cos(i),n=Math.sin(i);t[1]=n;t[3]=-n;t[0]=t[4]=a}else{t[0]=t[4]=1;t[1]=t[3]=0}this.renderer.setMatrix3(this.program,"uInverseRotationMatrix",!1,t);this.currentNormalMapRotation=e}},batchSprite:function batchSprite(e,t,i){if(!this.active){return}var a=e.texture.dataSource[e.frame.sourceIndex];if(a){this.renderer.setPipeline(this);this.setTexture2D(a.glTexture,1);this.setNormalMapRotation(e.rotation);r.prototype.batchSprite.call(this,e,t,i)}}});s.LIGHT_COUNT=o;e.exports=s},function(e){e.exports={modelMatrixDirty:!1,viewMatrixDirty:!1,projectionMatrixDirty:!1,modelMatrix:null,viewMatrix:null,projectionMatrix:null,mvpInit:function mvpInit(){this.modelMatrixDirty=!0;this.viewMatrixDirty=!0;this.projectionMatrixDirty=!0;this.modelMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);return this},mvpUpdate:function mvpUpdate(){var e=this.program;if(this.modelMatrixDirty){this.renderer.setMatrix4(e,"uModelMatrix",!1,this.modelMatrix);this.modelMatrixDirty=!1}if(this.viewMatrixDirty){this.renderer.setMatrix4(e,"uViewMatrix",!1,this.viewMatrix);this.viewMatrixDirty=!1}if(this.projectionMatrixDirty){this.renderer.setMatrix4(e,"uProjectionMatrix",!1,this.projectionMatrix);this.projectionMatrixDirty=!1}return this},modelIdentity:function modelIdentity(){var e=this.modelMatrix;e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;this.modelMatrixDirty=!0;return this},modelScale:function modelScale(e,t,i){var a=this.modelMatrix;a[0]=a[0]*e;a[1]=a[1]*e;a[2]=a[2]*e;a[3]=a[3]*e;a[4]=a[4]*t;a[5]=a[5]*t;a[6]=a[6]*t;a[7]=a[7]*t;a[8]=a[8]*i;a[9]=a[9]*i;a[10]=a[10]*i;a[11]=a[11]*i;this.modelMatrixDirty=!0;return this},modelTranslate:function modelTranslate(e,t,i){var a=this.modelMatrix;a[12]=a[0]*e+a[4]*t+a[8]*i+a[12];a[13]=a[1]*e+a[5]*t+a[9]*i+a[13];a[14]=a[2]*e+a[6]*t+a[10]*i+a[14];a[15]=a[3]*e+a[7]*t+a[11]*i+a[15];this.modelMatrixDirty=!0;return this},modelRotateX:function modelRotateX(e){var t=this.modelMatrix,i=Math.sin(e),a=Math.cos(e),n=t[4],r=t[5],o=t[6],s=t[7],l=t[8],d=t[9],p=t[10],c=t[11];t[4]=n*a+l*i;t[5]=r*a+d*i;t[6]=o*a+p*i;t[7]=s*a+c*i;t[8]=l*a-n*i;t[9]=d*a-r*i;t[10]=p*a-o*i;t[11]=c*a-s*i;this.modelMatrixDirty=!0;return this},modelRotateY:function modelRotateY(e){var t=this.modelMatrix,i=Math.sin(e),a=Math.cos(e),n=t[0],r=t[1],o=t[2],s=t[3],l=t[8],d=t[9],p=t[10],c=t[11];t[0]=n*a-l*i;t[1]=r*a-d*i;t[2]=o*a-p*i;t[3]=s*a-c*i;t[8]=n*i+l*a;t[9]=r*i+d*a;t[10]=o*i+p*a;t[11]=s*i+c*a;this.modelMatrixDirty=!0;return this},modelRotateZ:function modelRotateZ(e){var t=this.modelMatrix,i=Math.sin(e),a=Math.cos(e),n=t[0],r=t[1],o=t[2],s=t[3],l=t[4],d=t[5],p=t[6],c=t[7];t[0]=n*a+l*i;t[1]=r*a+d*i;t[2]=o*a+p*i;t[3]=s*a+c*i;t[4]=l*a-n*i;t[5]=d*a-r*i;t[6]=p*a-o*i;t[7]=c*a-s*i;this.modelMatrixDirty=!0;return this},viewIdentity:function viewIdentity(){var e=this.viewMatrix;e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;this.viewMatrixDirty=!0;return this},viewScale:function viewScale(e,t,i){var a=this.viewMatrix;a[0]=a[0]*e;a[1]=a[1]*e;a[2]=a[2]*e;a[3]=a[3]*e;a[4]=a[4]*t;a[5]=a[5]*t;a[6]=a[6]*t;a[7]=a[7]*t;a[8]=a[8]*i;a[9]=a[9]*i;a[10]=a[10]*i;a[11]=a[11]*i;this.viewMatrixDirty=!0;return this},viewTranslate:function viewTranslate(e,t,i){var a=this.viewMatrix;a[12]=a[0]*e+a[4]*t+a[8]*i+a[12];a[13]=a[1]*e+a[5]*t+a[9]*i+a[13];a[14]=a[2]*e+a[6]*t+a[10]*i+a[14];a[15]=a[3]*e+a[7]*t+a[11]*i+a[15];this.viewMatrixDirty=!0;return this},viewRotateX:function viewRotateX(e){var t=this.viewMatrix,i=Math.sin(e),a=Math.cos(e),n=t[4],r=t[5],o=t[6],s=t[7],l=t[8],d=t[9],p=t[10],c=t[11];t[4]=n*a+l*i;t[5]=r*a+d*i;t[6]=o*a+p*i;t[7]=s*a+c*i;t[8]=l*a-n*i;t[9]=d*a-r*i;t[10]=p*a-o*i;t[11]=c*a-s*i;this.viewMatrixDirty=!0;return this},viewRotateY:function viewRotateY(e){var t=this.viewMatrix,i=Math.sin(e),a=Math.cos(e),n=t[0],r=t[1],o=t[2],s=t[3],l=t[8],d=t[9],p=t[10],c=t[11];t[0]=n*a-l*i;t[1]=r*a-d*i;t[2]=o*a-p*i;t[3]=s*a-c*i;t[8]=n*i+l*a;t[9]=r*i+d*a;t[10]=o*i+p*a;t[11]=s*i+c*a;this.viewMatrixDirty=!0;return this},viewRotateZ:function viewRotateZ(e){var t=this.viewMatrix,i=Math.sin(e),a=Math.cos(e),n=t[0],r=t[1],o=t[2],s=t[3],l=t[4],d=t[5],p=t[6],c=t[7];t[0]=n*a+l*i;t[1]=r*a+d*i;t[2]=o*a+p*i;t[3]=s*a+c*i;t[4]=l*a-n*i;t[5]=d*a-r*i;t[6]=p*a-o*i;t[7]=c*a-s*i;this.viewMatrixDirty=!0;return this},viewLoad2D:function viewLoad2D(e){var t=this.viewMatrix;t[0]=e[0];t[1]=e[1];t[2]=0;t[3]=0;t[4]=e[2];t[5]=e[3];t[6]=0;t[7]=0;t[8]=e[4];t[9]=e[5];t[10]=1;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;this.viewMatrixDirty=!0;return this},viewLoad:function viewLoad(e){var t=this.viewMatrix;t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];this.viewMatrixDirty=!0;return this},projIdentity:function projIdentity(){var e=this.projectionMatrix;e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;this.projectionMatrixDirty=!0;return this},projOrtho:function projOrtho(e,t,i,a,n,r){var o=this.projectionMatrix,s=1/(e-t),l=1/(i-a),d=1/(n-r);o[0]=-2*s;o[1]=0;o[2]=0;o[3]=0;o[4]=0;o[5]=-2*l;o[6]=0;o[7]=0;o[8]=0;o[9]=0;o[10]=2*d;o[11]=0;o[12]=(e+t)*s;o[13]=(a+i)*l;o[14]=(r+n)*d;o[15]=1;this.projectionMatrixDirty=!0;return this},projPersp:function projPersp(e,t,i,a){var n=this.projectionMatrix,r=1/Math.tan(e/2),o=1/(i-a);n[0]=r/t;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=r;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=(a+i)*o;n[11]=-1;n[12]=0;n[13]=0;n[14]=2*a*i*o;n[15]=0;this.projectionMatrixDirty=!0;return this}}},function(e,t,i){var a={};e.exports=a;var n=i(101),r=i(37);(function(){a.fromVertices=function(e){for(var t={},a=0;a<e.length;a++){var o=(a+1)%e.length,s=n.normalise({x:e[o].y-e[a].y,y:e[a].x-e[o].x}),l=0===s.y?1/0:s.x/s.y;l=l.toFixed(3).toString();t[l]=s}return r.values(t)};a.rotate=function(e,t){if(0===t)return;for(var a=Math.cos(t),n=Math.sin(t),r=0;r<e.length;r++){var o=e[r],s;s=o.x*a-o.y*n;o.y=o.x*n+o.y*a;o.x=s}}})()},function(e,t,i){e.exports={Bounce:i(1414),Collision:i(1415),Force:i(1416),Friction:i(1417),Gravity:i(1418),Mass:i(1419),Static:i(1420),Sensor:i(1421),SetBody:i(1422),Sleep:i(1423),Transform:i(1440),Velocity:i(1441)}},function(e,t,i){var a={};e.exports=a;var n=i(510),r=i(467),o=i(102);(function(){a.collisions=function(e,t){for(var s=[],l=t.pairs.table,d=t.metrics,p=0;p<e.length;p++){var c=e[p][0],u=e[p][1];if((c.isStatic||c.isSleeping)&&(u.isStatic||u.isSleeping))continue;if(!a.canCollide(c.collisionFilter,u.collisionFilter))continue;d.midphaseTests+=1;if(o.overlaps(c.bounds,u.bounds)){for(var g=1<c.parts.length?1:0,h;g<c.parts.length;g++){h=c.parts[g];for(var m=1<u.parts.length?1:0,y;m<u.parts.length;m++){y=u.parts[m];if(h===c&&y===u||o.overlaps(h.bounds,y.bounds)){var x=r.id(h,y),f=l[x],T;if(f&&f.isActive){T=f.collision}else{T=null}var v=n.collides(h,y,T);d.narrowphaseTests+=1;if(v.reused)d.narrowReuseCount+=1;if(v.collided){s.push(v);d.narrowDetections+=1}}}}}}return s};a.canCollide=function(e,t){if(e.group===t.group&&0!==e.group)return 0<e.group;return 0!=(e.mask&t.category)&&0!=(t.mask&e.category)}})()},function(e,t,i){var a={};e.exports=a;var n=i(86),r=i(101);(function(){a.collides=function(e,t,i){var o,s,l,d,p=!1;if(i){var c=e.parent,u=t.parent,g=c.speed*c.speed+c.angularSpeed*c.angularSpeed+u.speed*u.speed+u.angularSpeed*u.angularSpeed;p=i&&i.collided&&.2>g;d=i}else{d={collided:!1,bodyA:e,bodyB:t}}if(i&&p){var h=d.axisBody,m=h===e?t:e,y=[h.axes[i.axisNumber]];l=a._overlapAxes(h.vertices,m.vertices,y);d.reused=!0;if(0>=l.overlap){d.collided=!1;return d}}else{o=a._overlapAxes(e.vertices,t.vertices,e.axes);if(0>=o.overlap){d.collided=!1;return d}s=a._overlapAxes(t.vertices,e.vertices,t.axes);if(0>=s.overlap){d.collided=!1;return d}if(o.overlap<s.overlap){l=o;d.axisBody=e}else{l=s;d.axisBody=t}d.axisNumber=l.axisNumber}d.bodyA=e.id<t.id?e:t;d.bodyB=e.id<t.id?t:e;d.collided=!0;d.depth=l.overlap;d.parentA=d.bodyA.parent;d.parentB=d.bodyB.parent;e=d.bodyA;t=d.bodyB;if(0>r.dot(l.axis,r.sub(t.position,e.position))){d.normal={x:l.axis.x,y:l.axis.y}}else{d.normal={x:-l.axis.x,y:-l.axis.y}}d.tangent=r.perp(d.normal);d.penetration=d.penetration||{};d.penetration.x=d.normal.x*d.depth;d.penetration.y=d.normal.y*d.depth;var x=a._findSupports(e,t,d.normal),f=[];if(n.contains(e.vertices,x[0]))f.push(x[0]);if(n.contains(e.vertices,x[1]))f.push(x[1]);if(2>f.length){var T=a._findSupports(t,e,r.neg(d.normal));if(n.contains(t.vertices,T[0]))f.push(T[0]);if(2>f.length&&n.contains(t.vertices,T[1]))f.push(T[1])}if(1>f.length)f=[x[0]];d.supports=f;return d};a._overlapAxes=function(e,t,n){for(var o=r._temp[0],s=r._temp[1],l={overlap:Number.MAX_VALUE},d,p,c=0;c<n.length;c++){p=n[c];a._projectToAxis(o,e,p);a._projectToAxis(s,t,p);d=Math.min(o.max-s.min,s.max-o.min);if(0>=d){l.overlap=d;return l}if(d<l.overlap){l.overlap=d;l.axis=p;l.axisNumber=c}}return l};a._projectToAxis=function(e,t,a){for(var n=r.dot(t[0],a),o=n,s=1,l;s<t.length;s+=1){l=r.dot(t[s],a);if(l>o){o=l}else if(l<n){n=l}}e.min=n;e.max=o};a._findSupports=function(e,t,a){for(var n=Number.MAX_VALUE,o=r._temp[0],s=t.vertices,l=e.position,d,p,c,u,g=0;g<s.length;g++){p=s[g];o.x=p.x-l.x;o.y=p.y-l.y;d=-r.dot(a,o);if(d<n){n=d;c=p}}var h=0<=c.index-1?c.index-1:s.length-1;p=s[h];o.x=p.x-l.x;o.y=p.y-l.y;n=-r.dot(a,o);u=p;var m=(c.index+1)%s.length;p=s[m];o.x=p.x-l.x;o.y=p.y-l.y;d=-r.dot(a,o);if(d<n){u=p}return[c,u]}})()},function(e){var t=function(){return this}();try{t=t||new Function("return this")()}catch(i){if("object"===("undefined"==typeof window?"undefined":_typeof(window)))t=window}e.exports=t},function(e,t,i){i(513);i(514);i(515);i(516);i(517);i(518);i(519);i(520)},function(){if(!Array.prototype.forEach){Array.prototype.forEach=function(e){'use strict';if(void 0===this||null===this){throw new TypeError}var a=Object(this),t=a.length>>>0;if("function"!=typeof e){throw new TypeError}for(var n=2<=arguments.length?arguments[1]:void 0,r=0;r<t;r++){if(r in a){e.call(n,a[r],r,a)}}}}},function(){if(!Array.isArray){Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}}},function(){(function(){function e(e){if(!e)return;if(!e.setTargetAtTime)e.setTargetAtTime=e.setTargetValueAtTime}if(window.hasOwnProperty("webkitAudioContext")&&!window.hasOwnProperty("AudioContext")){window.AudioContext=webkitAudioContext;if(!AudioContext.prototype.hasOwnProperty("createGain"))AudioContext.prototype.createGain=AudioContext.prototype.createGainNode;if(!AudioContext.prototype.hasOwnProperty("createDelay"))AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode;if(!AudioContext.prototype.hasOwnProperty("createScriptProcessor"))AudioContext.prototype.createScriptProcessor=AudioContext.prototype.createJavaScriptNode;if(!AudioContext.prototype.hasOwnProperty("createPeriodicWave"))AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable;AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain;AudioContext.prototype.createGain=function(){var t=this.internal_createGain();e(t.gain);return t};AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay;AudioContext.prototype.createDelay=function(t){var i=t?this.internal_createDelay(t):this.internal_createDelay();e(i.delayTime);return i};AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource;AudioContext.prototype.createBufferSource=function(){var t=this.internal_createBufferSource();if(!t.start){t.start=function(e,t,i){if(t||i)this.noteGrainOn(e||0,t,i);else this.noteOn(e||0)}}else{t.internal_start=t.start;t.start=function(e,i,a){if("undefined"!=typeof a)t.internal_start(e||0,i,a);else t.internal_start(e||0,i||0)}}if(!t.stop){t.stop=function(e){this.noteOff(e||0)}}else{t.internal_stop=t.stop;t.stop=function(e){t.internal_stop(e||0)}}e(t.playbackRate);return t};AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor;AudioContext.prototype.createDynamicsCompressor=function(){var t=this.internal_createDynamicsCompressor();e(t.threshold);e(t.knee);e(t.ratio);e(t.reduction);e(t.attack);e(t.release);return t};AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter;AudioContext.prototype.createBiquadFilter=function(){var t=this.internal_createBiquadFilter();e(t.frequency);e(t.detune);e(t.Q);e(t.gain);return t};if(AudioContext.prototype.hasOwnProperty("createOscillator")){AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator;AudioContext.prototype.createOscillator=function(){var t=this.internal_createOscillator();if(!t.start){t.start=function(e){this.noteOn(e||0)}}else{t.internal_start=t.start;t.start=function(e){t.internal_start(e||0)}}if(!t.stop){t.stop=function(e){this.noteOff(e||0)}}else{t.internal_stop=t.stop;t.stop=function(e){t.internal_stop(e||0)}}if(!t.setPeriodicWave)t.setPeriodicWave=t.setWaveTable;e(t.frequency);e(t.detune);return t}}}if(window.hasOwnProperty("webkitOfflineAudioContext")&&!window.hasOwnProperty("OfflineAudioContext")){window.OfflineAudioContext=webkitOfflineAudioContext}})()},function(){if(!window.console){window.console={};window.console.log=window.console.assert=function(){};window.console.warn=window.console.assert=function(){}}},function(){if(!Math.trunc){Math.trunc=function(e){return 0>e?Math.ceil(e):Math.floor(e)}}},function(){(function(){if(!1=="performance"in window){window.performance={}}Date.now=Date.now||function(){return new Date().getTime()};if(!1=="now"in window.performance){var e=Date.now();if(performance.timing&&performance.timing.navigationStart){e=performance.timing.navigationStart}window.performance.now=function(){return Date.now()-e}}})()},function(){for(var e=Date.now(),t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;i++){window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(t){if("function"!=typeof t){throw new TypeError(t+"is not a function")}var i=Date.now(),a=16+e-i;if(0>a){a=0}e=i;return setTimeout(function(){e=Date.now();t(performance.now())},a)}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(e){clearTimeout(e)}}},function(){if("function"!=typeof window.Uint32Array&&"object"!==_typeof(window.Uint32Array)){var e=function(e){window[e]=function(e){if("number"==typeof e){Array.call(this,e);this.length=e;for(var t=0;t<this.length;t++){this[t]=0}}else{Array.call(this,e.length);this.length=e.length;for(var t=0;t<this.length;t++){this[t]=e[t]}}};window[e].prototype=[];window[e].constructor=window[e]};e("Float32Array");e("Uint32Array");e("Uint16Array");e("Int16Array");e("ArrayBuffer")}},function(e,t,i){var a=i(239);e.exports=function AlignTo(e,t,n,r){for(var o=e[0],s=1,l;s<e.length;s++){l=e[s];a(l,o,t,n,r);o=l}return e}},function(e,t,i){var a=i(34);e.exports=function Angle(e,t,i,n,r){return a(e,"angle",t,i,n,r)}},function(e){e.exports=function Call(e,t,a){for(var n=0,r;n<e.length;n++){r=e[n];t.call(a,r)}return e}},function(e){e.exports=function GetFirst(e,t,a){if(a===void 0){a=0}for(var n=a;n<e.length;n++){var r=e[n],o=!0;for(var s in t){if(r[s]!==t[s]){o=!1}}if(o){return r}}return null}},function(e){e.exports=function GetLast(e,t,a){if(a===void 0){a=0}for(var n=a;n<e.length;n++){var r=e[n],o=!0;for(var s in t){if(r[s]!==t[s]){o=!1}}if(o){return r}}return null}},function(e,t,i){var a=i(252),n=i(106),r=i(2),o=i(1),s=i(110),l=new s({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1);e.exports=function GridAlign(e,t){if(t===void 0){t={}}var o=t.hasOwnProperty("width"),s=t.hasOwnProperty("height"),d=r(t,"width",-1),p=r(t,"height",-1),c=r(t,"cellWidth",1),u=r(t,"cellHeight",c),g=r(t,"position",n.TOP_LEFT),h=r(t,"x",0),m=r(t,"y",0),y=0,x=0;l.setPosition(h,m);l.setSize(c,u);for(var f=0;f<e.length;f++){a(e[f],l,g);if(o&&-1===d){l.x+=c}else if(s&&-1===p){l.y+=u}else{y+=c;l.x+=c;if(y===d*c){y=0;x+=u;l.x=h;l.y+=u;if(x===p*u){break}}}}return e}},function(e,t,i){var a=i(22),n=2;e.exports={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(e,t,i,n){if(e===void 0){e=1}if(t===void 0){this.alpha=e}else{this._alphaTL=a(e,0,1);this._alphaTR=a(t,0,1);this._alphaBL=a(i,0,1);this._alphaBR=a(n,0,1)}return this},alpha:{get:function get(){return this._alpha},set:function set(e){var t=a(e,0,1);this._alpha=t;this._alphaTL=t;this._alphaTR=t;this._alphaBL=t;this._alphaBR=t;if(0===t){this.renderFlags&=~n}else{this.renderFlags|=n}}},alphaTopLeft:{get:function get(){return this._alphaTL},set:function set(e){var t=a(e,0,1);this._alphaTL=t;if(0!==t){this.renderFlags|=n}}},alphaTopRight:{get:function get(){return this._alphaTR},set:function set(e){var t=a(e,0,1);this._alphaTR=t;if(0!==t){this.renderFlags|=n}}},alphaBottomLeft:{get:function get(){return this._alphaBL},set:function set(e){var t=a(e,0,1);this._alphaBL=t;if(0!==t){this.renderFlags|=n}}},alphaBottomRight:{get:function get(){return this._alphaBR},set:function set(e){var t=a(e,0,1);this._alphaBR=t;if(0!==t){this.renderFlags|=n}}}}},function(e){e.exports="add"},function(e){e.exports="complete"},function(e){e.exports="repeat"},function(e){e.exports="restart"},function(e){e.exports="start"},function(e){e.exports="pauseall"},function(e){e.exports="remove"},function(e){e.exports="resumeall"},function(e){e.exports="animationcomplete"},function(e){e.exports="animationcomplete-"},function(e){e.exports="animationrepeat-"},function(e){e.exports="animationrestart-"},function(e){e.exports="animationstart-"},function(e){e.exports="animationupdate-"},function(e){e.exports="animationrepeat"},function(e){e.exports="animationrestart"},function(e){e.exports="animationstart"},function(e){e.exports="animationupdate"},function(e){e.exports={width:0,height:0,displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(e){this.scaleX=e/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(e){this.scaleY=e/this.height}},setSize:function setSize(e,t){this.width=e;this.height=t;return this},setDisplaySize:function setDisplaySize(e,t){this.displayWidth=e;this.displayHeight=t;return this}}},function(e){e.exports={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(e,t,i,a){if(e===void 0){this.isCropped=!1}else if(this.frame){if("number"==typeof e){this.frame.setCropUVs(this._crop,e,t,i,a,this.flipX,this.flipY)}else{var n=e;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(e){e.exports={flipX:!1,flipY:!1,toggleFlipX:function toggleFlipX(){this.flipX=!this.flipX;return this},toggleFlipY:function toggleFlipY(){this.flipY=!this.flipY;return this},setFlipX:function setFlipX(e){this.flipX=e;return this},setFlipY:function setFlipY(e){this.flipY=e;return this},setFlip:function setFlip(e,t){this.flipX=e;this.flipY=t;return this},resetFlip:function resetFlip(){this.flipX=!1;this.flipY=!1;return this}}},function(e,t,i){var a=i(11),n=i(273),r=i(3);e.exports={prepareBoundsOutput:function prepareBoundsOutput(e,t){if(t===void 0){t=!1}if(0!==this.rotation){n(e,this.x,this.y,this.rotation)}if(t&&this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix();i.transformPoint(e.x,e.y,e)}return e},getCenter:function getCenter(e){if(e===void 0){e=new r}e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2;e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2;return e},getTopLeft:function getTopLeft(e,t){if(!e){e=new r}e.x=this.x-this.displayWidth*this.originX;e.y=this.y-this.displayHeight*this.originY;return this.prepareBoundsOutput(e,t)},getTopCenter:function getTopCenter(e,t){if(!e){e=new r}e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2;e.y=this.y-this.displayHeight*this.originY;return this.prepareBoundsOutput(e,t)},getTopRight:function getTopRight(e,t){if(!e){e=new r}e.x=this.x-this.displayWidth*this.originX+this.displayWidth;e.y=this.y-this.displayHeight*this.originY;return this.prepareBoundsOutput(e,t)},getLeftCenter:function getLeftCenter(e,t){if(!e){e=new r}e.x=this.x-this.displayWidth*this.originX;e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2;return this.prepareBoundsOutput(e,t)},getRightCenter:function getRightCenter(e,t){if(!e){e=new r}e.x=this.x-this.displayWidth*this.originX+this.displayWidth;e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2;return this.prepareBoundsOutput(e,t)},getBottomLeft:function getBottomLeft(e,t){if(!e){e=new r}e.x=this.x-this.displayWidth*this.originX;e.y=this.y-this.displayHeight*this.originY+this.displayHeight;return this.prepareBoundsOutput(e,t)},getBottomCenter:function getBottomCenter(e,t){if(!e){e=new r}e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2;e.y=this.y-this.displayHeight*this.originY+this.displayHeight;return this.prepareBoundsOutput(e,t)},getBottomRight:function getBottomRight(e,t){if(!e){e=new r}e.x=this.x-this.displayWidth*this.originX+this.displayWidth;e.y=this.y-this.displayHeight*this.originY+this.displayHeight;return this.prepareBoundsOutput(e,t)},getBounds:function getBounds(e){if(e===void 0){e=new a}var t,i,n,r,o,s,l,d;if(this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(e);p.transformPoint(e.x,e.y,e);t=e.x;i=e.y;this.getTopRight(e);p.transformPoint(e.x,e.y,e);n=e.x;r=e.y;this.getBottomLeft(e);p.transformPoint(e.x,e.y,e);o=e.x;s=e.y;this.getBottomRight(e);p.transformPoint(e.x,e.y,e);l=e.x;d=e.y}else{this.getTopLeft(e);t=e.x;i=e.y;this.getTopRight(e);n=e.x;r=e.y;this.getBottomLeft(e);o=e.x;s=e.y;this.getBottomRight(e);l=e.x;d=e.y}e.x=Math.min(t,n,o,l);e.y=Math.min(i,r,s,d);e.width=Math.max(t,n,o,l)-e.x;e.height=Math.max(i,r,s,d)-e.y;return e}}},function(e){e.exports="blur"},function(e){e.exports="boot"},function(e){e.exports="contextlost"},function(e){e.exports="contextrestored"},function(e){e.exports="destroy"},function(e){e.exports="focus"},function(e){e.exports="hidden"},function(e){e.exports="pause"},function(e){e.exports="postrender"},function(e){e.exports="poststep"},function(e){e.exports="prerender"},function(e){e.exports="prestep"},function(e){e.exports="ready"},function(e){e.exports="resume"},function(e){e.exports="step"},function(e){e.exports="visible"},function(e){e.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function get(){return this._displayOriginX},set:function set(e){this._displayOriginX=e;this.originX=e/this.width}},displayOriginY:{get:function get(){return this._displayOriginY},set:function set(e){this._displayOriginY=e;this.originY=e/this.height}},setOrigin:function setOrigin(e,t){if(e===void 0){e=.5}if(t===void 0){t=e}this.originX=e;this.originY=t;return this.updateDisplayOrigin()},setOriginFromFrame:function setOriginFromFrame(){if(!this.frame||!this.frame.customPivot){return this.setOrigin()}else{this.originX=this.frame.pivotX;this.originY=this.frame.pivotY}return this.updateDisplayOrigin()},setDisplayOrigin:function setDisplayOrigin(e,t){if(e===void 0){e=0}if(t===void 0){t=e}this.displayOriginX=e;this.displayOriginY=t;return this},updateDisplayOrigin:function updateDisplayOrigin(){this._displayOriginX=this.originX*this.width;this._displayOriginY=this.originY*this.height;return this}}},function(e,t,i){var a=i(35),n=i(88),r=i(6),o=i(89),s=i(3),l={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function setPath(e,t){if(t===void 0){t=this.pathConfig}var i=this.pathTween;if(i&&i.isPlaying()){i.stop()}this.path=e;if(t){this.startFollow(t)}return this},setRotateToPath:function setRotateToPath(e,t){if(t===void 0){t=0}this.rotateToPath=e;this.pathRotationOffset=t;return this},isFollowing:function isFollowing(){var e=this.pathTween;return e&&e.isPlaying()},startFollow:function startFollow(e,t){if(e===void 0){e={}}if(t===void 0){t=0}var i=this.pathTween;if(i&&i.isPlaying()){i.stop()}if("number"==typeof e){e={duration:e}}e.from=r(e,"from",0);e.to=r(e,"to",1);var l=n(e,"positionOnPath",!1);this.rotateToPath=n(e,"rotateToPath",!1);this.pathRotationOffset=r(e,"rotationOffset",0);var d=r(e,"startAt",t);if(d){e.onStart=function(e){var t=e.data[0];t.progress=d;t.elapsed=t.duration*d;var i=t.ease(t.progress);t.current=t.start+(t.end-t.start)*i;t.target[t.key]=t.current}}if(!this.pathOffset){this.pathOffset=new s(this.x,this.y)}if(!this.pathVector){this.pathVector=new s}this.pathTween=this.scene.sys.tweens.addCounter(e);this.path.getStartPoint(this.pathOffset);if(l){this.x=this.pathOffset.x;this.y=this.pathOffset.y}this.pathOffset.x=this.x-this.pathOffset.x;this.pathOffset.y=this.y-this.pathOffset.y;this._prevDirection=o.PLAYING_FORWARD;if(this.rotateToPath){var p=this.path.getPoint(.1);this.rotation=Math.atan2(p.y-this.y,p.x-this.x)+a(this.pathRotationOffset)}this.pathConfig=e;return this},pauseFollow:function pauseFollow(){var e=this.pathTween;if(e&&e.isPlaying()){e.pause()}return this},resumeFollow:function resumeFollow(){var e=this.pathTween;if(e&&e.isPaused()){e.resume()}return this},stopFollow:function stopFollow(){var e=this.pathTween;if(e&&e.isPlaying()){e.stop()}return this},pathUpdate:function pathUpdate(){var e=this.pathTween;if(e){var t=e.data[0],i=this.pathVector;if(t.state!==o.COMPLETE){this.path.getPoint(1,i);i.add(this.pathOffset);this.setPosition(i.x,i.y);return}else if(t.state!==o.PLAYING_FORWARD&&t.state!==o.PLAYING_BACKWARD){return}this.path.getPoint(e.getValue(),i);i.add(this.pathOffset);var n=this.x,r=this.y;this.setPosition(i.x,i.y);var s=this.x-n,l=this.y-r;if(0==s&&0===l){return}if(t.state!==this._prevDirection){this._prevDirection=t.state;return}if(this.rotateToPath){this.rotation=Math.atan2(l,s)+a(this.pathRotationOffset)}}}};e.exports=l},function(e){e.exports={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function get(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function set(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function get(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function set(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function setSizeToFrame(e){if(e===void 0){e=this.frame}this.width=e.realWidth;this.height=e.realHeight;return this},setSize:function setSize(e,t){this.width=e;this.height=t;return this},setDisplaySize:function setDisplaySize(e,t){this.displayWidth=e;this.displayHeight=t;return this}}},function(e){e.exports={texture:null,frame:null,isCropped:!1,setTexture:function setTexture(e,t){this.texture=this.scene.sys.textures.get(e);return this.setFrame(t)},setFrame:function setFrame(e,t,i){if(t===void 0){t=!0}if(i===void 0){i=!0}this.frame=this.texture.get(e);if(!this.frame.cutWidth||!this.frame.cutHeight){this.renderFlags&=-9}else{this.renderFlags|=8}if(this._sizeComponent&&t){this.setSizeToFrame()}if(this._originComponent&&i){if(this.frame.customPivot){this.setOrigin(this.frame.pivotX,this.frame.pivotY)}else{this.updateDisplayOrigin()}}return this}}},function(e){e.exports={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(e,t,i,a){if(e===void 0){this.isCropped=!1}else if(this.frame){if("number"==typeof e){this.frame.setCropUVs(this._crop,e,t,i,a,this.flipX,this.flipY)}else{var n=e;this.frame.setCropUVs(this._crop,n.x,n.y,n.width,n.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function setTexture(e,t){this.texture=this.scene.sys.textures.get(e);return this.setFrame(t)},setFrame:function setFrame(e,t,i){if(t===void 0){t=!0}if(i===void 0){i=!0}this.frame=this.texture.get(e);if(!this.frame.cutWidth||!this.frame.cutHeight){this.renderFlags&=-9}else{this.renderFlags|=8}if(this._sizeComponent&&t){this.setSizeToFrame()}if(this._originComponent&&i){if(this.frame.customPivot){this.setOrigin(this.frame.pivotX,this.frame.pivotY)}else{this.updateDisplayOrigin()}}if(this.isCropped){this.frame.updateCropUVs(this._crop,this.flipX,this.flipY)}return this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(e){var t=function(e){return(e>>16)+(65280&e)+((255&e)<<16)};e.exports={_tintTL:16777215,_tintTR:16777215,_tintBL:16777215,_tintBR:16777215,_isTinted:!1,tintFill:!1,clearTint:function clearTint(){this.setTint(16777215);this._isTinted=!1;return this},setTint:function setTint(e,i,a,n){if(e===void 0){e=16777215}if(i===void 0){i=e;a=e;n=e}this._tintTL=t(e);this._tintTR=t(i);this._tintBL=t(a);this._tintBR=t(n);this._isTinted=!0;this.tintFill=!1;return this},setTintFill:function setTintFill(e,t,i,a){this.setTint(e,t,i,a);this.tintFill=!0;return this},tintTopLeft:{get:function get(){return this._tintTL},set:function set(e){this._tintTL=t(e);this._isTinted=!0}},tintTopRight:{get:function get(){return this._tintTR},set:function set(e){this._tintTR=t(e);this._isTinted=!0}},tintBottomLeft:{get:function get(){return this._tintBL},set:function set(e){this._tintBL=t(e);this._isTinted=!0}},tintBottomRight:{get:function get(){return this._tintBR},set:function set(e){this._tintBR=t(e);this._isTinted=!0}},tint:{set:function set(e){this.setTint(e,e,e,e)}},isTinted:{get:function get(){return this._isTinted}}}},function(e){e.exports="changedata"},function(e){e.exports="changedata-"},function(e){e.exports="removedata"},function(e){e.exports="setdata"},function(e){e.exports="destroy"},function(e){e.exports="complete"},function(e){e.exports="created"},function(e){e.exports="error"},function(e){e.exports="loop"},function(e){e.exports="play"},function(e){e.exports="seeked"},function(e){e.exports="seeking"},function(e){e.exports="stop"},function(e){e.exports="timeout"},function(e){e.exports="unlocked"},function(e,t,i){var a=i(34);e.exports=function IncAlpha(e,t,i,n,r){return a(e,"alpha",t,i,n,r)}},function(e,t,i){var a=i(34);e.exports=function IncX(e,t,i,n,r){return a(e,"x",t,i,n,r)}},function(e,t,i){var a=i(34);e.exports=function IncXY(e,t,i,n,r,o,s){if(i===void 0||null===i){i=t}a(e,"x",t,n,o,s);return a(e,"y",i,r,o,s)}},function(e,t,i){var a=i(34);e.exports=function IncY(e,t,i,n,r){return a(e,"y",t,i,n,r)}},function(e){e.exports=function PlaceOnCircle(e,t,a,n){if(a===void 0){a=0}if(n===void 0){n=6.28}for(var r=a,o=(n-a)/e.length,s=0;s<e.length;s++){e[s].x=t.x+t.radius*Math.cos(r);e[s].y=t.y+t.radius*Math.sin(r);r+=o}return e}},function(e){e.exports=function PlaceOnEllipse(e,t,n,r){if(n===void 0){n=0}if(r===void 0){r=6.28}for(var o=n,s=(r-n)/e.length,l=t.width/2,a=t.height/2,d=0;d<e.length;d++){e[d].x=t.x+l*Math.cos(o);e[d].y=t.y+a*Math.sin(o);o+=s}return e}},function(e,t,i){var a=i(150);e.exports=function PlaceOnLine(e,t){for(var n=a(t,e.length),r=0;r<e.length;r++){var o=e[r],s=n[r];o.x=s.x;o.y=s.y}return e}},function(e,t,i){var a=i(282),n=i(283),r=i(284);e.exports=function PlaceOnRectangle(e,t,o){if(o===void 0){o=0}var s=a(t,!1,e.length);if(0<o){n(s,o)}else if(0>o){r(s,Math.abs(o))}for(var l=0;l<e.length;l++){e[l].x=s[l].x;e[l].y=s[l].y}return e}},function(e,t,i){var a=i(285);e.exports=function PlaceOnTriangle(e,t,n){var r=a({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2},n),o=a({x1:t.x2,y1:t.y2,x2:t.x3,y2:t.y3},n),s=a({x1:t.x3,y1:t.y3,x2:t.x1,y2:t.y1},n);r.pop();o.pop();s.pop();r=r.concat(o,s);for(var l=r.length/e.length,d=0,c=0;c<e.length;c++){var u=e[c],g=r[Math.floor(d)];u.x=g.x;u.y=g.y;d+=l}return e}},function(e){e.exports=function PlayAnimation(e,t,a){for(var n=0;n<e.length;n++){e[n].anims.play(t,a)}return e}},function(e,t,i){var a=i(147);e.exports=function RandomCircle(e,t){for(var n=0;n<e.length;n++){a(t,e[n])}return e}},function(e,t,i){var a=i(154);e.exports=function RandomEllipse(e,t){for(var n=0;n<e.length;n++){a(t,e[n])}return e}},function(e,t,i){var a=i(151);e.exports=function RandomLine(e,t){for(var n=0;n<e.length;n++){a(t,e[n])}return e}},function(e,t,i){var a=i(152);e.exports=function RandomRectangle(e,t){for(var n=0;n<e.length;n++){a(t,e[n])}return e}},function(e,t,i){var a=i(155);e.exports=function RandomTriangle(e,t){for(var n=0;n<e.length;n++){a(t,e[n])}return e}},function(e,t,i){var a=i(34);e.exports=function Rotate(e,t,i,n,r){return a(e,"rotation",t,i,n,r)}},function(e,t,i){var a=i(156),n=i(53);e.exports=function RotateAround(e,t,r){for(var o=t.x,s=t.y,l=0,d;l<e.length;l++){d=e[l];a(d,o,s,r,Math.max(1,n(d.x,d.y,o,s)))}return e}},function(e,t,i){var a=i(156);e.exports=function RotateAroundDistance(e,t,n,r){var o=t.x,s=t.y;if(0===r){return e}for(var l=0;l<e.length;l++){a(e[l],o,s,n,r)}return e}},function(e,t,i){var a=i(34);e.exports=function ScaleX(e,t,i,n,r){return a(e,"scaleX",t,i,n,r)}},function(e,t,i){var a=i(34);e.exports=function ScaleXY(e,t,i,n,r,o,s){if(i===void 0||null===i){i=t}a(e,"scaleX",t,n,o,s);return a(e,"scaleY",i,r,o,s)}},function(e,t,i){var a=i(34);e.exports=function ScaleY(e,t,i,n,r){return a(e,"scaleY",t,i,n,r)}},function(e,t,i){var a=i(25);e.exports=function SetAlpha(e,t,i,n,r){return a(e,"alpha",t,i,n,r)}},function(e,t,i){var a=i(25);e.exports=function SetBlendMode(e,t,i,n){return a(e,"blendMode",t,0,i,n)}},function(e,t,i){var a=i(25);e.exports=function SetDepth(e,t,i,n,r){return a(e,"depth",t,i,n,r)}},function(e){e.exports=function SetHitArea(e,t,a){for(var n=0;n<e.length;n++){e[n].setInteractive(t,a)}return e}},function(e,t,i){var a=i(25);e.exports=function SetOrigin(e,t,i,n,r,o,s){if(i===void 0||null===i){i=t}a(e,"originX",t,n,o,s);return a(e,"originY",i,r,o,s)}},function(e,t,i){var a=i(25);e.exports=function SetRotation(e,t,i,n,r){return a(e,"rotation",t,i,n,r)}},function(e,t,i){var a=i(25);e.exports=function SetScale(e,t,i,n,r,o,s){if(i===void 0||null===i){i=t}a(e,"scaleX",t,n,o,s);return a(e,"scaleY",i,r,o,s)}},function(e,t,i){var a=i(25);e.exports=function SetScaleX(e,t,i,n,r){return a(e,"scaleX",t,i,n,r)}},function(e,t,i){var a=i(25);e.exports=function SetScaleY(e,t,i,n,r){return a(e,"scaleY",t,i,n,r)}},function(e,t,i){var a=i(25);e.exports=function SetScrollFactor(e,t,i,n,r,o,s){if(i===void 0||null===i){i=t}a(e,"scrollFactorX",t,n,o,s);return a(e,"scrollFactorY",i,r,o,s)}},function(e,t,i){var a=i(25);e.exports=function SetScrollFactorX(e,t,i,n,r){return a(e,"scrollFactorX",t,i,n,r)}},function(e,t,i){var a=i(25);e.exports=function SetScrollFactorY(e,t,i,n,r){return a(e,"scrollFactorY",t,i,n,r)}},function(e){e.exports=function SetTint(e,t,a,n,r){for(var o=0;o<e.length;o++){e[o].setTint(t,a,n,r)}return e}},function(e,t,i){var a=i(25);e.exports=function SetVisible(e,t,i,n){return a(e,"visible",t,0,i,n)}},function(e,t,i){var a=i(25);e.exports=function SetX(e,t,i,n,r){return a(e,"x",t,i,n,r)}},function(e,t,i){var a=i(25);e.exports=function SetXY(e,t,i,n,r,o,s){if(i===void 0||null===i){i=t}a(e,"x",t,n,o,s);return a(e,"y",i,r,o,s)}},function(e,t,i){var a=i(25);e.exports=function SetY(e,t,i,n,r){return a(e,"y",t,i,n,r)}},function(e,t,i){var a=i(3);e.exports=function ShiftPosition(e,t,n,r,o){if(r===void 0){r=0}if(o===void 0){o=new a}var s,l;if(1<e.length){var d,p,c,u;if(0===r){var g=e.length-1;s=e[g].x;l=e[g].y;for(d=g-1;0<=d;d--){u=e[d];p=u.x;c=u.y;u.x=s;u.y=l;s=p;l=c}e[g].x=t;e[g].y=n}else{s=e[0].x;l=e[0].y;for(d=1;d<e.length;d++){u=e[d];p=u.x;c=u.y;u.x=s;u.y=l;s=p;l=c}e[0].x=t;e[0].y=n}}else{s=e[0].x;l=e[0].y;e[0].x=t;e[0].y=n}o.x=s;o.y=l;return o}},function(e,t,i){var a=i(114);e.exports=function Shuffle(e){return a(e)}},function(e,t,i){var a=i(157);e.exports=function SmootherStep(e,t,n,r,o){if(o===void 0){o=!1}var s=Math.abs(r-n)/e.length,l;if(o){for(l=0;l<e.length;l++){e[l][t]+=a(l*s,n,r)}}else{for(l=0;l<e.length;l++){e[l][t]=a(l*s,n,r)}}return e}},function(e,t,i){var a=i(158);e.exports=function SmoothStep(e,t,n,r,o){if(o===void 0){o=!1}var s=Math.abs(r-n)/e.length,l;if(o){for(l=0;l<e.length;l++){e[l][t]+=a(l*s,n,r)}}else{for(l=0;l<e.length;l++){e[l][t]=a(l*s,n,r)}}return e}},function(e){e.exports=function Spread(e,t,a,n,r){if(r===void 0){r=!1}var o=Math.abs(n-a)/e.length,s;if(r){for(s=0;s<e.length;s++){e[s][t]+=s*o+a}}else{for(s=0;s<e.length;s++){e[s][t]=s*o+a}}return e}},function(e){e.exports=function ToggleVisible(e){for(var t=0;t<e.length;t++){e[t].visible=!e[t].visible}return e}},function(e,t,i){var a=i(58);e.exports=function WrapInRectangle(e,t,n){if(n===void 0){n=0}for(var r=0,o;r<e.length;r++){o=e[r];o.x=a(o.x,t.left-n,t.right+n);o.y=a(o.y,t.top-n,t.bottom+n)}return e}},function(e,t,i){e.exports={Animation:i(148),AnimationFrame:i(268),AnimationManager:i(286),Events:i(111)}},function(e,t,i){e.exports={BaseCache:i(287),CacheManager:i(289),Events:i(288)}},function(e){e.exports="add"},function(e){e.exports="remove"},function(e,t,i){e.exports={Controls:i(637),Scene2D:i(640)}},function(e,t,i){e.exports={FixedKeyControl:i(638),SmoothedKeyControl:i(639)}},function(e,t,i){var a=i(0),n=i(6),r=new a({initialize:function(e){this.camera=n(e,"camera",null);this.left=n(e,"left",null);this.right=n(e,"right",null);this.up=n(e,"up",null);this.down=n(e,"down",null);this.zoomIn=n(e,"zoomIn",null);this.zoomOut=n(e,"zoomOut",null);this.zoomSpeed=n(e,"zoomSpeed",.01);this.speedX=0;this.speedY=0;var t=n(e,"speed",null);if("number"==typeof t){this.speedX=t;this.speedY=t}else{this.speedX=n(e,"speed.x",0);this.speedY=n(e,"speed.y",0)}this._zoom=0;this.active=null!==this.camera},start:function start(){this.active=null!==this.camera;return this},stop:function stop(){this.active=!1;return this},setCamera:function setCamera(e){this.camera=e;return this},update:function update(e){if(!this.active){return}if(e===void 0){e=1}var t=this.camera;if(this.up&&this.up.isDown){t.scrollY-=0|this.speedY*e}else if(this.down&&this.down.isDown){t.scrollY+=0|this.speedY*e}if(this.left&&this.left.isDown){t.scrollX-=0|this.speedX*e}else if(this.right&&this.right.isDown){t.scrollX+=0|this.speedX*e}if(this.zoomIn&&this.zoomIn.isDown){t.zoom-=this.zoomSpeed;if(.1>t.zoom){t.zoom=.1}}else if(this.zoomOut&&this.zoomOut.isDown){t.zoom+=this.zoomSpeed}},destroy:function destroy(){this.camera=null;this.left=null;this.right=null;this.up=null;this.down=null;this.zoomIn=null;this.zoomOut=null}});e.exports=r},function(e,t,i){var a=i(0),n=i(6),r=new a({initialize:function(e){this.camera=n(e,"camera",null);this.left=n(e,"left",null);this.right=n(e,"right",null);this.up=n(e,"up",null);this.down=n(e,"down",null);this.zoomIn=n(e,"zoomIn",null);this.zoomOut=n(e,"zoomOut",null);this.zoomSpeed=n(e,"zoomSpeed",.01);this.accelX=0;this.accelY=0;var t=n(e,"acceleration",null);if("number"==typeof t){this.accelX=t;this.accelY=t}else{this.accelX=n(e,"acceleration.x",0);this.accelY=n(e,"acceleration.y",0)}this.dragX=0;this.dragY=0;var i=n(e,"drag",null);if("number"==typeof i){this.dragX=i;this.dragY=i}else{this.dragX=n(e,"drag.x",0);this.dragY=n(e,"drag.y",0)}this.maxSpeedX=0;this.maxSpeedY=0;var a=n(e,"maxSpeed",null);if("number"==typeof a){this.maxSpeedX=a;this.maxSpeedY=a}else{this.maxSpeedX=n(e,"maxSpeed.x",0);this.maxSpeedY=n(e,"maxSpeed.y",0)}this._speedX=0;this._speedY=0;this._zoom=0;this.active=null!==this.camera},start:function start(){this.active=null!==this.camera;return this},stop:function stop(){this.active=!1;return this},setCamera:function setCamera(e){this.camera=e;return this},update:function update(e){if(!this.active){return}if(e===void 0){e=1}var t=this.camera;if(0<this._speedX){this._speedX-=this.dragX*e;if(0>this._speedX){this._speedX=0}}else if(0>this._speedX){this._speedX+=this.dragX*e;if(0<this._speedX){this._speedX=0}}if(0<this._speedY){this._speedY-=this.dragY*e;if(0>this._speedY){this._speedY=0}}else if(0>this._speedY){this._speedY+=this.dragY*e;if(0<this._speedY){this._speedY=0}}if(this.up&&this.up.isDown){this._speedY+=this.accelY;if(this._speedY>this.maxSpeedY){this._speedY=this.maxSpeedY}}else if(this.down&&this.down.isDown){this._speedY-=this.accelY;if(this._speedY<-this.maxSpeedY){this._speedY=-this.maxSpeedY}}if(this.left&&this.left.isDown){this._speedX+=this.accelX;if(this._speedX>this.maxSpeedX){this._speedX=this.maxSpeedX}}else if(this.right&&this.right.isDown){this._speedX-=this.accelX;if(this._speedX<-this.maxSpeedX){this._speedX=-this.maxSpeedX}}if(this.zoomIn&&this.zoomIn.isDown){this._zoom=-this.zoomSpeed}else if(this.zoomOut&&this.zoomOut.isDown){this._zoom=this.zoomSpeed}else{this._zoom=0}if(0!==this._speedX){t.scrollX-=0|this._speedX*e}if(0!==this._speedY){t.scrollY-=0|this._speedY*e}if(0!==this._zoom){t.zoom+=this._zoom;if(.001>t.zoom){t.zoom=.001}}},destroy:function destroy(){this.camera=null;this.left=null;this.right=null;this.up=null;this.down=null;this.zoomIn=null;this.zoomOut=null}});e.exports=r},function(e,t,i){e.exports={Camera:i(290),BaseCamera:i(91),CameraManager:i(693),Effects:i(298),Events:i(48)}},function(e){e.exports="cameradestroy"},function(e){e.exports="camerafadeincomplete"},function(e){e.exports="camerafadeinstart"},function(e){e.exports="camerafadeoutcomplete"},function(e){e.exports="camerafadeoutstart"},function(e){e.exports="cameraflashcomplete"},function(e){e.exports="cameraflashstart"},function(e){e.exports="camerapancomplete"},function(e){e.exports="camerapanstart"},function(e){e.exports="postrender"},function(e){e.exports="prerender"},function(e){e.exports="camerashakecomplete"},function(e){e.exports="camerashakestart"},function(e){e.exports="camerazoomcomplete"},function(e){e.exports="camerazoomstart"},function(e,t,i){var a=i(22),n=i(0),r=i(48),o=new n({initialize:function(e){this.camera=e;this.isRunning=!1;this.isComplete=!1;this.direction=!0;this.duration=0;this.red=0;this.green=0;this.blue=0;this.alpha=0;this.progress=0;this._elapsed=0;this._onUpdate;this._onUpdateScope},start:function start(e,t,i,a,n,o,s,l){if(e===void 0){e=!0}if(t===void 0){t=1e3}if(i===void 0){i=0}if(a===void 0){a=0}if(n===void 0){n=0}if(o===void 0){o=!1}if(s===void 0){s=null}if(l===void 0){l=this.camera.scene}if(!o&&this.isRunning){return this.camera}this.isRunning=!0;this.isComplete=!1;this.duration=t;this.direction=e;this.progress=0;this.red=i;this.green=a;this.blue=n;this.alpha=e?Number.MIN_VALUE:1;this._elapsed=0;this._onUpdate=s;this._onUpdateScope=l;var d=e?r.FADE_OUT_START:r.FADE_IN_START;this.camera.emit(d,this.camera,this,t,i,a,n);return this.camera},update:function update(e,t){if(!this.isRunning){return}this._elapsed+=t;this.progress=a(this._elapsed/this.duration,0,1);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,this.camera,this.progress)}if(this._elapsed<this.duration){this.alpha=this.direction?this.progress:1-this.progress}else{this.alpha=this.direction?1:0;this.effectComplete()}},postRenderCanvas:function postRenderCanvas(e){if(!this.isRunning&&!this.isComplete){return!1}var t=this.camera;e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")";e.fillRect(t._cx,t._cy,t._cw,t._ch);return!0},postRenderWebGL:function postRenderWebGL(e,t){if(!this.isRunning&&!this.isComplete){return!1}var i=this.camera,a=this.red/255,n=this.blue/255,r=this.green/255;e.drawFillRect(i._cx,i._cy,i._cw,i._ch,t(a,r,n,1),this.alpha);return!0},effectComplete:function effectComplete(){this._onUpdate=null;this._onUpdateScope=null;this.isRunning=!1;this.isComplete=!0;var e=this.direction?r.FADE_OUT_COMPLETE:r.FADE_IN_COMPLETE;this.camera.emit(e,this.camera,this)},reset:function reset(){this.isRunning=!1;this.isComplete=!1;this._onUpdate=null;this._onUpdateScope=null},destroy:function destroy(){this.reset();this.camera=null}});e.exports=o},function(e,t,i){var a=i(22),n=i(0),r=i(48),o=new n({initialize:function(e){this.camera=e;this.isRunning=!1;this.duration=0;this.red=0;this.green=0;this.blue=0;this.alpha=0;this.progress=0;this._elapsed=0;this._onUpdate;this._onUpdateScope},start:function start(e,t,i,a,n,o,s){if(e===void 0){e=250}if(t===void 0){t=255}if(i===void 0){i=255}if(a===void 0){a=255}if(n===void 0){n=!1}if(o===void 0){o=null}if(s===void 0){s=this.camera.scene}if(!n&&this.isRunning){return this.camera}this.isRunning=!0;this.duration=e;this.progress=0;this.red=t;this.green=i;this.blue=a;this.alpha=1;this._elapsed=0;this._onUpdate=o;this._onUpdateScope=s;this.camera.emit(r.FLASH_START,this.camera,this,e,t,i,a);return this.camera},update:function update(e,t){if(!this.isRunning){return}this._elapsed+=t;this.progress=a(this._elapsed/this.duration,0,1);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,this.camera,this.progress)}if(this._elapsed<this.duration){this.alpha=1-this.progress}else{this.effectComplete()}},postRenderCanvas:function postRenderCanvas(e){if(!this.isRunning){return!1}var t=this.camera;e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")";e.fillRect(t._cx,t._cy,t._cw,t._ch);return!0},postRenderWebGL:function postRenderWebGL(e,t){if(!this.isRunning){return!1}var i=this.camera,a=this.red/255,n=this.blue/255,r=this.green/255;e.drawFillRect(i._cx,i._cy,i._cw,i._ch,t(a,r,n,1),this.alpha);return!0},effectComplete:function effectComplete(){this._onUpdate=null;this._onUpdateScope=null;this.isRunning=!1;this.camera.emit(r.FLASH_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1;this._onUpdate=null;this._onUpdateScope=null},destroy:function destroy(){this.reset();this.camera=null}});e.exports=o},function(e,t,i){var a=i(22),n=i(0),r=i(166),o=i(48),s=i(3),l=new n({initialize:function(e){this.camera=e;this.isRunning=!1;this.duration=0;this.source=new s;this.current=new s;this.destination=new s;this.ease;this.progress=0;this._elapsed=0;this._onUpdate;this._onUpdateScope},start:function start(e,t,i,a,n,s,l){if(i===void 0){i=1e3}if(a===void 0){a=r.Linear}if(n===void 0){n=!1}if(s===void 0){s=null}if(l===void 0){l=this.camera.scene}var d=this.camera;if(!n&&this.isRunning){return d}this.isRunning=!0;this.duration=i;this.progress=0;this.source.set(d.scrollX,d.scrollY);this.destination.set(e,t);d.getScroll(e,t,this.current);if("string"==typeof a&&r.hasOwnProperty(a)){this.ease=r[a]}else if("function"==typeof a){this.ease=a}this._elapsed=0;this._onUpdate=s;this._onUpdateScope=l;this.camera.emit(o.PAN_START,this.camera,this,i,e,t);return d},update:function update(e,t){if(!this.isRunning){return}this._elapsed+=t;var i=a(this._elapsed/this.duration,0,1);this.progress=i;var n=this.camera;if(this._elapsed<this.duration){var r=this.ease(i);n.getScroll(this.destination.x,this.destination.y,this.current);var o=this.source.x+(this.current.x-this.source.x)*r,s=this.source.y+(this.current.y-this.source.y)*r;n.setScroll(o,s);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,n,i,o,s)}}else{n.centerOn(this.destination.x,this.destination.y);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,n,i,n.scrollX,n.scrollY)}this.effectComplete()}},effectComplete:function effectComplete(){this._onUpdate=null;this._onUpdateScope=null;this.isRunning=!1;this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1;this._onUpdate=null;this._onUpdateScope=null},destroy:function destroy(){this.reset();this.camera=null;this.source=null;this.destination=null}});e.exports=l},function(e){e.exports=function In(e,t){if(t===void 0){t=1.70158}return e*e*((t+1)*e-t)}},function(e){e.exports=function Out(e,t){if(t===void 0){t=1.70158}return--e*e*((t+1)*e+t)+1}},function(e){e.exports=function InOut(e,t){if(t===void 0){t=1.70158}var i=1.525*t;if(1>(e*=2)){return .5*(e*e*((i+1)*e-i))}else{return .5*((e-=2)*e*((i+1)*e+i)+2)}}},function(e){e.exports=function In(e){e=1-e;if(e<1/2.75){return 1-7.5625*e*e}else if(e<2/2.75){return 1-(7.5625*(e-=1.5/2.75)*e+.75)}else if(e<2.5/2.75){return 1-(7.5625*(e-=2.25/2.75)*e+.9375)}else{return 1-(7.5625*(e-=2.625/2.75)*e+.984375)}}},function(e){e.exports=function Out(e){if(e<1/2.75){return 7.5625*e*e}else if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}else{return 7.5625*(e-=2.625/2.75)*e+.984375}}},function(e){e.exports=function InOut(e){var t=!1;if(.5>e){e=1-2*e;t=!0}else{e=2*e-1}if(e<1/2.75){e=7.5625*e*e}else if(e<2/2.75){e=7.5625*(e-=1.5/2.75)*e+.75}else if(e<2.5/2.75){e=7.5625*(e-=2.25/2.75)*e+.9375}else{e=7.5625*(e-=2.625/2.75)*e+.984375}if(t){return .5*(1-e)}else{return .5*e+.5}}},function(e){e.exports=function In(e){return 1-Math.sqrt(1-e*e)}},function(e){e.exports=function Out(e){return Math.sqrt(1- --e*e)}},function(e){e.exports=function InOut(e){if(1>(e*=2)){return-.5*(Math.sqrt(1-e*e)-1)}else{return .5*(Math.sqrt(1-(e-=2)*e)+1)}}},function(e){e.exports=function In(e){return e*e*e}},function(e){e.exports=function Out(e){return--e*e*e+1}},function(e){e.exports=function InOut(e){if(1>(e*=2)){return .5*e*e*e}else{return .5*((e-=2)*e*e+2)}}},function(e){e.exports=function In(e,t,i){if(t===void 0){t=.1}if(i===void 0){i=.1}if(0===e){return 0}else if(1===e){return 1}else{var a=i/4;if(1>t){t=1}else{a=i*Math.asin(1/t)/(2*Math.PI)}return-(t*Math.pow(2,10*(e-=1))*Math.sin((e-a)*(2*Math.PI)/i))}}},function(e){e.exports=function Out(e,t,i){if(t===void 0){t=.1}if(i===void 0){i=.1}if(0===e){return 0}else if(1===e){return 1}else{var a=i/4;if(1>t){t=1}else{a=i*Math.asin(1/t)/(2*Math.PI)}return t*Math.pow(2,-10*e)*Math.sin((e-a)*(2*Math.PI)/i)+1}}},function(e){e.exports=function InOut(e,t,i){if(t===void 0){t=.1}if(i===void 0){i=.1}if(0===e){return 0}else if(1===e){return 1}else{var a=i/4;if(1>t){t=1}else{a=i*Math.asin(1/t)/(2*Math.PI)}if(1>(e*=2)){return-.5*(t*Math.pow(2,10*(e-=1))*Math.sin((e-a)*(2*Math.PI)/i))}else{return .5*(t*Math.pow(2,-10*(e-=1))*Math.sin((e-a)*(2*Math.PI)/i))+1}}}},function(e){e.exports=function In(e){return Math.pow(2,10*(e-1))-.001}},function(e){e.exports=function Out(e){return 1-Math.pow(2,-10*e)}},function(e){e.exports=function InOut(e){if(1>(e*=2)){return .5*Math.pow(2,10*(e-1))}else{return .5*(2-Math.pow(2,-10*(e-1)))}}},function(e){e.exports=function Linear(e){return e}},function(e){e.exports=function In(e){return e*e}},function(e){e.exports=function Out(e){return e*(2-e)}},function(e){e.exports=function InOut(e){if(1>(e*=2)){return .5*e*e}else{return-.5*(--e*(e-2)-1)}}},function(e){e.exports=function In(e){return e*e*e*e}},function(e){e.exports=function Out(e){return 1- --e*e*e*e}},function(e){e.exports=function InOut(e){if(1>(e*=2)){return .5*e*e*e*e}else{return-.5*((e-=2)*e*e*e-2)}}},function(e){e.exports=function In(e){return e*e*e*e*e}},function(e){e.exports=function Out(e){return--e*e*e*e*e+1}},function(e){e.exports=function InOut(e){if(1>(e*=2)){return .5*e*e*e*e*e}else{return .5*((e-=2)*e*e*e*e+2)}}},function(e){e.exports=function In(e){if(0===e){return 0}else if(1===e){return 1}else{return 1-Math.cos(e*Math.PI/2)}}},function(e){e.exports=function Out(e){if(0===e){return 0}else if(1===e){return 1}else{return Math.sin(e*Math.PI/2)}}},function(e){e.exports=function InOut(e){if(0===e){return 0}else if(1===e){return 1}else{return .5*(1-Math.cos(Math.PI*e))}}},function(e){e.exports=function Stepped(e,t){if(t===void 0){t=1}if(0>=e){return 0}else if(1<=e){return 1}else{return((0|t*e)+1)*(1/t)}}},function(e,t,i){var a=i(22),n=i(0),r=i(48),o=i(3),s=new n({initialize:function(e){this.camera=e;this.isRunning=!1;this.duration=0;this.intensity=new o;this.progress=0;this._elapsed=0;this._offsetX=0;this._offsetY=0;this._onUpdate;this._onUpdateScope},start:function start(e,t,i,a,n){if(e===void 0){e=100}if(t===void 0){t=.05}if(i===void 0){i=!1}if(a===void 0){a=null}if(n===void 0){n=this.camera.scene}if(!i&&this.isRunning){return this.camera}this.isRunning=!0;this.duration=e;this.progress=0;if("number"==typeof t){this.intensity.set(t)}else{this.intensity.set(t.x,t.y)}this._elapsed=0;this._offsetX=0;this._offsetY=0;this._onUpdate=a;this._onUpdateScope=n;this.camera.emit(r.SHAKE_START,this.camera,this,e,t);return this.camera},preRender:function preRender(){if(this.isRunning){this.camera.matrix.translate(this._offsetX,this._offsetY)}},update:function update(e,t){if(!this.isRunning){return}this._elapsed+=t;this.progress=a(this._elapsed/this.duration,0,1);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,this.camera,this.progress)}if(this._elapsed<this.duration){var i=this.intensity,n=this.camera._cw,r=this.camera._ch,o=this.camera.zoom;this._offsetX=(2*(Math.random()*i.x*n)-i.x*n)*o;this._offsetY=(2*(Math.random()*i.y*r)-i.y*r)*o;if(this.camera.roundPixels){this._offsetX=Math.round(this._offsetX);this._offsetY=Math.round(this._offsetY)}}else{this.effectComplete()}},effectComplete:function effectComplete(){this._offsetX=0;this._offsetY=0;this._onUpdate=null;this._onUpdateScope=null;this.isRunning=!1;this.camera.emit(r.SHAKE_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1;this._offsetX=0;this._offsetY=0;this._onUpdate=null;this._onUpdateScope=null},destroy:function destroy(){this.reset();this.camera=null;this.intensity=null}});e.exports=s},function(e,t,i){var a=i(22),n=i(0),r=i(166),o=i(48),s=new n({initialize:function(e){this.camera=e;this.isRunning=!1;this.duration=0;this.source=1;this.destination=1;this.ease;this.progress=0;this._elapsed=0;this._onUpdate;this._onUpdateScope},start:function start(e,t,i,a,n,s){if(t===void 0){t=1e3}if(i===void 0){i=r.Linear}if(a===void 0){a=!1}if(n===void 0){n=null}if(s===void 0){s=this.camera.scene}var l=this.camera;if(!a&&this.isRunning){return l}this.isRunning=!0;this.duration=t;this.progress=0;this.source=l.zoom;this.destination=e;if("string"==typeof i&&r.hasOwnProperty(i)){this.ease=r[i]}else if("function"==typeof i){this.ease=i}this._elapsed=0;this._onUpdate=n;this._onUpdateScope=s;this.camera.emit(o.ZOOM_START,this.camera,this,t,e);return l},update:function update(e,t){if(!this.isRunning){return}this._elapsed+=t;this.progress=a(this._elapsed/this.duration,0,1);if(this._elapsed<this.duration){this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)}}else{this.camera.zoom=this.destination;if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination)}this.effectComplete()}},effectComplete:function effectComplete(){this._onUpdate=null;this._onUpdateScope=null;this.isRunning=!1;this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1;this._onUpdate=null;this._onUpdateScope=null},destroy:function destroy(){this.reset();this.camera=null}});e.exports=s},function(e,t,i){var a=i(290),n=i(0),r=i(2),o=i(23),s=i(47),l=i(92),d=i(19),p=new n({initialize:function(e){this.scene=e;this.systems=e.sys;this.roundPixels=e.sys.game.config.roundPixels;this.cameras=[];this.main;this.default;e.sys.events.once(d.BOOT,this.boot,this);e.sys.events.on(d.START,this.start,this)},boot:function boot(){var e=this.systems;if(e.settings.cameras){this.fromJSON(e.settings.cameras)}else{this.add()}this.main=this.cameras[0];this.default=new a(0,0,e.scale.width,e.scale.height).setScene(this.scene);e.game.scale.on(l.RESIZE,this.onResize,this);this.systems.events.once(d.DESTROY,this.destroy,this)},start:function start(){if(!this.main){var e=this.systems;if(e.settings.cameras){this.fromJSON(e.settings.cameras)}else{this.add()}this.main=this.cameras[0]}var t=this.systems.events;t.on(d.UPDATE,this.update,this);t.once(d.SHUTDOWN,this.shutdown,this)},add:function add(e,t,i,n,r,o){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=this.scene.sys.scale.width}if(n===void 0){n=this.scene.sys.scale.height}if(r===void 0){r=!1}if(o===void 0){o=""}var s=new a(e,t,i,n);s.setName(o);s.setScene(this.scene);s.setRoundPixels(this.roundPixels);s.id=this.getNextID();this.cameras.push(s);if(r){this.main=s}return s},addExisting:function addExisting(e,t){if(t===void 0){t=!1}var i=this.cameras.indexOf(e);if(-1===i){e.id=this.getNextID();e.setRoundPixels(this.roundPixels);this.cameras.push(e);if(t){this.main=e}return e}return null},getNextID:function getNextID(){for(var e=this.cameras,a=1,n=0,r;32>n;n++){r=!1;for(var o=0,s;o<e.length;o++){s=e[o];if(s&&s.id===a){r=!0;continue}}if(r){a=a<<1}else{return a}}return 0},getTotal:function getTotal(e){if(e===void 0){e=!1}for(var t=0,a=this.cameras,n=0,r;n<a.length;n++){r=a[n];if(!e||e&&r.visible){t++}}return t},fromJSON:function fromJSON(e){if(!Array.isArray(e)){e=[e]}for(var t=this.scene.sys.scale.width,a=this.scene.sys.scale.height,n=0;n<e.length;n++){var o=e[n],s=r(o,"x",0),l=r(o,"y",0),d=r(o,"width",t),p=r(o,"height",a),c=this.add(s,l,d,p);c.name=r(o,"name","");c.zoom=r(o,"zoom",1);c.rotation=r(o,"rotation",0);c.scrollX=r(o,"scrollX",0);c.scrollY=r(o,"scrollY",0);c.roundPixels=r(o,"roundPixels",!1);c.visible=r(o,"visible",!0);var u=r(o,"backgroundColor",!1);if(u){c.setBackgroundColor(u)}var g=r(o,"bounds",null);if(g){var h=r(g,"x",0),m=r(g,"y",0),y=r(g,"width",t),x=r(g,"height",a);c.setBounds(h,m,y,x)}}return this},getCamera:function getCamera(e){for(var t=this.cameras,a=0;a<t.length;a++){if(t[a].name===e){return t[a]}}return null},getCamerasBelowPointer:function getCamerasBelowPointer(e){for(var t=this.cameras,a=e.x,n=e.y,r=[],o=0,l;o<t.length;o++){l=t[o];if(l.visible&&l.inputEnabled&&s(l,a,n)){r.unshift(l)}}return r},remove:function remove(e,t){if(t===void 0){t=!0}if(!Array.isArray(e)){e=[e]}for(var a=0,n=this.cameras,r=0,o;r<e.length;r++){o=n.indexOf(e[r]);if(-1!==o){if(t){n[o].destroy()}n.splice(o,1);a++}}if(!this.main&&n[0]){this.main=n[0]}return a},render:function render(e,t,a){for(var n=this.scene,r=this.cameras,o=0,s;o<this.cameras.length;o++){s=r[o];if(s.visible&&0<s.alpha){s.preRender(1);e.render(n,t,a,s)}}},resetAll:function resetAll(){for(var e=0;e<this.cameras.length;e++){this.cameras[e].destroy()}this.cameras=[];this.main=this.add();return this.main},update:function update(e,t){for(var a=0;a<this.cameras.length;a++){this.cameras[a].update(e,t)}},onResize:function onResize(e,t,a,n,r,o){for(var s=0,l;s<this.cameras.length;s++){l=this.cameras[s];if(0===l._x&&0===l._y&&l._width===r&&l._height===o){l.setSize(t.width,t.height)}}},resize:function resize(e,t){for(var a=0;a<this.cameras.length;a++){this.cameras[a].setSize(e,t)}},shutdown:function shutdown(){this.main=void 0;for(var e=0;e<this.cameras.length;e++){this.cameras[e].destroy()}this.cameras=[];var t=this.systems.events;t.off(d.UPDATE,this.update,this);t.off(d.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown();this.default.destroy();this.scene.sys.events.off(d.START,this.start,this);this.scene=null;this.systems=null}});o.register("CameraManager",p,"cameras");e.exports=p},function(e){e.exports="enterfullscreen"},function(e){e.exports="fullscreenfailed"},function(e){e.exports="fullscreenunsupported"},function(e){e.exports="leavefullscreen"},function(e){e.exports="orientationchange"},function(e){e.exports="resize"},function(e){e.exports="boot"},function(e){e.exports="create"},function(e){e.exports="destroy"},function(e){e.exports="pause"},function(e){e.exports="postupdate"},function(e){e.exports="preupdate"},function(e){e.exports="ready"},function(e){e.exports="render"},function(e){e.exports="resume"},function(e){e.exports="shutdown"},function(e){e.exports="sleep"},function(e){e.exports="start"},function(e){e.exports="transitioncomplete"},function(e){e.exports="transitioninit"},function(e){e.exports="transitionout"},function(e){e.exports="transitionstart"},function(e){e.exports="transitionwake"},function(e){e.exports="update"},function(e){e.exports="wake"},function(e,t,i){e.exports={Config:i(311),CreateRenderer:i(334),DebugHeader:i(336),Events:i(18),TimeStep:i(337),VisibilityHandler:i(339)}},function(e){var d=e.exports={},p,c;function t(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{if("function"==typeof setTimeout){p=setTimeout}else{p=t}}catch(i){p=t}try{if("function"==typeof clearTimeout){c=clearTimeout}else{c=i}}catch(t){c=i}})();function a(i){if(p===setTimeout){return setTimeout(i,0)}if((p===t||!p)&&setTimeout){p=setTimeout;return setTimeout(i,0)}try{return p(i,0)}catch(t){try{return p.call(null,i,0)}catch(t){return p.call(this,i,0)}}}function n(t){if(c===clearTimeout){return clearTimeout(t)}if((c===i||!c)&&clearTimeout){c=clearTimeout;return clearTimeout(t)}try{return c(t)}catch(i){try{return c.call(null,t)}catch(i){return c.call(this,t)}}}var u=[],g=!1,h,m=-1;function r(){if(!g||!h){return}g=!1;if(h.length){u=h.concat(u)}else{m=-1}if(u.length){o()}}function o(){if(g){return}var e=a(r);g=!0;var t=u.length;while(t){h=u;u=[];while(++m<t){if(h){h[m].run()}}m=-1;t=u.length}h=null;g=!1;n(e)}d.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}u.push(new s(e,t));if(1===u.length&&!g){a(o)}};function s(e,t){this.fun=e;this.array=t}s.prototype.run=function(){this.fun.apply(null,this.array)};d.title="browser";d.browser=!0;d.env={};d.argv=[];d.version="";d.versions={};function l(){}d.on=l;d.addListener=l;d.once=l;d.off=l;d.removeListener=l;d.removeAllListeners=l;d.emit=l;d.prependListener=l;d.prependOnceListener=l;d.listeners=function(){return[]};d.binding=function(){throw new Error("process.binding is not supported")};d.cwd=function(){return"/"};d.chdir=function(){throw new Error("process.chdir is not supported")};d.umask=function(){return 0}},function(e,t,i){var n=i(117),r={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function a(){if("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&1<=navigator.maxTouchPoints){r.touch=!0}if(navigator.msPointerEnabled||navigator.pointerEnabled){r.mspointer=!0}if(navigator.getGamepads){r.gamepads=!0}if("onwheel"in window||n.ie&&"WheelEvent"in window){r.wheelEvent="wheel"}else if("onmousewheel"in window){r.wheelEvent="mousewheel"}else if(n.firefox&&"MouseScrollEvent"in window){r.wheelEvent="DOMMouseScroll"}return r}e.exports=a()},function(e,t,i){var a=i(117),n={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};e.exports=function(){n.audioData=!!window.Audio;n.webAudio=!!(window.AudioContext||window.webkitAudioContext);var e=document.createElement("audio"),t=!!e.canPlayType;try{if(t){if(e.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/,"")){n.ogg=!0}if(e.canPlayType("audio/ogg; codecs=\"opus\"").replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,"")){n.opus=!0}if(e.canPlayType("audio/mpeg;").replace(/^no$/,"")){n.mp3=!0}if(e.canPlayType("audio/wav; codecs=\"1\"").replace(/^no$/,"")){n.wav=!0}if(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,"")){n.m4a=!0}if(e.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/,"")){n.webm=!0}if(""!==e.canPlayType("audio/mp4;codecs=\"ec-3\"")){if(a.edge){n.dolby=!0}else if(a.safari&&9<=a.safariVersion){if(/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var i=parseInt(RegExp.$1,10),r=parseInt(RegExp.$2,10);if(10===i&&11<=r||10<i){n.dolby=!0}}}}}}catch(t){}return n}()},function(e){var t={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};e.exports=function(){var e=document.createElement("video"),i=!!e.canPlayType;try{if(i){if(e.canPlayType("video/ogg; codecs=\"theora\"").replace(/^no$/,"")){t.ogg=!0}if(e.canPlayType("video/mp4; codecs=\"avc1.42E01E\"").replace(/^no$/,"")){t.h264=!0;t.mp4=!0}if(e.canPlayType("video/webm; codecs=\"vp8, vorbis\"").replace(/^no$/,"")){t.webm=!0}if(e.canPlayType("video/webm; codecs=\"vp9\"").replace(/^no$/,"")){t.vp9=!0}if(e.canPlayType("application/x-mpegURL; codecs=\"avc1.42E01E\"").replace(/^no$/,"")){t.hls=!0}}}catch(t){}return t}()},function(e){var t={available:!1,cancel:"",keyboard:!1,request:""};e.exports=function(){var e,a="Fullscreen",n="FullScreen",r=["request"+a,"request"+n,"webkitRequest"+a,"webkitRequest"+n,"msRequest"+a,"msRequest"+n,"mozRequest"+n,"mozRequest"+a];for(e=0;e<r.length;e++){if(document.documentElement[r[e]]){t.available=!0;t.request=r[e];break}}var o=["cancel"+n,"exit"+a,"webkitCancel"+n,"webkitExit"+a,"msCancel"+n,"msExit"+a,"mozCancel"+n,"mozExit"+a];if(t.available){for(e=0;e<o.length;e++){if(document[o[e]]){t.cancel=o[e];break}}}if(window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)){t.keyboard=!0}Object.defineProperty(t,"active",{get:function get(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}});return t}()},function(e,t,i){e.exports={Between:i(314),BetweenPoints:i(726),BetweenPointsY:i(727),BetweenY:i(728),CounterClockwise:i(729),Normalize:i(315),Reverse:i(730),RotateTo:i(731),ShortestBetween:i(732),Wrap:i(232),WrapDegrees:i(233)}},function(e){e.exports=function BetweenPoints(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}},function(e){e.exports=function BetweenPointsY(e,t){return Math.atan2(t.x-e.x,t.y-e.y)}},function(e){e.exports=function BetweenY(e,t,i,a){return Math.atan2(i-e,a-t)}},function(e,t,i){var a=i(13);e.exports=function CounterClockwise(e){if(e>Math.PI){e-=a.PI2}return Math.abs(((e+a.TAU)%a.PI2-a.PI2)%a.PI2)}},function(e,t,i){var a=i(315);e.exports=function Reverse(e){return a(e+Math.PI)}},function(e,t,i){var a=i(13);e.exports=function RotateTo(e,t,i){if(i===void 0){i=.05}if(e===t){return e}if(Math.abs(t-e)<=i||Math.abs(t-e)>=a.PI2-i){e=t}else{if(Math.abs(t-e)>Math.PI){if(t<e){t+=a.PI2}else{t-=a.PI2}}if(t>e){e+=i}else if(t<e){e-=i}}return e}},function(e){e.exports=function ShortestBetween(e,t){var i=t-e;if(0==i){return 0}var a=Math.floor((i- -180)/360);return i-360*a}},function(e,t,i){e.exports={Between:i(53),BetweenPoints:i(734),BetweenPointsSquared:i(735),Chebyshev:i(736),Power:i(737),Snake:i(738),Squared:i(316)}},function(e){e.exports=function DistanceBetweenPoints(e,t){var i=e.x-t.x,a=e.y-t.y;return Math.sqrt(i*i+a*a)}},function(e){e.exports=function DistanceBetweenPointsSquared(e,t){var i=e.x-t.x,a=e.y-t.y;return i*i+a*a}},function(e){e.exports=function ChebyshevDistance(e,t,i,a){return Math.max(Math.abs(e-i),Math.abs(t-a))}},function(e){e.exports=function DistancePower(e,t,i,a,n){if(n===void 0){n=2}return Math.sqrt(Math.pow(i-e,n)+Math.pow(a-t,n))}},function(e){e.exports=function SnakeDistance(e,t,i,a){return Math.abs(e-i)+Math.abs(t-a)}},function(e,t,i){e.exports={Back:i(299),Bounce:i(300),Circular:i(301),Cubic:i(302),Elastic:i(303),Expo:i(304),Linear:i(305),Quadratic:i(306),Quartic:i(307),Quintic:i(308),Sine:i(309),Stepped:i(310)}},function(e,t,i){e.exports={Ceil:i(741),Equal:i(144),Floor:i(742),GreaterThan:i(317),LessThan:i(318)}},function(e){e.exports=function Ceil(e,t){if(t===void 0){t=1e-4}return Math.ceil(e-t)}},function(e){e.exports=function Floor(e,t){if(t===void 0){t=1e-4}return Math.floor(e+t)}},function(e,t,i){e.exports={Bezier:i(744),CatmullRom:i(745),CubicBezier:i(321),Linear:i(746),QuadraticBezier:i(322),SmoothStep:i(323),SmootherStep:i(747)}},function(e,t,i){var a=i(319);e.exports=function BezierInterpolation(e,t){for(var r=0,o=e.length-1,n=0;n<=o;n++){r+=Math.pow(1-t,o-n)*Math.pow(t,n)*e[n]*a(o,n)}return r}},function(e,t,i){var a=i(169);e.exports=function CatmullRomInterpolation(e,t){var n=e.length-1,r=n*t,o=Math.floor(r);if(e[0]===e[n]){if(0>t){o=Math.floor(r=n*(1+t))}return a(r-o,e[(o-1+n)%n],e[o],e[(o+1)%n],e[(o+2)%n])}else{if(0>t){return e[0]-(a(-r,e[0],e[0],e[1],e[1])-e[0])}if(1<t){return e[n]-(a(r-n,e[n],e[n],e[n-1],e[n-1])-e[n])}return a(r-o,e[o?o-1:0],e[o],e[n<o+1?n:o+1],e[n<o+2?n:o+2])}}},function(e,t,i){var a=i(115);e.exports=function LinearInterpolation(e,t){var n=e.length-1,r=n*t,o=Math.floor(r);if(0>t){return a(e[0],e[1],r)}else if(1<t){return a(e[n],e[n-1],n-r)}else{return a(e[o],e[o+1>n?n:o+1],r-o)}}},function(e,t,i){var a=i(157);e.exports=function SmootherStepInterpolation(e,t,i){return t+(i-t)*a(e,0,1)}},function(e,t,i){e.exports={GetNext:i(324),IsSize:i(118),IsValue:i(749)}},function(e){e.exports=function IsValuePowerOfTwo(e){return 0<e&&0==(e&e-1)}},function(e,t,i){e.exports={Ceil:i(325),Floor:i(93),To:i(751)}},function(e){e.exports=function SnapTo(e,t,i,a){if(i===void 0){i=0}if(0===t){return e}e-=i;e=t*Math.round(e/t);return a?(i+e)/t:i+e}},function(e,t,i){var a=i(0),n=new a({initialize:function(e){if(e===void 0){e=[(Date.now()*Math.random()).toString()]}this.c=1;this.s0=0;this.s1=0;this.s2=0;this.n=0;this.signs=[-1,1];if(e){this.init(e)}},rnd:function rnd(){var e=2091639*this.s0+23283064365386963e-26*this.c;this.c=0|e;this.s0=this.s1;this.s1=this.s2;this.s2=e-this.c;return this.s2},hash:function hash(e){var t,a=this.n;e=e.toString();for(var r=0;r<e.length;r++){a+=e.charCodeAt(r);t=.02519603282416938*a;a=t>>>0;t-=a;t*=a;a=t>>>0;t-=a;a+=4294967296*t}this.n=a;return 23283064365386963e-26*(a>>>0)},init:function init(e){if("string"==typeof e){this.state(e)}else{this.sow(e)}},sow:function sow(e){this.n=4022871197;this.s0=this.hash(" ");this.s1=this.hash(" ");this.s2=this.hash(" ");this.c=1;if(!e){return}for(var t=0,a;t<e.length&&null!=e[t];t++){a=e[t];this.s0-=this.hash(a);this.s0+=~~(0>this.s0);this.s1-=this.hash(a);this.s1+=~~(0>this.s1);this.s2-=this.hash(a);this.s2+=~~(0>this.s2)}},integer:function integer(){return 4294967296*this.rnd()},frac:function frac(){return this.rnd()+11102230246251565e-32*(0|2097152*this.rnd())},real:function real(){return this.integer()+this.frac()},integerInRange:function integerInRange(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},between:function between(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},realInRange:function realInRange(e,t){return this.frac()*(t-e)+e},normal:function normal(){return 1-2*this.frac()},uuid:function uuid(){var e="",t="";for(t=e="";36>e++;t+=~e%5|4&3*e?(15^e?8^this.frac()*(20^e?16:4):4).toString(16):"-"){}return t},pick:function pick(e){return e[this.integerInRange(0,e.length-1)]},sign:function sign(){return this.pick(this.signs)},weightedPick:function weightedPick(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]},timestamp:function timestamp(e,t){return this.realInRange(e||9466848e5,t||1577862e6)},angle:function angle(){return this.integerInRange(-180,180)},rotation:function rotation(){return this.realInRange(-3.1415926,3.1415926)},state:function state(e){if("string"==typeof e&&e.match(/^!rnd/)){e=e.split(",");this.c=parseFloat(e[1]);this.s0=parseFloat(e[2]);this.s1=parseFloat(e[3]);this.s2=parseFloat(e[4])}return["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function shuffle(e){for(var t=e.length-1,a=t;0<a;a--){var n=Math.floor(this.frac()*(a+1)),r=e[n];e[n]=e[a];e[a]=r}return e}});e.exports=n},function(e){e.exports=function Average(e){for(var t=0,a=0;a<e.length;a++){t+=+e[a]}return t/e.length}},function(e){e.exports=function CeilTo(e,t,i){if(t===void 0){t=0}if(i===void 0){i=10}var a=Math.pow(i,-t);return Math.ceil(e*a)/a}},function(e){e.exports=function Difference(e,t){return Math.abs(e-t)}},function(e){e.exports=function FloorTo(e,t,i){if(t===void 0){t=0}if(i===void 0){i=10}var a=Math.pow(i,-t);return Math.floor(e*a)/a}},function(e){e.exports=function GetSpeed(e,t){return e/t/1e3}},function(e){e.exports=function IsEven(e){return e==parseFloat(e)?!(e%2):void 0}},function(e){e.exports=function IsEvenStrict(e){return e===parseFloat(e)?!(e%2):void 0}},function(e){e.exports=function MaxAdd(e,t,i){return Math.min(e+t,i)}},function(e){e.exports=function MinSub(e,t,i){return Math.max(e-t,i)}},function(e){e.exports=function Percent(e,t,i,a){if(i===void 0){i=t+1}var n=(e-t)/(i-t);if(1<n){if(a!==void 0){n=(a-e)/(a-i);if(0>n){n=0}}else{n=1}}else if(0>n){n=0}return n}},function(e){e.exports=function RandomXY(e,t){if(t===void 0){t=1}var i=2*Math.random()*Math.PI;e.x=Math.cos(i)*t;e.y=Math.sin(i)*t;return e}},function(e){e.exports=function RandomXYZ(e,t){if(t===void 0){t=1}var i=2*Math.random()*Math.PI,a=2*Math.random()-1,n=Math.sqrt(1-a*a)*t;e.x=Math.cos(i)*n;e.y=Math.sin(i)*n;e.z=a*t;return e}},function(e){e.exports=function RandomXYZW(e,t){if(t===void 0){t=1}e.x=(2*Math.random()-1)*t;e.y=(2*Math.random()-1)*t;e.z=(2*Math.random()-1)*t;e.w=(2*Math.random()-1)*t;return e}},function(e){e.exports=function RoundTo(e,t,i){if(t===void 0){t=0}if(i===void 0){i=10}var a=Math.pow(i,-t);return Math.round(e*a)/a}},function(e){e.exports=function SinCosTableGenerator(e,t,i,a){if(t===void 0){t=1}if(i===void 0){i=1}if(a===void 0){a=1}a*=Math.PI/e;for(var n=[],r=[],o=0;o<e;o++){i-=t*a;t+=i*a;n[o]=i;r[o]=t}return{sin:r,cos:n,length:e}}},function(e,t,i){var a=i(3);e.exports=function ToXY(e,t,i,n){if(n===void 0){n=new a}var r=0,o=0;if(0<e&&e<=t*i){if(e>t-1){o=Math.floor(e/t);r=e-o*t}else{r=e}n.set(r,o)}return n}},function(e){e.exports=function Within(e,t,i){return Math.abs(e-t)<=i}},function(e,t,i){var a=i(172),n=i(332),r=i(333),o=new n,s=new r,l=new a;e.exports=function RotateVec3(e,t,i){s.setAxisAngle(t,i);o.fromRotationTranslation(s,l.set(0,0,0));return e.transformMat4(o)}},function(e){e.exports="addtexture"},function(e){e.exports="onerror"},function(e){e.exports="onload"},function(e){e.exports="ready"},function(e){e.exports="removetexture"},function(e){e.exports="#define SHADER_NAME PHASER_BITMAP_MASK_FS\n\nprecision mediump float;\n\nuniform vec2 uResolution;\nuniform sampler2D uMainSampler;\nuniform sampler2D uMaskSampler;\nuniform bool uInvertMaskAlpha;\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy / uResolution;\n    vec4 mainColor = texture2D(uMainSampler, uv);\n    vec4 maskColor = texture2D(uMaskSampler, uv);\n    float alpha = mainColor.a;\n\n    if (!uInvertMaskAlpha)\n    {\n        alpha *= (maskColor.a);\n    }\n    else\n    {\n        alpha *= (1.0 - maskColor.a);\n    }\n\n    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);\n}\n"},function(e){e.exports="#define SHADER_NAME PHASER_BITMAP_MASK_VS\n\nprecision mediump float;\n\nattribute vec2 inPosition;\n\nvoid main()\n{\n    gl_Position = vec4(inPosition, 0.0, 1.0);\n}\n"},function(e){e.exports="#define SHADER_NAME PHASER_FORWARD_DIFFUSE_FS\n\nprecision mediump float;\n\nstruct Light\n{\n    vec2 position;\n    vec3 color;\n    float intensity;\n    float radius;\n};\n\nconst int kMaxLights = %LIGHT_COUNT%;\n\nuniform vec4 uCamera; /* x, y, rotation, zoom */\nuniform vec2 uResolution;\nuniform sampler2D uMainSampler;\nuniform sampler2D uNormSampler;\nuniform vec3 uAmbientLightColor;\nuniform Light uLights[kMaxLights];\nuniform mat3 uInverseRotationMatrix;\n\nvarying vec2 outTexCoord;\nvarying vec4 outTint;\n\nvoid main()\n{\n    vec3 finalColor = vec3(0.0, 0.0, 0.0);\n    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.rgb * outTint.a, outTint.a);\n    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;\n    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));\n    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;\n\n    for (int index = 0; index < kMaxLights; ++index)\n    {\n        Light light = uLights[index];\n        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);\n        vec3 lightNormal = normalize(lightDir);\n        float distToSurf = length(lightDir) * uCamera.w;\n        float diffuseFactor = max(dot(normal, lightNormal), 0.0);\n        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;\n        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);\n        vec3 diffuse = light.color * diffuseFactor;\n        finalColor += (attenuation * diffuse) * light.intensity;\n    }\n\n    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);\n    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);\n\n}\n"},function(e){e.exports="#define SHADER_NAME PHASER_TEXTURE_TINT_FS\n\nprecision mediump float;\n\nuniform sampler2D uMainSampler;\n\nvarying vec2 outTexCoord;\nvarying float outTintEffect;\nvarying vec4 outTint;\n\nvoid main()\n{\n    vec4 texture = texture2D(uMainSampler, outTexCoord);\n    vec4 texel = vec4(outTint.rgb * outTint.a, outTint.a);\n    vec4 color = texture;\n\n    if (outTintEffect == 0.0)\n    {\n        //  Multiply texture tint\n        color = texture * texel;\n    }\n    else if (outTintEffect == 1.0)\n    {\n        //  Solid color + texture alpha\n        color.rgb = mix(texture.rgb, outTint.rgb * outTint.a, texture.a);\n        color.a = texture.a * texel.a;\n    }\n    else if (outTintEffect == 2.0)\n    {\n        //  Solid color, no texture\n        color = texel;\n    }\n\n    gl_FragColor = color;\n}\n"},function(e){e.exports="#define SHADER_NAME PHASER_TEXTURE_TINT_VS\n\nprecision mediump float;\n\nuniform mat4 uProjectionMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uModelMatrix;\n\nattribute vec2 inPosition;\nattribute vec2 inTexCoord;\nattribute float inTintEffect;\nattribute vec4 inTint;\n\nvarying vec2 outTexCoord;\nvarying float outTintEffect;\nvarying vec4 outTint;\n\nvoid main ()\n{\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(inPosition, 1.0, 1.0);\n\n    outTexCoord = inTexCoord;\n    outTint = inTint;\n    outTintEffect = inTintEffect;\n}\n\n"},function(e,t,i){e.exports={GenerateTexture:i(340),Palettes:i(782)}},function(e,t,i){e.exports={ARNE16:i(341),C64:i(783),CGA:i(784),JMP:i(785),MSX:i(786)}},function(e){e.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(e){e.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(e){e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(e){e.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(e,t,i){e.exports={Path:i(788),CubicBezier:i(342),Curve:i(80),Ellipse:i(343),Line:i(344),QuadraticBezier:i(345),Spline:i(346)}},function(e,t,i){var a=i(0),n=i(342),r=i(343),o=i(5),s=i(344),l=i(789),d=i(345),p=i(11),c=i(346),u=i(3),g=i(13),h=new a({initialize:function(e,t){if(e===void 0){e=0}if(t===void 0){t=0}this.name="";this.curves=[];this.cacheLengths=[];this.autoClose=!1;this.startPoint=new u;this._tmpVec2A=new u;this._tmpVec2B=new u;if("object"===_typeof(e)){this.fromJSON(e)}else{this.startPoint.set(e,t)}},add:function add(e){this.curves.push(e);return this},circleTo:function circleTo(e,t,i){if(t===void 0){t=!1}return this.ellipseTo(e,e,0,360,t,i)},closePath:function closePath(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){this.curves.push(new s(t,e))}return this},cubicBezierTo:function cubicBezierTo(e,t,i,a,r,o){var s=this.getEndPoint(),l,d,p;if(e instanceof u){l=e;d=t;p=i}else{l=new u(i,a);d=new u(r,o);p=new u(e,t)}return this.add(new n(s,l,d,p))},quadraticBezierTo:function quadraticBezierTo(e,t,i,a){var n=this.getEndPoint(),r,o;if(e instanceof u){r=e;o=t}else{r=new u(i,a);o=new u(e,t)}return this.add(new d(n,r,o))},draw:function draw(e,t){for(var a=0,n;a<this.curves.length;a++){n=this.curves[a];if(!n.active){continue}n.draw(e,t)}return e},ellipseTo:function ellipseTo(e,t,i,a,n,o){var s=new r(0,0,e,t,i,a,n,o),l=this.getEndPoint(this._tmpVec2A),d=s.getStartPoint(this._tmpVec2B);l.subtract(d);s.x=l.x;s.y=l.y;return this.add(s)},fromJSON:function fromJSON(e){this.curves=[];this.cacheLengths=[];this.startPoint.set(e.x,e.y);this.autoClose=e.autoClose;for(var t=0,a;t<e.curves.length;t++){a=e.curves[t];switch(a.type){case"LineCurve":this.add(s.fromJSON(a));break;case"EllipseCurve":this.add(r.fromJSON(a));break;case"SplineCurve":this.add(c.fromJSON(a));break;case"CubicBezierCurve":this.add(n.fromJSON(a));break;case"QuadraticBezierCurve":this.add(d.fromJSON(a));break;}}return this},getBounds:function getBounds(e,t){if(e===void 0){e=new p}if(t===void 0){t=16}e.x=Number.MAX_VALUE;e.y=Number.MAX_VALUE;for(var a=new p,n=g.MIN_SAFE_INTEGER,r=g.MIN_SAFE_INTEGER,o=0,s;o<this.curves.length;o++){s=this.curves[o];if(!s.active){continue}s.getBounds(a,t);e.x=Math.min(e.x,a.x);e.y=Math.min(e.y,a.y);n=Math.max(n,a.right);r=Math.max(r,a.bottom)}e.right=n;e.bottom=r;return e},getCurveLengths:function getCurveLengths(){if(this.cacheLengths.length===this.curves.length){return this.cacheLengths}for(var e=[],t=0,a=0;a<this.curves.length;a++){t+=this.curves[a].getLength();e.push(t)}this.cacheLengths=e;return e},getEndPoint:function getEndPoint(e){if(e===void 0){e=new u}if(0<this.curves.length){this.curves[this.curves.length-1].getPoint(1,e)}else{e.copy(this.startPoint)}return e},getLength:function getLength(){var e=this.getCurveLengths();return e[e.length-1]},getPoint:function getPoint(e,t){if(t===void 0){t=new u}var a=e*this.getLength(),n=this.getCurveLengths(),r=0;while(r<n.length){if(n[r]>=a){var o=n[r]-a,s=this.curves[r],l=s.getLength(),d=0===l?0:1-o/l;return s.getPointAt(d,t)}r++}return null},getPoints:function getPoints(e){if(e===void 0){e=12}for(var t=[],a,n=0,r;n<this.curves.length;n++){r=this.curves[n];if(!r.active){continue}for(var o=r.getResolution(e),s=r.getPoints(o),l=0,d;l<s.length;l++){d=s[l];if(a&&a.equals(d)){continue}t.push(d);a=d}}if(this.autoClose&&1<t.length&&!t[t.length-1].equals(t[0])){t.push(t[0])}return t},getRandomPoint:function getRandomPoint(e){if(e===void 0){e=new u}return this.getPoint(Math.random(),e)},getSpacedPoints:function getSpacedPoints(e){if(e===void 0){e=40}for(var t=[],a=0;a<=e;a++){t.push(this.getPoint(a/e))}if(this.autoClose){t.push(t[0])}return t},getStartPoint:function getStartPoint(e){if(e===void 0){e=new u}return e.copy(this.startPoint)},lineTo:function lineTo(e,t){if(e instanceof u){this._tmpVec2B.copy(e)}else{this._tmpVec2B.set(e,t)}var i=this.getEndPoint(this._tmpVec2A);return this.add(new s([i.x,i.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function splineTo(e){e.unshift(this.getEndPoint());return this.add(new c(e))},moveTo:function moveTo(e,t){if(e instanceof u){return this.add(new l(e.x,e.y))}else{return this.add(new l(e,t))}},toJSON:function toJSON(){for(var e=[],t=0;t<this.curves.length;t++){e.push(this.curves[t].toJSON())}return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:e}},updateArcLengths:function updateArcLengths(){this.cacheLengths=[];this.getCurveLengths()},destroy:function destroy(){this.curves.length=0;this.cacheLengths.length=0;this.startPoint=void 0}});o.register("path",function(e,t){return new h(e,t)});e.exports=h},function(e,t,i){var a=i(0),n=i(3),r=new a({initialize:function(e,t){this.active=!1;this.p0=new n(e,t)},getPoint:function getPoint(e,t){if(t===void 0){t=new n}return t.copy(this.p0)},getPointAt:function getPointAt(e,t){return this.getPoint(e,t)},getResolution:function getResolution(){return 1},getLength:function getLength(){return 0},toJSON:function toJSON(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});e.exports=r},function(e,t,i){e.exports={DataManager:i(113),DataManagerPlugin:i(791),Events:i(281)}},function(e,t,i){var a=i(0),n=i(113),r=i(23),o=i(19),s=new a({Extends:n,initialize:function(e){n.call(this,e,e.sys.events);this.scene=e;this.systems=e.sys;e.sys.events.once(o.BOOT,this.boot,this);e.sys.events.on(o.START,this.start,this)},boot:function boot(){this.events=this.systems.events;this.events.once(o.DESTROY,this.destroy,this)},start:function start(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function shutdown(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){n.prototype.destroy.call(this);this.events.off(o.START,this.start,this);this.scene=null;this.systems=null}});r.register("DataManagerPlugin",s,"data");e.exports=s},function(e,t,i){e.exports={Align:i(793),BaseShader:i(347),Bounds:i(796),Canvas:i(799),Color:i(348),Masks:i(808)}},function(e,t,i){var a=i(106),n=i(17),r={In:i(794),To:i(795)};r=n(!1,r,a);e.exports=r},function(e,t,i){e.exports={BottomCenter:i(253),BottomLeft:i(254),BottomRight:i(255),Center:i(256),LeftCenter:i(258),QuickSet:i(252),RightCenter:i(259),TopCenter:i(260),TopLeft:i(261),TopRight:i(262)}},function(e,t,i){e.exports={BottomCenter:i(240),BottomLeft:i(241),BottomRight:i(242),LeftBottom:i(243),LeftCenter:i(244),LeftTop:i(245),QuickSet:i(239),RightBottom:i(246),RightCenter:i(247),RightTop:i(248),TopCenter:i(249),TopLeft:i(250),TopRight:i(251)}},function(e,t,i){e.exports={CenterOn:i(257),GetBottom:i(38),GetCenterX:i(75),GetCenterY:i(77),GetLeft:i(40),GetOffsetX:i(797),GetOffsetY:i(798),GetRight:i(42),GetTop:i(45),SetBottom:i(44),SetCenterX:i(76),SetCenterY:i(78),SetLeft:i(41),SetRight:i(43),SetTop:i(39)}},function(e){e.exports=function GetOffsetX(e){return e.width*e.originX}},function(e){e.exports=function GetOffsetY(e){return e.height*e.originY}},function(e,t,i){e.exports={CanvasInterpolation:i(335),CanvasPool:i(26),Smoothing:i(164),TouchAction:i(800),UserSelect:i(801)}},function(e){e.exports=function TouchAction(e,t){if(t===void 0){t="none"}e.style.msTouchAction=t;e.style["ms-touch-action"]=t;e.style["touch-action"]=t;return e}},function(e){e.exports=function UserSelect(e,t){if(t===void 0){t="none"}["-webkit-","-khtml-","-moz-","-ms-",""].forEach(function(i){e.style[i+"user-select"]=t});e.style["-webkit-touch-callout"]=t;e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)";return e}},function(e){e.exports=function ColorToRGBA(e){var t={r:255&e>>16,g:255&e>>8,b:255&e,a:255};if(16777215<e){t.a=e>>>24}return t}},function(e,t,i){var a=i(33),n=i(350);e.exports=function HSLToColor(e,t,i){var o=i,s=i,l=i;if(0!==t){var d=.5>i?i*(1+t):i+t-i*t,c=2*i-d;o=n(c,d,e+1/3);s=n(c,d,e);l=n(c,d,e-1/3)}var p=new a;return p.setGLTo(o,s,l,1)}},function(e,t,i){var a=i(163);e.exports=function HSVColorWheel(e,t){if(e===void 0){e=1}if(t===void 0){t=1}for(var i=[],n=0;359>=n;n++){i.push(a(n/359,e,t))}return i}},function(e,t,i){var a=i(115),n=function(e,i,n,r,o,s,l,d){if(l===void 0){l=100}if(d===void 0){d=0}var p=d/l;return{r:a(e,r,p),g:a(i,o,p),b:a(n,s,p)}};e.exports={RGBWithRGB:n,ColorWithRGB:function ColorWithRGB(e,t,i,a,r,o){if(r===void 0){r=100}if(o===void 0){o=0}return n(e.r,e.g,e.b,t,i,a,r,o)},ColorWithColor:function ColorWithColor(e,t,i,a){if(i===void 0){i=100}if(a===void 0){a=0}return n(e.r,e.g,e.b,t.r,t.g,t.b,i,a)}}},function(e,t,i){var a=i(170),n=i(33);e.exports=function RandomRGB(e,t){if(e===void 0){e=0}if(t===void 0){t=255}return new n(a(e,t),a(e,t),a(e,t))}},function(e,t,i){var n=i(349);e.exports=function RGBToString(e,t,i,r,o){if(r===void 0){r=255}if(o===void 0){o="#"}if("#"===o){return"#"+(16777216+(e<<16)+(t<<8)+i).toString(16).slice(1)}else{return"0x"+n(r)+n(e)+n(t)+n(i)}}},function(e,t,i){e.exports={BitmapMask:i(275),GeometryMask:i(276)}},function(e,t,i){var a={AddToDOM:i(120),DOMContentLoaded:i(351),GetScreenOrientation:i(352),GetTarget:i(357),ParseXML:i(358),RemoveFromDOM:i(176),RequestAnimationFrame:i(338)};e.exports=a},function(e,t,i){e.exports={EventEmitter:i(811)}},function(e,t,i){var a=i(0),n=i(9),r=i(23),o=new a({Extends:n,initialize:function(){n.call(this)},shutdown:function shutdown(){this.removeAllListeners()},destroy:function destroy(){this.removeAllListeners()}});r.register("EventEmitter",o,"events");e.exports=o},function(e,t,i){var a=i(120),n=i(286),r=i(289),o=i(26),s=i(0),l=i(311),d=i(813),p=i(334),c=i(113),u=i(336),g=i(312),h=i(351),m=i(9),y=i(18),x=i(359),f=i(23),T=i(364),v=i(365),b=i(367),E=i(119),S=i(370),_=i(337),A=i(339);var C=i(374),w=new s({initialize:function(e){this.config=new l(e);this.renderer=null;this.domContainer=null;this.canvas=null;this.context=null;this.isBooted=!1;this.isRunning=!1;this.events=new m;this.anims=new n(this);this.textures=new S(this);this.cache=new r(this);this.registry=new c(this);this.input=new x(this,this.config);this.scene=new b(this,this.config.sceneConfig);this.device=g;this.scale=new v(this,this.config);this.sound=null;this.sound=C.create(this);this.loop=new _(this,this.config.fps);this.plugins=new T(this,this.config);this.pendingDestroy=!1;this.removeCanvas=!1;this.noReturn=!1;this.hasFocus=!1;h(this.boot.bind(this))},boot:function boot(){if(!f.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0;this.config.preBoot(this);this.scale.preBoot();p(this);d(this);u(this);a(this.canvas,this.config.parent);this.textures.once(E.READY,this.texturesReady,this);this.events.emit(y.BOOT)},texturesReady:function texturesReady(){this.events.emit(y.READY);this.start()},start:function start(){this.isRunning=!0;this.config.postBoot(this);if(this.renderer){this.loop.start(this.step.bind(this))}else{this.loop.start(this.headlessStep.bind(this))}A(this);var e=this.events;e.on(y.HIDDEN,this.onHidden,this);e.on(y.VISIBLE,this.onVisible,this);e.on(y.BLUR,this.onBlur,this);e.on(y.FOCUS,this.onFocus,this)},step:function step(e,t){if(this.pendingDestroy){return this.runDestroy()}var i=this.events;i.emit(y.PRE_STEP,e,t);i.emit(y.STEP,e,t);this.scene.update(e,t);i.emit(y.POST_STEP,e,t);var a=this.renderer;a.preRender();i.emit(y.PRE_RENDER,a,e,t);this.scene.render(a);a.postRender();i.emit(y.POST_RENDER,a,e,t)},headlessStep:function headlessStep(e,t){if(this.pendingDestroy){return this.runDestroy()}var i=this.events;i.emit(y.PRE_STEP,e,t);i.emit(y.STEP,e,t);this.scene.update(e,t);i.emit(y.POST_STEP,e,t);i.emit(y.PRE_RENDER);i.emit(y.POST_RENDER)},onHidden:function onHidden(){this.loop.pause();this.events.emit(y.PAUSE)},onVisible:function onVisible(){this.loop.resume();this.events.emit(y.RESUME)},onBlur:function onBlur(){this.hasFocus=!1;this.loop.blur()},onFocus:function onFocus(){this.hasFocus=!0;this.loop.focus()},getFrame:function getFrame(){return this.loop.frame},getTime:function getTime(){return this.loop.now},destroy:function destroy(e,t){if(void 0===t){t=!1}this.pendingDestroy=!0;this.removeCanvas=e;this.noReturn=t},runDestroy:function runDestroy(){this.scene.destroy();this.events.emit(y.DESTROY);this.events.removeAllListeners();if(this.renderer){this.renderer.destroy()}if(this.removeCanvas&&this.canvas){o.remove(this.canvas);if(this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas)}}if(this.domContainer){this.domContainer.parentNode.removeChild(this.domContainer)}this.loop.destroy();this.pendingDestroy=!1}});e.exports=w},function(e,t,i){var a=i(120);e.exports=function CreateDOMContainer(e){var t=e.config;if(!t.parent||!t.domCreateContainer){return}var i=document.createElement("div");i.style.cssText=["display: block;","width: "+e.scale.width+"px;","height: "+e.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: none;","transform: scale(1);","transform-origin: left top;"].join(" ");e.domContainer=i;a(i,t.parent)}},function(e){e.exports="boot"},function(e){e.exports="destroy"},function(e){e.exports="dragend"},function(e){e.exports="dragenter"},function(e){e.exports="drag"},function(e){e.exports="dragleave"},function(e){e.exports="dragover"},function(e){e.exports="dragstart"},function(e){e.exports="drop"},function(e){e.exports="gameout"},function(e){e.exports="gameover"},function(e){e.exports="gameobjectdown"},function(e){e.exports="dragend"},function(e){e.exports="dragenter"},function(e){e.exports="drag"},function(e){e.exports="dragleave"},function(e){e.exports="dragover"},function(e){e.exports="dragstart"},function(e){e.exports="drop"},function(e){e.exports="gameobjectmove"},function(e){e.exports="gameobjectout"},function(e){e.exports="gameobjectover"},function(e){e.exports="pointerdown"},function(e){e.exports="pointermove"},function(e){e.exports="pointerout"},function(e){e.exports="pointerover"},function(e){e.exports="pointerup"},function(e){e.exports="wheel"},function(e){e.exports="gameobjectup"},function(e){e.exports="gameobjectwheel"},function(e){e.exports="boot"},function(e){e.exports="process"},function(e){e.exports="update"},function(e){e.exports="pointerdown"},function(e){e.exports="pointerdownoutside"},function(e){e.exports="pointermove"},function(e){e.exports="pointerout"},function(e){e.exports="pointerover"},function(e){e.exports="pointerup"},function(e){e.exports="pointerupoutside"},function(e){e.exports="wheel"},function(e){e.exports="pointerlockchange"},function(e){e.exports="preupdate"},function(e){e.exports="shutdown"},function(e){e.exports="start"},function(e){e.exports="update"},function(e){e.exports=function GetInnerHeight(e){if(!e){return window.innerHeight}var t=Math.abs(window.orientation),i={w:0,h:0},a=document.createElement("div");a.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0");document.documentElement.appendChild(a);i.w=90===t?a.offsetHeight:window.innerWidth;i.h=90===t?window.innerWidth:a.offsetHeight;document.documentElement.removeChild(a);a=null;if(90!==Math.abs(window.orientation)){return i.h}else{return i.w}}},function(e){e.exports="addfile"},function(e){e.exports="complete"},function(e){e.exports="filecomplete"},function(e){e.exports="filecomplete-"},function(e){e.exports="loaderror"},function(e){e.exports="load"},function(e){e.exports="fileprogress"},function(e){e.exports="postprocess"},function(e){e.exports="progress"},function(e){e.exports="start"},function(e,t,i){var a=i(2),n=i(179);e.exports=function GetPhysicsPlugins(e){var t=e.game.config.defaultPhysicsSystem,i=a(e.settings,"physics",!1);if(!t&&!i){return}var r=[];if(t){r.push(n(t+"Physics"))}if(i){for(var o in i){o=n(o.concat("Physics"));if(-1===r.indexOf(o)){r.push(o)}}}return r}},function(e,t,i){var a=i(2);e.exports=function GetScenePlugins(e){var t=e.plugins.getDefaultScenePlugins(),i=a(e.settings,"plugins",!1);if(Array.isArray(i)){return i}else if(t){return t}else{return[]}}},function(e){e.exports={game:"game",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(e){e.exports=function AtlasXML(e,t,a){if(!a.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var n=e.source[t];e.add("__BASE",t,0,0,n.width,n.height);for(var r=a.getElementsByTagName("SubTexture"),o,s=0;s<r.length;s++){var l=r[s].attributes,d=l.name.value,p=parseInt(l.x.value,10),c=parseInt(l.y.value,10),u=parseInt(l.width.value,10),g=parseInt(l.height.value,10);o=e.add(d,t,p,c,u,g);if(l.frameX){var h=Math.abs(parseInt(l.frameX.value,10)),m=Math.abs(parseInt(l.frameY.value,10)),y=parseInt(l.frameWidth.value,10),x=parseInt(l.frameHeight.value,10);o.setTrim(u,g,h,m,y,x)}}return e}},function(e){e.exports=function Canvas(e,t){var i=e.source[t];e.add("__BASE",t,0,0,i.width,i.height);return e}},function(e){e.exports=function Image(e,t){var i=e.source[t];e.add("__BASE",t,0,0,i.width,i.height);return e}},function(e,t,i){var a=i(67);e.exports=function JSONArray(e,t,n){if(!n.frames&&!n.textures){console.warn("Invalid Texture Atlas JSON Array");return}var r=e.source[t];e.add("__BASE",t,0,0,r.width,r.height);for(var o=Array.isArray(n.textures)?n.textures[t].frames:n.frames,s,l=0,d;l<o.length;l++){d=o[l];s=e.add(d.filename,t,d.frame.x,d.frame.y,d.frame.w,d.frame.h);if(d.trimmed){s.setTrim(d.sourceSize.w,d.sourceSize.h,d.spriteSourceSize.x,d.spriteSourceSize.y,d.spriteSourceSize.w,d.spriteSourceSize.h)}if(d.rotated){s.rotated=!0;s.updateUVsInverted()}if(d.anchor){s.customPivot=!0;s.pivotX=d.anchor.x;s.pivotY=d.anchor.y}s.customData=a(d)}for(var p in n){if("frames"==p){continue}if(Array.isArray(n[p])){e.customData[p]=n[p].slice(0)}else{e.customData[p]=n[p]}}return e}},function(e,t,i){var a=i(67);e.exports=function JSONHash(e,t,i){if(!i.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var n=e.source[t];e.add("__BASE",t,0,0,n.width,n.height);var r=i.frames,o;for(var s in r){var l=r[s];o=e.add(s,t,l.frame.x,l.frame.y,l.frame.w,l.frame.h);if(l.trimmed){o.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h)}if(l.rotated){o.rotated=!0;o.updateUVsInverted()}o.customData=a(l)}for(var d in i){if("frames"==d){continue}if(Array.isArray(i[d])){e.customData[d]=i[d].slice(0)}else{e.customData[d]=i[d]}}return e}},function(e,t,i){var a=i(2);e.exports=function SpriteSheet(e,t,n,r,o,s,l){var d=a(l,"frameWidth",null),p=a(l,"frameHeight",d);if(null===d){throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.")}var c=e.source[t];e.add("__BASE",t,0,0,c.width,c.height);var u=a(l,"startFrame",0),g=a(l,"endFrame",-1),m=a(l,"margin",0),y=a(l,"spacing",0),x=Math.floor((o-m+y)/(d+y)),f=Math.floor((s-m+y)/(p+y)),T=x*f;if(0===T){console.warn("SpriteSheet frame dimensions will result in zero frames.")}if(u>T||u<-T){u=0}if(0>u){u=T+u}if(-1!==g){T=u+(g+1)}for(var v=m,b=m,E=0,S=0,_=0;_<T;_++){E=0;S=0;var A=v+d,C=b+p;if(A>o){E=A-o}if(C>s){S=C-s}e.add(_,t,n+v,r+b,d-E,p-S);v+=d+y;if(v+d>o){v=m;b+=p+y}}return e}},function(e,t,i){var a=i(2);e.exports=function SpriteSheetFromAtlas(e,t,i){var n=a(i,"frameWidth",null),r=a(i,"frameHeight",n);if(!n){throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.")}var o=e.source[0];e.add("__BASE",0,0,0,o.width,o.height);var s=a(i,"startFrame",0),l=a(i,"endFrame",-1),d=a(i,"margin",0),p=a(i,"spacing",0),c=t.cutX,u=t.cutY,g=t.cutWidth,h=t.cutHeight,m=t.realWidth,y=t.realHeight,x=Math.floor((m-d+p)/(n+p)),f=Math.floor((y-d+p)/(r+p)),T=x*f,v=t.x,b=n-v,E=n-(m-g-v),S=t.y,_=r-S,A=r-(y-h-S);if(s>T||s<-T){s=0}if(0>s){s=T+s}if(-1!==l){T=s+(l+1)}for(var C,w=d,P=d,O=0,R=t.sourceIndex,L=0;L<f;L++){for(var k=0==L,D=L==f-1,F=0;F<x;F++){var I=0==F,M=F==x-1;C=e.add(O,R,c+w,u+P,n,r);if(I||k||M||D){var B=I?v:0,Y=k?S:0,N=0,X=0;if(I){N+=n-b}if(M){N+=n-E}if(k){X+=r-_}if(D){X+=r-A}var z=n-N,U=r-X;C.cutWidth=z;C.cutHeight=U;C.setTrim(n,r,B,Y,z,U)}w+=p;if(I){w+=b}else if(M){w+=E}else{w+=n}O++}w=d;P+=p;if(k){P+=_}else if(D){P+=A}else{P+=r}}return e}},function(e){var t=0,i=function(e,i,a,n){var r=t-n.y-n.height;e.add(a,i,n.x,r,n.width,n.height)};e.exports=function UnityYAML(e,a,n){var r=e.source[a];e.add("__BASE",a,0,0,r.width,r.height);t=r.height;for(var o=n.split("\n"),s=/^[ ]*(- )*(\w+)+[: ]+(.*)/,l="",d="",p={x:0,y:0,width:0,height:0},c=0,u;c<o.length;c++){u=o[c].match(s);if(!u){continue}var g="- "===u[1],h=u[2],m=u[3];if(g){if(d!==l){i(e,a,d,p);l=d}p={x:0,y:0,width:0,height:0}}if("name"===h){d=m;continue}switch(h){case"x":case"y":case"width":case"height":p[h]=parseInt(m,10);break;}}if(d!==l){i(e,a,d,p)}return e}},function(e){e.exports="complete"},function(e){e.exports="decoded"},function(e){e.exports="decodedall"},function(e){e.exports="destroy"},function(e){e.exports="detune"},function(e){e.exports="detune"},function(e){e.exports="mute"},function(e){e.exports="rate"},function(e){e.exports="volume"},function(e){e.exports="loop"},function(e){e.exports="looped"},function(e){e.exports="mute"},function(e){e.exports="pauseall"},function(e){e.exports="pause"},function(e){e.exports="play"},function(e){e.exports="rate"},function(e){e.exports="resumeall"},function(e){e.exports="resume"},function(e){e.exports="seek"},function(e){e.exports="stopall"},function(e){e.exports="stop"},function(e){e.exports="unlocked"},function(e){e.exports="volume"},function(e,t,i){var a={Events:i(90),DisplayList:i(906),GameObjectCreator:i(16),GameObjectFactory:i(5),UpdateList:i(934),Components:i(12),BuildGameObject:i(28),BuildGameObjectAnimation:i(385),GameObject:i(14),BitmapText:i(129),Blitter:i(186),Container:i(187),DOMElement:i(387),DynamicBitmapText:i(188),Extern:i(389),Graphics:i(189),Group:i(97),Image:i(98),Particles:i(966),PathFollower:i(401),RenderTexture:i(193),RetroFont:i(975),Sprite:i(69),Text:i(195),TileSprite:i(196),Zone:i(110),Video:i(197),Shape:i(30),Arc:i(402),Curve:i(403),Ellipse:i(404),Grid:i(405),IsoBox:i(406),IsoTriangle:i(407),Line:i(408),Polygon:i(409),Rectangle:i(414),Star:i(415),Triangle:i(416),Factories:{Blitter:i(1023),Container:i(1024),DOMElement:i(1025),DynamicBitmapText:i(1026),Extern:i(1027),Graphics:i(1028),Group:i(1029),Image:i(1030),Particles:i(1031),PathFollower:i(1032),RenderTexture:i(1033),Sprite:i(1034),StaticBitmapText:i(1035),Text:i(1036),TileSprite:i(1037),Zone:i(1038),Video:i(1039),Arc:i(1040),Curve:i(1041),Ellipse:i(1042),Grid:i(1043),IsoBox:i(1044),IsoTriangle:i(1045),Line:i(1046),Polygon:i(1047),Rectangle:i(1048),Star:i(1049),Triangle:i(1050)},Creators:{Blitter:i(1051),Container:i(1052),DynamicBitmapText:i(1053),Graphics:i(1054),Group:i(1055),Image:i(1056),Particles:i(1057),RenderTexture:i(1058),Sprite:i(1059),StaticBitmapText:i(1060),Text:i(1061),TileSprite:i(1062),Zone:i(1063),Video:i(1064)}};a.Mesh=i(130);a.Quad=i(200);a.Shader=i(201);a.Factories.Mesh=i(1071);a.Factories.Quad=i(1072);a.Factories.Shader=i(1073);a.Creators.Mesh=i(1074);a.Creators.Quad=i(1075);a.Creators.Shader=i(1076);a.Light=i(420);i(421);i(1077);e.exports=a},function(e,t,i){var a=i(0),n=i(126),r=i(23),o=i(19),s=i(128),l=new a({Extends:n,initialize:function(e){n.call(this,e);this.sortChildrenFlag=!1;this.scene=e;this.systems=e.sys;e.sys.events.once(o.BOOT,this.boot,this);e.sys.events.on(o.START,this.start,this)},boot:function boot(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function start(){this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},queueDepthSort:function queueDepthSort(){this.sortChildrenFlag=!0},depthSort:function depthSort(){if(this.sortChildrenFlag){s.inplace(this.list,this.sortByDepth);this.sortChildrenFlag=!1}},sortByDepth:function sortByDepth(e,t){return e._depth-t._depth},getChildren:function getChildren(){return this.list},shutdown:function shutdown(){var e=this.list.length;while(e--){this.list[e].destroy(!0)}this.list.length=0;this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown();this.scene.sys.events.off(o.START,this.start,this);this.scene=null;this.systems=null}});r.register("DisplayList",l,"displayList");e.exports=l},function(e,t,i){e.exports={CheckMatrix:i(182),MatrixToString:i(908),ReverseColumns:i(909),ReverseRows:i(910),Rotate180:i(911),RotateLeft:i(912),RotateMatrix:i(127),RotateRight:i(913),TransposeMatrix:i(382)}},function(e,t,i){var a=i(160),n=i(182);e.exports=function MatrixToString(e){var t="";if(!n(e)){return t}for(var o=0;o<e.length;o++){for(var s=0,l;s<e[o].length;s++){l=e[o][s].toString();if("undefined"!==l){t+=a(l,2)}else{t+="?"}if(s<e[o].length-1){t+=" |"}}if(o<e.length-1){t+="\n";for(var d=0;d<e[o].length;d++){t+="---";if(d<e[o].length-1){t+="+"}}t+="\n"}}return t}},function(e){e.exports=function ReverseColumns(e){return e.reverse()}},function(e){e.exports=function ReverseRows(e){for(var t=0;t<e.length;t++){e[t].reverse()}return e}},function(e,t,i){var a=i(127);e.exports=function Rotate180(e){return a(e,180)}},function(e,t,i){var a=i(127);e.exports=function RotateLeft(e){return a(e,90)}},function(e,t,i){var a=i(127);e.exports=function RotateRight(e){return a(e,-90)}},function(e){e.exports=function Add(e,t,a,n,r){if(r===void 0){r=e}if(0<a){var o=a-e.length;if(0>=o){return null}}if(!Array.isArray(t)){if(-1===e.indexOf(t)){e.push(t);if(n){n.call(r,t)}return t}else{return null}}var s=t.length-1;while(0<=s){if(-1!==e.indexOf(t[s])){t.splice(s,1)}s--}s=t.length;if(0===s){return null}if(0<a&&s>o){t.splice(o);s=o}for(var l=0,d;l<s;l++){d=t[l];e.push(d);if(n){n.call(r,d)}}return t}},function(e){e.exports=function AddAt(e,t,a,n,r,o){if(a===void 0){a=0}if(o===void 0){o=e}if(0<n){var s=n-e.length;if(0>=s){return null}}if(!Array.isArray(t)){if(-1===e.indexOf(t)){e.splice(a,0,t);if(r){r.call(o,t)}return t}else{return null}}var l=t.length-1;while(0<=l){if(-1!==e.indexOf(t[l])){t.pop()}l--}l=t.length;if(0===l){return null}if(0<n&&l>s){t.splice(s);l=s}for(var d=l-1,p;0<=d;d--){p=t[d];e.splice(a,0,p);if(r){r.call(o,p)}}return t}},function(e){e.exports=function BringToTop(e,t){var i=e.indexOf(t);if(-1!==i&&i<e.length){e.splice(i,1);e.push(t)}return t}},function(e,t,i){var a=i(68);e.exports=function CountAllMatching(e,t,n,r,o){if(r===void 0){r=0}if(o===void 0){o=e.length}var s=0;if(a(e,r,o)){for(var l=r,d;l<o;l++){d=e[l];if(d[t]===n){s++}}}return s}},function(e){e.exports=function Each(e,t,a){var n,r=[null];for(n=3;n<arguments.length;n++){r.push(arguments[n])}for(n=0;n<e.length;n++){r[0]=e[n];t.apply(a,r)}return e}},function(e,t,i){var a=i(68);e.exports=function EachInRange(e,t,n,r,o){if(r===void 0){r=0}if(o===void 0){o=e.length}if(a(e,r,o)){var s,l=[null];for(s=5;s<arguments.length;s++){l.push(arguments[s])}for(s=r;s<o;s++){l[0]=e[s];t.apply(n,l)}}return e}},function(e,t,i){var a=i(68);e.exports=function GetAll(e,t,n,r,o){if(r===void 0){r=0}if(o===void 0){o=e.length}var s=[];if(a(e,r,o)){for(var l=r,d;l<o;l++){d=e[l];if(!t||t&&n===void 0&&d.hasOwnProperty(t)||t&&n!==void 0&&d[t]===n){s.push(d)}}}return s}},function(e,t,i){var a=i(68);e.exports=function GetFirst(e,t,n,r,o){if(r===void 0){r=0}if(o===void 0){o=e.length}if(a(e,r,o)){for(var s=r,l;s<o;s++){l=e[s];if(!t||t&&n===void 0&&l.hasOwnProperty(t)||t&&n!==void 0&&l[t]===n){return l}}}return null}},function(e){e.exports=function MoveDown(e,t){var i=e.indexOf(t);if(0<i){var a=e[i-1],n=e.indexOf(a);e[i]=a;e[n]=t}return e}},function(e){e.exports=function MoveTo(e,t,i){var a=e.indexOf(t);if(-1===a||0>i||i>=e.length){throw new Error("Supplied index out of bounds")}if(a!==i){e.splice(a,1);e.splice(i,0,t)}return t}},function(e){e.exports=function MoveUp(e,t){var i=e.indexOf(t);if(-1!==i&&i<e.length-1){var a=e[i+1],n=e.indexOf(a);e[i]=a;e[n]=t}return e}},function(e){e.exports=function NumberArray(e,t,a,n){for(var r=[],o=e;o<=t;o++){if(a||n){var s=a?a+o.toString():o.toString();if(n){s=s.concat(n)}r.push(s)}else{r.push(o)}}return r}},function(e,t,i){var a=i(328);e.exports=function NumberArrayStep(e,t,n){if(e===void 0){e=0}if(t===void 0){t=null}if(n===void 0){n=1}if(null===t){t=e;e=0}for(var r=[],o=Math.max(a((t-e)/(n||1)),0),s=0;s<o;s++){r.push(e);e+=n}return r}},function(e,t,i){var a=i(79);e.exports=function RemoveAt(e,t,i,n){if(n===void 0){n=e}if(0>t||t>e.length-1){throw new Error("Index out of bounds")}var r=a(e,t);if(i){i.call(n,r)}return r}},function(e,t,i){var a=i(68);e.exports=function RemoveBetween(e,t,n,r,o){if(t===void 0){t=0}if(n===void 0){n=e.length}if(o===void 0){o=e}if(a(e,t,n)){var s=n-t,l=e.splice(t,s);if(r){for(var d=0,p;d<l.length;d++){p=l[d];r.call(o,p)}}return l}else{return[]}}},function(e,t,i){var a=i(79);e.exports=function RemoveRandomElement(e,t,i){if(t===void 0){t=0}if(i===void 0){i=e.length}var n=t+Math.floor(Math.random()*i);return a(e,n)}},function(e){e.exports=function Replace(e,t,i){var a=e.indexOf(t),n=e.indexOf(i);if(-1!==a&&-1===n){e[a]=i;return!0}else{return!1}}},function(e){e.exports=function SendToBack(e,t){var i=e.indexOf(t);if(-1!==i&&0<i){e.splice(i,1);e.unshift(t)}return t}},function(e,t,i){var a=i(68);e.exports=function SetAll(e,t,n,r,o){if(r===void 0){r=0}if(o===void 0){o=e.length}if(a(e,r,o)){for(var s=r,l;s<o;s++){l=e[s];if(l.hasOwnProperty(t)){l[t]=n}}}return e}},function(e){e.exports=function Swap(e,t,i){if(t===i){return}var a=e.indexOf(t),n=e.indexOf(i);if(0>a||0>n){throw new Error("Supplied items must be elements of the same array")}e[a]=i;e[n]=t;return e}},function(e,t,i){var a=i(0),n=i(184),r=i(23),o=i(19),s=new a({Extends:n,initialize:function(e){n.call(this);this.scene=e;this.systems=e.sys;e.sys.events.once(o.BOOT,this.boot,this);e.sys.events.on(o.START,this.start,this)},boot:function boot(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function start(){var e=this.systems.events;e.on(o.PRE_UPDATE,this.update,this);e.on(o.UPDATE,this.sceneUpdate,this);e.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function sceneUpdate(e,t){for(var a=this._active,n=a.length,r=0,o;r<n;r++){o=a[r];if(o.active){o.preUpdate.call(o,e,t)}}},shutdown:function shutdown(){var e=this._active.length;while(e--){this._active[e].destroy(!0)}e=this._pending.length;while(e--){this._pending[e].destroy(!0)}e=this._destroy.length;while(e--){this._destroy[e].destroy(!0)}this._toProcess=0;this._pending=[];this._active=[];this._destroy=[];this.removeAllListeners();var t=this.systems.events;t.off(o.PRE_UPDATE,this.preUpdate,this);t.off(o.UPDATE,this.sceneUpdate,this);t.off(o.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown();this.systems.events.off(o.START,this.start,this);this.scene=null;this.systems=null}});r.register("UpdateList",s,"updateList");e.exports=s},function(e,t,i){e.exports={PROCESS_QUEUE_ADD:i(936),PROCESS_QUEUE_REMOVE:i(937)}},function(e){e.exports="add"},function(e){e.exports="remove"},function(e){e.exports=function GetBitmapTextSize(e,t,a){if(a===void 0){a={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],scaleX:0,scaleY:0};return a}var n=e.text,r=n.length,o=e.maxWidth,s=e.wordWrapCharCode,l=Number.MAX_VALUE,d=Number.MAX_VALUE,p=0,c=0,u=e.fontData.chars,g=e.fontData.lineHeight,h=e.letterSpacing,m=0,f=0,T=0,v=null,b=0,E=0,S=e.fontSize/e.fontData.size,_=S*e.scaleX,A=S*e.scaleY,C=null,w=0,P=[],O=Number.MAX_VALUE,R=0,L=0,k=0,D,F=[],I=null;if(0<o){for(D=0;D<r;D++){T=n.charCodeAt(D);if(10===T){if(null!==I){F.push({word:I.word,i:I.i,x:I.x*_,y:I.y*A,w:I.w*_,h:I.h*A,cr:!0});I=null}m=0;f+=g;C=null;continue}v=u[T];if(!v){continue}if(null!==C){var M=v.kerning[w]}if(T===s){if(null!==I){F.push({word:I.word,i:I.i,x:I.x*_,y:I.y*A,w:I.w*_,h:I.h*A,cr:!1});I=null}}else{if(null===I){I={word:"",i:D,x:m,y:f,w:0,h:g,cr:!1}}I.word=I.word.concat(n[D]);I.w+=v.xOffset+v.xAdvance+(M!==void 0?M:0)}m+=v.xAdvance+h;C=v;w=T}if(null!==I){F.push({word:I.word,i:I.i,x:I.x*_,y:I.y*A,w:I.w*_,h:I.h*A,cr:!1})}m=0;f=0;C=null;w=0;var B,Y=0,N=[];for(D=0;D<F.length;D++){var X=F[D],z=X.x,U=X.x+X.w;if(B){var G=z-(B.x+B.w);Y=z-(G+B.w);B=null}var W=z-Y,V=U-Y;if(W>o||V>o){N.push(X.i-1);if(X.cr){N.push(X.i+X.word.length);Y=0;B=null}else{B=X}}else if(X.cr){N.push(X.i+X.word.length);Y=0;B=null}}var H=function(e,t,i){return e.substr(0,t)+i+e.substr(t+1)};for(D=N.length-1;0<=D;D--){n=H(n,N[D],"\n")}a.wrappedText=n;r=n.length;F=[];I=null}for(D=0;D<r;D++){T=n.charCodeAt(D);if(10===T){if(null!==I){F.push({word:I.word,i:I.i,x:I.x*_,y:I.y*A,w:I.w*_,h:I.h*A});I=null}m=0;f+=g;C=null;P[L]=k;if(k>R){R=k}if(k<O){O=k}L++;k=0;continue}v=u[T];if(!v){continue}b=m;E=f;if(null!==C){var j=v.kerning[w];b+=j!==void 0?j:0}if(l>b){l=b}if(d>E){d=E}var K=b+v.xAdvance,q=E+g;if(p<K){p=K}if(c<q){c=q}if(T===s){if(null!==I){F.push({word:I.word,i:I.i,x:I.x*_,y:I.y*A,w:I.w*_,h:I.h*A});I=null}}else{if(null===I){I={word:"",i:D,x:m,y:f,w:0,h:g}}I.word=I.word.concat(n[D]);I.w+=v.xOffset+v.xAdvance+(j!==void 0?j:0)}m+=v.xAdvance+h;C=v;w=T;k=K*S}if(null!==I){F.push({word:I.word,i:I.i,x:I.x*_,y:I.y*A,w:I.w*_,h:I.h*A})}P[L]=k;if(k>R){R=k}if(k<O){O=k}var J=a.local,Z=a.global,Q=a.lines;J.x=l*S;J.y=d*S;J.width=p*S;J.height=c*S;Z.x=e.x-e.displayOriginX+l*_;Z.y=e.y-e.displayOriginY+d*A;Z.width=p*_;Z.height=c*A;Q.shortest=O;Q.longest=R;Q.lengths=P;if(t){J.x=Math.round(J.x);J.y=Math.round(J.y);J.width=Math.round(J.width);J.height=Math.round(J.height);Z.x=Math.round(Z.x);Z.y=Math.round(Z.y);Z.width=Math.round(Z.width);Z.height=Math.round(Z.height);Q.shortest=Math.round(O);Q.longest=Math.round(R)}a.words=F;a.lines.height=g;a.scaleX=e.scaleX;a.scaleY=e.scaleY;return a}},function(e,t,i){var a=i(185);e.exports=function ParseFromAtlas(e,t,i,n,r,o,s){var l=e.sys.textures.getFrame(i,n),d=e.sys.cache.xml.get(r);if(l&&d){var p=a(d,o,s,l);e.sys.cache.bitmapFont.add(t,{data:p,texture:i,frame:n});return!0}else{return!1}}},function(e,t,i){var a=i(1),n=i(1);a=i(941);n=i(942);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function BitmapTextWebGLRenderer(e,t,n,r,o){var s=t._text,l=s.length;if(0===l){return}var d=this.pipeline;e.setPipeline(d,t);var p=d._tempMatrix1,c=d._tempMatrix2,u=d._tempMatrix3;c.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);p.copyFrom(r.matrix);if(o){p.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);c.e=t.x;c.f=t.y;p.multiply(c,u)}else{c.e-=r.scrollX*t.scrollFactorX;c.f-=r.scrollY*t.scrollFactorY;p.multiply(c,u)}var g=t.frame,h=g.glTexture,m=g.cutX,f=g.cutY,T=h.width,v=h.height,b=t._isTinted&&t.tintFill,E=a.getTintAppendFloatAlpha(t._tintTL,r.alpha*t._alphaTL),S=a.getTintAppendFloatAlpha(t._tintTR,r.alpha*t._alphaTR),_=a.getTintAppendFloatAlpha(t._tintBL,r.alpha*t._alphaBL),A=a.getTintAppendFloatAlpha(t._tintBR,r.alpha*t._alphaBR);d.setTexture2D(h,0);var C=0,w=0,P=0,O=0,R=t._letterSpacing,L,k=0,D=0,F=0,I=0,M,B=t.fontData,Y=B.chars,N=B.lineHeight,X=t._fontSize/B.size,z=t._align,U=0,G=0,W=t.getTextBounds(!1);if(0<t.maxWidth){s=W.wrappedText;l=s.length}var V=t._bounds.lines;if(1===z){G=(V.longest-V.lengths[0])/2}else if(2===z){G=V.longest-V.lengths[0]}for(var H=r.roundPixels,j=0;j<l;j++){P=s.charCodeAt(j);if(10===P){U++;if(1===z){G=(V.longest-V.lengths[U])/2}else if(2===z){G=V.longest-V.lengths[U]}C=0;w+=N;M=null;continue}L=Y[P];if(!L){continue}k=m+L.x;D=f+L.y;F=L.width;I=L.height;var K=L.xOffset+C,q=L.yOffset+w;if(null!==M){var J=L.kerning[O];K+=J!==void 0?J:0}C+=L.xAdvance+R;M=L;O=P;if(0===F||0===I||32===P){continue}K*=X;q*=X;K-=t.displayOriginX;q-=t.displayOriginY;K+=G;var Z=k/T,Q=D/v,$=(k+F)/T,ee=(D+I)/v,te=K+F*X,ie=q+I*X,ae=u.getX(K,q),ne=u.getY(K,q),re=u.getX(K,ie),oe=u.getY(K,ie),se=u.getX(te,ie),le=u.getY(te,ie),de=u.getX(te,q),pe=u.getY(te,q);if(H){ae=Math.round(ae);ne=Math.round(ne);re=Math.round(re);oe=Math.round(oe);se=Math.round(se);le=Math.round(le);de=Math.round(de);pe=Math.round(pe)}d.batchQuad(ae,ne,re,oe,se,le,de,pe,Z,Q,$,ee,E,S,_,A,b,h,0)}}},function(e,t,i){var a=i(27);e.exports=function BitmapTextCanvasRenderer(e,t,n,r,o){var s=t._text,l=s.length,d=e.currentContext;if(0===l||!a(e,d,t,r,o)){return}var p=t.frame,c=t.fontData.chars,u=t.fontData.lineHeight,g=t._letterSpacing,h=0,m=0,f=0,T=null,v=0,b=0,E=0,S=0,_=0,A=0,C=null,w=0,P=t.frame.source.image,O=p.cutX,R=p.cutY,L=t._fontSize/t.fontData.size,k=t._align,D=0,F=0,I=t.getTextBounds(!1);if(0<t.maxWidth){s=I.wrappedText;l=s.length}var M=t._bounds.lines;if(1===k){F=(M.longest-M.lengths[0])/2}else if(2===k){F=M.longest-M.lengths[0]}d.translate(-t.displayOriginX,-t.displayOriginY);for(var B=r.roundPixels,Y=0;Y<l;Y++){f=s.charCodeAt(Y);if(10===f){D++;if(1===k){F=(M.longest-M.lengths[D])/2}else if(2===k){F=M.longest-M.lengths[D]}h=0;m+=u;C=null;continue}T=c[f];if(!T){continue}v=O+T.x;b=R+T.y;E=T.width;S=T.height;_=T.xOffset+h;A=T.yOffset+m;if(null!==C){var N=T.kerning[w];_+=N!==void 0?N:0}_*=L;A*=L;_+=F;h+=T.xAdvance+g;C=T;w=f;if(0===E||0===S||32===f){continue}if(B){_=Math.round(_);A=Math.round(A)}d.save();d.translate(_,A);d.scale(L,L);d.drawImage(P,v,b,E,S,0,0,E,S);d.restore()}d.restore()}},function(e,t,i){var a=i(1),n=i(1);a=i(944);n=i(945);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function BlitterWebGLRenderer(e,t,i,n,r){var o=t.getRenderList();if(0===o.length){return}var s=this.pipeline;e.setPipeline(s,t);var l=n.scrollX*t.scrollFactorX,d=n.scrollY*t.scrollFactorY,p=s._tempMatrix1;p.copyFrom(n.matrix);if(r){p.multiplyWithOffset(r,-l,-d);l=0;d=0}for(var c=t.x-l,u=t.y-d,g=-1,h=n.alpha*t.alpha,m=n.roundPixels,f=0;f<o.length;f++){var T=o[f],v=T.frame,b=T.alpha*h;if(0===b){continue}var E=v.width,S=v.height,_=c+T.x+v.x,A=u+T.y+v.y;if(T.flipX){E*=-1;_+=v.width}if(T.flipY){S*=-1;A+=v.height}var C=_+E,w=A+S,P=p.getX(_,A),O=p.getY(_,A),R=p.getX(C,w),L=p.getY(C,w),k=a.getTintAppendFloatAlpha(T.tint,b);if(v.sourceIndex!==g){s.setTexture2D(v.glTexture,0);g=v.sourceIndex}if(m){P=Math.round(P);O=Math.round(O);R=Math.round(R);L=Math.round(L)}if(s.batchQuad(P,O,P,L,R,L,R,O,v.u0,v.v0,v.u1,v.v1,k,k,k,k,!1,v.glTexture,0)){g=-1}}}},function(e){e.exports=function BlitterCanvasRenderer(e,t,a,n,r){var o=t.getRenderList();if(0===o.length){return}var s=e.currentContext,l=n.alpha*t.alpha;if(0===l){return}s.globalCompositeOperation=e.blendModes[t.blendMode];s.imageSmoothingEnabled=!(!e.antialias||t.frame.source.scaleMode);var d=t.x-n.scrollX*t.scrollFactorX,p=t.y-n.scrollY*t.scrollFactorY;s.save();if(r){r.copyToContext(s)}for(var c=n.roundPixels,u=0;u<o.length;u++){var g=o[u],h=g.flipX||g.flipY,m=g.frame,y=m.canvasData,x=m.x,f=m.y,T=1,v=1,b=g.alpha*l;if(0===b){continue}s.globalAlpha=b;if(!h){if(c){x=Math.round(x);f=Math.round(f)}s.drawImage(m.source.image,y.x,y.y,y.width,y.height,x+g.x+d,f+g.y+p,y.width,y.height)}else{if(g.flipX){T=-1;x-=y.width}if(g.flipY){v=-1;f-=y.height}s.save();s.translate(g.x+d,g.y+p);s.scale(T,v);s.drawImage(m.source.image,y.x,y.y,y.width,y.height,x,f,y.width,y.height);s.restore()}}s.restore()}},function(e,t,i){var a=i(0),n=i(94),r=new a({initialize:function(e,t,i,a,n){this.parent=e;this.x=t;this.y=i;this.frame=a;this.data={};this.tint=16777215;this._visible=n;this._alpha=1;this.flipX=!1;this.flipY=!1},setFrame:function setFrame(e){if(e===void 0){this.frame=this.parent.frame}else if(e instanceof n&&e.texture===this.parent.texture){this.frame=e}else{this.frame=this.parent.texture.get(e)}return this},resetFlip:function resetFlip(){this.flipX=!1;this.flipY=!1;return this},reset:function reset(e,t,i){this.x=e;this.y=t;this.flipX=!1;this.flipY=!1;this._alpha=1;this._visible=!0;this.parent.dirty=!0;if(i){this.setFrame(i)}return this},setPosition:function setPosition(e,t){this.x=e;this.y=t;return this},setFlipX:function setFlipX(e){this.flipX=e;return this},setFlipY:function setFlipY(e){this.flipY=e;return this},setFlip:function setFlip(e,t){this.flipX=e;this.flipY=t;return this},setVisible:function setVisible(e){this.visible=e;return this},setAlpha:function setAlpha(e){this.alpha=e;return this},setTint:function setTint(e){this.tint=e;return this},destroy:function destroy(){this.parent.dirty=!0;this.parent.children.remove(this);this.parent=void 0;this.frame=void 0;this.data=void 0},visible:{get:function get(){return this._visible},set:function set(e){this.parent.dirty|=this._visible!==e;this._visible=e}},alpha:{get:function get(){return this._alpha},set:function set(e){this.parent.dirty|=0<this._alpha!=0<e;this._alpha=e}}});e.exports=r},function(e,t,i){var a=i(1),n=i(1);a=i(948);n=i(949);e.exports={renderWebGL:a,renderCanvas:n}},function(e){e.exports=function ContainerWebGLRenderer(e,t,a,n,r){var o=t.list;if(0===o.length){return}var s=t.localTransform;if(r){s.loadIdentity();s.multiply(r);s.translate(t.x,t.y);s.rotate(t.rotation);s.scale(t.scaleX,t.scaleY)}else{s.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY)}var l=-1!==t.blendMode;if(!l){e.setBlendMode(0)}for(var d=t.alpha,p=t.scrollFactorX,c=t.scrollFactorY,u=o.length,g=0,h;g<u;g++){h=o[g];if(!h.willRender(n)){continue}var m,y,x,f;if(h.alphaTopLeft!==void 0){m=h.alphaTopLeft;y=h.alphaTopRight;x=h.alphaBottomLeft;f=h.alphaBottomRight}else{var T=h.alpha;m=T;y=T;x=T;f=T}var v=h.scrollFactorX,b=h.scrollFactorY;if(!l&&h.blendMode!==e.currentBlendMode){e.setBlendMode(h.blendMode)}var E=h.mask;if(E){E.preRenderWebGL(e,h,n)}var S=h.type;if(S!==e.currentType){e.newType=!0;e.currentType=S}e.nextTypeMatch=g<u-1?o[g+1].type===e.currentType:!1;h.setScrollFactor(v*p,b*c);h.setAlpha(m*d,y*d,x*d,f*d);h.renderWebGL(e,h,a,n,s);h.setAlpha(m,y,x,f);h.setScrollFactor(v,b);if(E){E.postRenderWebGL(e,n)}e.newType=!1}}},function(e){e.exports=function ContainerCanvasRenderer(e,t,a,n,r){var o=t.list;if(0===o.length){return}var s=t.localTransform;if(r){s.loadIdentity();s.multiply(r);s.translate(t.x,t.y);s.rotate(t.rotation);s.scale(t.scaleX,t.scaleY)}else{s.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY)}var l=-1!==t.blendMode;if(!l){e.setBlendMode(0)}for(var d=t._alpha,p=t.scrollFactorX,c=t.scrollFactorY,u=0,g;u<o.length;u++){g=o[u];if(!g.willRender(n)){continue}var h=g.alpha,m=g.scrollFactorX,y=g.scrollFactorY;if(!l&&g.blendMode!==e.currentBlendMode){e.setBlendMode(g.blendMode)}g.setScrollFactor(m*p,y*c);g.setAlpha(h*d);g.renderCanvas(e,g,a,n,s);g.setAlpha(h);g.setScrollFactor(m,y)}}},function(e,t,i){var a=i(1),n=i(1);a=i(388);n=i(388);e.exports={renderWebGL:a,renderCanvas:n}},function(e){e.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(e,t,i){var a=i(1),n=i(1);a=i(953);n=i(954);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function DynamicBitmapTextWebGLRenderer(e,t,n,r,o){var s=t.text,l=s.length;if(0===l){return}var d=this.pipeline;e.setPipeline(d,t);var p=0<t.cropWidth||0<t.cropHeight;if(p){d.flush();e.pushScissor(t.x,t.y,t.cropWidth*t.scaleX,t.cropHeight*t.scaleY)}var c=d._tempMatrix1,u=d._tempMatrix2,g=d._tempMatrix3,h=d._tempMatrix4;u.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);c.copyFrom(r.matrix);if(o){c.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);u.e=t.x;u.f=t.y;c.multiply(u,g)}else{u.e-=r.scrollX*t.scrollFactorX;u.f-=r.scrollY*t.scrollFactorY;c.multiply(u,g)}var m=t.frame,f=m.glTexture,T=m.cutX,v=m.cutY,b=f.width,E=f.height,S=t._isTinted&&t.tintFill,_=a.getTintAppendFloatAlpha(t._tintTL,r.alpha*t._alphaTL),A=a.getTintAppendFloatAlpha(t._tintTR,r.alpha*t._alphaTR),C=a.getTintAppendFloatAlpha(t._tintBL,r.alpha*t._alphaBL),w=a.getTintAppendFloatAlpha(t._tintBR,r.alpha*t._alphaBR);d.setTexture2D(f,0);var P=0,O=0,R=0,L=0,k=t.letterSpacing,D,F=0,I=0,M=0,B=0,Y,N=t.scrollX,X=t.scrollY,z=t.fontData,U=z.chars,G=z.lineHeight,W=t.fontSize/z.size,V=0,H=t._align,j=0,K=0;t.getTextBounds(!1);var q=t._bounds.lines;if(1===H){K=(q.longest-q.lengths[0])/2}else if(2===H){K=q.longest-q.lengths[0]}for(var J=r.roundPixels,Z=t.displayCallback,Q=t.callbackData,$=0;$<l;$++){R=s.charCodeAt($);if(10===R){j++;if(1===H){K=(q.longest-q.lengths[j])/2}else if(2===H){K=q.longest-q.lengths[j]}P=0;O+=G;Y=null;continue}D=U[R];if(!D){continue}F=T+D.x;I=v+D.y;M=D.width;B=D.height;var ee=D.xOffset+P-N,te=D.yOffset+O-X;if(null!==Y){var ie=D.kerning[L];ee+=ie!==void 0?ie:0}P+=D.xAdvance+k;Y=D;L=R;if(0===M||0===B||32===R){continue}W=t.fontSize/t.fontData.size;V=0;if(Z){Q.color=0;Q.tint.topLeft=_;Q.tint.topRight=A;Q.tint.bottomLeft=C;Q.tint.bottomRight=w;Q.index=$;Q.charCode=R;Q.x=ee;Q.y=te;Q.scale=W;Q.rotation=V;Q.data=D.data;var ae=Z(Q);ee=ae.x;te=ae.y;W=ae.scale;V=ae.rotation;if(ae.color){_=ae.color;A=ae.color;C=ae.color;w=ae.color}else{_=ae.tint.topLeft;A=ae.tint.topRight;C=ae.tint.bottomLeft;w=ae.tint.bottomRight}_=a.getTintAppendFloatAlpha(_,r.alpha*t._alphaTL);A=a.getTintAppendFloatAlpha(A,r.alpha*t._alphaTR);C=a.getTintAppendFloatAlpha(C,r.alpha*t._alphaBL);w=a.getTintAppendFloatAlpha(w,r.alpha*t._alphaBR)}ee*=W;te*=W;ee-=t.displayOriginX;te-=t.displayOriginY;ee+=K;h.applyITRS(ee,te,V,W,W);g.multiply(h,u);var ne=F/b,re=I/E,oe=(F+M)/b,se=(I+B)/E,le=M,de=B,pe=u.e,ce=u.f,ue=de*u.c+u.e,ge=de*u.d+u.f,he=le*u.a+de*u.c+u.e,me=le*u.b+de*u.d+u.f,ye=le*u.a+u.e,xe=le*u.b+u.f;if(J){pe=Math.round(pe);ce=Math.round(ce);ue=Math.round(ue);ge=Math.round(ge);he=Math.round(he);me=Math.round(me);ye=Math.round(ye);xe=Math.round(xe)}d.batchQuad(pe,ce,ue,ge,he,me,ye,xe,ne,re,oe,se,_,A,C,w,S,f,0)}if(p){d.flush();e.popScissor()}}},function(e,t,i){var a=i(27);e.exports=function DynamicBitmapTextCanvasRenderer(e,t,n,r,o){var s=t._text,l=s.length,d=e.currentContext;if(0===l||!a(e,d,t,r,o)){return}var p=t.frame,c=t.displayCallback,u=t.callbackData,g=t.fontData.chars,h=t.fontData.lineHeight,m=t._letterSpacing,f=0,T=0,v=0,b=null,E=0,S=0,_=0,A=0,C=0,w=0,P=null,O=0,R=t.frame.source.image,L=p.cutX,k=p.cutY,D=0,F=0,I=t._fontSize/t.fontData.size,M=t._align,B=0,Y=0;t.getTextBounds(!1);var N=t._bounds.lines;if(1===M){Y=(N.longest-N.lengths[0])/2}else if(2===M){Y=N.longest-N.lengths[0]}d.translate(-t.displayOriginX,-t.displayOriginY);var X=r.roundPixels;if(0<t.cropWidth&&0<t.cropHeight){d.beginPath();d.rect(0,0,t.cropWidth,t.cropHeight);d.clip()}for(var z=0;z<l;z++){F=I;D=0;v=s.charCodeAt(z);if(10===v){B++;if(1===M){Y=(N.longest-N.lengths[B])/2}else if(2===M){Y=N.longest-N.lengths[B]}f=0;T+=h;P=null;continue}b=g[v];if(!b){continue}E=L+b.x;S=k+b.y;_=b.width;A=b.height;C=b.xOffset+f-t.scrollX;w=b.yOffset+T-t.scrollY;if(null!==P){var U=b.kerning[O];C+=U!==void 0?U:0}if(c){u.index=z;u.charCode=v;u.x=C;u.y=w;u.scale=F;u.rotation=D;u.data=b.data;var G=c(u);C=G.x;w=G.y;F=G.scale;D=G.rotation}C*=F;w*=F;C+=Y;f+=b.xAdvance+m;P=b;O=v;if(0===_||0===A||32===v){continue}if(X){C=Math.round(C);w=Math.round(w)}d.save();d.translate(C,w);d.rotate(D);d.scale(F,F);d.drawImage(R,E,S,_,A,0,0,_,A);d.restore()}d.restore()}},function(e,t,i){var a=i(1),n=i(1);a=i(956);n=i(957);e.exports={renderWebGL:a,renderCanvas:n}},function(e){e.exports=function ExternWebGLRenderer(e,t,i,a,n){var r=e.currentPipeline;e.clearPipeline();var o=e._tempMatrix1,s=e._tempMatrix2,l=e._tempMatrix3;s.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);o.copyFrom(a.matrix);if(n){o.multiplyWithOffset(n,-a.scrollX*t.scrollFactorX,-a.scrollY*t.scrollFactorY);s.e=t.x;s.f=t.y;o.multiply(s,l)}else{s.e-=a.scrollX*t.scrollFactorX;s.f-=a.scrollY*t.scrollFactorY;o.multiply(s,l)}t.render.call(t,e,a,l);e.rebindPipeline(r)}},function(){},function(e,t,i){var a=i(1),n=i(1);a=i(959);n=i(393);n=i(393);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(190),n=i(10),r=function(e,t,i){this.x=e;this.y=t;this.width=i},o=function(e,t,i){this.points=[];this.pointsLength=1;this.points[0]=new r(e,t,i)},s=[];e.exports=function GraphicsWebGLRenderer(e,t,i,l,d){if(0===t.commandBuffer.length){return}var p=this.pipeline;e.setPipeline(p,t);var c=t._tempMatrix1,u=t._tempMatrix2,g=t._tempMatrix3;g.loadIdentity();u.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);c.copyFrom(l.matrix);if(d){c.multiplyWithOffset(d,-l.scrollX*t.scrollFactorX,-l.scrollY*t.scrollFactorY);u.e=t.x;u.f=t.y;c.multiply(u)}else{u.e-=l.scrollX*t.scrollFactorX;u.f-=l.scrollY*t.scrollFactorY;c.multiply(u)}for(var h=t.commandBuffer,m=l.alpha*t.alpha,f=1,T=p.fillTint,v=p.strokeTint,b=0,E=0,S=0,_=.01,A=2*Math.PI,C,w=[],P=0,O=!1,R=null,L=n.getTintAppendFloatAlphaAndSwap,k=e.blankTexture.glTexture,D=0;D<h.length;D++){C=h[D];switch(C){case a.BEGIN_PATH:w.length=0;R=null;O=!0;break;case a.CLOSE_PATH:O=!1;if(R&&R.points.length){R.points.push(R.points[0])}break;case a.FILL_PATH:for(P=0;P<w.length;P++){p.setTexture2D(k);p.batchFillPath(w[P].points,g,c)}break;case a.STROKE_PATH:for(P=0;P<w.length;P++){p.setTexture2D(k);p.batchStrokePath(w[P].points,f,O,g,c)}break;case a.LINE_STYLE:f=h[++D];var F=h[++D],I=h[++D]*m,M=L(F,I);v.TL=M;v.TR=M;v.BL=M;v.BR=M;break;case a.FILL_STYLE:var B=h[++D],Y=h[++D]*m,N=L(B,Y);T.TL=N;T.TR=N;T.BL=N;T.BR=N;break;case a.GRADIENT_FILL_STYLE:var X=h[++D]*m;T.TL=L(h[++D],X);T.TR=L(h[++D],X);T.BL=L(h[++D],X);T.BR=L(h[++D],X);break;case a.GRADIENT_LINE_STYLE:f=h[++D];var z=h[++D]*m;v.TL=L(h[++D],z);v.TR=L(h[++D],z);v.BL=L(h[++D],z);v.BR=L(h[++D],z);break;case a.ARC:var U=0,G=h[++D],W=h[++D],V=h[++D],H=h[++D],j=h[++D],K=h[++D],q=h[++D];j-=H;if(K){if(j<-A){j=-A}else if(0<j){j=-A+j%A}}else if(j>A){j=A}else if(0>j){j=A+j%A}if(null===R){R=new o(G+Math.cos(H)*V,W+Math.sin(H)*V,f);w.push(R);U+=_}while(U<1+q){S=j*U+H;b=G+Math.cos(S)*V;E=W+Math.sin(S)*V;R.points.push(new r(b,E,f));U+=_}S=j+H;b=G+Math.cos(S)*V;E=W+Math.sin(S)*V;R.points.push(new r(b,E,f));break;case a.FILL_RECT:p.setTexture2D(k);p.batchFillRect(h[++D],h[++D],h[++D],h[++D],g,c);break;case a.FILL_TRIANGLE:p.setTexture2D(k);p.batchFillTriangle(h[++D],h[++D],h[++D],h[++D],h[++D],h[++D],g,c);break;case a.STROKE_TRIANGLE:p.setTexture2D(k);p.batchStrokeTriangle(h[++D],h[++D],h[++D],h[++D],h[++D],h[++D],f,g,c);break;case a.LINE_TO:if(null!==R){R.points.push(new r(h[++D],h[++D],f))}else{R=new o(h[++D],h[++D],f);w.push(R)}break;case a.MOVE_TO:R=new o(h[++D],h[++D],f);w.push(R);break;case a.SAVE:s.push(g.copyToArray());break;case a.RESTORE:g.copyFromArray(s.pop());break;case a.TRANSLATE:G=h[++D];W=h[++D];g.translate(G,W);break;case a.SCALE:G=h[++D];W=h[++D];g.scale(G,W);break;case a.ROTATE:g.rotate(h[++D]);break;case a.SET_TEXTURE:var J=h[++D],Z=h[++D];p.currentFrame=J;p.setTexture2D(J.glTexture,0);p.tintEffect=Z;k=J.glTexture;break;case a.CLEAR_TEXTURE:p.currentFrame=e.blankTexture;p.tintEffect=2;k=e.blankTexture.glTexture;break;}}}},function(e,t,i){var a=i(1),n=i(1);a=i(961);n=i(962);e.exports={renderWebGL:a,renderCanvas:n}},function(e){e.exports=function SpriteWebGLRenderer(e,t,i,a,n){this.pipeline.batchSprite(t,a,n)}},function(e){e.exports=function SpriteCanvasRenderer(e,t,i,a,n){e.batchSprite(t,t.frame,a,n)}},function(e,t,i){var a=i(1),n=i(1);a=i(964);n=i(965);e.exports={renderWebGL:a,renderCanvas:n}},function(e){e.exports=function ImageWebGLRenderer(e,t,i,a,n){this.pipeline.batchSprite(t,a,n)}},function(e){e.exports=function ImageCanvasRenderer(e,t,i,a,n){e.batchSprite(t,t.frame,a,n)}},function(e,t,i){e.exports={GravityWell:i(394),Particle:i(395),ParticleEmitter:i(396),ParticleEmitterManager:i(192),Zones:i(971)}},function(e,t,i){var a=i(0),n=i(326),r=i(82),o=i(2),s=i(58),l=new a({initialize:function(e,t,i,a){if(a===void 0){a=!1}this.propertyKey=t;this.propertyValue=i;this.defaultValue=i;this.steps=0;this.counter=0;this.start=0;this.end=0;this.ease;this.emitOnly=a;this.onEmit=this.defaultEmit;this.onUpdate=this.defaultUpdate;this.loadConfig(e)},loadConfig:function loadConfig(e,t){if(e===void 0){e={}}if(t){this.propertyKey=t}this.propertyValue=o(e,this.propertyKey,this.defaultValue);this.setMethods();if(this.emitOnly){this.onUpdate=this.defaultUpdate}},toJSON:function toJSON(){return this.propertyValue},onChange:function onChange(e){this.propertyValue=e;return this.setMethods()},setMethods:function setMethods(){var e=this.propertyValue,i=_typeof(e);if("number"===i){this.onEmit=this.staticValueEmit;this.onUpdate=this.staticValueUpdate}else if(Array.isArray(e)){this.onEmit=this.randomStaticValueEmit}else if("function"===i){if(this.emitOnly){this.onEmit=e}else{this.onUpdate=e}}else if("object"===i&&(this.has(e,"random")||this.hasBoth(e,"start","end")||this.hasBoth(e,"min","max"))){this.start=this.has(e,"start")?e.start:e.min;this.end=this.has(e,"end")?e.end:e.max;var t=this.hasBoth(e,"min","max")||!!e.random;if(t){var a=e.random;if(Array.isArray(a)){this.start=a[0];this.end=a[1]}this.onEmit=this.randomRangedValueEmit}if(this.has(e,"steps")){this.steps=e.steps;this.counter=this.start;this.onEmit=this.steppedEmit}else{var n=this.has(e,"ease")?e.ease:"Linear";this.ease=r(n);if(!t){this.onEmit=this.easedValueEmit}this.onUpdate=this.easeValueUpdate}}else if("object"===i&&this.hasEither(e,"onEmit","onUpdate")){if(this.has(e,"onEmit")){this.onEmit=e.onEmit}if(this.has(e,"onUpdate")){this.onUpdate=e.onUpdate}}return this},has:function has(e,t){return e.hasOwnProperty(t)},hasBoth:function hasBoth(e,t,i){return e.hasOwnProperty(t)&&e.hasOwnProperty(i)},hasEither:function hasEither(e,t,i){return e.hasOwnProperty(t)||e.hasOwnProperty(i)},defaultEmit:function defaultEmit(e,t,i){return i},defaultUpdate:function defaultUpdate(e,i,a,t){return t},staticValueEmit:function staticValueEmit(){return this.propertyValue},staticValueUpdate:function staticValueUpdate(){return this.propertyValue},randomStaticValueEmit:function randomStaticValueEmit(){var e=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[e]},randomRangedValueEmit:function randomRangedValueEmit(e,t){var i=n(this.start,this.end);if(e&&e.data[t]){e.data[t].min=i}return i},steppedEmit:function steppedEmit(){var e=this.counter,t=this.counter+(this.end-this.start)/this.steps;this.counter=s(t,this.start,this.end);return e},easedValueEmit:function easedValueEmit(e,t){if(e&&e.data[t]){var i=e.data[t];i.min=this.start;i.max=this.end}return this.start},easeValueUpdate:function easeValueUpdate(e,i,a){var t=e.data[i];return(t.max-t.min)*this.ease(a)+t.min}});e.exports=l},function(e,t,i){var a=i(1),n=i(1);a=i(969);n=i(970);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function ParticleManagerWebGLRenderer(t,n,r,o,s){var l=n.emitters.list,d=l.length;if(0===d){return}var p=this.pipeline,c=p._tempMatrix1.copyFrom(o.matrix),u=p._tempMatrix2,g=p._tempMatrix3,h=p._tempMatrix4.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY);c.multiply(h);t.setPipeline(p);var m=o.roundPixels,f=n.defaultFrame.glTexture,T=a.getTintAppendFloatAlphaAndSwap;p.setTexture2D(f,0);for(var v=0;v<d;v++){var b=l[v],E=b.alive,S=E.length;if(!b.visible||0===S){continue}var _=o.scrollX*b.scrollFactorX,A=o.scrollY*b.scrollFactorY;if(s){c.multiplyWithOffset(s,-_,-A);_=0;A=0}if(t.setBlendMode(b.blendMode)){p.setTexture2D(f,0)}if(b.mask){b.mask.preRenderWebGL(t,b,o);p.setTexture2D(f,0)}for(var C=0;C<S;C++){var w=E[C],P=w.alpha*o.alpha;if(0>=P){continue}var O=w.frame,R=-O.halfWidth,x=-O.halfHeight,y=R+O.width,L=x+O.height;g.applyITRS(0,0,w.rotation,w.scaleX,w.scaleY);g.e=w.x-_;g.f=w.y-A;c.multiply(g,u);var k=u.getX(R,x),D=u.getY(R,x),F=u.getX(R,L),I=u.getY(R,L),M=u.getX(y,L),B=u.getY(y,L),Y=u.getX(y,x),N=u.getY(y,x);if(m){k=Math.round(k);D=Math.round(D);F=Math.round(F);I=Math.round(I);M=Math.round(M);B=Math.round(B);Y=Math.round(Y);N=Math.round(N)}var X=T(w.tint,P);p.batchQuad(k,D,F,I,M,B,Y,N,O.u0,O.v0,O.u1,O.v1,X,X,X,X,0,f,0)}if(b.mask){b.mask.postRenderWebGL(t,o);p.setTexture2D(f,0)}}}},function(e){e.exports=function ParticleManagerCanvasRenderer(t,a,n,r,o){var s=a.emitters.list,l=s.length;if(0===l){return}var d=t._tempMatrix1.copyFrom(r.matrix),p=t._tempMatrix2,c=t._tempMatrix3,u=t._tempMatrix4.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);d.multiply(u);var g=r.roundPixels,h=t.currentContext;h.save();for(var m=0;m<l;m++){var f=s[m],T=f.alive,v=T.length;if(!f.visible||0===v){continue}var b=r.scrollX*f.scrollFactorX,E=r.scrollY*f.scrollFactorY;if(o){d.multiplyWithOffset(o,-b,-E);b=0;E=0}h.globalCompositeOperation=t.blendModes[f.blendMode];for(var S=0;S<v;S++){var _=T[S],A=_.alpha*r.alpha;if(0>=A){continue}var C=_.frame,w=C.canvasData,P=-C.halfWidth,O=-C.halfHeight;c.applyITRS(0,0,_.rotation,_.scaleX,_.scaleY);c.e=_.x-b;c.f=_.y-E;d.multiply(c,p);h.globalAlpha=A;h.save();p.copyToContext(h);if(g){P=Math.round(P);O=Math.round(O)}h.imageSmoothingEnabled=!(!t.antialias||C.source.scaleMode);h.drawImage(C.source.image,w.x,w.y,w.width,w.height,P,O,w.width,w.height);h.restore()}}h.restore()}},function(e,t,i){e.exports={DeathZone:i(397),EdgeZone:i(398),RandomZone:i(400)}},function(e,t,i){var a=i(1),n=i(1);a=i(973);n=i(974);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function RenderTextureWebGLRenderer(e,t,i,n,r){var o=t.frame,s=o.width,l=o.height,d=a.getTintAppendFloatAlpha;this.pipeline.batchTexture(t,o.glTexture,s,l,t.x,t.y,s,l,t.scaleX,t.scaleY,t.rotation,t.flipX,!t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,s,l,d(t._tintTL,n.alpha*t._alphaTL),d(t._tintTR,n.alpha*t._alphaTR),d(t._tintBL,n.alpha*t._alphaBL),d(t._tintBR,n.alpha*t._alphaBR),t._isTinted&&t.tintFill,0,0,n,r);e.setBlankTexture(!0)}},function(e){e.exports=function RenderTextureCanvasRenderer(e,t,i,a,n){e.batchSprite(t,t.frame,a,n)}},function(e,t,i){var a=i(976),n=i(17),r={Parse:i(977)};r=n(!1,r,a);e.exports=r},function(e){e.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(e,t,i){var a=i(6);e.exports=function ParseRetroFont(e,t){var n=t.width,o=t.height,s=Math.floor(n/2),l=Math.floor(o/2),d=a(t,"chars","");if(""===d){return}var p=a(t,"image",""),c=a(t,"offset.x",0),u=a(t,"offset.y",0),g=a(t,"spacing.x",0),h=a(t,"spacing.y",0),m=a(t,"lineSpacing",0),f=a(t,"charsPerRow",null);if(null===f){f=e.sys.textures.getFrame(p).width/n;if(f>d.length){f=d.length}}for(var T=c,v=u,b={retroFont:!0,font:p,size:n,lineHeight:o+m,chars:{}},E=0,S=0,_;S<d.length;S++){_=d.charCodeAt(S);b.chars[_]={x:T,y:v,width:n,height:o,centerX:s,centerY:l,xOffset:0,yOffset:0,xAdvance:n,data:{},kerning:{}};E++;if(E===f){E=0;T=c;v+=o+h}else{T+=n+g}}return{data:b,frame:null,texture:p}}},function(e){e.exports=function GetTextSize(e,t,a){var n=e.canvas,r=e.context,o=e.style,s=[],l=0,d=a.length;if(0<o.maxLines&&o.maxLines<a.length){d=o.maxLines}o.syncFont(n,r);for(var p=0,c;p<d;p++){c=o.strokeThickness;c+=r.measureText(a[p]).width;if(o.wordWrap){c-=r.measureText(" ").width}s[p]=Math.ceil(c);l=Math.max(l,s[p])}var u=t.fontSize+o.strokeThickness,g=u*d,h=e.lineSpacing;if(1<d){g+=h*(d-1)}return{width:l,height:g,lines:d,lineWidths:s,lineSpacing:h,lineHeight:u}}},function(e,t,i){var a=i(1),n=i(1);a=i(980);n=i(981);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function TextWebGLRenderer(e,t,i,n,r){if(0===t.width||0===t.height){return}var o=t.frame,s=o.width,l=o.height,d=a.getTintAppendFloatAlpha;this.pipeline.batchTexture(t,o.glTexture,s,l,t.x,t.y,s/t.style.resolution,l/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,s,l,d(t._tintTL,n.alpha*t._alphaTL),d(t._tintTR,n.alpha*t._alphaTR),d(t._tintBL,n.alpha*t._alphaBL),d(t._tintBR,n.alpha*t._alphaBR),t._isTinted&&t.tintFill,0,0,n,r)}},function(e){e.exports=function TextCanvasRenderer(e,t,i,a,n){if(0===t.width||0===t.height){return}e.batchSprite(t,t.frame,a,n)}},function(e,t,i){var a=i(0),n=i(15),r=i(6),o=i(983),s={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},l=new a({initialize:function(e,t){this.parent=e;this.fontFamily;this.fontSize;this.fontStyle;this.backgroundColor;this.color;this.stroke;this.strokeThickness;this.shadowOffsetX;this.shadowOffsetY;this.shadowColor;this.shadowBlur;this.shadowStroke;this.shadowFill;this.align;this.maxLines;this.fixedWidth;this.fixedHeight;this.resolution;this.rtl;this.testString;this.baselineX;this.baselineY;this._font;this.setStyle(t,!1,!0);var i=r(t,"metrics",!1);if(i){this.metrics={ascent:r(i,"ascent",0),descent:r(i,"descent",0),fontSize:r(i,"fontSize",0)}}else{this.metrics=o(this)}},setStyle:function setStyle(e,t,i){if(t===void 0){t=!0}if(i===void 0){i=!1}if(e&&e.hasOwnProperty("fontSize")&&"number"==typeof e.fontSize){e.fontSize=e.fontSize.toString()+"px"}for(var a in s){var o=i?s[a][1]:this[a];if("wordWrapCallback"==a||"wordWrapCallbackScope"==a){this[a]=r(e,s[a][0],o)}else{this[a]=n(e,s[a][0],o)}}var l=r(e,"font",null);if(null!==l){this.setFont(l,!1)}this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var d=r(e,"fill",null);if(null!==d){this.color=d}if(t){return this.update(!0)}else{return this.parent}},syncFont:function syncFont(e,t){t.font=this._font},syncStyle:function syncStyle(e,t){t.textBaseline="alphabetic";t.fillStyle=this.color;t.strokeStyle=this.stroke;t.lineWidth=this.strokeThickness;t.lineCap="round";t.lineJoin="round"},syncShadow:function syncShadow(e,t){if(t){e.shadowOffsetX=this.shadowOffsetX;e.shadowOffsetY=this.shadowOffsetY;e.shadowColor=this.shadowColor;e.shadowBlur=this.shadowBlur}else{e.shadowOffsetX=0;e.shadowOffsetY=0;e.shadowColor=0;e.shadowBlur=0}},update:function update(e){if(e){this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();this.metrics=o(this)}return this.parent.updateText()},setFont:function setFont(e,t){if(t===void 0){t=!0}var a=e,n="",o="";if("string"!=typeof e){a=r(e,"fontFamily","Courier");n=r(e,"fontSize","16px");o=r(e,"fontStyle","")}else{var s=e.split(" "),l=0;o=2<s.length?s[l++]:"";n=s[l++]||"16px";a=s[l++]||"Courier"}if(a!==this.fontFamily||n!==this.fontSize||o!==this.fontStyle){this.fontFamily=a;this.fontSize=n;this.fontStyle=o;if(t){this.update(!0)}}return this.parent},setFontFamily:function setFontFamily(e){if(this.fontFamily!==e){this.fontFamily=e;this.update(!0)}return this.parent},setFontStyle:function setFontStyle(e){if(this.fontStyle!==e){this.fontStyle=e;this.update(!0)}return this.parent},setFontSize:function setFontSize(e){if("number"==typeof e){e=e.toString()+"px"}if(this.fontSize!==e){this.fontSize=e;this.update(!0)}return this.parent},setTestString:function setTestString(e){this.testString=e;return this.update(!0)},setFixedSize:function setFixedSize(e,t){this.fixedWidth=e;this.fixedHeight=t;if(e){this.parent.width=e}if(t){this.parent.height=t}return this.update(!1)},setBackgroundColor:function setBackgroundColor(e){this.backgroundColor=e;return this.update(!1)},setFill:function setFill(e){this.color=e;return this.update(!1)},setColor:function setColor(e){this.color=e;return this.update(!1)},setResolution:function setResolution(e){this.resolution=e;return this.update(!1)},setStroke:function setStroke(e,t){if(t===void 0){t=this.strokeThickness}if(e===void 0&&0!==this.strokeThickness){this.strokeThickness=0;this.update(!0)}else if(this.stroke!==e||this.strokeThickness!==t){this.stroke=e;this.strokeThickness=t;this.update(!0)}return this.parent},setShadow:function setShadow(e,t,i,a,n,r){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i="#000"}if(a===void 0){a=0}if(n===void 0){n=!1}if(r===void 0){r=!0}this.shadowOffsetX=e;this.shadowOffsetY=t;this.shadowColor=i;this.shadowBlur=a;this.shadowStroke=n;this.shadowFill=r;return this.update(!1)},setShadowOffset:function setShadowOffset(e,t){if(e===void 0){e=0}if(t===void 0){t=e}this.shadowOffsetX=e;this.shadowOffsetY=t;return this.update(!1)},setShadowColor:function setShadowColor(e){if(e===void 0){e="#000"}this.shadowColor=e;return this.update(!1)},setShadowBlur:function setShadowBlur(e){if(e===void 0){e=0}this.shadowBlur=e;return this.update(!1)},setShadowStroke:function setShadowStroke(e){this.shadowStroke=e;return this.update(!1)},setShadowFill:function setShadowFill(e){this.shadowFill=e;return this.update(!1)},setWordWrapWidth:function setWordWrapWidth(e,t){if(t===void 0){t=!1}this.wordWrapWidth=e;this.wordWrapUseAdvanced=t;return this.update(!1)},setWordWrapCallback:function setWordWrapCallback(e,t){if(t===void 0){t=null}this.wordWrapCallback=e;this.wordWrapCallbackScope=t;return this.update(!1)},setAlign:function setAlign(e){if(e===void 0){e="left"}this.align=e;return this.update(!1)},setMaxLines:function setMaxLines(e){if(e===void 0){e=0}this.maxLines=e;return this.update(!1)},getTextMetrics:function getTextMetrics(){var e=this.metrics;return{ascent:e.ascent,descent:e.descent,fontSize:e.fontSize}},toJSON:function toJSON(){var e={};for(var t in s){e[t]=this[t]}e.metrics=this.getTextMetrics();return e},destroy:function destroy(){this.parent=void 0}});e.exports=l},function(e,t,i){var a=i(26);e.exports=function MeasureText(e){var t=a.create(this),n=t.getContext("2d");e.syncFont(t,n);var r=Math.ceil(n.measureText(e.testString).width*e.baselineX),o=r,s=2*o;o=0|o*e.baselineY;t.width=r;t.height=s;n.fillStyle="#f00";n.fillRect(0,0,r,s);n.font=e._font;n.textBaseline="alphabetic";n.fillStyle="#000";n.fillText(e.testString,0,o);var l={ascent:0,descent:0,fontSize:0};if(!n.getImageData(0,0,r,s)){l.ascent=o;l.descent=o+6;l.fontSize=l.ascent+l.descent;a.remove(t);return l}var d=n.getImageData(0,0,r,s).data,p=d.length,c=4*r,u,g,h=0,m=!1;for(u=0;u<o;u++){for(g=0;g<c;g+=4){if(255!==d[h+g]){m=!0;break}}if(!m){h+=c}else{break}}l.ascent=o-u;h=p-c;m=!1;for(u=s;u>o;u--){for(g=0;g<c;g+=4){if(255!==d[h+g]){m=!0;break}}if(!m){h-=c}else{break}}l.descent=u-o;l.fontSize=l.ascent+l.descent;a.remove(t);return l}},function(e,t,i){var a=i(1),n=i(1);a=i(985);n=i(986);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function TileSpriteWebGLRenderer(e,t,i,n,r){t.updateCanvas();var o=a.getTintAppendFloatAlpha;this.pipeline.batchTexture(t,t.fillPattern,t.displayFrame.width*t.tileScaleX,t.displayFrame.height*t.tileScaleY,t.x,t.y,t.width,t.height,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.originX*t.width,t.originY*t.height,0,0,t.width,t.height,o(t._tintTL,n.alpha*t._alphaTL),o(t._tintTR,n.alpha*t._alphaTR),o(t._tintBL,n.alpha*t._alphaBL),o(t._tintBR,n.alpha*t._alphaBR),t._isTinted&&t.tintFill,t.tilePositionX%t.displayFrame.width/t.displayFrame.width,t.tilePositionY%t.displayFrame.height/t.displayFrame.height,n,r)}},function(e){e.exports=function TileSpriteCanvasRenderer(e,t,i,a,n){t.updateCanvas();e.batchSprite(t,t.frame,a,n)}},function(e,t,i){var a=i(1),n=i(1);a=i(988);n=i(989);e.exports={renderWebGL:a,renderCanvas:n}},function(e){e.exports=function VideoWebGLRenderer(e,t,i,a,n){if(t.videoTexture){this.pipeline.batchSprite(t,a,n)}}},function(e){e.exports=function VideoCanvasRenderer(e,t,i,a,n){if(t.videoTexture){e.batchSprite(t,t.frame,a,n)}}},function(e,t,i){var a=i(1),n=i(1);a=i(991);n=i(992);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(100),n=i(70);e.exports=function ArcWebGLRenderer(e,t,i,r,o){var s=this.pipeline,l=s._tempMatrix1,d=s._tempMatrix2,p=s._tempMatrix3;e.setPipeline(s);d.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.copyFrom(r.matrix);if(o){l.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);d.e=t.x;d.f=t.y}else{d.e-=r.scrollX*t.scrollFactorX;d.f-=r.scrollY*t.scrollFactorY}l.multiply(d,p);var c=t._displayOriginX,u=t._displayOriginY,g=r.alpha*t.alpha;if(t.isFilled){a(s,p,t,g,c,u)}if(t.isStroked){n(s,t,g,c,u)}}},function(e,t,i){var a=i(35),n=i(36),r=i(49),o=i(27);e.exports=function ArcCanvasRenderer(e,t,i,s,l){var d=e.currentContext;if(o(e,d,t,s,l)){var p=t.radius;d.beginPath();d.arc(p-t.originX*(2*p),p-t.originY*(2*p),p,a(t._startAngle),a(t._endAngle),t.anticlockwise);if(t.closePath){d.closePath()}if(t.isFilled){n(d,t);d.fill()}if(t.isStroked){r(d,t);d.stroke()}d.restore()}}},function(e,t,i){var a=i(1),n=i(1);a=i(994);n=i(995);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(100),n=i(70);e.exports=function CurveWebGLRenderer(e,t,i,r,o){var s=this.pipeline,l=s._tempMatrix1,d=s._tempMatrix2,p=s._tempMatrix3;e.setPipeline(s);d.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.copyFrom(r.matrix);if(o){l.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);d.e=t.x;d.f=t.y}else{d.e-=r.scrollX*t.scrollFactorX;d.f-=r.scrollY*t.scrollFactorY}l.multiply(d,p);var c=t._displayOriginX+t._curveBounds.x,u=t._displayOriginY+t._curveBounds.y,g=r.alpha*t.alpha;if(t.isFilled){a(s,p,t,g,c,u)}if(t.isStroked){n(s,t,g,c,u)}}},function(e,t,i){var a=i(36),n=i(49),r=i(27);e.exports=function CurveCanvasRenderer(e,t,o,s,l){var d=e.currentContext;if(r(e,d,t,s,l)){var p=t._displayOriginX+t._curveBounds.x,c=t._displayOriginY+t._curveBounds.y,u=t.pathData,g=u.length-1,h=u[0]-p,m=u[1]-c;d.beginPath();d.moveTo(h,m);if(!t.closePath){g-=2}for(var y=2;y<g;y+=2){var x=u[y]-p,f=u[y+1]-c;d.lineTo(x,f)}if(t.closePath){d.closePath()}if(t.isFilled){a(d,t);d.fill()}if(t.isStroked){n(d,t);d.stroke()}d.restore()}}},function(e,t,i){var a=i(1),n=i(1);a=i(997);n=i(998);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(100),n=i(70);e.exports=function EllipseWebGLRenderer(e,t,i,r,o){var s=this.pipeline,l=s._tempMatrix1,d=s._tempMatrix2,p=s._tempMatrix3;e.setPipeline(s);d.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.copyFrom(r.matrix);if(o){l.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);d.e=t.x;d.f=t.y}else{d.e-=r.scrollX*t.scrollFactorX;d.f-=r.scrollY*t.scrollFactorY}l.multiply(d,p);var c=t._displayOriginX,u=t._displayOriginY,g=r.alpha*t.alpha;if(t.isFilled){a(s,p,t,g,c,u)}if(t.isStroked){n(s,t,g,c,u)}}},function(e,t,i){var a=i(36),n=i(49),r=i(27);e.exports=function EllipseCanvasRenderer(e,t,o,s,l){var d=e.currentContext;if(r(e,d,t,s,l)){var p=t._displayOriginX,c=t._displayOriginY,u=t.pathData,g=u.length-1,h=u[0]-p,m=u[1]-c;d.beginPath();d.moveTo(h,m);if(!t.closePath){g-=2}for(var y=2;y<g;y+=2){var x=u[y]-p,f=u[y+1]-c;d.lineTo(x,f)}d.closePath();if(t.isFilled){a(d,t);d.fill()}if(t.isStroked){n(d,t);d.stroke()}d.restore()}}},function(e,t,i){var a=i(1),n=i(1);a=i(1e3);n=i(1001);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function GridWebGLRenderer(e,t,i,n,o){var s=this.pipeline,l=s._tempMatrix1,d=s._tempMatrix2,p=s._tempMatrix3;e.setPipeline(s);d.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.copyFrom(n.matrix);if(o){l.multiplyWithOffset(o,-n.scrollX*t.scrollFactorX,-n.scrollY*t.scrollFactorY);d.e=t.x;d.f=t.y}else{d.e-=n.scrollX*t.scrollFactorX;d.f-=n.scrollY*t.scrollFactorY}l.multiply(d,p);p.translate(-t._displayOriginX,-t._displayOriginY);var c=n.alpha*t.alpha,u=t.width,g=t.height,h=t.cellWidth,m=t.cellHeight,f=Math.ceil(u/h),T=Math.ceil(g/m),v=h,b=m,E=h-(f*h-u),S=m-(T*m-g),_,A,C=t.showCells,w=t.showAltCells,P=t.showOutline,O=0,R=0,L=0,k=0,D=0;if(P){v--;b--;if(E===h){E--}if(S===m){S--}}if(C&&0<t.fillAlpha){_=s.fillTint;A=a.getTintAppendFloatAlphaAndSwap(t.fillColor,t.fillAlpha*c);_.TL=A;_.TR=A;_.BL=A;_.BR=A;for(R=0;R<T;R++){if(w){L=R%2}for(O=0;O<f;O++){if(w&&L){L=0;continue}L++;k=O<f-1?v:E;D=R<T-1?b:S;s.setTexture2D();s.batchFillRect(O*h,R*m,k,D)}}}if(w&&0<t.altFillAlpha){_=s.fillTint;A=a.getTintAppendFloatAlphaAndSwap(t.altFillColor,t.altFillAlpha*c);_.TL=A;_.TR=A;_.BL=A;_.BR=A;for(R=0;R<T;R++){if(w){L=R%2}for(O=0;O<f;O++){if(w&&!L){L=1;continue}L=0;k=O<f-1?v:E;D=R<T-1?b:S;s.setTexture2D();s.batchFillRect(O*h,R*m,k,D)}}}if(P&&0<t.outlineFillAlpha){var F=s.strokeTint,I=a.getTintAppendFloatAlphaAndSwap(t.outlineFillColor,t.outlineFillAlpha*c);F.TL=I;F.TR=I;F.BL=I;F.BR=I;for(O=1;O<f;O++){var M=O*h;s.setTexture2D();s.batchLine(M,0,M,g,1,1,1,0,!1)}for(R=1;R<T;R++){var B=R*m;s.setTexture2D();s.batchLine(0,B,u,B,1,1,1,0,!1)}}}},function(e,t,i){var a=i(36),n=i(49),o=i(27);e.exports=function GridCanvasRenderer(e,t,i,s,l){var d=e.currentContext;if(o(e,d,t,s,l)){var p=-t._displayOriginX,c=-t._displayOriginY,u=s.alpha*t.alpha,g=t.width,h=t.height,m=t.cellWidth,f=t.cellHeight,T=Math.ceil(g/m),v=Math.ceil(h/f),b=m,E=f,S=m-(T*m-g),_=f-(v*f-h),A=t.showCells,C=t.showAltCells,w=t.showOutline,P=0,O=0,R=0,L=0,k=0;if(w){b--;E--;if(S===m){S--}if(_===f){_--}}if(A&&0<t.fillAlpha){a(d,t);for(O=0;O<v;O++){if(C){R=O%2}for(P=0;P<T;P++){if(C&&R){R=0;continue}R++;L=P<T-1?b:S;k=O<v-1?E:_;d.fillRect(p+P*m,c+O*f,L,k)}}}if(C&&0<t.altFillAlpha){a(d,t,t.altFillColor,t.altFillAlpha*u);for(O=0;O<v;O++){if(C){R=O%2}for(P=0;P<T;P++){if(C&&!R){R=1;continue}R=0;L=P<T-1?b:S;k=O<v-1?E:_;d.fillRect(p+P*m,c+O*f,L,k)}}}if(w&&0<t.outlineFillAlpha){n(d,t,t.outlineFillColor,t.outlineFillAlpha*u);for(P=1;P<T;P++){var D=P*m;d.beginPath();d.moveTo(D+p,c);d.lineTo(D+p,h+c);d.stroke()}for(O=1;O<v;O++){var F=O*f;d.beginPath();d.moveTo(p,F+c);d.lineTo(p+g,F+c);d.stroke()}}d.restore()}}},function(e,t,i){var a=i(1),n=i(1);a=i(1003);n=i(1004);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function IsoBoxWebGLRenderer(e,t,i,n,r){var o=this.pipeline,s=o._tempMatrix1,l=o._tempMatrix2,d=o._tempMatrix3;e.setPipeline(o);l.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);s.copyFrom(n.matrix);if(r){s.multiplyWithOffset(r,-n.scrollX*t.scrollFactorX,-n.scrollY*t.scrollFactorY);l.e=t.x;l.f=t.y}else{l.e-=n.scrollX*t.scrollFactorX;l.f-=n.scrollY*t.scrollFactorY}s.multiply(l,d);var p=t.width,c=t.height,u=p/2,g=p/t.projection,h=n.alpha*t.alpha;if(!t.isFilled){return}var m,y,x,f,T,v,b,E,S;if(t.showTop){m=a.getTintAppendFloatAlphaAndSwap(t.fillTop,h);y=d.getX(-u,-c);x=d.getY(-u,-c);f=d.getX(0,-g-c);T=d.getY(0,-g-c);v=d.getX(u,-c);b=d.getY(u,-c);E=d.getX(0,g-c);S=d.getY(0,g-c);o.setTexture2D();o.batchQuad(y,x,f,T,v,b,E,S,0,0,1,1,m,m,m,m,2)}if(t.showLeft){m=a.getTintAppendFloatAlphaAndSwap(t.fillLeft,h);y=d.getX(-u,0);x=d.getY(-u,0);f=d.getX(0,g);T=d.getY(0,g);v=d.getX(0,g-c);b=d.getY(0,g-c);E=d.getX(-u,-c);S=d.getY(-u,-c);o.setTexture2D();o.batchQuad(y,x,f,T,v,b,E,S,0,0,1,1,m,m,m,m,2)}if(t.showRight){m=a.getTintAppendFloatAlphaAndSwap(t.fillRight,h);y=d.getX(u,0);x=d.getY(u,0);f=d.getX(0,g);T=d.getY(0,g);v=d.getX(0,g-c);b=d.getY(0,g-c);E=d.getX(u,-c);S=d.getY(u,-c);o.setTexture2D();o.batchQuad(y,x,f,T,v,b,E,S,0,0,1,1,m,m,m,m,2)}}},function(e,t,i){var a=i(36),n=i(27);e.exports=function IsoBoxCanvasRenderer(e,t,i,r,o){var s=e.currentContext;if(n(e,s,t,r,o)&&t.isFilled){var l=t.width,d=t.height,p=l/2,c=l/t.projection;if(t.showTop){a(s,t,t.fillTop);s.beginPath();s.moveTo(-p,-d);s.lineTo(0,-c-d);s.lineTo(p,-d);s.lineTo(p,-1);s.lineTo(0,c-1);s.lineTo(-p,-1);s.lineTo(-p,-d);s.fill()}if(t.showLeft){a(s,t,t.fillLeft);s.beginPath();s.moveTo(-p,0);s.lineTo(0,c);s.lineTo(0,c-d);s.lineTo(-p,-d);s.lineTo(-p,0);s.fill()}if(t.showRight){a(s,t,t.fillRight);s.beginPath();s.moveTo(p,0);s.lineTo(0,c);s.lineTo(0,c-d);s.lineTo(p,-d);s.lineTo(p,0);s.fill()}s.restore()}}},function(e,t,i){var a=i(1),n=i(1);a=i(1006);n=i(1007);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function IsoTriangleWebGLRenderer(e,t,i,n,r){var o=this.pipeline,s=o._tempMatrix1,l=o._tempMatrix2,d=o._tempMatrix3;e.setPipeline(o);l.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);s.copyFrom(n.matrix);if(r){s.multiplyWithOffset(r,-n.scrollX*t.scrollFactorX,-n.scrollY*t.scrollFactorY);l.e=t.x;l.f=t.y}else{l.e-=n.scrollX*t.scrollFactorX;l.f-=n.scrollY*t.scrollFactorY}s.multiply(l,d);var p=t.width,c=t.height,u=p/2,g=p/t.projection,h=t.isReversed,m=n.alpha*t.alpha;if(!t.isFilled){return}var y,x,f,T,v,b,E;if(t.showTop&&h){y=a.getTintAppendFloatAlphaAndSwap(t.fillTop,m);x=d.getX(-u,-c);f=d.getY(-u,-c);T=d.getX(0,-g-c);v=d.getY(0,-g-c);b=d.getX(u,-c);E=d.getY(u,-c);var S=d.getX(0,g-c),_=d.getY(0,g-c);o.setTexture2D();o.batchQuad(x,f,T,v,b,E,S,_,0,0,1,1,y,y,y,y,2)}if(t.showLeft){y=a.getTintAppendFloatAlphaAndSwap(t.fillLeft,m);if(h){x=d.getX(-u,-c);f=d.getY(-u,-c);T=d.getX(0,g);v=d.getY(0,g);b=d.getX(0,g-c);E=d.getY(0,g-c)}else{x=d.getX(-u,0);f=d.getY(-u,0);T=d.getX(0,g);v=d.getY(0,g);b=d.getX(0,g-c);E=d.getY(0,g-c)}o.batchTri(x,f,T,v,b,E,0,0,1,1,y,y,y,2)}if(t.showRight){y=a.getTintAppendFloatAlphaAndSwap(t.fillRight,m);if(h){x=d.getX(u,-c);f=d.getY(u,-c);T=d.getX(0,g);v=d.getY(0,g);b=d.getX(0,g-c);E=d.getY(0,g-c)}else{x=d.getX(u,0);f=d.getY(u,0);T=d.getX(0,g);v=d.getY(0,g);b=d.getX(0,g-c);E=d.getY(0,g-c)}o.setTexture2D();o.batchTri(x,f,T,v,b,E,0,0,1,1,y,y,y,2)}}},function(e,t,i){var a=i(36),n=i(27);e.exports=function IsoTriangleCanvasRenderer(e,t,i,r,o){var s=e.currentContext;if(n(e,s,t,r,o)&&t.isFilled){var l=t.width,d=t.height,p=l/2,c=l/t.projection,u=t.isReversed;if(t.showTop&&u){a(s,t,t.fillTop);s.beginPath();s.moveTo(-p,-d);s.lineTo(0,-c-d);s.lineTo(p,-d);s.lineTo(0,c-d);s.fill()}if(t.showLeft){a(s,t,t.fillLeft);s.beginPath();if(u){s.moveTo(-p,-d);s.lineTo(0,c);s.lineTo(0,c-d)}else{s.moveTo(-p,0);s.lineTo(0,c);s.lineTo(0,c-d)}s.fill()}if(t.showRight){a(s,t,t.fillRight);s.beginPath();if(u){s.moveTo(p,-d);s.lineTo(0,c);s.lineTo(0,c-d)}else{s.moveTo(p,0);s.lineTo(0,c);s.lineTo(0,c-d)}s.fill()}s.restore()}}},function(e,t,i){var a=i(1),n=i(1);a=i(1009);n=i(1010);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function LineWebGLRenderer(e,t,i,n,r){var o=this.pipeline,s=o._tempMatrix1,l=o._tempMatrix2;e.setPipeline(o);l.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);s.copyFrom(n.matrix);if(r){s.multiplyWithOffset(r,-n.scrollX*t.scrollFactorX,-n.scrollY*t.scrollFactorY);l.e=t.x;l.f=t.y}else{l.e-=n.scrollX*t.scrollFactorX;l.f-=n.scrollY*t.scrollFactorY}var d=t._displayOriginX,p=t._displayOriginY,c=n.alpha*t.alpha;if(t.isStroked){var u=o.strokeTint,g=a.getTintAppendFloatAlphaAndSwap(t.strokeColor,t.strokeAlpha*c);u.TL=g;u.TR=g;u.BL=g;u.BR=g;var h=t._startWidth,m=t._endWidth;o.setTexture2D();o.batchLine(t.geom.x1-d,t.geom.y1-p,t.geom.x2-d,t.geom.y2-p,h,m,1,0,!1,l,s)}}},function(e,t,i){var a=i(49),n=i(27);e.exports=function LineCanvasRenderer(e,t,i,r,o){var s=e.currentContext;if(n(e,s,t,r,o)){var l=t._displayOriginX,d=t._displayOriginY;if(t.isStroked){a(s,t);s.beginPath();s.moveTo(t.geom.x1-l,t.geom.y1-d);s.lineTo(t.geom.x2-l,t.geom.y2-d);s.stroke()}s.restore()}}},function(e,t,i){var a=i(1),n=i(1);a=i(1012);n=i(1013);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(100),n=i(70);e.exports=function PolygonWebGLRenderer(e,t,i,r,o){var s=this.pipeline,l=s._tempMatrix1,d=s._tempMatrix2,p=s._tempMatrix3;e.setPipeline(s);d.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.copyFrom(r.matrix);if(o){l.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);d.e=t.x;d.f=t.y}else{d.e-=r.scrollX*t.scrollFactorX;d.f-=r.scrollY*t.scrollFactorY}l.multiply(d,p);var c=t._displayOriginX,u=t._displayOriginY,g=r.alpha*t.alpha;if(t.isFilled){a(s,p,t,g,c,u)}if(t.isStroked){n(s,t,g,c,u)}}},function(e,t,i){var a=i(36),n=i(49),r=i(27);e.exports=function PolygonCanvasRenderer(e,t,o,s,l){var d=e.currentContext;if(r(e,d,t,s,l)){var p=t._displayOriginX,c=t._displayOriginY,u=t.pathData,g=u.length-1,h=u[0]-p,m=u[1]-c;d.beginPath();d.moveTo(h,m);if(!t.closePath){g-=2}for(var y=2;y<g;y+=2){var x=u[y]-p,f=u[y+1]-c;d.lineTo(x,f)}d.closePath();if(t.isFilled){a(d,t);d.fill()}if(t.isStroked){n(d,t);d.stroke()}d.restore()}}},function(e,t,i){var a=i(1),n=i(1);a=i(1015);n=i(1016);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(70),n=i(10);e.exports=function RectangleWebGLRenderer(e,t,i,r,o){var s=this.pipeline,l=s._tempMatrix1,d=s._tempMatrix2,p=s._tempMatrix3;e.setPipeline(s);d.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.copyFrom(r.matrix);if(o){l.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);d.e=t.x;d.f=t.y}else{d.e-=r.scrollX*t.scrollFactorX;d.f-=r.scrollY*t.scrollFactorY}l.multiply(d,p);var c=t._displayOriginX,u=t._displayOriginY,g=r.alpha*t.alpha;if(t.isFilled){var h=s.fillTint,m=n.getTintAppendFloatAlphaAndSwap(t.fillColor,t.fillAlpha*g);h.TL=m;h.TR=m;h.BL=m;h.BR=m;s.setTexture2D();s.batchFillRect(-c,-u,t.width,t.height)}if(t.isStroked){a(s,t,g,c,u)}}},function(e,t,i){var a=i(36),n=i(49),r=i(27);e.exports=function RectangleCanvasRenderer(e,t,i,o,s){var l=e.currentContext;if(r(e,l,t,o,s)){var d=t._displayOriginX,p=t._displayOriginY;if(t.isFilled){a(l,t);l.fillRect(-d,-p,t.width,t.height)}if(t.isStroked){n(l,t);l.beginPath();l.rect(-d,-p,t.width,t.height);l.stroke()}l.restore()}}},function(e,t,i){var a=i(1),n=i(1);a=i(1018);n=i(1019);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(100),n=i(70);e.exports=function StarWebGLRenderer(e,t,i,r,o){var s=this.pipeline,l=s._tempMatrix1,d=s._tempMatrix2,p=s._tempMatrix3;e.setPipeline(s);d.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.copyFrom(r.matrix);if(o){l.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);d.e=t.x;d.f=t.y}else{d.e-=r.scrollX*t.scrollFactorX;d.f-=r.scrollY*t.scrollFactorY}l.multiply(d,p);var c=t._displayOriginX,u=t._displayOriginY,g=r.alpha*t.alpha;if(t.isFilled){a(s,p,t,g,c,u)}if(t.isStroked){n(s,t,g,c,u)}}},function(e,t,i){var a=i(36),n=i(49),r=i(27);e.exports=function StarCanvasRenderer(e,t,o,s,l){var d=e.currentContext;if(r(e,d,t,s,l)){var p=t._displayOriginX,c=t._displayOriginY,u=t.pathData,g=u.length-1,h=u[0]-p,m=u[1]-c;d.beginPath();d.moveTo(h,m);if(!t.closePath){g-=2}for(var y=2;y<g;y+=2){var x=u[y]-p,f=u[y+1]-c;d.lineTo(x,f)}d.closePath();if(t.isFilled){a(d,t);d.fill()}if(t.isStroked){n(d,t);d.stroke()}d.restore()}}},function(e,t,i){var a=i(1),n=i(1);a=i(1021);n=i(1022);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(70),n=i(10);e.exports=function TriangleWebGLRenderer(e,t,i,r,o){var s=this.pipeline,l=s._tempMatrix1,d=s._tempMatrix2,p=s._tempMatrix3;e.setPipeline(s);d.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.copyFrom(r.matrix);if(o){l.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);d.e=t.x;d.f=t.y}else{d.e-=r.scrollX*t.scrollFactorX;d.f-=r.scrollY*t.scrollFactorY}l.multiply(d,p);var c=t._displayOriginX,u=t._displayOriginY,g=r.alpha*t.alpha;if(t.isFilled){var h=s.fillTint,m=n.getTintAppendFloatAlphaAndSwap(t.fillColor,t.fillAlpha*g);h.TL=m;h.TR=m;h.BL=m;h.BR=m;var y=t.geom.x1-c,x=t.geom.y1-u,f=t.geom.x2-c,T=t.geom.y2-u,v=t.geom.x3-c,b=t.geom.y3-u;s.setTexture2D();s.batchFillTriangle(y,x,f,T,v,b,d,l)}if(t.isStroked){a(s,t,g,c,u)}}},function(e,t,i){var a=i(36),n=i(49),r=i(27);e.exports=function TriangleCanvasRenderer(e,t,i,o,s){var l=e.currentContext;if(r(e,l,t,o,s)){var d=t._displayOriginX,p=t._displayOriginY,c=t.geom.x1-d,u=t.geom.y1-p,g=t.geom.x2-d,h=t.geom.y2-p,m=t.geom.x3-d,y=t.geom.y3-p;l.beginPath();l.moveTo(c,u);l.lineTo(g,h);l.lineTo(m,y);l.closePath();if(t.isFilled){a(l,t);l.fill()}if(t.isStroked){n(l,t);l.stroke()}l.restore()}}},function(e,t,i){var a=i(186),n=i(5);n.register("blitter",function(e,t,i,n){return this.displayList.add(new a(this.scene,e,t,i,n))})},function(e,t,i){var a=i(187),n=i(5);n.register("container",function(e,t,i){return this.displayList.add(new a(this.scene,e,t,i))})},function(e,t,i){var a=i(387),n=i(5);n.register("dom",function(e,t,i,n,r){var o=new a(this.scene,e,t,i,n,r);this.displayList.add(o);this.updateList.add(o);return o})},function(e,t,i){var a=i(188),n=i(5);n.register("dynamicBitmapText",function(e,t,i,n,r){return this.displayList.add(new a(this.scene,e,t,i,n,r))})},function(e,t,i){var a=i(389),n=i(5);n.register("extern",function(){var e=new a(this.scene);this.displayList.add(e);this.updateList.add(e);return e})},function(e,t,i){var a=i(189),n=i(5);n.register("graphics",function(e){return this.displayList.add(new a(this.scene,e))})},function(e,t,i){var a=i(97),n=i(5);n.register("group",function(e,t){return this.updateList.add(new a(this.scene,e,t))})},function(e,t,i){var a=i(98),n=i(5);n.register("image",function(e,t,i,n){return this.displayList.add(new a(this.scene,e,t,i,n))})},function(e,t,i){var a=i(5),n=i(192);a.register("particles",function(e,t,i){var a=new n(this.scene,e,t,i);this.displayList.add(a);this.updateList.add(a);return a})},function(e,t,i){var a=i(5),n=i(401);a.register("follower",function(e,t,i,a,r){var o=new n(this.scene,e,t,i,a,r);this.displayList.add(o);this.updateList.add(o);return o})},function(e,t,i){var a=i(5),n=i(193);a.register("renderTexture",function(e,t,i,a,r,o){return this.displayList.add(new n(this.scene,e,t,i,a,r,o))})},function(e,t,i){var a=i(5),n=i(69);a.register("sprite",function(e,t,i,a){var r=new n(this.scene,e,t,i,a);this.displayList.add(r);this.updateList.add(r);return r})},function(e,t,i){var a=i(129),n=i(5);n.register("bitmapText",function(e,t,i,n,r,o){return this.displayList.add(new a(this.scene,e,t,i,n,r,o))})},function(e,t,i){var a=i(195),n=i(5);n.register("text",function(e,t,i,n){return this.displayList.add(new a(this.scene,e,t,i,n))})},function(e,t,i){var a=i(196),n=i(5);n.register("tileSprite",function(e,t,i,n,r,o){return this.displayList.add(new a(this.scene,e,t,i,n,r,o))})},function(e,t,i){var a=i(110),n=i(5);n.register("zone",function(e,t,i,n){return this.displayList.add(new a(this.scene,e,t,i,n))})},function(e,t,i){var a=i(197),n=i(5);n.register("video",function(e,t,i){var n=new a(this.scene,e,t,i);this.displayList.add(n);this.updateList.add(n);return n})},function(e,t,i){var a=i(402),n=i(5);n.register("arc",function(e,t,i,n,r,o,s,l){return this.displayList.add(new a(this.scene,e,t,i,n,r,o,s,l))});n.register("circle",function(e,t,i,n,r){return this.displayList.add(new a(this.scene,e,t,i,0,360,!1,n,r))})},function(e,t,i){var a=i(5),n=i(403);a.register("curve",function(e,t,i,a,r){return this.displayList.add(new n(this.scene,e,t,i,a,r))})},function(e,t,i){var a=i(404),n=i(5);n.register("ellipse",function(e,t,i,n,r,o){return this.displayList.add(new a(this.scene,e,t,i,n,r,o))})},function(e,t,i){var a=i(5),n=i(405);a.register("grid",function(e,t,i,a,r,o,s,l,d,p){return this.displayList.add(new n(this.scene,e,t,i,a,r,o,s,l,d,p))})},function(e,t,i){var a=i(5),n=i(406);a.register("isobox",function(e,t,i,a,r,o,s){return this.displayList.add(new n(this.scene,e,t,i,a,r,o,s))})},function(e,t,i){var a=i(5),n=i(407);a.register("isotriangle",function(e,t,i,a,r,o,s,l){return this.displayList.add(new n(this.scene,e,t,i,a,r,o,s,l))})},function(e,t,i){var a=i(5),n=i(408);a.register("line",function(e,t,i,a,r,o,s,l){return this.displayList.add(new n(this.scene,e,t,i,a,r,o,s,l))})},function(e,t,i){var a=i(5),n=i(409);a.register("polygon",function(e,t,i,a,r){return this.displayList.add(new n(this.scene,e,t,i,a,r))})},function(e,t,i){var a=i(5),n=i(414);a.register("rectangle",function(e,t,i,a,r,o){return this.displayList.add(new n(this.scene,e,t,i,a,r,o))})},function(e,t,i){var a=i(415),n=i(5);n.register("star",function(e,t,i,n,r,o,s){return this.displayList.add(new a(this.scene,e,t,i,n,r,o,s))})},function(e,t,i){var a=i(5),n=i(416);a.register("triangle",function(e,t,i,a,r,o,s,l,d,p){return this.displayList.add(new n(this.scene,e,t,i,a,r,o,s,l,d,p))})},function(e,t,i){var a=i(186),n=i(28),r=i(16),o=i(15);r.register("blitter",function(e,t){if(e===void 0){e={}}var i=o(e,"key",null),r=o(e,"frame",null),s=new a(this.scene,0,0,i,r);if(t!==void 0){e.add=t}n(this.scene,s,e);return s})},function(e,t,i){var a=i(28),n=i(187),r=i(16),o=i(15);r.register("container",function(e,t){if(e===void 0){e={}}var i=o(e,"x",0),r=o(e,"y",0),s=new n(this.scene,i,r);if(t!==void 0){e.add=t}a(this.scene,s,e);return s})},function(e,t,i){var a=i(188),n=i(28),r=i(16),o=i(15);r.register("dynamicBitmapText",function(e,t){if(e===void 0){e={}}var i=o(e,"font",""),r=o(e,"text",""),s=o(e,"size",!1),l=new a(this.scene,0,0,i,r,s);if(t!==void 0){e.add=t}n(this.scene,l,e);return l})},function(e,t,i){var a=i(16),n=i(189);a.register("graphics",function(e,t){if(e===void 0){e={}}if(t!==void 0){e.add=t}var i=new n(this.scene,e);if(e.add){this.scene.sys.displayList.add(i)}return i})},function(e,t,i){var a=i(16),n=i(97);a.register("group",function(e){return new n(this.scene,null,e)})},function(e,t,i){var a=i(28),n=i(16),r=i(15),o=i(98);n.register("image",function(e,t){if(e===void 0){e={}}var i=r(e,"key",null),n=r(e,"frame",null),s=new o(this.scene,0,0,i,n);if(t!==void 0){e.add=t}a(this.scene,s,e);return s})},function(e,t,i){var a=i(16),n=i(15),r=i(2),o=i(192);a.register("particles",function(e,t){if(e===void 0){e={}}var i=n(e,"key",null),a=n(e,"frame",null),s=r(e,"emitters",null),l=new o(this.scene,i,a,s);if(t!==void 0){e.add=t}var d=r(e,"add",!1);if(d){this.displayList.add(l)}this.updateList.add(l);return l})},function(e,t,i){var a=i(28),n=i(16),r=i(15),o=i(193);n.register("renderTexture",function(e,t){if(e===void 0){e={}}var i=r(e,"x",0),n=r(e,"y",0),s=r(e,"width",32),l=r(e,"height",32),d=r(e,"key",void 0),p=r(e,"frame",void 0),c=new o(this.scene,i,n,s,l,d,p);if(t!==void 0){e.add=t}a(this.scene,c,e);return c})},function(e,t,i){var a=i(28),n=i(385),r=i(16),o=i(15),s=i(69);r.register("sprite",function(e,t){if(e===void 0){e={}}var i=o(e,"key",null),r=o(e,"frame",null),l=new s(this.scene,0,0,i,r);if(t!==void 0){e.add=t}a(this.scene,l,e);n(l,e);return l})},function(e,t,i){var a=i(129),n=i(28),r=i(16),o=i(15),s=i(6);r.register("bitmapText",function(e,t){if(e===void 0){e={}}var i=s(e,"font",""),r=o(e,"text",""),l=o(e,"size",!1),d=s(e,"align",0),p=new a(this.scene,0,0,i,r,l,d);if(t!==void 0){e.add=t}n(this.scene,p,e);return p})},function(e,t,i){var a=i(28),n=i(16),r=i(15),o=i(195);n.register("text",function(e,t){if(e===void 0){e={}}var i=r(e,"text",""),n=r(e,"style",null),s=r(e,"padding",null);if(null!==s){n.padding=s}var l=new o(this.scene,0,0,i,n);if(t!==void 0){e.add=t}a(this.scene,l,e);l.autoRound=r(e,"autoRound",!0);l.resolution=r(e,"resolution",1);return l})},function(e,t,i){var a=i(28),n=i(16),r=i(15),o=i(196);n.register("tileSprite",function(e,t){if(e===void 0){e={}}var i=r(e,"x",0),n=r(e,"y",0),s=r(e,"width",512),l=r(e,"height",512),d=r(e,"key",""),p=r(e,"frame",""),c=new o(this.scene,i,n,s,l,d,p);if(t!==void 0){e.add=t}a(this.scene,c,e);return c})},function(e,t,i){var a=i(16),n=i(15),r=i(110);a.register("zone",function(e){var t=n(e,"x",0),i=n(e,"y",0),a=n(e,"width",1),o=n(e,"height",a);return new r(this.scene,t,i,a,o)})},function(e,t,i){var a=i(28),n=i(16),r=i(15),o=i(197);n.register("video",function(e,t){if(e===void 0){e={}}var i=r(e,"key",null),n=new o(this.scene,0,0,i);if(t!==void 0){e.add=t}a(this.scene,n,e);return n})},function(e,t,i){var a=i(1),n=i(1);a=i(1066);n=i(1067);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function MeshWebGLRenderer(e,t,n,r,o){var s=this.pipeline;e.setPipeline(s,t);var l=s._tempMatrix1,d=s._tempMatrix2,p=s._tempMatrix3;d.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.copyFrom(r.matrix);if(o){l.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY);d.e=t.x;d.f=t.y;l.multiply(d,p)}else{d.e-=r.scrollX*t.scrollFactorX;d.f-=r.scrollY*t.scrollFactorY;l.multiply(d,p)}var c=t.frame,u=c.glTexture,g=t.vertices,h=t.uv,m=t.colors,f=t.alphas,T=g.length,v=Math.floor(.5*T);if(s.vertexCount+v>s.vertexCapacity){s.flush()}s.setTexture2D(u,0);for(var b=s.vertexViewF32,E=s.vertexViewU32,S=s.vertexCount*s.vertexComponentCount-1,_=0,A=t.tintFill,C=0;C<T;C+=2){var w=g[C+0],x=g[C+1],y=w*p.a+x*p.c+p.e,P=w*p.b+x*p.d+p.f;if(r.roundPixels){y=Math.round(y);P=Math.round(P)}b[++S]=y;b[++S]=P;b[++S]=h[C+0];b[++S]=h[C+1];b[++S]=A;E[++S]=a.getTintAppendFloatAlpha(m[_],r.alpha*f[_]);_++}s.vertexCount+=v}},function(e){e.exports=function MeshCanvasRenderer(){}},function(e,t,i){var a=i(1),n=i(1);a=i(1069);n=i(1070);e.exports={renderWebGL:a,renderCanvas:n}},function(e){e.exports=function ShaderWebGLRenderer(e,t,i,a,n){if(!t.shader){return}var r=e.currentPipeline;e.clearPipeline();if(t.renderToTexture){t.load();t.flush()}else{var o=t._tempMatrix1,s=t._tempMatrix2,l=t._tempMatrix3;s.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);o.copyFrom(a.matrix);if(n){o.multiplyWithOffset(n,-a.scrollX*t.scrollFactorX,-a.scrollY*t.scrollFactorY);s.e=t.x;s.f=t.y}else{s.e-=a.scrollX*t.scrollFactorX;s.f-=a.scrollY*t.scrollFactorY}o.multiply(s,l);if(e.width!==t._rendererWidth||e.height!==t._rendererHeight){t.projOrtho(0,e.width,e.height,0)}t.load(l.matrix);t.flush()}e.rebindPipeline(r)}},function(e){e.exports=function ShaderCanvasRenderer(){}},function(e,t,i){var a=i(130),n=i(5);n.register("mesh",function(e,t,i,n,r,o,s,l){return this.displayList.add(new a(this.scene,e,t,i,n,r,o,s,l))})},function(e,t,i){var a=i(200),n=i(5);n.register("quad",function(e,t,i,n){return this.displayList.add(new a(this.scene,e,t,i,n))})},function(e,t,i){var a=i(201),n=i(5);n.register("shader",function(e,t,i,n,r,o,s){return this.displayList.add(new a(this.scene,e,t,i,n,r,o,s))})},function(e,t,i){var a=i(28),n=i(16),r=i(15),o=i(6),s=i(130);n.register("mesh",function(e,t){if(e===void 0){e={}}var i=r(e,"key",null),n=r(e,"frame",null),l=o(e,"vertices",[]),d=o(e,"colors",[]),p=o(e,"alphas",[]),c=o(e,"uv",[]),u=new s(this.scene,0,0,l,c,d,p,i,n);if(t!==void 0){e.add=t}a(this.scene,u,e);return u})},function(e,t,i){var a=i(28),n=i(16),r=i(15),o=i(200);n.register("quad",function(e,t){if(e===void 0){e={}}var i=r(e,"x",0),n=r(e,"y",0),s=r(e,"key",null),l=r(e,"frame",null),d=new o(this.scene,i,n,s,l);if(t!==void 0){e.add=t}a(this.scene,d,e);return d})},function(e,t,i){var a=i(28),n=i(16),r=i(15),o=i(201);n.register("shader",function(e,t){if(e===void 0){e={}}var i=r(e,"key",null),n=r(e,"x",0),s=r(e,"y",0),l=r(e,"width",128),d=r(e,"height",128),p=new o(this.scene,i,n,s,l,d);if(t!==void 0){e.add=t}a(this.scene,p,e);return p})},function(e,t,i){var a=i(0),n=i(421),r=i(23),o=i(19),s=new a({Extends:n,initialize:function(e){this.scene=e;this.systems=e.sys;if(!e.sys.settings.isBooted){e.sys.events.once(o.BOOT,this.boot,this)}n.call(this)},boot:function boot(){var e=this.systems.events;e.on(o.SHUTDOWN,this.shutdown,this);e.on(o.DESTROY,this.destroy,this)},destroy:function destroy(){this.shutdown();this.scene=void 0;this.systems=void 0}});r.register("LightsPlugin",s,"lights");e.exports=s},function(e,t,i){var a=i(65);a.Area=i(1079);a.Circumference=i(265);a.CircumferencePoint=i(146);a.Clone=i(1080);a.Contains=i(55);a.ContainsPoint=i(1081);a.ContainsRect=i(1082);a.CopyFrom=i(1083);a.Equals=i(1084);a.GetBounds=i(1085);a.GetPoint=i(263);a.GetPoints=i(264);a.Offset=i(1086);a.OffsetPoint=i(1087);a.Random=i(147);e.exports=a},function(e){e.exports=function Area(e){return 0<e.radius?Math.PI*e.radius*e.radius:0}},function(e,t,i){var a=i(65);e.exports=function Clone(e){return new a(e.x,e.y,e.radius)}},function(e,t,i){var a=i(55);e.exports=function ContainsPoint(e,t){return a(e,t.x,t.y)}},function(e,t,i){var a=i(55);e.exports=function ContainsRect(e,t){return a(e,t.x,t.y)&&a(e,t.right,t.y)&&a(e,t.x,t.bottom)&&a(e,t.right,t.bottom)}},function(e){e.exports=function CopyFrom(e,t){return t.setTo(e.x,e.y,e.radius)}},function(e){e.exports=function Equals(e,t){return e.x===t.x&&e.y===t.y&&e.radius===t.radius}},function(e,t,i){var a=i(11);e.exports=function GetBounds(e,t){if(t===void 0){t=new a}t.x=e.left;t.y=e.top;t.width=e.diameter;t.height=e.diameter;return t}},function(e){e.exports=function Offset(e,t,i){e.x+=t;e.y+=i;return e}},function(e){e.exports=function OffsetPoint(e,t){e.x+=t.x;e.y+=t.y;return e}},function(e,t,i){var a=i(95);a.Area=i(1089);a.Circumference=i(392);a.CircumferencePoint=i(191);a.Clone=i(1090);a.Contains=i(96);a.ContainsPoint=i(1091);a.ContainsRect=i(1092);a.CopyFrom=i(1093);a.Equals=i(1094);a.GetBounds=i(1095);a.GetPoint=i(390);a.GetPoints=i(391);a.Offset=i(1096);a.OffsetPoint=i(1097);a.Random=i(154);e.exports=a},function(e){e.exports=function Area(e){if(e.isEmpty()){return 0}return e.getMajorRadius()*e.getMinorRadius()*Math.PI}},function(e,t,i){var a=i(95);e.exports=function Clone(e){return new a(e.x,e.y,e.width,e.height)}},function(e,t,i){var a=i(96);e.exports=function ContainsPoint(e,t){return a(e,t.x,t.y)}},function(e,t,i){var a=i(96);e.exports=function ContainsRect(e,t){return a(e,t.x,t.y)&&a(e,t.right,t.y)&&a(e,t.x,t.bottom)&&a(e,t.right,t.bottom)}},function(e){e.exports=function CopyFrom(e,t){return t.setTo(e.x,e.y,e.width,e.height)}},function(e){e.exports=function Equals(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}},function(e,t,i){var a=i(11);e.exports=function GetBounds(e,t){if(t===void 0){t=new a}t.x=e.left;t.y=e.top;t.width=e.width;t.height=e.height;return t}},function(e){e.exports=function Offset(e,t,i){e.x+=t;e.y+=i;return e}},function(e){e.exports=function OffsetPoint(e,t){e.x+=t.x;e.y+=t.y;return e}},function(e,t,i){var a=i(4),r=i(202);e.exports=function GetCircleToCircle(e,t,i){if(i===void 0){i=[]}if(r(e,t)){var o=e.x,s=e.y,l=e.radius,d=t.x,p=t.y,c=t.radius,u,g,h,m,y;if(s===p){y=(c*c-l*l-d*d+o*o)/(2*(o-d));u=1;g=-2*p;h=d*d+y*y-2*d*y+p*p-c*c;m=g*g-4*u*h;if(0===m){i.push(new a(y,-g/(2*u)))}else if(0<m){i.push(new a(y,(-g+Math.sqrt(m))/(2*u)));i.push(new a(y,(-g-Math.sqrt(m))/(2*u)))}}else{var f=(o-d)/(s-p),T=(c*c-l*l-d*d+o*o-p*p+s*s)/(2*(s-p));u=f*f+1;g=2*s*f-2*T*f-2*o;h=o*o+s*s+T*T-l*l-2*s*T;m=g*g-4*u*h;if(0===m){y=-g/(2*u);i.push(new a(y,T-y*f))}else if(0<m){y=(-g+Math.sqrt(m))/(2*u);i.push(new a(y,T-y*f));y=(-g-Math.sqrt(m))/(2*u);i.push(new a(y,T-y*f))}}}return i}},function(e,t,i){var a=i(204),n=i(203);e.exports=function GetCircleToRectangle(e,t,i){if(i===void 0){i=[]}if(n(e,t)){var r=t.getLineA(),o=t.getLineB(),s=t.getLineC(),l=t.getLineD();a(r,e,i);a(o,e,i);a(s,e,i);a(l,e,i)}return i}},function(e,t,i){var a=i(11),n=i(131);e.exports=function GetRectangleIntersection(e,t,i){if(i===void 0){i=new a}if(n(e,t)){i.x=Math.max(e.x,t.x);i.y=Math.max(e.y,t.y);i.width=Math.min(e.right,t.right)-i.x;i.height=Math.min(e.bottom,t.bottom)-i.y}return i}},function(e,t,i){var a=i(206),n=i(131);e.exports=function GetRectangleToRectangle(e,t,i){if(i===void 0){i=[]}if(n(e,t)){var r=e.getLineA(),o=e.getLineB(),s=e.getLineC(),l=e.getLineD();a(r,t,i);a(o,t,i);a(s,t,i);a(l,t,i)}return i}},function(e,t,i){var a=i(425),n=i(206);e.exports=function GetRectangleToTriangle(e,t,i){if(i===void 0){i=[]}if(a(e,t)){var r=t.getLineA(),o=t.getLineB(),s=t.getLineC();n(r,e,i);n(o,e,i);n(s,e,i)}return i}},function(e,t,i){var a=i(204),n=i(427);e.exports=function GetTriangleToCircle(e,t,i){if(i===void 0){i=[]}if(n(e,t)){var r=e.getLineA(),o=e.getLineB(),s=e.getLineC();a(r,t,i);a(o,t,i);a(s,t,i)}return i}},function(e,t,i){var a=i(430),n=i(428);e.exports=function GetTriangleToTriangle(e,t,i){if(i===void 0){i=[]}if(a(e,t)){var r=t.getLineA(),o=t.getLineB(),s=t.getLineC();n(e,r,i);n(e,o,i);n(e,s,i)}return i}},function(e,t,i){var a=i(432);e.exports=function PointToLineSegment(e,t){if(!a(e,t)){return!1}var i=Math.min(t.x1,t.x2),n=Math.max(t.x1,t.x2),r=Math.min(t.y1,t.y2),o=Math.max(t.y1,t.y2);return e.x>=i&&e.x<=n&&e.y>=r&&e.y<=o}},function(e){e.exports=function RectangleToValues(e,t,i,a,n,r){if(r===void 0){r=0}return!(t>e.right+r||i<e.left-r||a>e.bottom+r||n<e.top-r)}},function(e,t,i){var a=i(56);a.Angle=i(85);a.BresenhamPoints=i(285);a.CenterOn=i(1108);a.Clone=i(1109);a.CopyFrom=i(1110);a.Equals=i(1111);a.Extend=i(1112);a.GetMidPoint=i(1113);a.GetNearestPoint=i(1114);a.GetNormal=i(1115);a.GetPoint=i(272);a.GetPoints=i(150);a.GetShortestDistance=i(1116);a.Height=i(1117);a.Length=i(57);a.NormalAngle=i(433);a.NormalX=i(1118);a.NormalY=i(1119);a.Offset=i(1120);a.PerpSlope=i(1121);a.Random=i(151);a.ReflectAngle=i(1122);a.Rotate=i(1123);a.RotateAroundPoint=i(1124);a.RotateAroundXY=i(208);a.SetToAngle=i(1125);a.Slope=i(1126);a.Width=i(1127);e.exports=a},function(e){e.exports=function CenterOn(e,t,i){var a=t-(e.x1+e.x2)/2,n=i-(e.y1+e.y2)/2;e.x1+=a;e.y1+=n;e.x2+=a;e.y2+=n;return e}},function(e,t,i){var a=i(56);e.exports=function Clone(e){return new a(e.x1,e.y1,e.x2,e.y2)}},function(e){e.exports=function CopyFrom(e,t){return t.setTo(e.x1,e.y1,e.x2,e.y2)}},function(e){e.exports=function Equals(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2}},function(e,t,i){var a=i(57);e.exports=function Extend(e,t,i){if(i===void 0){i=t}var n=a(e),r=e.x2-e.x1,o=e.y2-e.y1;if(t){e.x1=e.x1-r/n*t;e.y1=e.y1-o/n*t}if(i){e.x2=e.x2+r/n*i;e.y2=e.y2+o/n*i}return e}},function(e,t,i){var a=i(4);e.exports=function GetMidPoint(e,t){if(t===void 0){t=new a}t.x=(e.x1+e.x2)/2;t.y=(e.y1+e.y2)/2;return t}},function(e,t,i){var a=i(4);e.exports=function GetNearestPoint(e,t,i){if(i===void 0){i=new a}var n=e.x1,o=e.y1,s=e.x2,l=e.y2,d=(s-n)*(s-n)+(l-o)*(l-o);if(0===d){return i}var p=((t.x-n)*(s-n)+(t.y-o)*(l-o))/d;i.x=n+p*(s-n);i.y=o+p*(l-o);return i}},function(e,t,i){var n=i(13),r=i(85),o=i(4);e.exports=function GetNormal(e,t){if(t===void 0){t=new o}var i=r(e)-n.TAU;t.x=Math.cos(i);t.y=Math.sin(i);return t}},function(e){e.exports=function GetShortestDistance(e,t){var i=e.x1,a=e.y1,n=e.x2,r=e.y2,o=(n-i)*(n-i)+(r-a)*(r-a);if(0===o){return!1}var l=((a-t.y)*(n-i)-(i-t.x)*(r-a))/o;return Math.abs(l)*Math.sqrt(o)}},function(e){e.exports=function Height(e){return Math.abs(e.y1-e.y2)}},function(e,t,i){var a=i(13),n=i(85);e.exports=function NormalX(e){return Math.cos(n(e)-a.TAU)}},function(e,t,i){var a=i(13),n=i(85);e.exports=function NormalY(e){return Math.sin(n(e)-a.TAU)}},function(e){e.exports=function Offset(e,t,i){e.x1+=t;e.y1+=i;e.x2+=t;e.y2+=i;return e}},function(e){e.exports=function PerpSlope(e){return-((e.x2-e.x1)/(e.y2-e.y1))}},function(e,t,i){var a=i(85),n=i(433);e.exports=function ReflectAngle(e,t){return 2*n(t)-Math.PI-a(e)}},function(e,t,i){var a=i(208);e.exports=function Rotate(e,t){var i=(e.x1+e.x2)/2,n=(e.y1+e.y2)/2;return a(e,i,n,t)}},function(e,t,i){var a=i(208);e.exports=function RotateAroundPoint(e,t,i){return a(e,t.x,t.y,i)}},function(e){e.exports=function SetToAngle(e,t,i,a,n){e.x1=t;e.y1=i;e.x2=t+Math.cos(a)*n;e.y2=i+Math.sin(a)*n;return e}},function(e){e.exports=function Slope(e){return(e.y2-e.y1)/(e.x2-e.x1)}},function(e){e.exports=function Width(e){return Math.abs(e.x1-e.x2)}},function(e,t,i){var a=i(4);a.Ceil=i(1129);a.Clone=i(1130);a.CopyFrom=i(1131);a.Equals=i(1132);a.Floor=i(1133);a.GetCentroid=i(1134);a.GetMagnitude=i(434);a.GetMagnitudeSq=i(435);a.GetRectangleFromPoints=i(1135);a.Interpolate=i(1136);a.Invert=i(1137);a.Negative=i(1138);a.Project=i(1139);a.ProjectUnit=i(1140);a.SetMagnitude=i(1141);e.exports=a},function(e){e.exports=function Ceil(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))}},function(e,t,i){var a=i(4);e.exports=function Clone(e){return new a(e.x,e.y)}},function(e){e.exports=function CopyFrom(e,t){return t.setTo(e.x,e.y)}},function(e){e.exports=function Equals(e,t){return e.x===t.x&&e.y===t.y}},function(e){e.exports=function Floor(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))}},function(e,t,i){var a=i(4);e.exports=function GetCentroid(e,t){if(t===void 0){t=new a}if(!Array.isArray(e)){throw new Error("GetCentroid points argument must be an array")}var n=e.length;if(1>n){throw new Error("GetCentroid points array must not be empty")}else if(1===n){t.x=e[0].x;t.y=e[0].y}else{for(var r=0;r<n;r++){t.x+=e[r].x;t.y+=e[r].y}t.x/=n;t.y/=n}return t}},function(e,t,i){var a=i(11);e.exports=function GetRectangleFromPoints(e,t){if(t===void 0){t=new a}for(var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,l=0,d;l<e.length;l++){d=e[l];if(d.x>n){n=d.x}if(d.x<r){r=d.x}if(d.y>o){o=d.y}if(d.y<s){s=d.y}}t.x=r;t.y=s;t.width=n-r;t.height=o-s;return t}},function(e,t,i){var a=i(4);e.exports=function Interpolate(e,i,n,r){if(n===void 0){n=0}if(r===void 0){r=new a}r.x=e.x+(i.x-e.x)*n;r.y=e.y+(i.y-e.y)*n;return r}},function(e){e.exports=function Invert(e){return e.setTo(e.y,e.x)}},function(e,t,i){var a=i(4);e.exports=function Negative(e,t){if(t===void 0){t=new a}return t.setTo(-e.x,-e.y)}},function(e,t,i){var a=i(4),n=i(435);e.exports=function Project(e,t,i){if(i===void 0){i=new a}var r=e.x*t.x+e.y*t.y,o=r/n(t);if(0!==o){i.x=o*t.x;i.y=o*t.y}return i}},function(e,t,i){var a=i(4);e.exports=function ProjectUnit(e,t,i){if(i===void 0){i=new a}var n=e.x*t.x+e.y*t.y;if(0!=n){i.x=n*t.x;i.y=n*t.y}return i}},function(e,t,i){var a=i(434);e.exports=function SetMagnitude(e,t){if(0!==e.x||0!==e.y){var i=a(e);e.x/=i;e.y/=i}e.x*=t;e.y*=t;return e}},function(e,t,i){var a=i(198);a.Clone=i(1143);a.Contains=i(199);a.ContainsPoint=i(1144);a.GetAABB=i(410);a.GetNumberArray=i(1145);a.GetPoints=i(411);a.Perimeter=i(412);a.Reverse=i(1146);a.Smooth=i(413);e.exports=a},function(e,t,i){var a=i(198);e.exports=function Clone(e){return new a(e.points)}},function(e,t,i){var a=i(199);e.exports=function ContainsPoint(e,t){return a(e,t.x,t.y)}},function(e){e.exports=function GetNumberArray(e,t){if(t===void 0){t=[]}for(var a=0;a<e.points.length;a++){t.push(e.points[a].x);t.push(e.points[a].y)}return t}},function(e){e.exports=function Reverse(e){e.points.reverse();return e}},function(e){e.exports=function Area(e){return e.width*e.height}},function(e){e.exports=function Ceil(e){e.x=Math.ceil(e.x);e.y=Math.ceil(e.y);return e}},function(e){e.exports=function CeilAll(e){e.x=Math.ceil(e.x);e.y=Math.ceil(e.y);e.width=Math.ceil(e.width);e.height=Math.ceil(e.height);return e}},function(e,t,i){var a=i(11);e.exports=function Clone(e){return new a(e.x,e.y,e.width,e.height)}},function(e,t,i){var a=i(47);e.exports=function ContainsPoint(e,t){return a(e,t.x,t.y)}},function(e){e.exports=function CopyFrom(e,t){return t.setTo(e.x,e.y,e.width,e.height)}},function(e){e.exports=function Equals(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}},function(e,t,i){var a=i(209);e.exports=function FitInside(e,t){var i=a(e);if(i<a(t)){e.setSize(t.height*i,t.height)}else{e.setSize(t.width,t.width/i)}return e.setPosition(t.centerX-e.width/2,t.centerY-e.height/2)}},function(e,t,i){var a=i(209);e.exports=function FitOutside(e,t){var i=a(e);if(i>a(t)){e.setSize(t.height*i,t.height)}else{e.setSize(t.width,t.width/i)}return e.setPosition(t.centerX-e.width/2,t.centerY-e.height/2)}},function(e){e.exports=function Floor(e){e.x=Math.floor(e.x);e.y=Math.floor(e.y);return e}},function(e){e.exports=function FloorAll(e){e.x=Math.floor(e.x);e.y=Math.floor(e.y);e.width=Math.floor(e.width);e.height=Math.floor(e.height);return e}},function(e,t,i){var a=i(4);e.exports=function GetCenter(e,t){if(t===void 0){t=new a}t.x=e.centerX;t.y=e.centerY;return t}},function(e,t,i){var a=i(4);e.exports=function GetSize(e,t){if(t===void 0){t=new a}t.x=e.width;t.y=e.height;return t}},function(e,t,i){var a=i(165);e.exports=function Inflate(e,t,i){var n=e.centerX,r=e.centerY;e.setSize(e.width+2*t,e.height+2*i);return a(e,n,r)}},function(e,t,i){var a=i(11),n=i(131);e.exports=function Intersection(e,t,i){if(i===void 0){i=new a}if(n(e,t)){i.x=Math.max(e.x,t.x);i.y=Math.max(e.y,t.y);i.width=Math.min(e.right,t.right)-i.x;i.height=Math.min(e.bottom,t.bottom)-i.y}else{i.setEmpty()}return i}},function(e){e.exports=function MergePoints(e,t){for(var a=e.x,n=e.right,r=e.y,o=e.bottom,s=0;s<t.length;s++){a=Math.min(a,t[s].x);n=Math.max(n,t[s].x);r=Math.min(r,t[s].y);o=Math.max(o,t[s].y)}e.x=a;e.y=r;e.width=n-a;e.height=o-r;return e}},function(e){e.exports=function MergeRect(e,t){var i=Math.min(e.x,t.x),a=Math.max(e.right,t.right);e.x=i;e.width=a-i;var n=Math.min(e.y,t.y),r=Math.max(e.bottom,t.bottom);e.y=n;e.height=r-n;return e}},function(e){e.exports=function MergeXY(e,t,i){var a=Math.min(e.x,t),n=Math.max(e.right,t);e.x=a;e.width=n-a;var r=Math.min(e.y,i),o=Math.max(e.bottom,i);e.y=r;e.height=o-r;return e}},function(e){e.exports=function Offset(e,t,i){e.x+=t;e.y+=i;return e}},function(e){e.exports=function OffsetPoint(e,t){e.x+=t.x;e.y+=t.y;return e}},function(e){e.exports=function Overlaps(e,t){return e.x<t.right&&e.right>t.x&&e.y<t.bottom&&e.bottom>t.y}},function(e,t,i){var a=i(4),n=i(35);e.exports=function PerimeterPoint(e,t,i){if(i===void 0){i=new a}t=n(t);var r=Math.sin(t),o=Math.cos(t),s=0<o?e.width/2:e.width/-2,l=0<r?e.height/2:e.height/-2;if(Math.abs(s*r)<Math.abs(l*o)){l=s*r/o}else{s=l*o/r}i.x=s+e.centerX;i.y=l+e.centerY;return i}},function(e,t,i){var a=i(170),n=i(437),r=i(4);e.exports=function RandomOutside(e,t,i){if(i===void 0){i=new r}if(n(e,t)){switch(a(0,3)){case 0:i.x=e.x+Math.random()*(t.right-e.x);i.y=e.y+Math.random()*(t.top-e.y);break;case 1:i.x=t.x+Math.random()*(e.right-t.x);i.y=t.bottom+Math.random()*(e.bottom-t.bottom);break;case 2:i.x=e.x+Math.random()*(t.x-e.x);i.y=t.y+Math.random()*(e.bottom-t.y);break;case 3:i.x=t.right+Math.random()*(e.right-t.right);i.y=e.y+Math.random()*(t.bottom-e.y);break;}}return i}},function(e){e.exports=function SameDimensions(e,t){return e.width===t.width&&e.height===t.height}},function(e){e.exports=function Scale(e,t,i){if(i===void 0){i=t}e.width*=t;e.height*=i;return e}},function(e,t,i){var a=i(71);a.Area=i(1173);a.BuildEquilateral=i(1174);a.BuildFromPolygon=i(1175);a.BuildRight=i(1176);a.CenterOn=i(1177);a.Centroid=i(438);a.CircumCenter=i(1178);a.CircumCircle=i(1179);a.Clone=i(1180);a.Contains=i(83);a.ContainsArray=i(207);a.ContainsPoint=i(1181);a.CopyFrom=i(1182);a.Decompose=i(431);a.Equals=i(1183);a.GetPoint=i(417);a.GetPoints=i(418);a.InCenter=i(440);a.Perimeter=i(1184);a.Offset=i(439);a.Random=i(155);a.Rotate=i(1185);a.RotateAroundPoint=i(1186);a.RotateAroundXY=i(210);e.exports=a},function(e){e.exports=function Area(e){var t=e.x1,i=e.y1,a=e.x2,n=e.y2,r=e.x3,o=e.y3;return Math.abs(((r-t)*(n-i)-(a-t)*(o-i))/2)}},function(e,t,i){var a=i(71);e.exports=function BuildEquilateral(e,t,i){var n=i*(Math.sqrt(3)/2);return new a(e,t,e+i/2,t+n,e-i/2,t+n)}},function(e,t,i){var n=i(66),r=i(71);e.exports=function BuildFromPolygon(e,t,o,s,l){if(t===void 0){t=null}if(o===void 0){o=1}if(s===void 0){s=1}if(l===void 0){l=[]}for(var d=n(e,t),p,u,g,h,m,y,x,f,T,v=0;v<d.length;v+=3){p=d[v];u=d[v+1];g=d[v+2];h=e[2*p]*o;m=e[2*p+1]*s;y=e[2*u]*o;x=e[2*u+1]*s;f=e[2*g]*o;T=e[2*g+1]*s;l.push(new r(h,m,y,x,f,T))}return l}},function(e,t,i){var a=i(71);e.exports=function BuildRight(e,t,i,n){if(n===void 0){n=i}var r=t-n;return new a(e,t,e,r,e+i,t)}},function(e,t,i){var a=i(438),n=i(439);e.exports=function CenterOn(e,t,i,r){if(r===void 0){r=a}var o=r(e),s=t-o.x,l=i-o.y;return n(e,s,l)}},function(e,t,i){var n=i(3);function a(e,t,i,a){return e*a-t*i}e.exports=function CircumCenter(e,t){if(t===void 0){t=new n}var i=e.x3,r=e.y3,o=e.x1-i,s=e.y1-r,l=e.x2-i,d=e.y2-r,p=2*a(o,s,l,d),c=a(s,o*o+s*s,d,l*l+d*d),u=a(o,o*o+s*s,l,l*l+d*d);t.x=i-c/p;t.y=r+u/p;return t}},function(e,t,i){var a=i(65);e.exports=function CircumCircle(e,t){if(t===void 0){t=new a}var i=e.x1,n=e.y1,r=e.x2,o=e.y2,s=e.x3,l=e.y3,d=r-i,p=o-n,c=s-i,u=l-n,g=d*(i+r)+p*(n+o),h=c*(i+s)+u*(n+l),m=2*(d*(l-o)-p*(s-r)),y,x;if(1e-6>Math.abs(m)){var f=Math.min(i,r,s),T=Math.min(n,o,l);y=.5*(Math.max(i,r,s)-f);x=.5*(Math.max(n,o,l)-T);t.x=f+y;t.y=T+x;t.radius=Math.sqrt(y*y+x*x)}else{t.x=(u*g-p*h)/m;t.y=(d*h-c*g)/m;y=t.x-i;x=t.y-n;t.radius=Math.sqrt(y*y+x*x)}return t}},function(e,t,i){var a=i(71);e.exports=function Clone(e){return new a(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}},function(e,t,i){var a=i(83);e.exports=function ContainsPoint(e,t){return a(e,t.x,t.y)}},function(e){e.exports=function CopyFrom(e,t){return t.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}},function(e){e.exports=function Equals(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2&&e.x3===t.x3&&e.y3===t.y3}},function(e,t,i){var a=i(57);e.exports=function Perimeter(e){var t=e.getLineA(),i=e.getLineB(),n=e.getLineC();return a(t)+a(i)+a(n)}},function(e,t,i){var a=i(210),n=i(440);e.exports=function Rotate(e,t){var i=n(e);return a(e,i.x,i.y,t)}},function(e,t,i){var a=i(210);e.exports=function RotateAroundPoint(e,t,i){return a(e,t.x,t.y,i)}},function(e,t,i){var a=i(177),n=i(17),r={CreateInteractiveObject:i(441),Events:i(54),Gamepad:i(1188),InputManager:i(359),InputPlugin:i(1200),InputPluginCache:i(132),Keyboard:i(1202),Mouse:i(1219),Pointer:i(362),Touch:i(1220)};r=n(!1,r,a);e.exports=r},function(e,t,i){e.exports={Axis:i(442),Button:i(443),Events:i(211),Gamepad:i(444),GamepadPlugin:i(1195),Configs:i(1196)}},function(e){e.exports="down"},function(e){e.exports="up"},function(e){e.exports="connected"},function(e){e.exports="disconnected"},function(e){e.exports="down"},function(e){e.exports="up"},function(e,t,i){var a=i(0),n=i(9),r=i(211),o=i(444),s=i(6),l=i(132),d=i(54),p=new a({Extends:n,initialize:function(e){n.call(this);this.scene=e.scene;this.settings=this.scene.sys.settings;this.sceneInputPlugin=e;this.enabled=!0;this.target;this.gamepads=[];this.queue=[];this.onGamepadHandler;this._pad1;this._pad2;this._pad3;this._pad4;e.pluginEvents.once(d.BOOT,this.boot,this);e.pluginEvents.on(d.START,this.start,this)},boot:function boot(){var e=this.scene.sys.game,t=this.settings.input,i=e.config;this.enabled=s(t,"gamepad",i.inputGamepad)&&e.device.input.gamepads;this.target=s(t,"gamepad.target",i.inputGamepadEventTarget);this.sceneInputPlugin.pluginEvents.once(d.DESTROY,this.destroy,this)},start:function start(){if(this.enabled){this.startListeners()}this.sceneInputPlugin.pluginEvents.once(d.SHUTDOWN,this.shutdown,this)},isActive:function isActive(){return this.enabled&&this.scene.sys.isActive()},startListeners:function startListeners(){var e=this,t=this.target,i=function(t){if(t.defaultPrevented||!e.isActive()){return}e.refreshPads();e.queue.push(t)};this.onGamepadHandler=i;t.addEventListener("gamepadconnected",i,!1);t.addEventListener("gamepaddisconnected",i,!1);this.sceneInputPlugin.pluginEvents.on(d.UPDATE,this.update,this)},stopListeners:function stopListeners(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler);this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler);this.sceneInputPlugin.pluginEvents.off(d.UPDATE,this.update)},disconnectAll:function disconnectAll(){for(var e=0;e<this.gamepads.length;e++){this.gamepads.connected=!1}},refreshPads:function refreshPads(){var e=navigator.getGamepads();if(!e){this.disconnectAll()}else{for(var t=this.gamepads,a=0,n;a<e.length;a++){n=e[a];if(!n){continue}var r=n.id,s=n.index,l=t[s];if(!l){var d=new o(this,n);t[s]=d;if(!this._pad1){this._pad1=d}else if(!this._pad2){this._pad2=d}else if(!this._pad3){this._pad3=d}else if(!this._pad4){this._pad4=d}}else if(l.id!==r){l.destroy();t[s]=new o(this,n)}else{l.update(n)}}}},getAll:function getAll(){for(var e=[],t=this.gamepads,a=0;a<t.length;a++){if(t[a]){e.push(t[a])}}return e},getPad:function getPad(e){for(var t=this.gamepads,a=0;a<t.length;a++){if(t[a]&&t[a].index===e){return t[a]}}},update:function update(){if(!this.enabled){return}this.refreshPads();var e=this.queue.length;if(0===e){return}for(var t=this.queue.splice(0,e),a=0;a<e;a++){var n=t[a],o=this.getPad(n.gamepad.index);if("gamepadconnected"===n.type){this.emit(r.CONNECTED,o,n)}else if("gamepaddisconnected"===n.type){this.emit(r.DISCONNECTED,o,n)}}},shutdown:function shutdown(){this.stopListeners();this.disconnectAll();this.removeAllListeners()},destroy:function destroy(){this.shutdown();for(var e=0;e<this.gamepads.length;e++){if(this.gamepads[e]){this.gamepads[e].destroy()}}this.gamepads=[];this.scene=null;this.settings=null;this.sceneInputPlugin=null;this.target=null},total:{get:function get(){return this.gamepads.length}},pad1:{get:function get(){return this._pad1}},pad2:{get:function get(){return this._pad2}},pad3:{get:function get(){return this._pad3}},pad4:{get:function get(){return this._pad4}}});l.register("GamepadPlugin",p,"gamepad","gamepad","inputGamepad");e.exports=p},function(e,t,i){e.exports={DUALSHOCK_4:i(1197),SNES_USB:i(1198),XBOX_360:i(1199)}},function(e){e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e){e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(e){e.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(e,t,i){var a=i(65),n=i(55),r=i(0),o=i(177),s=i(441),l=i(1201),d=i(53),p=i(95),c=i(96),u=i(54),g=i(9),h=i(2),m=i(46),y=i(132),x=i(7),f=i(23),T=i(11),v=i(47),b=i(19),E=i(71),S=i(83),_=new r({Extends:g,initialize:function(e){g.call(this);this.scene=e;this.systems=e.sys;this.settings=e.sys.settings;this.manager=e.sys.game.input;this.pluginEvents=new g;this.enabled=!0;this.displayList;this.cameras;y.install(this);this.mouse=this.manager.mouse;this.topOnly=!0;this.pollRate=-1;this._pollTimer=0;var t={cancelled:!1};this._eventContainer={stopPropagation:function stopPropagation(){t.cancelled=!0}};this._eventData=t;this.dragDistanceThreshold=0;this.dragTimeThreshold=0;this._temp=[];this._tempZones=[];this._list=[];this._pendingInsertion=[];this._pendingRemoval=[];this._draggable=[];this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]};this._dragState=[];this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]};this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"];this._updatedThisFrame=!1;e.sys.events.once(b.BOOT,this.boot,this);e.sys.events.on(b.START,this.start,this)},boot:function boot(){this.cameras=this.systems.cameras;this.displayList=this.systems.displayList;this.systems.events.once(b.DESTROY,this.destroy,this);this.pluginEvents.emit(u.BOOT)},start:function start(){var e=this.systems.events;e.on(b.TRANSITION_START,this.transitionIn,this);e.on(b.TRANSITION_OUT,this.transitionOut,this);e.on(b.TRANSITION_COMPLETE,this.transitionComplete,this);e.on(b.PRE_UPDATE,this.preUpdate,this);e.once(b.SHUTDOWN,this.shutdown,this);this.manager.events.on(u.GAME_OUT,this.onGameOut,this);this.manager.events.on(u.GAME_OVER,this.onGameOver,this);this.enabled=!0;this._dragState=[0,0,0,0,0,0,0,0,0,0];this.pluginEvents.emit(u.START)},onGameOver:function onGameOver(e){if(this.isActive()){this.emit(u.GAME_OVER,e.timeStamp,e)}},onGameOut:function onGameOut(e){if(this.isActive()){this.emit(u.GAME_OUT,e.timeStamp,e)}},preUpdate:function preUpdate(){this.pluginEvents.emit(u.PRE_UPDATE);var e=this._pendingRemoval,t=this._pendingInsertion,a=e.length,n=t.length;if(0===a&&0===n){return}for(var r=this._list,o=0;o<a;o++){var s=e[o],l=r.indexOf(s);if(-1<l){r.splice(l,1);this.clear(s,!0)}}e.length=0;this._pendingRemoval.length=0;this._list=r.concat(t.splice(0))},isActive:function isActive(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function updatePoll(e,t){if(!this.isActive()){return!1}this.pluginEvents.emit(u.UPDATE,e,t);if(this._updatedThisFrame){this._updatedThisFrame=!1;return!1}var a,n=this.manager,r=n.pointers,o=n.pointersTotal;for(a=0;a<o;a++){r[a].updateMotion()}if(0===this._list.length){return!1}var s=this.pollRate;if(-1===s){return!1}else if(0<s){this._pollTimer-=t;if(0>this._pollTimer){this._pollTimer=this.pollRate}else{return!1}}var l=!1;for(a=0;a<o;a++){var d=0,p=r[a];this._tempZones=[];this._temp=this.hitTestPointer(p);this.sortGameObjects(this._temp);this.sortGameObjects(this._tempZones);if(this.topOnly){if(this._temp.length){this._temp.splice(1)}if(this._tempZones.length){this._tempZones.splice(1)}}d+=this.processOverOutEvents(p);if(2===this.getDragState(p)){this.processDragThresholdEvent(p,e)}if(0<d){l=!0}}return l},update:function update(e,t){if(!this.isActive()){return!1}for(var a=t.length,n=!1,r=0;r<a;r++){var s=0,l=t[r];this._tempZones=[];this._temp=this.hitTestPointer(l);this.sortGameObjects(this._temp);this.sortGameObjects(this._tempZones);if(this.topOnly){if(this._temp.length){this._temp.splice(1)}if(this._tempZones.length){this._tempZones.splice(1)}}switch(e){case o.MOUSE_DOWN:s+=this.processDragDownEvent(l);s+=this.processDownEvents(l);s+=this.processOverOutEvents(l);break;case o.MOUSE_UP:s+=this.processDragUpEvent(l);s+=this.processUpEvents(l);s+=this.processOverOutEvents(l);break;case o.TOUCH_START:s+=this.processDragDownEvent(l);s+=this.processDownEvents(l);s+=this.processOverEvents(l);break;case o.TOUCH_END:case o.TOUCH_CANCEL:s+=this.processDragUpEvent(l);s+=this.processUpEvents(l);s+=this.processOutEvents(l);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:s+=this.processDragMoveEvent(l);s+=this.processMoveEvents(l);s+=this.processOverOutEvents(l);break;case o.MOUSE_WHEEL:s+=this.processWheelEvent(l);break;}if(0<s){n=!0}}this._updatedThisFrame=!0;return n},clear:function clear(e,t){if(t===void 0){t=!1}var i=e.input;if(!i){return}if(!t){this.queueForRemoval(e)}i.gameObject=void 0;i.target=void 0;i.hitArea=void 0;i.hitAreaCallback=void 0;i.callbackContext=void 0;this.manager.resetCursor(i);e.input=null;var a=this._draggable.indexOf(e);if(-1<a){this._draggable.splice(a,1)}a=this._drag[0].indexOf(e);if(-1<a){this._drag[0].splice(a,1)}a=this._over[0].indexOf(e);if(-1<a){this._over[0].splice(a,1)}return e},disable:function disable(e){e.input.enabled=!1},enable:function enable(e,t,i,a){if(a===void 0){a=!1}if(e.input){e.input.enabled=!0}else{this.setHitArea(e,t,i)}if(e.input&&a&&!e.input.dropZone){e.input.dropZone=a}return this},hitTestPointer:function hitTestPointer(e){for(var t=this.cameras.getCamerasBelowPointer(e),a=0;a<t.length;a++){for(var n=t[a],r=this.manager.hitTest(e,this._list,n),o=0,s;o<r.length;o++){s=r[o];if(s.input.dropZone){this._tempZones.push(s)}}if(0<r.length){e.camera=n;return r}}e.camera=t[0];return[]},processDownEvents:function processDownEvents(e){var t=0,a=this._temp,n=this._eventData,r=this._eventContainer;n.cancelled=!1;for(var o=!1,s=0,l;s<a.length;s++){l=a[s];if(!l.input){continue}t++;l.emit(u.GAMEOBJECT_POINTER_DOWN,e,l.input.localX,l.input.localY,r);if(n.cancelled||!l.input){o=!0;break}this.emit(u.GAMEOBJECT_DOWN,e,l,r);if(n.cancelled||!l.input){o=!0;break}}if(!o&&this.manager){if(e.downElement===this.manager.game.canvas){this.emit(u.POINTER_DOWN,e,a)}else{this.emit(u.POINTER_DOWN_OUTSIDE,e)}}return t},getDragState:function getDragState(e){return this._dragState[e.id]},setDragState:function setDragState(e,t){this._dragState[e.id]=t},processDragThresholdEvent:function processDragThresholdEvent(e,t){var i=!1,a=this.dragTimeThreshold,n=this.dragDistanceThreshold;if(0<n&&d(e.x,e.y,e.downX,e.downY)>=n){i=!0}else if(0<a&&t>=e.downTime+a){i=!0}if(i){this.setDragState(e,3);return this.processDragStartList(e)}},processDragStartList:function processDragStartList(e){if(3!==this.getDragState(e)){return 0}for(var t=this._drag[e.id],a=0;a<t.length;a++){var n=t[a],r=n.input;r.dragState=2;r.dragStartX=n.x;r.dragStartY=n.y;r.dragStartXGlobal=e.x;r.dragStartYGlobal=e.y;r.dragX=r.dragStartXGlobal-r.dragStartX;r.dragY=r.dragStartYGlobal-r.dragStartY;n.emit(u.GAMEOBJECT_DRAG_START,e,r.dragX,r.dragY);this.emit(u.DRAG_START,e,n)}this.setDragState(e,4);return t.length},processDragDownEvent:function processDragDownEvent(e){var t=this._temp;if(0===this._draggable.length||0===t.length||!e.primaryDown||0!==this.getDragState(e)){return 0}this.setDragState(e,1);for(var a=[],n=0,r;n<t.length;n++){r=t[n];if(r.input.draggable&&0===r.input.dragState){a.push(r)}}if(0===a.length){this.setDragState(e,0);return 0}else if(1<a.length){this.sortGameObjects(a);if(this.topOnly){a.splice(1)}}this._drag[e.id]=a;if(0===this.dragDistanceThreshold&&0===this.dragTimeThreshold){this.setDragState(e,3);return this.processDragStartList(e)}else{this.setDragState(e,2);return 0}},processDragMoveEvent:function processDragMoveEvent(e){if(2===this.getDragState(e)){this.processDragThresholdEvent(e,this.manager.game.loop.now)}if(4!==this.getDragState(e)){return 0}for(var t=this._tempZones,a=this._drag[e.id],n=0;n<a.length;n++){var r=a[n],o=r.input,s=o.target;if(s){var l=t.indexOf(s);if(0===l){r.emit(u.GAMEOBJECT_DRAG_OVER,e,s);this.emit(u.DRAG_OVER,e,r,s)}else if(0<l){r.emit(u.GAMEOBJECT_DRAG_LEAVE,e,s);this.emit(u.DRAG_LEAVE,e,r,s);o.target=t[0];s=o.target;r.emit(u.GAMEOBJECT_DRAG_ENTER,e,s);this.emit(u.DRAG_ENTER,e,r,s)}else{r.emit(u.GAMEOBJECT_DRAG_LEAVE,e,s);this.emit(u.DRAG_LEAVE,e,r,s);if(t[0]){o.target=t[0];s=o.target;r.emit(u.GAMEOBJECT_DRAG_ENTER,e,s);this.emit(u.DRAG_ENTER,e,r,s)}else{o.target=null}}}else if(!s&&t[0]){o.target=t[0];s=o.target;r.emit(u.GAMEOBJECT_DRAG_ENTER,e,s);this.emit(u.DRAG_ENTER,e,r,s)}var d,p;if(!r.parentContainer){d=e.x-o.dragX;p=e.y-o.dragY}else{var c=e.x-o.dragStartXGlobal,g=e.y-o.dragStartYGlobal,h=r.getParentRotation(),m=c*Math.cos(h)+g*Math.sin(h),y=g*Math.cos(h)-c*Math.sin(h);m*=1/r.parentContainer.scaleX;y*=1/r.parentContainer.scaleY;d=m+o.dragStartX;p=y+o.dragStartY}r.emit(u.GAMEOBJECT_DRAG,e,d,p);this.emit(u.DRAG,e,r,d,p)}return a.length},processDragUpEvent:function processDragUpEvent(e){for(var t=this._drag[e.id],a=0;a<t.length;a++){var n=t[a],r=n.input;if(r&&2===r.dragState){r.dragState=0;r.dragX=r.localX-n.displayOriginX;r.dragY=r.localY-n.displayOriginY;var o=!1,s=r.target;if(s){n.emit(u.GAMEOBJECT_DROP,e,s);this.emit(u.DROP,e,n,s);r.target=null;o=!0}if(n.input){n.emit(u.GAMEOBJECT_DRAG_END,e,r.dragX,r.dragY,o);this.emit(u.DRAG_END,e,n,o)}}}this.setDragState(e,0);t.splice(0);return 0},processMoveEvents:function processMoveEvents(e){var t=0,a=this._temp,n=this._eventData,r=this._eventContainer;n.cancelled=!1;for(var o=!1,s=0,l;s<a.length;s++){l=a[s];if(!l.input){continue}t++;l.emit(u.GAMEOBJECT_POINTER_MOVE,e,l.input.localX,l.input.localY,r);if(n.cancelled||!l.input){o=!0;break}this.emit(u.GAMEOBJECT_MOVE,e,l,r);if(n.cancelled||!l.input){o=!0;break}if(this.topOnly){break}}if(!o){this.emit(u.POINTER_MOVE,e,a)}return t},processWheelEvent:function processWheelEvent(e){var t=0,a=this._temp,n=this._eventData,r=this._eventContainer;n.cancelled=!1;for(var o=!1,s=e.deltaX,l=e.deltaY,d=e.deltaZ,p=0,c;p<a.length;p++){c=a[p];if(!c.input){continue}t++;c.emit(u.GAMEOBJECT_POINTER_WHEEL,e,s,l,d,r);if(n.cancelled||!c.input){o=!0;break}this.emit(u.GAMEOBJECT_WHEEL,e,c,s,l,d,r);if(n.cancelled||!c.input){o=!0;break}}if(!o){this.emit(u.POINTER_WHEEL,e,a,s,l,d)}return t},processOverEvents:function processOverEvents(e){var t=this._temp,a=0,n=t.length,r=[];if(0<n){var o=this.manager,s=this._eventData,l=this._eventContainer;s.cancelled=!1;for(var d=!1,p=0,c;p<n;p++){c=t[p];if(!c.input){continue}r.push(c);o.setCursor(c.input);c.emit(u.GAMEOBJECT_POINTER_OVER,e,c.input.localX,c.input.localY,l);a++;if(s.cancelled||!c.input){d=!0;break}this.emit(u.GAMEOBJECT_OVER,e,c,l);if(s.cancelled||!c.input){d=!0;break}}if(!d){this.emit(u.POINTER_OVER,e,r)}}this._over[e.id]=r;return a},processOutEvents:function processOutEvents(e){var t=this._over[e.id],a=0,n=t.length;if(0<n){var r=this.manager,o=this._eventData,s=this._eventContainer;o.cancelled=!1;var l=!1;this.sortGameObjects(t);for(var d=0,p;d<n;d++){p=t[d];for(d=0;d<n;d++){p=t[d];if(!p.input){continue}r.resetCursor(p.input);p.emit(u.GAMEOBJECT_POINTER_OUT,e,s);a++;if(o.cancelled||!p.input){l=!0;break}this.emit(u.GAMEOBJECT_OUT,e,p,s);if(o.cancelled||!p.input){l=!0;break}}if(!l){this.emit(u.POINTER_OUT,e,t)}}this._over[e.id]=[]}return a},processOverOutEvents:function processOverOutEvents(e){var t=this._temp,a,n,r=[],o=[],s=[],l=this._over[e.id],d=this._drag[e.id],p=this.manager;for(a=0;a<l.length;a++){n=l[a];if(-1===t.indexOf(n)&&-1===d.indexOf(n)){r.push(n)}else{s.push(n)}}for(a=0;a<t.length;a++){n=t[a];if(-1===l.indexOf(n)){o.push(n)}}var c=r.length,g=0,h=this._eventData,m=this._eventContainer;h.cancelled=!1;var y=!1;if(0<c){this.sortGameObjects(r);for(a=0;a<c;a++){n=r[a];if(!n.input){continue}p.resetCursor(n.input);n.emit(u.GAMEOBJECT_POINTER_OUT,e,m);g++;if(h.cancelled||!n.input){y=!0;break}this.emit(u.GAMEOBJECT_OUT,e,n,m);if(h.cancelled||!n.input){y=!0;break}}if(!y){this.emit(u.POINTER_OUT,e,r)}}c=o.length;h.cancelled=!1;y=!1;if(0<c){this.sortGameObjects(o);for(a=0;a<c;a++){n=o[a];if(!n.input){continue}p.setCursor(n.input);n.emit(u.GAMEOBJECT_POINTER_OVER,e,n.input.localX,n.input.localY,m);g++;if(h.cancelled||!n.input){y=!0;break}this.emit(u.GAMEOBJECT_OVER,e,n,m);if(h.cancelled||!n.input){y=!0;break}}if(!y){this.emit(u.POINTER_OVER,e,o)}}l=s.concat(o);this._over[e.id]=this.sortGameObjects(l);return g},processUpEvents:function processUpEvents(e){var t=this._temp,a=this._eventData,n=this._eventContainer;a.cancelled=!1;for(var r=!1,o=0,s;o<t.length;o++){s=t[o];if(!s.input){continue}s.emit(u.GAMEOBJECT_POINTER_UP,e,s.input.localX,s.input.localY,n);if(a.cancelled||!s.input){r=!0;break}this.emit(u.GAMEOBJECT_UP,e,s,n);if(a.cancelled||!s.input){r=!0;break}}if(!r&&this.manager){if(e.upElement===this.manager.game.canvas){this.emit(u.POINTER_UP,e,t)}else{this.emit(u.POINTER_UP_OUTSIDE,e)}}return t.length},queueForInsertion:function queueForInsertion(e){if(-1===this._pendingInsertion.indexOf(e)&&-1===this._list.indexOf(e)){this._pendingInsertion.push(e)}return this},queueForRemoval:function queueForRemoval(e){this._pendingRemoval.push(e);return this},setDraggable:function setDraggable(e,t){if(t===void 0){t=!0}if(!Array.isArray(e)){e=[e]}for(var a=0,n;a<e.length;a++){n=e[a];n.input.draggable=t;var r=this._draggable.indexOf(n);if(t&&-1===r){this._draggable.push(n)}else if(!t&&-1<r){this._draggable.splice(r,1)}}return this},makePixelPerfect:function makePixelPerfect(e){if(e===void 0){e=1}var t=this.systems.textures;return l(t,e)},setHitArea:function setHitArea(e,t,a){if(t===void 0){return this.setHitAreaFromTexture(e)}if(!Array.isArray(e)){e=[e]}var n=!1,r=!1,o=!1,l=!1,d=!1,p=!0;if(x(t)){var c=t;t=h(c,"hitArea",null);a=h(c,"hitAreaCallback",null);n=h(c,"draggable",!1);r=h(c,"dropZone",!1);o=h(c,"cursor",!1);l=h(c,"useHandCursor",!1);d=h(c,"pixelPerfect",!1);var u=h(c,"alphaTolerance",1);if(d){t={};a=this.makePixelPerfect(u)}if(!t||!a){this.setHitAreaFromTexture(e);p=!1}}else if("function"==typeof t&&!a){a=t;t={}}for(var g=0,m;g<e.length;g++){m=e[g];if(d&&"Container"===m.type){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var y=!m.input?s(m,t,a):m.input;y.customHitArea=p;y.dropZone=r;y.cursor=l?"pointer":o;m.input=y;if(n){this.setDraggable(m)}this.queueForInsertion(m)}return this},setHitAreaCircle:function setHitAreaCircle(e,t,i,r,o){if(o===void 0){o=n}var s=new a(t,i,r);return this.setHitArea(e,s,o)},setHitAreaEllipse:function setHitAreaEllipse(e,t,i,a,n,r){if(r===void 0){r=c}var o=new p(t,i,a,n);return this.setHitArea(e,o,r)},setHitAreaFromTexture:function setHitAreaFromTexture(e,t){if(t===void 0){t=v}if(!Array.isArray(e)){e=[e]}for(var a=0;a<e.length;a++){var n=e[a],r=n.frame,o=0,l=0;if(n.width){o=n.width;l=n.height}else if(r){o=r.realWidth;l=r.realHeight}if("Container"===n.type&&(0===o||0===l)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}if(0!==o&&0!==l){n.input=s(n,new T(0,0,o,l),t);this.queueForInsertion(n)}}return this},setHitAreaRectangle:function setHitAreaRectangle(e,t,i,a,n,r){if(r===void 0){r=v}var o=new T(t,i,a,n);return this.setHitArea(e,o,r)},setHitAreaTriangle:function setHitAreaTriangle(e,t,i,a,n,r,o,s){if(s===void 0){s=S}var l=new E(t,i,a,n,r,o);return this.setHitArea(e,l,s)},enableDebug:function enableDebug(e,t){if(t===void 0){t=65280}var i=e.input;if(!i||!i.hitArea){return this}var a=i.hitArea,n=a.type,r=i.hitAreaDebug,o=this.systems.add,s=this.systems.updateList;if(r){s.remove(r);r.destroy();r=null}var l=0,d=0;switch(n){case m.CIRCLE:r=o.arc(0,0,a.radius);l=a.x-a.radius;d=a.y-a.radius;break;case m.ELLIPSE:r=o.ellipse(0,0,a.width,a.height);l=a.x-a.width/2;d=a.y-a.height/2;break;case m.LINE:r=o.line(0,0,a.x1,a.y1,a.x2,a.y2);break;case m.POLYGON:r=o.polygon(0,0,a.points);break;case m.RECTANGLE:r=o.rectangle(0,0,a.width,a.height);l=a.x;d=a.y;break;case m.TRIANGLE:r=o.triangle(0,0,a.x1,a.y1,a.x2,a.y2,a.x3,a.y3);break;}if(r){r.isFilled=!1;r.preUpdate=function(){r.setStrokeStyle(1/e.scale,t);r.setDisplayOrigin(e.displayOriginX,e.displayOriginY);r.setRotation(e.rotation);r.setScale(e.scaleX,e.scaleY);r.setPosition(e.x+l,e.y+d);r.setScrollFactor(e.scrollFactorX,e.scrollFactorY)};s.add(r);i.hitAreaDebug=r}return this},removeDebug:function removeDebug(e){var t=e.input;if(t&&t.hitAreaDebug){var i=t.hitAreaDebug;this.systems.updateList.remove(i);i.destroy();t.hitAreaDebug=null}return this},setPollAlways:function setPollAlways(){return this.setPollRate(0)},setPollOnMove:function setPollOnMove(){return this.setPollRate(-1)},setPollRate:function setPollRate(e){this.pollRate=e;this._pollTimer=0;return this},setGlobalTopOnly:function setGlobalTopOnly(e){this.manager.globalTopOnly=e;return this},setTopOnly:function setTopOnly(e){this.topOnly=e;return this},sortGameObjects:function sortGameObjects(e){if(2>e.length){return e}this.scene.sys.depthSort();return e.sort(this.sortHandlerGO.bind(this))},sortHandlerGO:function sortHandlerGO(e,t){if(!e.parentContainer&&!t.parentContainer){return this.displayList.getIndex(t)-this.displayList.getIndex(e)}else if(e.parentContainer===t.parentContainer){return t.parentContainer.getIndex(t)-e.parentContainer.getIndex(e)}else if(e.parentContainer===t){return-1}else if(t.parentContainer===e){return 1}else{for(var a=e.getIndexList(),n=t.getIndexList(),r=Math.min(a.length,n.length),o=0;o<r;o++){var s=a[o],l=n[o];if(s===l){continue}else{return l-s}}}return 0},stopPropagation:function stopPropagation(){this.manager._tempSkip=!0;return this},addPointer:function addPointer(e){return this.manager.addPointer(e)},setDefaultCursor:function setDefaultCursor(e){this.manager.setDefaultCursor(e);return this},transitionIn:function transitionIn(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function transitionComplete(){if(!this.settings.transitionAllowInput){this.enabled=!0}},transitionOut:function transitionOut(){this.enabled=this.settings.transitionAllowInput},shutdown:function shutdown(){this.pluginEvents.emit(u.SHUTDOWN);this._temp.length=0;this._list.length=0;this._draggable.length=0;this._pendingRemoval.length=0;this._pendingInsertion.length=0;this._dragState.length=0;for(var e=0;10>e;e++){this._drag[e]=[];this._over[e]=[]}this.removeAllListeners();var t=this.systems.events;t.off(b.TRANSITION_START,this.transitionIn,this);t.off(b.TRANSITION_OUT,this.transitionOut,this);t.off(b.TRANSITION_COMPLETE,this.transitionComplete,this);t.off(b.PRE_UPDATE,this.preUpdate,this);this.manager.events.off(u.GAME_OUT,this.onGameOut,this);this.manager.events.off(u.GAME_OVER,this.onGameOver,this);t.off(b.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown();this.pluginEvents.emit(u.DESTROY);this.pluginEvents.removeAllListeners();this.scene.sys.events.off(b.START,this.start,this);this.scene=null;this.cameras=null;this.manager=null;this.events=null;this.mouse=null},x:{get:function get(){return this.manager.activePointer.x}},y:{get:function get(){return this.manager.activePointer.y}},isOver:{get:function get(){return this.manager.isOver}},mousePointer:{get:function get(){return this.manager.mousePointer}},activePointer:{get:function get(){return this.manager.activePointer}},pointer1:{get:function get(){return this.manager.pointers[1]}},pointer2:{get:function get(){return this.manager.pointers[2]}},pointer3:{get:function get(){return this.manager.pointers[3]}},pointer4:{get:function get(){return this.manager.pointers[4]}},pointer5:{get:function get(){return this.manager.pointers[5]}},pointer6:{get:function get(){return this.manager.pointers[6]}},pointer7:{get:function get(){return this.manager.pointers[7]}},pointer8:{get:function get(){return this.manager.pointers[8]}},pointer9:{get:function get(){return this.manager.pointers[9]}},pointer10:{get:function get(){return this.manager.pointers[10]}}});f.register("InputPlugin",_,"input");e.exports=_},function(e){e.exports=function CreatePixelPerfectHandler(e,t){return function(i,a,n,r){var o=e.getPixelAlpha(a,n,r.texture.key,r.frame.name);return o&&o>=t}}},function(e,t,i){e.exports={Events:i(133),KeyboardManager:i(360),KeyboardPlugin:i(1210),Key:i(445),KeyCodes:i(122),KeyCombo:i(446),JustDown:i(1215),JustUp:i(1216),DownDuration:i(1217),UpDuration:i(1218)}},function(e){e.exports="keydown"},function(e){e.exports="keyup"},function(e){e.exports="keycombomatch"},function(e){e.exports="down"},function(e){e.exports="keydown-"},function(e){e.exports="keyup-"},function(e){e.exports="up"},function(e,t,i){var a=i(0),n=i(9),r=i(133),o=i(18),s=i(6),l=i(54),d=i(132),p=i(445),c=i(122),u=i(446),g=i(1214),h=i(93),m=new a({Extends:n,initialize:function(e){n.call(this);this.game=e.systems.game;this.scene=e.scene;this.settings=this.scene.sys.settings;this.sceneInputPlugin=e;this.manager=e.manager.keyboard;this.enabled=!0;this.keys=[];this.combos=[];e.pluginEvents.once(l.BOOT,this.boot,this);e.pluginEvents.on(l.START,this.start,this)},boot:function boot(){var e=this.settings.input;this.enabled=s(e,"keyboard",!0);var t=s(e,"keyboard.capture",null);if(t){this.addCaptures(t)}this.sceneInputPlugin.pluginEvents.once(l.DESTROY,this.destroy,this)},start:function start(){if(this.sceneInputPlugin.manager.useQueue){this.sceneInputPlugin.pluginEvents.on(l.UPDATE,this.update,this)}else{this.sceneInputPlugin.manager.events.on(l.MANAGER_PROCESS,this.update,this)}this.sceneInputPlugin.pluginEvents.once(l.SHUTDOWN,this.shutdown,this);this.game.events.on(o.BLUR,this.resetKeys,this)},isActive:function isActive(){return this.enabled&&this.scene.sys.isActive()},addCapture:function addCapture(e){this.manager.addCapture(e);return this},removeCapture:function removeCapture(e){this.manager.removeCapture(e);return this},getCaptures:function getCaptures(){return this.manager.captures},enableGlobalCapture:function enableGlobalCapture(){this.manager.preventDefault=!0;return this},disableGlobalCapture:function disableGlobalCapture(){this.manager.preventDefault=!1;return this},clearCaptures:function clearCaptures(){this.manager.clearCaptures();return this},createCursorKeys:function createCursorKeys(){return this.addKeys({up:c.UP,down:c.DOWN,left:c.LEFT,right:c.RIGHT,space:c.SPACE,shift:c.SHIFT})},addKeys:function addKeys(e,t,a){if(t===void 0){t=!0}if(a===void 0){a=!1}var n={};if("string"==typeof e){e=e.split(",");for(var r=0,o;r<e.length;r++){o=e[r].trim();if(o){n[o]=this.addKey(o,t,a)}}}else{for(var s in e){n[s]=this.addKey(e[s],t,a)}}return n},addKey:function addKey(e,t,i){if(t===void 0){t=!0}if(i===void 0){i=!1}var a=this.keys;if(e instanceof p){var n=a.indexOf(e);if(-1<n){a[n]=e}else{a[e.keyCode]=e}if(t){this.addCapture(e.keyCode)}e.setEmitOnRepeat(i);return e}if("string"==typeof e){e=c[e.toUpperCase()]}if(!a[e]){a[e]=new p(this,e);if(t){this.addCapture(e)}a[e].setEmitOnRepeat(i)}return a[e]},removeKey:function removeKey(e,t){if(t===void 0){t=!1}var i=this.keys,a;if(e instanceof p){var n=i.indexOf(e);if(-1<n){a=this.keys[n];this.keys[n]=void 0}}else if("string"==typeof e){e=c[e.toUpperCase()]}if(i[e]){a=i[e];i[e]=void 0}if(a){a.plugin=null;if(t){a.destroy()}}return this},createCombo:function createCombo(e,t){return new u(this,e,t)},checkDown:function checkDown(e,i){if(this.enabled&&e.isDown){var a=h(this.time-e.timeDown,i);if(a>e._tick){e._tick=a;return!0}}return!1},update:function update(){var e=this.manager.queue,t=e.length;if(!this.isActive()||0===t){return}for(var a=this.keys,n=0;n<t;n++){var o=e[n],s=o.keyCode,l=a[s],d=!1;if(o.cancelled===void 0){o.cancelled=0;o.stopImmediatePropagation=function(){o.cancelled=1};o.stopPropagation=function(){o.cancelled=-1}}if(-1===o.cancelled){continue}if("keydown"===o.type){if(l){d=l.isDown;l.onDown(o)}if(!o.cancelled&&(!l||!d)){if(g[s]){this.emit(r.KEY_DOWN+g[s],o);this.emit("keydown_"+g[s],o)}if(!o.cancelled){this.emit(r.ANY_KEY_DOWN,o)}}}else{if(l){l.onUp(o)}if(!o.cancelled){if(g[s]){this.emit(r.KEY_UP+g[s],o);this.emit("keyup_"+g[s],o)}if(!o.cancelled){this.emit(r.ANY_KEY_UP,o)}}}if(1===o.cancelled){o.cancelled=0}}},resetKeys:function resetKeys(){for(var e=this.keys,t=0;t<e.length;t++){if(e[t]){e[t].reset()}}return this},shutdown:function shutdown(){this.resetKeys();if(this.sceneInputPlugin.manager.useQueue){this.sceneInputPlugin.pluginEvents.off(l.UPDATE,this.update,this)}else{this.sceneInputPlugin.manager.events.off(l.MANAGER_PROCESS,this.update,this)}this.game.events.off(o.BLUR,this.resetKeys);this.removeAllListeners();this.queue=[]},destroy:function destroy(){this.shutdown();for(var e=this.keys,t=0;t<e.length;t++){if(e[t]){e[t].destroy()}}this.keys=[];this.combos=[];this.queue=[];this.scene=null;this.settings=null;this.sceneInputPlugin=null;this.manager=null},time:{get:function get(){return this.sceneInputPlugin.manager.time}}});d.register("KeyboardPlugin",m,"keyboard","keyboard","inputKeyboard");e.exports=m},function(e,t,i){var a=i(1212);e.exports=function ProcessKeyCombo(e,t){if(t.matched){return!0}var i=!1,n=!1;if(e.keyCode===t.current){if(0<t.index&&0<t.maxKeyDelay){var r=t.timeLastMatched+t.maxKeyDelay;if(e.timeStamp<=r){n=!0;i=a(e,t)}}else{n=!0;i=a(e,t)}}if(!n&&t.resetOnWrongKey){t.index=0;t.current=t.keyCodes[0]}if(i){t.timeLastMatched=e.timeStamp;t.matched=!0;t.timeMatched=e.timeStamp}return i}},function(e){e.exports=function AdvanceKeyCombo(e,t){t.timeLastMatched=e.timeStamp;t.index++;if(t.index===t.size){return!0}else{t.current=t.keyCodes[t.index];return!1}}},function(e){e.exports=function ResetKeyCombo(e){e.current=e.keyCodes[0];e.index=0;e.timeLastMatched=0;e.matched=!1;e.timeMatched=0;return e}},function(e,t,i){var a=i(122),n={};for(var r in a){n[a[r]]=r}e.exports=n},function(e){e.exports=function JustDown(e){if(e._justDown){e._justDown=!1;return!0}else{return!1}}},function(e){e.exports=function JustUp(e){if(e._justUp){e._justUp=!1;return!0}else{return!1}}},function(e){e.exports=function DownDuration(e,t){if(t===void 0){t=50}var i=e.plugin.game.loop.time-e.timeDown;return e.isDown&&i<t}},function(e){e.exports=function UpDuration(e,t){if(t===void 0){t=50}var i=e.plugin.game.loop.time-e.timeUp;return e.isUp&&i<t}},function(e,t,i){e.exports={MouseManager:i(361)}},function(e,t,i){e.exports={TouchManager:i(363)}},function(e,t,i){var a=i(20),n=i(17),r={Events:i(81),FileTypes:i(1222),File:i(21),FileTypesManager:i(8),GetURL:i(134),LoaderPlugin:i(1246),MergeXHRSettings:i(212),MultiFile:i(61),XHRLoader:i(447),XHRSettings:i(135)};r=n(!1,r,a);e.exports=r},function(e,t,i){e.exports={AnimationJSONFile:i(1223),AtlasJSONFile:i(1224),AtlasXMLFile:i(1225),AudioFile:i(448),AudioSpriteFile:i(1226),BinaryFile:i(1227),BitmapFontFile:i(1228),CSSFile:i(1229),GLSLFile:i(1230),HTML5AudioFile:i(449),HTMLFile:i(1231),HTMLTextureFile:i(1232),ImageFile:i(72),JSONFile:i(60),MultiAtlasFile:i(1233),MultiScriptFile:i(1234),PackFile:i(1235),PluginFile:i(1236),SceneFile:i(1237),ScenePluginFile:i(1238),ScriptFile:i(450),SpriteSheetFile:i(1239),SVGFile:i(1240),TextFile:i(451),TilemapCSVFile:i(1241),TilemapImpactFile:i(1242),TilemapJSONFile:i(1243),UnityAtlasFile:i(1244),VideoFile:i(1245),XMLFile:i(213)}},function(e,t,i){var a=i(0),n=i(8),r=i(60),o=i(81),s=new a({Extends:r,initialize:function(e,t,i,a,n){r.call(this,e,t,i,a,n);this.type="animationJSON"},onProcess:function onProcess(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this);r.prototype.onProcess.call(this)},onLoadComplete:function onLoadComplete(){this.loader.systems.anims.fromJSON(this.data);this.pendingDestroy()}});n.register("animation",function(e,t,a,n){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new s(this,e[r]))}}else{this.addFile(new s(this,e,t,n,a))}return this});e.exports=s},function(e,t,i){var a=i(0),n=i(8),r=i(2),o=i(72),s=i(7),l=i(60),d=i(61),p=new a({Extends:d,initialize:function(e,t,i,a,n,p){var c,u;if(s(t)){var g=t;t=r(g,"key");c=new o(e,{key:t,url:r(g,"textureURL"),extension:r(g,"textureExtension","png"),normalMap:r(g,"normalMap"),xhrSettings:r(g,"textureXhrSettings")});u=new l(e,{key:t,url:r(g,"atlasURL"),extension:r(g,"atlasExtension","json"),xhrSettings:r(g,"atlasXhrSettings")})}else{c=new o(e,t,i,n);u=new l(e,t,a,p)}if(c.linkFile){d.call(this,e,"atlasjson",t,[c,u,c.linkFile])}else{d.call(this,e,"atlasjson",t,[c,u])}},addToCache:function addToCache(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(e.key,e.data,t.data,i);t.addToCache();this.complete=!0}}});n.register("atlas",function(e,t,a,n,r){var o;if(Array.isArray(e)){for(var s=0;s<e.length;s++){o=new p(this,e[s]);this.addFile(o.files)}}else{o=new p(this,e,t,a,n,r);this.addFile(o.files)}return this});e.exports=p},function(e,t,i){var a=i(0),n=i(8),r=i(2),o=i(72),s=i(7),l=i(61),d=i(213),p=new a({Extends:l,initialize:function(e,t,i,a,n,p){var c,u;if(s(t)){var g=t;t=r(g,"key");c=new o(e,{key:t,url:r(g,"textureURL"),extension:r(g,"textureExtension","png"),normalMap:r(g,"normalMap"),xhrSettings:r(g,"textureXhrSettings")});u=new d(e,{key:t,url:r(g,"atlasURL"),extension:r(g,"atlasExtension","xml"),xhrSettings:r(g,"atlasXhrSettings")})}else{c=new o(e,t,i,n);u=new d(e,t,a,p)}if(c.linkFile){l.call(this,e,"atlasxml",t,[c,u,c.linkFile])}else{l.call(this,e,"atlasxml",t,[c,u])}},addToCache:function addToCache(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(e.key,e.data,t.data,i);t.addToCache();this.complete=!0}}});n.register("atlasXML",function(e,t,a,n,r){var o;if(Array.isArray(e)){for(var s=0;s<e.length;s++){o=new p(this,e[s]);this.addFile(o.files)}}else{o=new p(this,e,t,a,n,r);this.addFile(o.files)}return this});e.exports=p},function(e,t,i){var a=i(448),n=i(0),r=i(8),o=i(2),s=i(7),l=i(60),d=i(61),p=new n({Extends:d,initialize:function(e,t,i,n,r,p,c){if(s(t)){var u=t;t=o(u,"key");i=o(u,"jsonURL");n=o(u,"audioURL");r=o(u,"audioConfig");p=o(u,"audioXhrSettings");c=o(u,"jsonXhrSettings")}var g;if(!n){g=new l(e,t,i,c);d.call(this,e,"audiosprite",t,[g]);this.config.resourceLoad=!0;this.config.audioConfig=r;this.config.audioXhrSettings=p}else{var h=a.create(e,t,n,r,p);if(h){g=new l(e,t,i,c);d.call(this,e,"audiosprite",t,[h,g]);this.config.resourceLoad=!1}}},onFileComplete:function onFileComplete(e){var t=this.files.indexOf(e);if(-1!==t){this.pending--;if(this.config.resourceLoad&&"json"===e.type&&e.data.hasOwnProperty("resources")){var i=e.data.resources,n=o(this.config,"audioConfig"),r=o(this.config,"audioXhrSettings"),s=a.create(this.loader,e.key,i,n,r);if(s){this.addToMultiFile(s);this.loader.addFile(s)}}}},addToCache:function addToCache(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache();t.addToCache();this.complete=!0}}});r.register("audioSprite",function(e,t,a,n,r,o){var s=this.systems.game,l=s.config.audio,d=s.device.audio;if(l&&l.noAudio||!d.webAudio&&!d.audioData){return this}var c;if(Array.isArray(e)){for(var u=0;u<e.length;u++){c=new p(this,e[u]);if(c.files){this.addFile(c.files)}}}else{c=new p(this,e,t,a,n,r,o);if(c.files){this.addFile(c.files)}}return this})},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=new a({Extends:r,initialize:function(e,t,i,a,n){var o="bin";if(l(t)){var d=t;t=s(d,"key");i=s(d,"url");a=s(d,"xhrSettings");o=s(d,"extension",o);n=s(d,"dataType",n)}var p={type:"binary",cache:e.cacheManager.binary,extension:o,responseType:"arraybuffer",key:t,url:i,xhrSettings:a,config:{dataType:n}};r.call(this,e,p)},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;var e=this.config.dataType;this.data=e?new e(this.xhrLoader.response):this.xhrLoader.response;this.onProcessComplete()}});o.register("binary",function(e,t,a,n){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new d(this,e[r]))}}else{this.addFile(new d(this,e,t,n,a))}return this});e.exports=d},function(e,t,i){var a=i(0),n=i(8),r=i(2),o=i(72),s=i(7),l=i(61),d=i(185),p=i(213),c=new a({Extends:l,initialize:function(e,t,i,a,n,d){var c,u;if(s(t)){var g=t;t=r(g,"key");c=new o(e,{key:t,url:r(g,"textureURL"),extension:r(g,"textureExtension","png"),normalMap:r(g,"normalMap"),xhrSettings:r(g,"textureXhrSettings")});u=new p(e,{key:t,url:r(g,"fontDataURL"),extension:r(g,"fontDataExtension","xml"),xhrSettings:r(g,"fontDataXhrSettings")})}else{c=new o(e,t,i,n);u=new p(e,t,a,d)}if(c.linkFile){l.call(this,e,"bitmapfont",t,[c,u,c.linkFile])}else{l.call(this,e,"bitmapfont",t,[c,u])}},addToCache:function addToCache(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1];e.addToCache();t.addToCache();this.loader.cacheManager.bitmapFont.add(e.key,{data:d(t.data),texture:e.key,frame:null});this.complete=!0}}});n.register("bitmapFont",function(e,t,a,n,r){var o;if(Array.isArray(e)){for(var s=0;s<e.length;s++){o=new c(this,e[s]);this.addFile(o.files)}}else{o=new c(this,e,t,a,n,r);this.addFile(o.files)}return this});e.exports=c},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=new a({Extends:r,initialize:function(e,t,i,a){var n="css";if(l(t)){var o=t;t=s(o,"key");i=s(o,"url");a=s(o,"xhrSettings");n=s(o,"extension",n)}var d={type:"script",cache:!1,extension:n,responseType:"text",key:t,url:i,xhrSettings:a};r.call(this,e,d)},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;this.data=document.createElement("style");this.data.defer=!1;this.data.innerHTML=this.xhrLoader.responseText;document.head.appendChild(this.data);this.onProcessComplete()}});o.register("css",function(e,t,a){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new d(this,e[n]))}}else{this.addFile(new d(this,e,t,a))}return this});e.exports=d},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=i(347),p=new a({Extends:r,initialize:function(e,t,i,a,n){var o="glsl";if(l(t)){var d=t;t=s(d,"key");i=s(d,"url");a=s(d,"shaderType","fragment");n=s(d,"xhrSettings");o=s(d,"extension",o)}else if(a===void 0){a="fragment"}var p={type:"glsl",cache:e.cacheManager.shader,extension:o,responseType:"text",key:t,url:i,config:{shaderType:a},xhrSettings:n};r.call(this,e,p)},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()},addToCache:function addToCache(){var e=this.data.split("\n"),t=this.extractBlock(e,0);if(t){while(t){var i=this.getShaderName(t.header),a=this.getShaderType(t.header),n=this.getShaderUniforms(t.header),r=t.shader;if(this.cache.has(i)){var o=this.cache.get(i);if("fragment"===a){o.fragmentSrc=r}else{o.vertexSrc=r}if(!o.uniforms){o.uniforms=n}}else if("fragment"===a){this.cache.add(i,new d(i,r,"",n))}else{this.cache.add(i,new d(i,"",r,n))}t=this.extractBlock(e,t.offset)}}else if("fragment"===this.config.shaderType){this.cache.add(this.key,new d(this.key,this.data))}else{this.cache.add(this.key,new d(this.key,"",this.data))}this.pendingDestroy()},getShaderName:function getShaderName(e){for(var t=0,a;t<e.length;t++){a=e[t].trim();if("name:"===a.substring(0,5)){return a.substring(5).trim()}}return this.key},getShaderType:function getShaderType(e){for(var t=0,a;t<e.length;t++){a=e[t].trim();if("type:"===a.substring(0,5)){return a.substring(5).trim()}}return this.config.shaderType},getShaderUniforms:function getShaderUniforms(e){for(var t={},a=0,n;a<e.length;a++){n=e[a].trim();if("uniform."===n.substring(0,8)){var r=n.indexOf(":");if(r){var o=n.substring(8,r);try{t[o]=JSON.parse(n.substring(r+1))}catch(t){console.warn("Invalid uniform JSON: "+o)}}}}return t},extractBlock:function extractBlock(e,t){for(var a=-1,n=-1,r=-1,o=!1,s=!1,l=[],d=[],p=t,c;p<e.length;p++){c=e[p].trim();if("---"===c){if(-1===a){a=p;o=!0}else if(o){n=p;o=!1;s=!0}else{s=!1;break}}else if(o){l.push(c)}else if(s){d.push(c);r=p}}if(!o&&-1!==n){return{header:l,shader:d.join("\n"),offset:r}}else{return null}}});o.register("glsl",function(e,t,a,n){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new p(this,e[r]))}}else{this.addFile(new p(this,e,t,a,n))}return this});e.exports=p},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=new a({Extends:r,initialize:function(e,t,i,a){var n="html";if(l(t)){var o=t;t=s(o,"key");i=s(o,"url");a=s(o,"xhrSettings");n=s(o,"extension",n)}var d={type:"text",cache:e.cacheManager.html,extension:n,responseType:"text",key:t,url:i,xhrSettings:a};r.call(this,e,d)},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()}});o.register("html",function(e,t,a){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new d(this,e[n]))}}else{this.addFile(new d(this,e,t,a))}return this});e.exports=d},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=new a({Extends:r,initialize:function(e,t,i,a,n,o){if(a===void 0){a=512}if(n===void 0){n=512}var d="html";if(l(t)){var p=t;t=s(p,"key");i=s(p,"url");o=s(p,"xhrSettings");d=s(p,"extension",d);a=s(p,"width",a);n=s(p,"height",n)}var c={type:"html",cache:e.textureManager,extension:d,responseType:"text",key:t,url:i,xhrSettings:o,config:{width:a,height:n}};r.call(this,e,c)},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;var e=this.config.width,t=this.config.height,i=[];i.push("<svg width=\""+e+"px\" height=\""+t+"px\" viewBox=\"0 0 "+e+" "+t+"\" xmlns=\"http://www.w3.org/2000/svg\">");i.push("<foreignObject width=\"100%\" height=\"100%\">");i.push("<body xmlns=\"http://www.w3.org/1999/xhtml\">");i.push(this.xhrLoader.responseText);i.push("</body>");i.push("</foreignObject>");i.push("</svg>");var a=[i.join("\n")],o=this;try{var s=new window.Blob(a,{type:"image/svg+xml;charset=utf-8"})}catch(t){o.state=n.FILE_ERRORED;o.onProcessComplete();return}this.data=new Image;this.data.crossOrigin=this.crossOrigin;this.data.onload=function(){r.revokeObjectURL(o.data);o.onProcessComplete()};this.data.onerror=function(){r.revokeObjectURL(o.data);o.onProcessError()};r.createObjectURL(this.data,s,"image/svg+xml")},addToCache:function addToCache(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});o.register("htmlTexture",function(e,t,a,n,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++){this.addFile(new d(this,e[o]))}}else{this.addFile(new d(this,e,t,a,n,r))}return this});e.exports=d},function(e,t,i){var a=i(0),n=i(8),r=i(2),o=i(72),s=i(7),l=i(60),d=i(61),p=new a({Extends:d,initialize:function(e,t,i,a,n,o,p){if(s(t)){var c=t;t=r(c,"key");if(r(c,"url",!1)){i=r(c,"url")}else{i=r(c,"atlasURL")}o=r(c,"xhrSettings");a=r(c,"path");n=r(c,"baseURL");p=r(c,"textureXhrSettings")}var u=new l(e,t,i,o);d.call(this,e,"multiatlas",t,[u]);this.config.path=a;this.config.baseURL=n;this.config.textureXhrSettings=p},onFileComplete:function onFileComplete(e){var t=this.files.indexOf(e);if(-1!==t){this.pending--;if("json"===e.type&&e.data.hasOwnProperty("textures")){var a=e.data.textures,n=this.config,s=this.loader,l=s.baseURL,d=s.path,p=s.prefix,c=r(n,"baseURL",this.baseURL),u=r(n,"path",this.path),g=r(n,"prefix",this.prefix),h=r(n,"textureXhrSettings");s.setBaseURL(c);s.setPath(u);s.setPrefix(g);for(var m=0;m<a.length;m++){var y=a[m].image,x="MA"+this.multiKeyIndex+"_"+y,f=new o(s,x,y,h);this.addToMultiFile(f);s.addFile(f);if(a[m].normalMap){var T=new o(s,x,a[m].normalMap,h);T.type="normalMap";f.setLink(T);this.addToMultiFile(T);s.addFile(T)}}s.setBaseURL(l);s.setPath(d);s.setPrefix(p)}}},addToCache:function addToCache(){if(this.isReadyToProcess()){for(var e=this.files[0],a=[],n=[],r=[],o=1,s;o<this.files.length;o++){s=this.files[o];if("normalMap"===s.type){continue}for(var l=s.key.indexOf("_"),d=s.key.substr(l+1),p=s.data,c=0,u;c<e.data.textures.length;c++){u=e.data.textures[c];if(u.image===d){n.push(p);a.push(u);if(s.linkFile){r.push(s.linkFile.data)}break}}}if(0===r.length){r=void 0}this.loader.textureManager.addAtlasJSONArray(this.key,n,a,r);this.complete=!0;for(o=0;o<this.files.length;o++){this.files[o].pendingDestroy()}}}});n.register("multiatlas",function(e,t,a,n,r){var o;if(Array.isArray(e)){for(var s=0;s<e.length;s++){o=new p(this,e[s]);this.addFile(o.files)}}else{o=new p(this,e,t,a,n,r);this.addFile(o.files)}return this});e.exports=p},function(e,t,i){var a=i(0),n=i(8),r=i(2),o=i(7),s=i(61),l=i(450),d=new a({Extends:s,initialize:function(e,t,a,n){var d="js",p=[];if(o(t)){var c=t;t=r(c,"key");a=r(c,"url");n=r(c,"xhrSettings");d=r(c,"extension",d)}if(!Array.isArray(a)){a=[a]}for(var u=0,g;u<a.length;u++){g=new l(e,{key:t+"_"+u.toString(),url:a[u],extension:d,xhrSettings:n});g.onProcess=function(){this.onProcessComplete()};p.push(g)}s.call(this,e,"scripts",t,p)},addToCache:function addToCache(){if(this.isReadyToProcess()){for(var e=0,t;e<this.files.length;e++){t=this.files[e];t.data=document.createElement("script");t.data.language="javascript";t.data.type="text/javascript";t.data.defer=!1;t.data.text=t.xhrLoader.responseText;document.head.appendChild(t.data)}this.complete=!0}}});n.register("scripts",function(e,t,a){var n;if(Array.isArray(e)){for(var r=0;r<e.length;r++){n=new d(this,e[r]);this.addFile(n.files)}}else{n=new d(this,e,t,a);this.addFile(n.files)}return this});e.exports=d},function(e,t,i){var a=i(0),n=i(20),r=i(8),o=i(60),s=new a({Extends:o,initialize:function(e,t,i,a,n){o.call(this,e,t,i,a,n);this.type="packfile"},onProcess:function onProcess(){if(this.state!==n.FILE_POPULATED){this.state=n.FILE_PROCESSING;this.data=JSON.parse(this.xhrLoader.responseText)}this.loader.addPack(this.data,this.config);this.onProcessComplete()}});r.register("pack",function(e,t,a,n){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new s(this,e[r]))}}else{this.addFile(new s(this,e,t,n,a))}return this});e.exports=s},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=new a({Extends:r,initialize:function(e,t,i,a,o,d){var p="js";if(l(t)){var c=t;t=s(c,"key");i=s(c,"url");d=s(c,"xhrSettings");p=s(c,"extension",p);a=s(c,"start");o=s(c,"mapping")}var u={type:"plugin",cache:!1,extension:p,responseType:"text",key:t,url:i,xhrSettings:d,config:{start:a,mapping:o}};r.call(this,e,u);if("function"==typeof i){this.data=i;this.state=n.FILE_POPULATED}},onProcess:function onProcess(){var e=this.loader.systems.plugins,t=this.config,i=s(t,"start",!1),a=s(t,"mapping",null);if(this.state===n.FILE_POPULATED){e.install(this.key,this.data,i,a)}else{this.state=n.FILE_PROCESSING;this.data=document.createElement("script");this.data.language="javascript";this.data.type="text/javascript";this.data.defer=!1;this.data.text=this.xhrLoader.responseText;document.head.appendChild(this.data);var r=e.install(this.key,window[this.key],i,a);if(i||a){this.loader.systems[a]=r;this.loader.scene[a]=r}}this.onProcessComplete()}});o.register("plugin",function(e,t,a,n,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++){this.addFile(new d(this,e[o]))}}else{this.addFile(new d(this,e,t,a,n,r))}return this});e.exports=d},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=new a({Extends:r,initialize:function(e,t,i,a){var n="js";if(l(t)){var o=t;t=s(o,"key");i=s(o,"url");a=s(o,"xhrSettings");n=s(o,"extension",n)}var d={type:"text",cache:e.cacheManager.text,extension:n,responseType:"text",key:t,url:i,xhrSettings:a};r.call(this,e,d)},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()},addToCache:function addToCache(){var e=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),t=eval;this.loader.sceneManager.add(this.key,t(e));this.complete=!0}});o.register("sceneFile",function(e,t,a){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new d(this,e[n]))}}else{this.addFile(new d(this,e,t,a))}return this});e.exports=d},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=new a({Extends:r,initialize:function(e,t,i,a,o,d){var p="js";if(l(t)){var c=t;t=s(c,"key");i=s(c,"url");d=s(c,"xhrSettings");p=s(c,"extension",p);a=s(c,"systemKey");o=s(c,"sceneKey")}var u={type:"scenePlugin",cache:!1,extension:p,responseType:"text",key:t,url:i,xhrSettings:d,config:{systemKey:a,sceneKey:o}};r.call(this,e,u);if("function"==typeof i){this.data=i;this.state=n.FILE_POPULATED}},onProcess:function onProcess(){var e=this.loader.systems.plugins,t=this.config,i=this.key,a=s(t,"systemKey",i),r=s(t,"sceneKey",i);if(this.state===n.FILE_POPULATED){e.installScenePlugin(a,this.data,r,this.loader.scene,!0)}else{this.state=n.FILE_PROCESSING;this.data=document.createElement("script");this.data.language="javascript";this.data.type="text/javascript";this.data.defer=!1;this.data.text=this.xhrLoader.responseText;document.head.appendChild(this.data);e.installScenePlugin(a,window[this.key],r,this.loader.scene,!0)}this.onProcessComplete()}});o.register("scenePlugin",function(e,t,a,n,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++){this.addFile(new d(this,e[o]))}}else{this.addFile(new d(this,e,t,a,n,r))}return this});e.exports=d},function(e,t,i){var a=i(0),n=i(8),r=i(72),o=new a({Extends:r,initialize:function(e,t,i,a,n){r.call(this,e,t,i,n,a);this.type="spritesheet"},addToCache:function addToCache(){var e=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(e)}});n.register("spritesheet",function(e,t,a,n){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new o(this,e[r]))}}else{this.addFile(new o(this,e,t,a,n))}return this});e.exports=o},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=new a({Extends:r,initialize:function(e,t,i,a,n){var o="svg";if(l(t)){var d=t;t=s(d,"key");i=s(d,"url");a=s(d,"svgConfig",{});n=s(d,"xhrSettings");o=s(d,"extension",o)}var p={type:"svg",cache:e.textureManager,extension:o,responseType:"text",key:t,url:i,xhrSettings:n,config:{width:s(a,"width"),height:s(a,"height"),scale:s(a,"scale")}};r.call(this,e,p)},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;var e=this.xhrLoader.responseText,t=[e],i=this.config.width,a=this.config.height,o=this.config.scale;resize:if(i&&a||o){var s=null,l=new DOMParser;s=l.parseFromString(e,"text/xml");var d=s.getElementsByTagName("svg")[0],p=d.hasAttribute("viewBox"),c=parseFloat(d.getAttribute("width")),u=parseFloat(d.getAttribute("height"));if(!p&&c&&u){d.setAttribute("viewBox","0  0 "+c+" "+u)}else if(p&&!c&&!u){var g=d.getAttribute("viewBox").split(/\s+|,/);c=g[2];u=g[3]}if(o){if(c&&u){i=c*o;a=u*o}else{break resize}}d.setAttribute("width",i.toString()+"px");d.setAttribute("height",a.toString()+"px");t=[new XMLSerializer().serializeToString(d)]}try{var h=new window.Blob(t,{type:"image/svg+xml;charset=utf-8"})}catch(t){this.onProcessError();return}this.data=new Image;this.data.crossOrigin=this.crossOrigin;var m=this,y=!1;this.data.onload=function(){if(!y){r.revokeObjectURL(m.data)}m.onProcessComplete()};this.data.onerror=function(){if(!y){y=!0;r.revokeObjectURL(m.data);m.data.src="data:image/svg+xml,"+encodeURIComponent(t.join(""))}else{m.onProcessError()}};r.createObjectURL(this.data,h,"image/svg+xml")},addToCache:function addToCache(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});o.register("svg",function(e,t,a,n){if(Array.isArray(e)){for(var r=0;r<e.length;r++){this.addFile(new d(this,e[r]))}}else{this.addFile(new d(this,e,t,a,n))}return this});e.exports=d},function(e,t,i){var a=i(0),n=i(20),r=i(21),o=i(8),s=i(2),l=i(7),d=i(31),p=new a({Extends:r,initialize:function(e,t,i,a){var n="csv";if(l(t)){var o=t;t=s(o,"key");i=s(o,"url");a=s(o,"xhrSettings");n=s(o,"extension",n)}var p={type:"tilemapCSV",cache:e.cacheManager.tilemap,extension:n,responseType:"text",key:t,url:i,xhrSettings:a};r.call(this,e,p);this.tilemapFormat=d.CSV},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()},addToCache:function addToCache(){var e={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,e);this.pendingDestroy(e)}});o.register("tilemapCSV",function(e,t,a){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new p(this,e[n]))}}else{this.addFile(new p(this,e,t,a))}return this});e.exports=p},function(e,t,i){var a=i(0),n=i(8),r=i(60),o=i(31),s=new a({Extends:r,initialize:function(e,t,i,a){r.call(this,e,t,i,a);this.type="tilemapJSON";this.cache=e.cacheManager.tilemap},addToCache:function addToCache(){var e={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,e);this.pendingDestroy(e)}});n.register("tilemapImpact",function(e,t,a){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new s(this,e[n]))}}else{this.addFile(new s(this,e,t,a))}return this});e.exports=s},function(e,t,i){var a=i(0),n=i(8),r=i(60),o=i(31),s=new a({Extends:r,initialize:function(e,t,i,a){r.call(this,e,t,i,a);this.type="tilemapJSON";this.cache=e.cacheManager.tilemap},addToCache:function addToCache(){var e={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,e);this.pendingDestroy(e)}});n.register("tilemapTiledJSON",function(e,t,a){if(Array.isArray(e)){for(var n=0;n<e.length;n++){this.addFile(new s(this,e[n]))}}else{this.addFile(new s(this,e,t,a))}return this});e.exports=s},function(e,t,i){var a=i(0),n=i(8),r=i(2),o=i(72),s=i(7),l=i(61),d=i(451),p=new a({Extends:l,initialize:function(e,t,i,a,n,p){var c,u;if(s(t)){var g=t;t=r(g,"key");c=new o(e,{key:t,url:r(g,"textureURL"),extension:r(g,"textureExtension","png"),normalMap:r(g,"normalMap"),xhrSettings:r(g,"textureXhrSettings")});u=new d(e,{key:t,url:r(g,"atlasURL"),extension:r(g,"atlasExtension","txt"),xhrSettings:r(g,"atlasXhrSettings")})}else{c=new o(e,t,i,n);u=new d(e,t,a,p)}if(c.linkFile){l.call(this,e,"unityatlas",t,[c,u,c.linkFile])}else{l.call(this,e,"unityatlas",t,[c,u])}},addToCache:function addToCache(){if(this.isReadyToProcess()){var e=this.files[0],t=this.files[1],i=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(e.key,e.data,t.data,i);t.addToCache();this.complete=!0}}});n.register("unityAtlas",function(e,t,a,n,r){var o;if(Array.isArray(e)){for(var s=0;s<e.length;s++){o=new p(this,e[s]);this.addFile(o.files)}}else{o=new p(this,e,t,a,n,r);this.addFile(o.files)}return this});e.exports=p},function(e,t,i){var a=i(0),n=i(29),r=i(21),o=i(8),s=i(134),l=i(2),d=i(7),p=new a({Extends:r,initialize:function(e,t,i,a,n,o,s){if(a===void 0){a="loadeddata"}if(n===void 0){n=!1}if(o===void 0){o=!1}if("loadeddata"!==a&&"canplay"!==a&&"canplaythrough"!==a){a="loadeddata"}var l={type:"video",cache:e.cacheManager.video,extension:i.type,responseType:"blob",key:t,url:i.url,xhrSettings:s,config:{loadEvent:a,asBlob:n,noAudio:o}};this.onLoadCallback=this.onVideoLoadHandler.bind(this);this.onErrorCallback=this.onVideoErrorHandler.bind(this);r.call(this,e,l)},onProcess:function onProcess(){this.state=n.FILE_PROCESSING;if(!this.config.asBlob){this.onProcessComplete();return}var e=this.createVideoElement();this.data=e;var t=this;this.data.onloadeddata=function(){t.onProcessComplete()};this.data.onerror=function(){r.revokeObjectURL(t.data);t.onProcessError()};r.createObjectURL(e,this.xhrLoader.response,"");e.load()},createVideoElement:function createVideoElement(){var e=document.createElement("video");e.controls=!1;e.crossOrigin=this.loader.crossOrigin;if(this.config.noAudio){e.muted=!0;e.defaultMuted=!0;e.setAttribute("autoplay","autoplay")}e.setAttribute("playsinline","playsinline");e.setAttribute("preload","auto");return e},onVideoLoadHandler:function onVideoLoadHandler(e){var t=e.target;t.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0);t.removeEventListener("error",this.onErrorCallback,!0);this.data=t;this.resetXHR();this.loader.nextFile(this,!0)},onVideoErrorHandler:function onVideoErrorHandler(e){var t=e.target;if(t){t.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0);t.removeEventListener("error",this.onErrorCallback,!0)}this.resetXHR();this.loader.nextFile(this,!1)},load:function load(){var e=this.config.loadEvent;if(this.config.asBlob){r.prototype.load.call(this)}else{this.percentComplete=0;var t=this.createVideoElement();t.addEventListener(e,this.onLoadCallback,!0);t.addEventListener("error",this.onErrorCallback,!0);t.src=s(this,this.loader.baseURL);t.load()}}});p.create=function(e,t,i,a,n,r,o){var s=e.systems.game;if(d(t)){i=l(t,"url",[]);a=l(t,"loadEvent","loadeddata");n=l(t,"asBlob",!1);r=l(t,"noAudio",!1);o=l(t,"xhrSettings")}var c=p.getVideoURL(s,i);if(c){return new p(e,t,c,a,n,r,o)}};p.getVideoURL=function(e,t){if(!Array.isArray(t)){t=[t]}for(var a=0,n;a<t.length;a++){n=l(t[a],"url",t[a]);if(0===n.indexOf("blob:")){return n}var r;if(0===n.indexOf("data:")){r=n.split(",")[0].match(/\/(.*?);/)}else{r=n.match(/\.([a-zA-Z0-9]+)($|\?)/)}r=l(t[a],"type",r?r[1]:"").toLowerCase();if(e.device.video[r]){return{url:n,type:r}}}return null};o.register("video",function(e,t,a,n,r,o){var s;if(Array.isArray(e)){for(var l=0;l<e.length;l++){s=p.create(this,e[l]);if(s){this.addFile(s)}}}else{s=p.create(this,e,t,a,n,r,o);if(s){this.addFile(s)}}return this});e.exports=p},function(e,t,i){var a=i(0),n=i(20),r=i(108),o=i(9),s=i(81),l=i(8),d=i(2),p=i(23),c=i(19),u=i(135),g=new a({Extends:o,initialize:function(e){o.call(this);var t=e.sys.game.config,i=e.sys.settings.loader;this.scene=e;this.systems=e.sys;this.cacheManager=e.sys.cache;this.textureManager=e.sys.textures;this.sceneManager=e.sys.game.scene;l.install(this);this.prefix="";this.path="";this.baseURL="";this.setBaseURL(d(i,"baseURL",t.loaderBaseURL));this.setPath(d(i,"path",t.loaderPath));this.setPrefix(d(i,"prefix",t.loaderPrefix));this.maxParallelDownloads=d(i,"maxParallelDownloads",t.loaderMaxParallelDownloads);this.xhr=u(d(i,"responseType",t.loaderResponseType),d(i,"async",t.loaderAsync),d(i,"user",t.loaderUser),d(i,"password",t.loaderPassword),d(i,"timeout",t.loaderTimeout));this.crossOrigin=d(i,"crossOrigin",t.loaderCrossOrigin);this.totalToLoad=0;this.progress=0;this.list=new r;this.inflight=new r;this.queue=new r;this._deleteQueue=new r;this.totalFailed=0;this.totalComplete=0;this.state=n.LOADER_IDLE;this.multiKeyIndex=0;e.sys.events.once(c.BOOT,this.boot,this);e.sys.events.on(c.START,this.pluginStart,this)},boot:function boot(){this.systems.events.once(c.DESTROY,this.destroy,this)},pluginStart:function pluginStart(){this.systems.events.once(c.SHUTDOWN,this.shutdown,this)},setBaseURL:function setBaseURL(e){if(e===void 0){e=""}if(""!==e&&"/"!==e.substr(-1)){e=e.concat("/")}this.baseURL=e;return this},setPath:function setPath(e){if(e===void 0){e=""}if(""!==e&&"/"!==e.substr(-1)){e=e.concat("/")}this.path=e;return this},setPrefix:function setPrefix(e){if(e===void 0){e=""}this.prefix=e;return this},setCORS:function setCORS(e){this.crossOrigin=e;return this},addFile:function addFile(e){if(!Array.isArray(e)){e=[e]}for(var t=0,a;t<e.length;t++){a=e[t];if(!this.keyExists(a)){this.list.set(a);this.emit(s.ADD,a.key,a.type,this,a);if(this.isLoading()){this.totalToLoad++;this.updateProgress()}}}},keyExists:function keyExists(e){var t=e.hasCacheConflict();if(!t){this.list.iterate(function(i){if(i.type===e.type&&i.key===e.key){t=!0;return!1}})}if(!t&&this.isLoading()){this.inflight.iterate(function(i){if(i.type===e.type&&i.key===e.key){t=!0;return!1}});this.queue.iterate(function(i){if(i.type===e.type&&i.key===e.key){t=!0;return!1}})}return t},addPack:function addPack(e,t){if(t&&e.hasOwnProperty(t)){e={packKey:e[t]}}var a=0,n=this.baseURL,r=this.path,o=this.prefix;for(var s in e){var l=e[s],p=d(l,"baseURL",n),c=d(l,"path",r),u=d(l,"prefix",o),g=d(l,"files",null),h=d(l,"defaultType","void");if(Array.isArray(g)){this.setBaseURL(p);this.setPath(c);this.setPrefix(u);for(var m=0;m<g.length;m++){var y=g[m],x=y.hasOwnProperty("type")?y.type:h;if(this[x]){this[x](y);a++}}}}this.setBaseURL(n);this.setPath(r);this.setPrefix(o);return 0<a},isLoading:function isLoading(){return this.state===n.LOADER_LOADING||this.state===n.LOADER_PROCESSING},isReady:function isReady(){return this.state===n.LOADER_IDLE||this.state===n.LOADER_COMPLETE},start:function start(){if(!this.isReady()){return}this.progress=0;this.totalFailed=0;this.totalComplete=0;this.totalToLoad=this.list.size;this.emit(s.START,this);if(0===this.list.size){this.loadComplete()}else{this.state=n.LOADER_LOADING;this.inflight.clear();this.queue.clear();this.updateProgress();this.checkLoadQueue();this.systems.events.on(c.UPDATE,this.update,this)}},updateProgress:function updateProgress(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad;this.emit(s.PROGRESS,this.progress)},update:function update(){if(this.state===n.LOADER_LOADING&&0<this.list.size&&this.inflight.size<this.maxParallelDownloads){this.checkLoadQueue()}},checkLoadQueue:function checkLoadQueue(){this.list.each(function(e){if(e.state===n.FILE_POPULATED||e.state===n.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads){this.inflight.set(e);this.list.delete(e);if(!e.crossOrigin){e.crossOrigin=this.crossOrigin}e.load()}if(this.inflight.size===this.maxParallelDownloads){return!1}},this)},nextFile:function nextFile(e,t){if(!this.inflight){return}this.inflight.delete(e);this.updateProgress();if(t){this.totalComplete++;this.queue.set(e);this.emit(s.FILE_LOAD,e);e.onProcess()}else{this.totalFailed++;this._deleteQueue.set(e);this.emit(s.FILE_LOAD_ERROR,e);this.fileProcessComplete(e)}},fileProcessComplete:function fileProcessComplete(e){if(!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy){return}if(e.state===n.FILE_ERRORED){if(e.multiFile){e.multiFile.onFileFailed(e)}}else if(e.state===n.FILE_COMPLETE){if(e.multiFile){if(e.multiFile.isReadyToProcess()){e.multiFile.addToCache()}}else{e.addToCache()}}this.queue.delete(e);if(0===this.list.size&&0===this.inflight.size&&0===this.queue.size){this.loadComplete()}},loadComplete:function loadComplete(){this.emit(s.POST_PROCESS,this);this.list.clear();this.inflight.clear();this.queue.clear();this.progress=1;this.state=n.LOADER_COMPLETE;this.systems.events.off(c.UPDATE,this.update,this);this._deleteQueue.iterateLocal("destroy");this._deleteQueue.clear();this.emit(s.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function flagForRemoval(e){this._deleteQueue.set(e)},saveJSON:function saveJSON(e,t){return this.save(JSON.stringify(e),t)},save:function save(e,t,i){if(t===void 0){t="file.json"}if(i===void 0){i="application/json"}var n=new Blob([e],{type:i}),r=URL.createObjectURL(n),o=document.createElement("a");o.download=t;o.textContent="Download "+t;o.href=r;o.click();return this},reset:function reset(){this.list.clear();this.inflight.clear();this.queue.clear();var e=this.systems.game.config,t=this.systems.settings.loader;this.setBaseURL(d(t,"baseURL",e.loaderBaseURL));this.setPath(d(t,"path",e.loaderPath));this.setPrefix(d(t,"prefix",e.loaderPrefix));this.state=n.LOADER_IDLE},shutdown:function shutdown(){this.reset();this.state=n.LOADER_SHUTDOWN;this.systems.events.off(c.UPDATE,this.update,this);this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown();this.state=n.LOADER_DESTROYED;this.systems.events.off(c.UPDATE,this.update,this);this.systems.events.off(c.START,this.pluginStart,this);this.list=null;this.inflight=null;this.queue=null;this.scene=null;this.systems=null;this.textureManager=null;this.cacheManager=null;this.sceneManager=null}});p.register("Loader",g,"load");e.exports=g},function(e,t,i){var a=i(50),n=i(17),r={ArcadePhysics:i(1248),Body:i(458),Collider:i(459),Components:i(214),Events:i(215),Factory:i(452),Group:i(454),Image:i(453),Sprite:i(136),StaticBody:i(464),StaticGroup:i(455),World:i(457)};r=n(!1,r,a);e.exports=r},function(e,t,i){var a=i(0),n=i(35),r=i(53),o=i(316),s=i(452),l=i(2),d=i(107),p=i(1261),c=i(456),u=i(23),g=i(19),h=i(3),m=i(457),y=new a({initialize:function(e){this.scene=e;this.systems=e.sys;this.config=this.getConfig();this.world;this.add;e.sys.events.once(g.BOOT,this.boot,this);e.sys.events.on(g.START,this.start,this)},boot:function boot(){this.world=new m(this.scene,this.config);this.add=new s(this.world);this.systems.events.once(g.DESTROY,this.destroy,this)},start:function start(){if(!this.world){this.world=new m(this.scene,this.config);this.add=new s(this.world)}var e=this.systems.events;e.on(g.UPDATE,this.world.update,this.world);e.on(g.POST_UPDATE,this.world.postUpdate,this.world);e.once(g.SHUTDOWN,this.shutdown,this)},getConfig:function getConfig(){var e=this.systems.game.config.physics,t=this.systems.settings.physics,i=d(l(t,"arcade",{}),l(e,"arcade",{}));return i},overlap:function overlap(e,t,i,a,n){if(i===void 0){i=null}if(a===void 0){a=null}if(n===void 0){n=i}return this.world.collideObjects(e,t,i,a,n,!0)},collide:function collide(e,t,i,a,n){if(i===void 0){i=null}if(a===void 0){a=null}if(n===void 0){n=i}return this.world.collideObjects(e,t,i,a,n,!1)},collideTiles:function collideTiles(e,t,i,a,n){return this.world.collideTiles(e,t,i,a,n)},overlapTiles:function overlapTiles(e,t,i,a,n){return this.world.overlapTiles(e,t,i,a,n)},pause:function pause(){return this.world.pause()},resume:function resume(){return this.world.resume()},accelerateTo:function accelerateTo(e,t,i,a,n,r){if(a===void 0){a=60}var o=Math.atan2(i-e.y,t-e.x);e.body.acceleration.setToPolar(o,a);if(n!==void 0&&r!==void 0){e.body.maxVelocity.set(n,r)}return o},accelerateToObject:function accelerateToObject(e,t,i,a,n){return this.accelerateTo(e,t.x,t.y,i,a,n)},closest:function(e,t){if(!t){t=this.world.bodies.entries}for(var a=Number.MAX_VALUE,n=null,r=e.x,s=e.y,l=t.length,d=0;d<l;d++){var p=t[d],c=p.body||p;if(e===p||e===c||e===c.gameObject||e===c.center){continue}var u=o(r,s,c.center.x,c.center.y);if(u<a){n=p;a=u}}return n},furthest:function furthest(e,t){if(!t){t=this.world.bodies.entries}for(var a=-1,n=null,r=e.x,s=e.y,l=t.length,d=0;d<l;d++){var p=t[d],c=p.body||p;if(e===p||e===c||e===c.gameObject||e===c.center){continue}var u=o(r,s,c.center.x,c.center.y);if(u>a){n=p;a=u}}return n},moveTo:function moveTo(e,t,i,a,n){if(a===void 0){a=60}if(n===void 0){n=0}var o=Math.atan2(i-e.y,t-e.x);if(0<n){a=r(e.x,e.y,t,i)/(n/1e3)}e.body.velocity.setToPolar(o,a);return o},moveToObject:function moveToObject(e,t,i,a){return this.moveTo(e,t.x,t.y,i,a)},velocityFromAngle:function velocityFromAngle(e,t,i){if(t===void 0){t=60}if(i===void 0){i=new h}return i.setToPolar(n(e),t)},velocityFromRotation:function velocityFromRotation(e,t,i){if(t===void 0){t=60}if(i===void 0){i=new h}return i.setToPolar(e,t)},overlapRect:function overlapRect(e,t,i,a,n,r){return c(this.world,e,t,i,a,n,r)},overlapCirc:function overlapCirc(e,t,i,a,n){return p(this.world,e,t,i,a,n)},shutdown:function shutdown(){if(!this.world){return}var e=this.systems.events;e.off(g.UPDATE,this.world.update,this.world);e.off(g.POST_UPDATE,this.world.postUpdate,this.world);e.off(g.SHUTDOWN,this.shutdown,this);this.add.destroy();this.world.destroy();this.add=null;this.world=null},destroy:function destroy(){this.shutdown();this.scene.sys.events.off(g.START,this.start,this);this.scene=null;this.systems=null}});u.register("ArcadePhysics",y,"arcadePhysics");e.exports=y},function(e){e.exports={setAcceleration:function setAcceleration(e,t){this.body.acceleration.set(e,t);return this},setAccelerationX:function setAccelerationX(e){this.body.acceleration.x=e;return this},setAccelerationY:function setAccelerationY(e){this.body.acceleration.y=e;return this}}},function(e){e.exports={setAngularVelocity:function setAngularVelocity(e){this.body.angularVelocity=e;return this},setAngularAcceleration:function setAngularAcceleration(e){this.body.angularAcceleration=e;return this},setAngularDrag:function setAngularDrag(e){this.body.angularDrag=e;return this}}},function(e){e.exports={setBounce:function setBounce(e,t){this.body.bounce.set(e,t);return this},setBounceX:function setBounceX(e){this.body.bounce.x=e;return this},setBounceY:function setBounceY(e){this.body.bounce.y=e;return this},setCollideWorldBounds:function setCollideWorldBounds(e,t,i){this.body.setCollideWorldBounds(e,t,i);return this}}},function(e){e.exports={setDebug:function setDebug(e,t,i){this.debugShowBody=e;this.debugShowVelocity=t;this.debugBodyColor=i;return this},setDebugBodyColor:function setDebugBodyColor(e){this.body.debugBodyColor=e;return this},debugShowBody:{get:function get(){return this.body.debugShowBody},set:function set(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function get(){return this.body.debugShowVelocity},set:function set(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function get(){return this.body.debugBodyColor},set:function set(e){this.body.debugBodyColor=e}}}},function(e){e.exports={setDrag:function setDrag(e,t){this.body.drag.set(e,t);return this},setDragX:function setDragX(e){this.body.drag.x=e;return this},setDragY:function setDragY(e){this.body.drag.y=e;return this},setDamping:function setDamping(e){this.body.useDamping=e;return this}}},function(e){e.exports={enableBody:function enableBody(e,t,i,a,n){if(e){this.body.reset(t,i)}if(a){this.body.gameObject.active=!0}if(n){this.body.gameObject.visible=!0}this.body.enable=!0;return this},disableBody:function disableBody(e,t){if(e===void 0){e=!1}if(t===void 0){t=!1}this.body.stop();this.body.enable=!1;if(e){this.body.gameObject.active=!1}if(t){this.body.gameObject.visible=!1}return this},refreshBody:function refreshBody(){this.body.updateFromGameObject();return this}}},function(e){e.exports={setFriction:function setFriction(e,t){this.body.friction.set(e,t);return this},setFrictionX:function setFrictionX(e){this.body.friction.x=e;return this},setFrictionY:function setFrictionY(e){this.body.friction.y=e;return this}}},function(e){e.exports={setGravity:function setGravity(e,t){this.body.gravity.set(e,t);return this},setGravityX:function setGravityX(e){this.body.gravity.x=e;return this},setGravityY:function setGravityY(e){this.body.gravity.y=e;return this}}},function(e){e.exports={setImmovable:function setImmovable(e){if(e===void 0){e=!0}this.body.immovable=e;return this}}},function(e){e.exports={setMass:function setMass(e){this.body.mass=e;return this}}},function(e){e.exports={setOffset:function setOffset(e,t){this.body.setOffset(e,t);return this},setSize:function setSize(e,t,i){this.body.setSize(e,t,i);return this},setCircle:function setCircle(e,t,i){this.body.setCircle(e,t,i);return this}}},function(e){e.exports={setVelocity:function setVelocity(e,t){this.body.setVelocity(e,t);return this},setVelocityX:function setVelocityX(e){this.body.setVelocityX(e);return this},setVelocityY:function setVelocityY(e){this.body.setVelocityY(e);return this},setMaxVelocity:function setMaxVelocity(e,t){this.body.maxVelocity.set(e,t);return this}}},function(e,t,i){var a=i(456),n=i(65),r=i(202),o=i(203);e.exports=function OverlapCirc(e,t,s,l,d,p){var c=a(e,t-l,s-l,2*l,2*l,d,p);if(0===c.length){return c}for(var u=new n(t,s,l),g=new n,h=[],m=0,y;m<c.length;m++){y=c[m];if(y.isCircle){g.setTo(y.center.x,y.center.y,y.halfWidth);if(r(u,g)){h.push(y)}}else if(o(u,y)){h.push(y)}}return h}},function(e){e.exports="collide"},function(e){e.exports="overlap"},function(e){e.exports="pause"},function(e){e.exports="resume"},function(e){e.exports="tilecollide"},function(e){e.exports="tileoverlap"},function(e){e.exports="worldbounds"},function(e){e.exports="worldstep"},function(e){e.exports=function ProcessTileCallbacks(e,t){if(e.collisionCallback){return!e.collisionCallback.call(e.collisionCallbackContext,t,e)}else if(e.layer.callbacks[e.index]){return!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,t,e)}return!0}},function(e,t,i){var a=i(1272),n=i(1274),r=i(463);e.exports=function SeparateTile(e,t,i,o,s,l,d){var p=o.left,c=o.top,u=o.right,g=o.bottom,h=i.faceLeft||i.faceRight,m=i.faceTop||i.faceBottom;if(!d){h=!0;m=!0}if(!h&&!m){return!1}var y=0,x=0,f=0,T=1;if(t.deltaAbsX()>t.deltaAbsY()){f=-1}else if(t.deltaAbsX()<t.deltaAbsY()){T=-1}if(0!==t.deltaX()&&0!==t.deltaY()&&h&&m){f=Math.min(Math.abs(t.position.x-u),Math.abs(t.right-p));T=Math.min(Math.abs(t.position.y-g),Math.abs(t.bottom-c))}if(f<T){if(h){y=a(t,i,p,u,l,d);if(0!==y&&!r(o,t)){return!0}}if(m){x=n(t,i,c,g,l,d)}}else{if(m){x=n(t,i,c,g,l,d);if(0!==x&&!r(o,t)){return!0}}if(h){y=a(t,i,p,u,l,d)}}return 0!==y||0!==x}},function(e,t,i){var a=i(1273);e.exports=function TileCheckX(e,t,i,n,r,o){var s=0,l=t.faceLeft,d=t.faceRight,p=t.collideLeft,c=t.collideRight;if(!o){l=!0;d=!0;p=!0;c=!0}if(0>e.deltaX()&&c&&e.checkCollision.left){if(d&&e.x<n){s=e.x-n;if(s<-r){s=0}}}else if(0<e.deltaX()&&p&&e.checkCollision.right){if(l&&e.right>i){s=e.right-i;if(s>r){s=0}}}if(0!=s){if(e.customSeparateX){e.overlapX=s}else{a(e,s)}}return s}},function(e){e.exports=function ProcessTileSeparationX(e,t){if(0>t){e.blocked.none=!1;e.blocked.left=!0}else if(0<t){e.blocked.none=!1;e.blocked.right=!0}e.position.x-=t;if(0===e.bounce.x){e.velocity.x=0}else{e.velocity.x=-e.velocity.x*e.bounce.x}}},function(e,t,i){var a=i(1275);e.exports=function TileCheckY(e,t,i,n,r,o){var s=0,l=t.faceTop,d=t.faceBottom,p=t.collideUp,c=t.collideDown;if(!o){l=!0;d=!0;p=!0;c=!0}if(0>e.deltaY()&&c&&e.checkCollision.up){if(d&&e.y<n){s=e.y-n;if(s<-r){s=0}}}else if(0<e.deltaY()&&p&&e.checkCollision.down){if(l&&e.bottom>i){s=e.bottom-i;if(s>r){s=0}}}if(0!=s){if(e.customSeparateY){e.overlapY=s}else{a(e,s)}}return s}},function(e){e.exports=function ProcessTileSeparationY(e,t){if(0>t){e.blocked.none=!1;e.blocked.up=!0}else if(0<t){e.blocked.none=!1;e.blocked.down=!0}e.position.y-=t;if(0===e.bounce.y){e.velocity.y=0}else{e.velocity.y=-e.velocity.y*e.bounce.y}}},function(e,t,i){var a=i(460);e.exports=function SeparateX(e,t,i,n){var r=a(e,t,i,n);if(i||0===r||e.immovable&&t.immovable||e.customSeparateX||t.customSeparateX){return 0!==r||e.embedded&&t.embedded}var o=e.velocity.x,s=t.velocity.x;if(!e.immovable&&!t.immovable){r*=.5;e.x-=r;t.x+=r;var l=Math.sqrt(s*s*t.mass/e.mass)*(0<s?1:-1),d=Math.sqrt(o*o*e.mass/t.mass)*(0<o?1:-1),p=.5*(l+d);l-=p;d-=p;e.velocity.x=p+l*e.bounce.x;t.velocity.x=p+d*t.bounce.x}else if(!e.immovable){e.x-=r;e.velocity.x=s-o*e.bounce.x;if(t.moves){e.y+=(t.y-t.prev.y)*t.friction.y}}else{t.x+=r;t.velocity.x=o-s*t.bounce.x;if(e.moves){t.y+=(e.y-e.prev.y)*e.friction.y}}return!0}},function(e,t,i){var a=i(461);e.exports=function SeparateY(e,t,i,n){var r=a(e,t,i,n);if(i||0===r||e.immovable&&t.immovable||e.customSeparateY||t.customSeparateY){return 0!==r||e.embedded&&t.embedded}var o=e.velocity.y,s=t.velocity.y;if(!e.immovable&&!t.immovable){r*=.5;e.y-=r;t.y+=r;var l=Math.sqrt(s*s*t.mass/e.mass)*(0<s?1:-1),d=Math.sqrt(o*o*e.mass/t.mass)*(0<o?1:-1),p=.5*(l+d);l-=p;d-=p;e.velocity.y=p+l*e.bounce.y;t.velocity.y=p+d*t.bounce.y}else if(!e.immovable){e.y-=r;e.velocity.y=s-o*e.bounce.y;if(t.moves){e.x+=(t.x-t.prev.x)*t.friction.x}}else{t.y+=r;t.velocity.y=o-s*t.bounce.y;if(e.moves){t.x+=(e.x-e.prev.x)*e.friction.x}}return!0}},function(e,t,i){e.exports={COLLIDE:i(1392),PAUSE:i(1393),RESUME:i(1394)}},function(e,t,i){e.exports={Acceleration:i(1396),BodyScale:i(1397),BodyType:i(1398),Bounce:i(1399),CheckAgainst:i(1400),Collides:i(1401),Debug:i(1402),Friction:i(1403),Gravity:i(1404),Offset:i(1405),SetGameObject:i(1406),Velocity:i(1407)}},function(e,t,i){var a={};e.exports=a;var n=i(145),r=i(216),o=i(37),s=i(62),l=i(109);(function(){a.stack=function(e,t,a,r,o,l,d){for(var p=n.create({label:"Stack"}),c=e,u=t,g,h=0,m=0,f;m<r;m++){f=0;for(var T=0,v;T<a;T++){v=d(c,u,T,m,g,h);if(v){var b=v.bounds.max.y-v.bounds.min.y,E=v.bounds.max.x-v.bounds.min.x;if(b>f)f=b;s.translate(v,{x:.5*E,y:.5*b});c=v.bounds.max.x+o;n.addBody(p,v);g=v;h+=1}else{c+=o}}u+=f+l;c=e}return p};a.chain=function(e,t,a,s,l,d){for(var p=e.bodies,c=1;c<p.length;c++){var u=p[c-1],g=p[c],h=u.bounds.max.y-u.bounds.min.y,m=u.bounds.max.x-u.bounds.min.x,y=g.bounds.max.y-g.bounds.min.y,x=g.bounds.max.x-g.bounds.min.x,f=o.extend({bodyA:u,pointA:{x:m*t,y:h*a},bodyB:g,pointB:{x:x*s,y:y*l}},d);n.addConstraint(e,r.create(f))}e.label+=" Chain";return e};a.mesh=function(e,t,i,a,s){var l=e.bodies,d,p,c,u,g;for(d=0;d<i;d++){for(p=1;p<t;p++){c=l[p-1+d*t];u=l[p+d*t];n.addConstraint(e,r.create(o.extend({bodyA:c,bodyB:u},s)))}if(0<d){for(p=0;p<t;p++){c=l[p+(d-1)*t];u=l[p+d*t];n.addConstraint(e,r.create(o.extend({bodyA:c,bodyB:u},s)));if(a&&0<p){g=l[p-1+(d-1)*t];n.addConstraint(e,r.create(o.extend({bodyA:g,bodyB:u},s)))}if(a&&p<t-1){g=l[p+1+(d-1)*t];n.addConstraint(e,r.create(o.extend({bodyA:g,bodyB:u},s)))}}}}e.label+=" Mesh";return e};a.pyramid=function(e,t,n,r,o,l,d){return a.stack(e,t,n,r,o,l,function(t,a,l,p,c,u){var i=Math.min(r,Math.ceil(n/2)),g=c?c.bounds.max.x-c.bounds.min.x:0;if(p>i)return;p=i-p;var h=p,m=n-1-p;if(l<h||l>m)return;if(1===u){s.translate(c,{x:(l+(1==n%2?1:-1))*g,y:0})}var y=c?l*g:0;return d(e+y+l*o,a,l,p,c,u)})};a.newtonsCradle=function(e,t,a,o,s){for(var d=n.create({label:"Newtons Cradle"}),p=0;p<a;p++){var c=1.9,u=l.circle(e+p*(o*c),t+s,o,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),g=r.create({pointA:{x:e+p*(o*c),y:t},bodyB:u});n.addBody(d,u);n.addConstraint(d,g)}return d};a.car=function(e,t,i,a,o){var d=s.nextGroup(!0),p=.5*-i+20,c=.5*i-20,u=n.create({label:"Car"}),g=l.rectangle(e,t,i,a,{collisionFilter:{group:d},chamfer:{radius:.5*a},density:2e-4}),h=l.circle(e+p,t+0,o,{collisionFilter:{group:d},friction:.8}),m=l.circle(e+c,t+0,o,{collisionFilter:{group:d},friction:.8}),y=r.create({bodyB:g,pointB:{x:p,y:0},bodyA:h,stiffness:1,length:0}),x=r.create({bodyB:g,pointB:{x:c,y:0},bodyA:m,stiffness:1,length:0});n.addBody(u,g);n.addBody(u,h);n.addBody(u,m);n.addConstraint(u,y);n.addConstraint(u,x);return u};a.softBody=function(e,t,i,n,r,s,d,p,c,u){c=o.extend({inertia:1/0},c);u=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},u);var g=a.stack(e,t,i,n,r,s,function(e,t){return l.circle(e,t,p,c)});a.mesh(g,i,n,d,u);g.label="Soft Body";return g}})()},function(e,t,i){var a={};e.exports=a;var n=i(102),r=i(37);(function(){a.pathToVertices=function(e,t){if("undefined"!=typeof window&&!("SVGPathSeg"in window)){r.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.")}var n,o,s,l,d,p,c,u,g,h,m=[],f,T,v=0,b=0,E=0;t=t||15;var S=function(e,t,i){var a=1==i%2&&1<i;if(!g||e!=g.x||t!=g.y){if(g&&a){f=g.x;T=g.y}else{f=0;T=0}var n={x:f+e,y:T+t};if(a||!g){g=n}m.push(n);b=f+e;E=T+t}},_=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"===t)return;switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":b=e.x;E=e.y;break;case"H":b=e.x;break;case"V":E=e.y;break;}S(b,E,e.pathSegType)};a._svgPathToAbsolute(e);s=e.getTotalLength();p=[];for(n=0;n<e.pathSegList.numberOfItems;n+=1){p.push(e.pathSegList.getItem(n))}c=p.concat();while(v<s){h=e.getPathSegAtLength(v);d=p[h];if(d!=u){while(c.length&&c[0]!=d){_(c.shift())}u=d}switch(d.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":l=e.getPointAtLength(v);S(l.x,l.y,0);break;}v+=t}for(n=0,o=c.length;n<o;++n){_(c[n])}return m};a._svgPathToAbsolute=function(e){for(var t,a,n,r,o,s,l=e.pathSegList,d=0,p=0,c=l.numberOfItems,u=0;u<c;++u){var g=l.getItem(u),h=g.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(h)){if("x"in g)d=g.x;if("y"in g)p=g.y}else{if("x1"in g)n=d+g.x1;if("x2"in g)o=d+g.x2;if("y1"in g)r=p+g.y1;if("y2"in g)s=p+g.y2;if("x"in g)d+=g.x;if("y"in g)p+=g.y;switch(h){case"m":l.replaceItem(e.createSVGPathSegMovetoAbs(d,p),u);break;case"l":l.replaceItem(e.createSVGPathSegLinetoAbs(d,p),u);break;case"h":l.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(d),u);break;case"v":l.replaceItem(e.createSVGPathSegLinetoVerticalAbs(p),u);break;case"c":l.replaceItem(e.createSVGPathSegCurvetoCubicAbs(d,p,n,r,o,s),u);break;case"s":l.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(d,p,o,s),u);break;case"q":l.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(d,p,n,r),u);break;case"t":l.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(d,p),u);break;case"a":l.replaceItem(e.createSVGPathSegArcAbs(d,p,g.r1,g.r2,g.angle,g.largeArcFlag,g.sweepFlag),u);break;case"z":case"Z":d=t;p=a;break;}}if("M"==h||"m"==h){t=d;a=p}}}})()},function(e,t,i){var a=i(109),n=i(62),o=i(37),s=i(2),l=i(86);e.exports={parseBody:function parseBody(e,t,a,r){if(r===void 0){r={}}for(var l=s(a,"fixtures",[]),d=[],p=0,c;p<l.length;p++){c=this.parseFixture(l[p]);for(var u=0;u<c.length;u++){d.push(c[u])}}var g=o.clone(a,!0);o.extend(g,r,!0);delete g.fixtures;delete g.type;var h=n.create(g);n.setParts(h,d);n.setPosition(h,{x:e,y:t});return h},parseFixture:function parseFixture(e){var t=o.extend({},!1,e);delete t.circle;delete t.vertices;var i;if(e.circle){var n=s(e.circle,"x"),l=s(e.circle,"y"),d=s(e.circle,"radius");i=[a.circle(n,l,d,t)]}else if(e.vertices){i=this.parseVertices(e.vertices,t)}return i},parseVertices:function parseVertices(e,t){if(t===void 0){t={}}for(var i=[],r=0;r<e.length;r++){l.clockwiseSort(e[r]);i.push(n.create(o.extend({position:l.centre(e[r]),vertices:e[r]},t)))}return a.flagCoincidentParts(i)}}},function(e,t,i){var a=i(109),n=i(62);e.exports={parseBody:function parseBody(e,t,r,o){if(o===void 0){o={}}var s,l=r.vertices;if(1===l.length){o.vertices=l[0];s=n.create(o);a.flagCoincidentParts(s.parts)}else{for(var d=[],p=0,c;p<l.length;p++){c=n.create({vertices:l[p]});d.push(c)}a.flagCoincidentParts(d);o.parts=d;s=n.create(o)}s.label=r.label;n.setPosition(s,{x:e,y:t});return s}}},function(e,t,i){e.exports={AFTER_ADD:i(1424),AFTER_REMOVE:i(1425),AFTER_UPDATE:i(1426),BEFORE_ADD:i(1427),BEFORE_REMOVE:i(1428),BEFORE_UPDATE:i(1429),COLLISION_ACTIVE:i(1430),COLLISION_END:i(1431),COLLISION_START:i(1432),DRAG_END:i(1433),DRAG:i(1434),DRAG_START:i(1435),PAUSE:i(1436),RESUME:i(1437),SLEEP_END:i(1438),SLEEP_START:i(1439)}},function(e,t,i){var a=i(109),n=i(62),r=i(0),o=i(508),s=i(2),l=i(99),d=i(86),p=new r({Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(e,t,i){this.tile=t;this.world=e;if(t.physics.matterBody){t.physics.matterBody.destroy()}t.physics.matterBody=this;var a=s(i,"body",null),n=s(i,"addToWorld",!0);if(!a){var r=t.getCollisionGroup(),o=s(r,"objects",[]);if(0<o.length){this.setFromTileCollision(i)}else{this.setFromTileRectangle(i)}}else{this.setBody(a,n)}},setFromTileRectangle:function setFromTileRectangle(e){if(e===void 0){e={}}if(!l(e,"isStatic")){e.isStatic=!0}if(!l(e,"addToWorld")){e.addToWorld=!0}var t=this.tile.getBounds(),i=t.x+t.width/2,n=t.y+t.height/2,r=a.rectangle(i,n,t.width,t.height,e);this.setBody(r,e.addToWorld);return this},setFromTileCollision:function setFromTileCollision(e){if(e===void 0){e={}}if(!l(e,"isStatic")){e.isStatic=!0}if(!l(e,"addToWorld")){e.addToWorld=!0}for(var t=this.tile.tilemapLayer.scaleX,r=this.tile.tilemapLayer.scaleY,o=this.tile.getLeft(),p=this.tile.getTop(),c=this.tile.getCollisionGroup(),u=s(c,"objects",[]),g=[],h=0;h<u.length;h++){var m=u[h],y=o+m.x*t,x=p+m.y*r,f=m.width*t,T=m.height*r,v=null;if(m.rectangle){v=a.rectangle(y+f/2,x+T/2,f,T,e)}else if(m.ellipse){v=a.circle(y+f/2,x+T/2,f/2,e)}else if(m.polygon||m.polyline){var b=m.polygon?m.polygon:m.polyline,E=b.map(function(e){return{x:e.x*t,y:e.y*r}}),S=d.create(E),_=d.centre(S);y+=_.x;x+=_.y;v=a.fromVertices(y,x,S,e)}if(v){g.push(v)}}if(1===g.length){this.setBody(g[0],e.addToWorld)}else if(1<g.length){e.parts=g;this.setBody(n.create(e),e.addToWorld)}return this},setBody:function setBody(e,t){if(t===void 0){t=!0}if(this.body){this.removeBody()}this.body=e;this.body.gameObject=this;if(t){this.world.add(this.body)}return this},removeBody:function removeBody(){if(this.body){this.world.remove(this.body);this.body.gameObject=void 0;this.body=void 0}return this},destroy:function destroy(){this.removeBody();this.tile.physics.matterBody=void 0}});e.exports=p},function(e,t,i){var a=i(1383);a.Body=i(62);a.Composite=i(145);a.World=i(1288);a.Detector=i(509);a.Grid=i(1289);a.Pairs=i(1290);a.Pair=i(467);a.Query=i(1384);a.Resolver=i(1291);a.SAT=i(510);a.Constraint=i(216);a.Common=i(37);a.Engine=i(1385);a.Events=i(237);a.Sleeping=i(236);a.Plugin=i(1287);a.Bodies=i(109);a.Composites=i(1280);a.Axes=i(507);a.Bounds=i(102);a.Svg=i(1281);a.Vector=i(101);a.Vertices=i(86);a.World.add=a.Composite.add;a.World.remove=a.Composite.remove;a.World.addComposite=a.Composite.addComposite;a.World.addBody=a.Composite.addBody;a.World.addConstraint=a.Composite.addConstraint;a.World.clear=a.Composite.clear;e.exports=a},function(e,t,i){var a={};e.exports=a;var n=i(37);(function(){a._registry={};a.register=function(e){if(!a.isPlugin(e)){n.warn("Plugin.register:",a.toString(e),"does not implement all required fields.")}if(e.name in a._registry){var t=a._registry[e.name],i=a.versionParse(e.version).number,r=a.versionParse(t.version).number;if(i>r){n.warn("Plugin.register:",a.toString(t),"was upgraded to",a.toString(e));a._registry[e.name]=e}else if(i<r){n.warn("Plugin.register:",a.toString(t),"can not be downgraded to",a.toString(e))}else if(e!==t){n.warn("Plugin.register:",a.toString(e),"is already registered to different plugin object")}}else{a._registry[e.name]=e}return e};a.resolve=function(e){return a._registry[a.dependencyParse(e).name]};a.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")};a.isPlugin=function(e){return e&&e.name&&e.version&&e.install};a.isUsed=function(e,t){return-1<e.used.indexOf(t)};a.isFor=function(e,t){var i=e.for&&a.dependencyParse(e.for);return!e.for||t.name===i.name&&a.versionSatisfies(t.version,i.range)};a.use=function(e,t){e.uses=(e.uses||[]).concat(t||[]);if(0===e.uses.length){n.warn("Plugin.use:",a.toString(e),"does not specify any dependencies to install.");return}for(var r=a.dependencies(e),o=n.topologicalSort(r),s=[],l=0;l<o.length;l+=1){if(o[l]===e.name){continue}var d=a.resolve(o[l]);if(!d){s.push("\u274C "+o[l]);continue}if(a.isUsed(e,d.name)){continue}if(!a.isFor(d,e)){n.warn("Plugin.use:",a.toString(d),"is for",d.for,"but installed on",a.toString(e)+".");d._warned=!0}if(d.install){d.install(e)}else{n.warn("Plugin.use:",a.toString(d),"does not specify an install function.");d._warned=!0}if(d._warned){s.push("\uD83D\uDD36 "+a.toString(d));delete d._warned}else{s.push("\u2705 "+a.toString(d))}e.used.push(d.name)}if(0<s.length&&!d.silent){n.info(s.join("  "))}};a.dependencies=function(e,t){var r=a.dependencyParse(e),o=r.name;t=t||{};if(o in t){return}e=a.resolve(e)||e;t[o]=n.map(e.uses||[],function(t){if(a.isPlugin(t)){a.register(t)}var i=a.dependencyParse(t),o=a.resolve(t);if(o&&!a.versionSatisfies(o.version,i.range)){n.warn("Plugin.dependencies:",a.toString(o),"does not satisfy",a.toString(i),"used by",a.toString(r)+".");o._warned=!0;e._warned=!0}else if(!o){n.warn("Plugin.dependencies:",a.toString(t),"used by",a.toString(r),"could not be resolved.");e._warned=!0}return i.name});for(var s=0;s<t[o].length;s+=1){a.dependencies(t[o][s],t)}return t};a.dependencyParse=function(e){if(n.isString(e)){var t=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;if(!t.test(e)){n.warn("Plugin.dependencyParse:",e,"is not a valid dependency string.")}return{name:e.split("@")[0],range:e.split("@")[1]||"*"}}return{name:e.name,range:e.range||e.version}};a.versionParse=function(e){var t=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;if(!t.test(e)){n.warn("Plugin.versionParse:",e,"is not a valid version or range.")}var i=e.split("-");e=i[0];var a=isNaN(+e[0]),r=a?e.substr(1):e,o=n.map(r.split("."),function(e){return+e});return{isRange:a,version:r,range:e,operator:a?e[0]:"",parts:o,prerelease:i[1],number:1e8*o[0]+1e4*o[1]+o[2]}};a.versionSatisfies=function(e,t){t=t||"*";var i=a.versionParse(t),n=i.parts,r=a.versionParse(e),o=r.parts;if(i.isRange){if("*"===i.operator||"*"===e){return!0}if("~"===i.operator){return o[0]===n[0]&&o[1]===n[1]&&o[2]>=n[2]}if("^"===i.operator){if(0<n[0]){return o[0]===n[0]&&r.number>=i.number}if(0<n[1]){return o[1]===n[1]&&o[2]>=n[2]}return o[2]===n[2]}}return e===t||"*"===e}})()},function(e,t,i){var a={};e.exports=a;var n=i(145),r=i(216),o=i(37);(function(){a.create=function(e){var t=n.create(),i={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-Infinity,y:-Infinity},max:{x:1/0,y:1/0}}};return o.extend(t,i,e)}})()},function(e,t,i){var a={};e.exports=a;var n=i(467),r=i(509),o=i(37);(function(){a.create=function(e){var t={controller:a,detector:r.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(t,e)};a.update=function(e,t,n,r){var o,s,l,d=n.world,p=e.buckets,c,u,g=!1,h=n.metrics;h.broadphaseTests=0;for(o=0;o<t.length;o++){var m=t[o];if(m.isSleeping&&!r)continue;if(m.bounds.max.x<d.bounds.min.x||m.bounds.min.x>d.bounds.max.x||m.bounds.max.y<d.bounds.min.y||m.bounds.min.y>d.bounds.max.y)continue;var y=a._getRegion(e,m);if(!m.region||y.id!==m.region.id||r){h.broadphaseTests+=1;if(!m.region||r)m.region=y;var x=a._regionUnion(y,m.region);for(s=x.startCol;s<=x.endCol;s++){for(l=x.startRow;l<=x.endRow;l++){u=a._getBucketId(s,l);c=p[u];var f=s>=y.startCol&&s<=y.endCol&&l>=y.startRow&&l<=y.endRow,T=s>=m.region.startCol&&s<=m.region.endCol&&l>=m.region.startRow&&l<=m.region.endRow;if(!f&&T){if(T){if(c)a._bucketRemoveBody(e,c,m)}}if(m.region===y||f&&!T||r){if(!c)c=a._createBucket(p,u);a._bucketAddBody(e,c,m)}}}m.region=y;g=!0}}if(g)e.pairsList=a._createActivePairsList(e)};a.clear=function(e){e.buckets={};e.pairs={};e.pairsList=[]};a._regionUnion=function(e,t){var i=Math.min(e.startCol,t.startCol),n=Math.max(e.endCol,t.endCol),r=Math.min(e.startRow,t.startRow),o=Math.max(e.endRow,t.endRow);return a._createRegion(i,n,r,o)};a._getRegion=function(e,t){var i=t.bounds,n=Math.floor(i.min.x/e.bucketWidth),r=Math.floor(i.max.x/e.bucketWidth),o=Math.floor(i.min.y/e.bucketHeight),s=Math.floor(i.max.y/e.bucketHeight);return a._createRegion(n,r,o,s)};a._createRegion=function(e,t,i,a){return{id:e+","+t+","+i+","+a,startCol:e,endCol:t,startRow:i,endRow:a}};a._getBucketId=function(e,t){return"C"+e+"R"+t};a._createBucket=function(e,t){var i=e[t]=[];return i};a._bucketAddBody=function(e,t,a){for(var r=0,o;r<t.length;r++){o=t[r];if(a.id===o.id||a.isStatic&&o.isStatic)continue;var s=n.id(a,o),l=e.pairs[s];if(l){l[2]+=1}else{e.pairs[s]=[a,o,1]}}t.push(a)};a._bucketRemoveBody=function(e,t,a){t.splice(t.indexOf(a),1);for(var r=0;r<t.length;r++){var o=t[r],s=n.id(a,o),l=e.pairs[s];if(l)l[2]-=1}};a._createActivePairsList=function(e){var t,i,a=[];t=o.keys(e.pairs);for(var n=0;n<t.length;n++){i=e.pairs[t[n]];if(0<i[2]){a.push(i)}else{delete e.pairs[t[n]]}}return a}})()},function(e,t,i){var a={};e.exports=a;var n=i(467),r=i(37);(function(){a._pairMaxIdleLife=1e3;a.create=function(e){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)};a.update=function(e,t,a){var r=e.list,o=e.table,s=e.collisionStart,l=e.collisionEnd,d=e.collisionActive,p,c,u,g;s.length=0;l.length=0;d.length=0;for(g=0;g<r.length;g++){r[g].confirmedActive=!1}for(g=0;g<t.length;g++){p=t[g];if(p.collided){c=n.id(p.bodyA,p.bodyB);u=o[c];if(u){if(u.isActive){d.push(u)}else{s.push(u)}n.update(u,p,a);u.confirmedActive=!0}else{u=n.create(p,a);o[c]=u;s.push(u);r.push(u)}}}for(g=0;g<r.length;g++){u=r[g];if(u.isActive&&!u.confirmedActive){n.setActive(u,!1,a);l.push(u)}}};a.removeOld=function(e,t){var n=e.list,r=e.table,o=[],s,l,d,p;for(p=0;p<n.length;p++){s=n[p];l=s.collision;if(l.bodyA.isSleeping||l.bodyB.isSleeping){s.timeUpdated=t;continue}if(t-s.timeUpdated>a._pairMaxIdleLife){o.push(p)}}for(p=0;p<o.length;p++){d=o[p]-p;s=n[d];delete r[s.id];n.splice(d,1)}};a.clear=function(e){e.table={};e.list.length=0;e.collisionStart.length=0;e.collisionActive.length=0;e.collisionEnd.length=0;return e}})()},function(e,t,i){var a={};e.exports=a;var n=i(86),r=i(101),o=i(37),s=i(102);(function(){a._restingThresh=4;a._restingThreshTangent=6;a._positionDampen=.9;a._positionWarming=.8;a._frictionNormalMultiplier=5;a.preSolvePosition=function(e){var t,a,n;for(t=0;t<e.length;t++){a=e[t];if(!a.isActive)continue;n=a.activeContacts.length;a.collision.parentA.totalContacts+=n;a.collision.parentB.totalContacts+=n}};a.solvePosition=function(e,t,n){var r,o,s,l,d,p,c,u,g,h,m,y,x,f,T,v,b=n*a._positionDampen;for(r=0;r<t.length;r++){var E=t[r];E.previousPositionImpulse.x=E.positionImpulse.x;E.previousPositionImpulse.y=E.positionImpulse.y}for(r=0;r<e.length;r++){l=e[r];if(!l.isActive||l.isSensor)continue;d=l.collision;p=d.parentA;c=d.parentB;u=d.normal;m=p.previousPositionImpulse;y=c.previousPositionImpulse;h=d.penetration;f=y.x-m.x+h.x;T=y.y-m.y+h.y;o=u.x;s=u.y;g=o*f+s*T;l.separation=g;v=(g-l.slop)*b;if(p.isStatic||c.isStatic)v*=2;if(!(p.isStatic||p.isSleeping)){x=v/p.totalContacts;p.positionImpulse.x+=o*x;p.positionImpulse.y+=s*x}if(!(c.isStatic||c.isSleeping)){x=v/c.totalContacts;c.positionImpulse.x-=o*x;c.positionImpulse.y-=s*x}}};a.postSolvePosition=function(e){for(var t=0,o;t<e.length;t++){o=e[t];o.totalContacts=0;if(0!==o.positionImpulse.x||0!==o.positionImpulse.y){for(var l=0,d;l<o.parts.length;l++){d=o.parts[l];n.translate(d.vertices,o.positionImpulse);s.update(d.bounds,d.vertices,o.velocity);d.position.x+=o.positionImpulse.x;d.position.y+=o.positionImpulse.y}o.positionPrev.x+=o.positionImpulse.x;o.positionPrev.y+=o.positionImpulse.y;if(0>r.dot(o.positionImpulse,o.velocity)){o.positionImpulse.x=0;o.positionImpulse.y=0}else{o.positionImpulse.x*=a._positionWarming;o.positionImpulse.y*=a._positionWarming}}}};a.preSolveVelocity=function(e){var t,a,n,o,s,l,d,p,c,u,g,h,m,y,x=r._temp[0],f=r._temp[1];for(t=0;t<e.length;t++){n=e[t];if(!n.isActive||n.isSensor)continue;o=n.activeContacts;s=n.collision;l=s.parentA;d=s.parentB;p=s.normal;c=s.tangent;for(a=0;a<o.length;a++){u=o[a];g=u.vertex;h=u.normalImpulse;m=u.tangentImpulse;if(0!==h||0!==m){x.x=p.x*h+c.x*m;x.y=p.y*h+c.y*m;if(!(l.isStatic||l.isSleeping)){y=r.sub(g,l.position,f);l.positionPrev.x+=x.x*l.inverseMass;l.positionPrev.y+=x.y*l.inverseMass;l.anglePrev+=r.cross(y,x)*l.inverseInertia}if(!(d.isStatic||d.isSleeping)){y=r.sub(g,d.position,f);d.positionPrev.x-=x.x*d.inverseMass;d.positionPrev.y-=x.y*d.inverseMass;d.anglePrev-=r.cross(y,x)*d.inverseInertia}}}}};a.solveVelocity=function(e,t){for(var n=t*t,s=r._temp[0],l=r._temp[1],d=r._temp[2],p=r._temp[3],c=r._temp[4],u=r._temp[5],g=0,h;g<e.length;g++){h=e[g];if(!h.isActive||h.isSensor)continue;var m=h.collision,y=m.parentA,x=m.parentB,f=m.normal,T=m.tangent,v=h.activeContacts,b=1/v.length;y.velocity.x=y.position.x-y.positionPrev.x;y.velocity.y=y.position.y-y.positionPrev.y;x.velocity.x=x.position.x-x.positionPrev.x;x.velocity.y=x.position.y-x.positionPrev.y;y.angularVelocity=y.angle-y.anglePrev;x.angularVelocity=x.angle-x.anglePrev;for(var E=0;E<v.length;E++){var S=v[E],_=S.vertex,A=r.sub(_,y.position,l),C=r.sub(_,x.position,d),w=r.add(y.velocity,r.mult(r.perp(A),y.angularVelocity),p),P=r.add(x.velocity,r.mult(r.perp(C),x.angularVelocity),c),O=r.sub(w,P,u),R=r.dot(f,O),L=r.dot(T,O),k=Math.abs(L),D=o.sign(L),F=(1+h.restitution)*R,I=o.clamp(h.separation+R,0,1)*a._frictionNormalMultiplier,M=L,B=1/0;if(k>h.friction*h.frictionStatic*I*n){B=k;M=o.clamp(h.friction*D*n,-B,B)}var Y=r.cross(A,f),N=r.cross(C,f),X=b/(y.inverseMass+x.inverseMass+y.inverseInertia*Y*Y+x.inverseInertia*N*N);F*=X;M*=X;if(0>R&&R*R>a._restingThresh*n){S.normalImpulse=0}else{var z=S.normalImpulse;S.normalImpulse=Math.min(S.normalImpulse+F,0);F=S.normalImpulse-z}if(L*L>a._restingThreshTangent*n){S.tangentImpulse=0}else{var U=S.tangentImpulse;S.tangentImpulse=o.clamp(S.tangentImpulse+M,-B,B);M=S.tangentImpulse-U}s.x=f.x*F+T.x*M;s.y=f.y*F+T.y*M;if(!(y.isStatic||y.isSleeping)){y.positionPrev.x+=s.x*y.inverseMass;y.positionPrev.y+=s.y*y.inverseMass;y.anglePrev+=r.cross(A,s)*y.inverseInertia}if(!(x.isStatic||x.isSleeping)){x.positionPrev.x-=s.x*x.inverseMass;x.positionPrev.y-=s.y*x.inverseMass;x.anglePrev-=r.cross(C,s)*x.inverseInertia}}}}})()},function(e,t,i){e.exports={BasePlugin:i(468),DefaultPlugins:i(173),PluginCache:i(23),PluginManager:i(364),ScenePlugin:i(1293)}},function(e,t,i){var a=i(468),n=i(0),r=i(19),o=new n({Extends:a,initialize:function(e,t){a.call(this,t);this.scene=e;this.systems=e.sys;e.sys.events.once(r.BOOT,this.boot,this)},boot:function boot(){},destroy:function destroy(){this.pluginManager=null;this.game=null;this.scene=null;this.systems=null}});e.exports=o},function(e,t,i){var a=i(17),n=i(175),r={Center:i(353),Events:i(92),Orientation:i(354),ScaleManager:i(365),ScaleModes:i(355),Zoom:i(356)};r=a(!1,r,n.CENTER);r=a(!1,r,n.ORIENTATION);r=a(!1,r,n.SCALE_MODE);r=a(!1,r,n.ZOOM);e.exports=r},function(e,t,i){var a=i(123),n=i(17),r={Events:i(19),SceneManager:i(367),ScenePlugin:i(1296),Settings:i(369),Systems:i(178)};r=n(!1,r,a);e.exports=r},function(e,t,i){var a=i(22),n=i(0),r=i(19),o=i(2),s=i(23),l=new n({initialize:function(e){this.scene=e;this.systems=e.sys;this.settings=e.sys.settings;this.key=e.sys.settings.key;this.manager=e.sys.game.scene;this.transitionProgress=0;this._elapsed=0;this._target=null;this._duration=0;this._onUpdate;this._onUpdateScope;this._willSleep=!1;this._willRemove=!1;e.sys.events.once(r.BOOT,this.boot,this);e.sys.events.on(r.START,this.pluginStart,this)},boot:function boot(){this.systems.events.once(r.DESTROY,this.destroy,this)},pluginStart:function pluginStart(){this._target=null;this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},start:function start(e,t){if(e===void 0){e=this.key}this.manager.queueOp("stop",this.key);this.manager.queueOp("start",e,t);return this},restart:function restart(e){var t=this.key;this.manager.queueOp("stop",t);this.manager.queueOp("start",t,e);return this},transition:function transition(e){if(e===void 0){e={}}var t=o(e,"target",!1),i=this.manager.getScene(t);if(!t||!this.checkValidTransition(i)){return!1}var a=o(e,"duration",1e3);this._elapsed=0;this._target=i;this._duration=a;this._willSleep=o(e,"sleep",!1);this._willRemove=o(e,"remove",!1);var n=o(e,"onUpdate",null);if(n){this._onUpdate=n;this._onUpdateScope=o(e,"onUpdateScope",this.scene)}var s=o(e,"allowInput",!1);this.settings.transitionAllowInput=s;var l=i.sys.settings;l.isTransition=!0;l.transitionFrom=this.scene;l.transitionDuration=a;l.transitionAllowInput=s;if(o(e,"moveAbove",!1)){this.manager.moveAbove(this.key,t)}else if(o(e,"moveBelow",!1)){this.manager.moveBelow(this.key,t)}if(i.sys.isSleeping()){i.sys.wake()}else{this.manager.start(t,o(e,"data"))}this.systems.events.emit(r.TRANSITION_OUT,i,a);this.systems.events.on(r.UPDATE,this.step,this);return!0},checkValidTransition:function checkValidTransition(e){if(!e||e.sys.isActive()||e.sys.isTransitioning()||e===this.scene||this.systems.isTransitioning()){return!1}return!0},step:function step(e,t){this._elapsed+=t;this.transitionProgress=a(this._elapsed/this._duration,0,1);if(this._onUpdate){this._onUpdate.call(this._onUpdateScope,this.transitionProgress)}if(this._elapsed>=this._duration){this.transitionComplete()}},transitionComplete:function transitionComplete(){var e=this._target.sys,t=this._target.sys.settings;this.systems.events.off(r.UPDATE,this.step,this);e.events.emit(r.TRANSITION_COMPLETE,this.scene);t.isTransition=!1;t.transitionFrom=null;this._duration=0;this._target=null;this._onUpdate=null;this._onUpdateScope=null;if(this._willRemove){this.manager.remove(this.key)}else if(this._willSleep){this.systems.sleep()}else{this.manager.stop(this.key)}},add:function add(e,t,i,a){return this.manager.add(e,t,i,a)},launch:function launch(e,t){if(e&&e!==this.key){this.manager.queueOp("start",e,t)}return this},run:function run(e,t){if(e&&e!==this.key){this.manager.queueOp("run",e,t)}return this},pause:function pause(e,t){if(e===void 0){e=this.key}this.manager.queueOp("pause",e,t);return this},resume:function resume(e,t){if(e===void 0){e=this.key}this.manager.queueOp("resume",e,t);return this},sleep:function sleep(e,t){if(e===void 0){e=this.key}this.manager.queueOp("sleep",e,t);return this},wake:function wake(e,t){if(e===void 0){e=this.key}this.manager.queueOp("wake",e,t);return this},switch:function _switch(e){if(e!==this.key){this.manager.queueOp("switch",this.key,e)}return this},stop:function stop(e,t){if(e===void 0){e=this.key}this.manager.queueOp("stop",e,t);return this},setActive:function setActive(e,t,i){if(t===void 0){t=this.key}var a=this.manager.getScene(t);if(a){a.sys.setActive(e,i)}return this},setVisible:function setVisible(e,t){if(t===void 0){t=this.key}var i=this.manager.getScene(t);if(i){i.sys.setVisible(e)}return this},isSleeping:function isSleeping(e){if(e===void 0){e=this.key}return this.manager.isSleeping(e)},isActive:function isActive(e){if(e===void 0){e=this.key}return this.manager.isActive(e)},isPaused:function isPaused(e){if(e===void 0){e=this.key}return this.manager.isPaused(e)},isVisible:function isVisible(e){if(e===void 0){e=this.key}return this.manager.isVisible(e)},swapPosition:function swapPosition(e,t){if(t===void 0){t=this.key}if(e!==t){this.manager.swapPosition(e,t)}return this},moveAbove:function moveAbove(e,t){if(t===void 0){t=this.key}if(e!==t){this.manager.moveAbove(e,t)}return this},moveBelow:function moveBelow(e,t){if(t===void 0){t=this.key}if(e!==t){this.manager.moveBelow(e,t)}return this},remove:function remove(e){if(e===void 0){e=this.key}this.manager.remove(e);return this},moveUp:function moveUp(e){if(e===void 0){e=this.key}this.manager.moveUp(e);return this},moveDown:function moveDown(e){if(e===void 0){e=this.key}this.manager.moveDown(e);return this},bringToTop:function bringToTop(e){if(e===void 0){e=this.key}this.manager.bringToTop(e);return this},sendToBack:function sendToBack(e){if(e===void 0){e=this.key}this.manager.sendToBack(e);return this},get:function get(e){return this.manager.getScene(e)},getIndex:function getIndex(e){if(e===void 0){e=this.key}return this.manager.getIndex(e)},shutdown:function shutdown(){var e=this.systems.events;e.off(r.SHUTDOWN,this.shutdown,this);e.off(r.POST_UPDATE,this.step,this);e.off(r.TRANSITION_OUT)},destroy:function destroy(){this.shutdown();this.scene.sys.events.off(r.START,this.start,this);this.scene=null;this.systems=null;this.settings=null;this.manager=null}});s.register("ScenePlugin",l,"scenePlugin");e.exports=l},function(e,t,i){e.exports={List:i(126),Map:i(159),ProcessQueue:i(184),RTree:i(462),Set:i(108),Size:i(366)}},function(e,t,i){var a=i(17),n=i(1299),r={CanvasTexture:i(371),Events:i(119),FilterMode:n,Frame:i(94),Parsers:i(373),Texture:i(180),TextureManager:i(370),TextureSource:i(372)};r=a(!1,r,n);e.exports=r},function(e){e.exports={LINEAR:0,NEAREST:1}},function(e,t,i){e.exports={Components:i(137),Parsers:i(1330),Formats:i(31),ImageCollection:i(479),ParseToTilemap:i(224),Tile:i(74),Tilemap:i(488),TilemapCreator:i(1339),TilemapFactory:i(1340),Tileset:i(141),LayerData:i(104),MapData:i(105),ObjectLayer:i(482),DynamicTilemapLayer:i(489),StaticTilemapLayer:i(490)}},function(e,t,i){var a=i(24),n=i(51);e.exports=function Copy(e,t,r,o,s,l,d,p){if(0>e){e=0}if(0>t){t=0}if(d===void 0){d=!0}for(var c=a(e,t,r,o,null,p),u=s-e,g=l-t,h=0;h<c.length;h++){var m=c[h].x+u,y=c[h].y+g;if(0<=m&&m<p.width&&0<=y&&y<p.height){if(p.data[y][m]){p.data[y][m].copy(c[h])}}}if(d){n(s-1,l-1,r+2,o+2,p)}}},function(e,t,i){var a=i(139),n=i(140),r=i(24),o=i(469);e.exports=function CreateFromTiles(e,t,s,l,d,p){if(s===void 0){s={}}if(!Array.isArray(e)){e=[e]}var c=p.tilemapLayer;if(l===void 0){l=c.scene}if(d===void 0){d=l.cameras.main}var u=r(0,0,p.width,p.height,null,p),g=[],h;for(h=0;h<u.length;h++){var m=u[h];if(-1!==e.indexOf(m.index)){s.x=a(m.x,d,p);s.y=n(m.y,d,p);var y=l.make.sprite(s);g.push(y)}}if("number"==typeof t){for(h=0;h<e.length;h++){o(e[h],t,0,0,p.width,p.height,p)}}else if(Array.isArray(t)){for(h=0;h<e.length;h++){o(e[h],t[h],0,0,p.width,p.height,p)}}return g}},function(e,t,i){var a=i(93),n=i(325);e.exports=function CullTiles(e,t,i,r){if(i===void 0){i=[]}if(r===void 0){r=0}i.length=0;var o=e.tilemapLayer.tilemap,s=e.tilemapLayer,l=e.data,d=e.width,p=e.height,c=Math.floor(o.tileWidth*s.scaleX),u=Math.floor(o.tileHeight*s.scaleY),g=0,h=d,m=0,f=p;if(!s.skipCull&&1===s.scrollFactorX&&1===s.scrollFactorY){var T=a(t.worldView.x-s.x,c,0,!0)-s.cullPaddingX,v=n(t.worldView.right-s.x,c,0,!0)+s.cullPaddingX,b=a(t.worldView.y-s.y,u,0,!0)-s.cullPaddingY,E=n(t.worldView.bottom-s.y,u,0,!0)+s.cullPaddingY;g=Math.max(0,T);h=Math.min(d,v);m=Math.max(0,b);f=Math.min(p,E)}var S,_,A;if(0===r){for(_=m;_<f;_++){for(S=g;l[_]&&S<h;S++){A=l[_][S];if(!A||-1===A.index||!A.visible||0===A.alpha){continue}i.push(A)}}}else if(1===r){for(_=m;_<f;_++){for(S=h;l[_]&&S>=g;S--){A=l[_][S];if(!A||-1===A.index||!A.visible||0===A.alpha){continue}i.push(A)}}}else if(2===r){for(_=f;_>=m;_--){for(S=g;l[_]&&S<h;S++){A=l[_][S];if(!A||-1===A.index||!A.visible||0===A.alpha){continue}i.push(A)}}}else if(3===r){for(_=f;_>=m;_--){for(S=h;l[_]&&S>=g;S--){A=l[_][S];if(!A||-1===A.index||!A.visible||0===A.alpha){continue}i.push(A)}}}s.tilesDrawn=i.length;s.tilesTotal=d*p;return i}},function(e,t,i){var a=i(24),n=i(51),r=i(73);e.exports=function Fill(e,t,o,s,l,d,p){for(var c=-1!==p.collideIndexes.indexOf(e),u=a(t,o,s,l,null,p),g=0;g<u.length;g++){u[g].index=e;r(u[g],c)}if(d){n(t-1,o-1,s+2,l+2,p)}}},function(e,t,i){var a=i(24);e.exports=function FilterTiles(e,t,i,n,r,o,s,l){var d=a(i,n,r,o,s,l);return d.filter(e,t)}},function(e){e.exports=function FindByIndex(e,t,i,a){if(t===void 0){t=0}if(i===void 0){i=!1}var n=0,r,o,s;if(i){for(o=a.height-1;0<=o;o--){for(r=a.width-1;0<=r;r--){s=a.data[o][r];if(s&&s.index===e){if(n===t){return s}else{n+=1}}}}}else{for(o=0;o<a.height;o++){for(r=0;r<a.width;r++){s=a.data[o][r];if(s&&s.index===e){if(n===t){return s}else{n+=1}}}}}return null}},function(e,t,i){var a=i(24);e.exports=function FindTile(e,t,i,n,r,o,s,l){var d=a(i,n,r,o,s,l);return d.find(e,t)||null}},function(e,t,i){var a=i(24);e.exports=function ForEachTile(e,t,i,n,r,o,s,l){var d=a(i,n,r,o,s,l);d.forEach(e,t)}},function(e,t,i){var a=i(138),n=i(63),r=i(64);e.exports=function GetTileAtWorldXY(e,t,i,o,s){var l=n(e,!0,o,s),d=r(t,!0,o,s);return a(l,d,i,s)}},function(e,t,i){var a=i(422),n=i(24),r=i(423),o=i(1),s=i(139),l=i(140),d=i(63),p=i(64),c=function(e,t){return r.RectangleToTriangle(t,e)};e.exports=function GetTilesWithinShape(e,t,u,g){if(e===void 0){return[]}var h=o;if(e instanceof a.Circle){h=r.CircleToRectangle}else if(e instanceof a.Rectangle){h=r.RectangleToRectangle}else if(e instanceof a.Triangle){h=c}else if(e instanceof a.Line){h=r.LineToRectangle}var m=d(e.left,!0,u,g),y=p(e.top,!0,u,g),x=Math.ceil(d(e.right,!1,u,g)),f=Math.ceil(p(e.bottom,!1,u,g)),T=Math.max(x-m,1),v=Math.max(f-y,1),b=n(m,y,T,v,t,g),E=g.tileWidth,S=g.tileHeight;if(g.tilemapLayer){E*=g.tilemapLayer.scaleX;S*=g.tilemapLayer.scaleY}for(var _=[],A=new a.Rectangle(0,0,E,S),C=0,w;C<b.length;C++){w=b[C];A.x=s(w.x,u,g);A.y=l(w.y,u,g);if(h(e,A)){_.push(w)}}return _}},function(e,t,i){var a=i(24),n=i(63),r=i(64);e.exports=function GetTilesWithinWorldXY(e,t,i,o,s,l,d){var p=n(e,!0,l,d),c=r(t,!0,l,d),u=Math.ceil(n(e+i,!1,l,d)),g=Math.ceil(r(t+o,!1,l,d));return a(p,c,u-p,g-c,s,d)}},function(e,t,i){var a=i(470),n=i(63),r=i(64);e.exports=function HasTileAtWorldXY(e,t,i,o){var s=n(e,!0,i,o),l=r(t,!0,i,o);return a(s,l,o)}},function(e,t,i){var a=i(218),n=i(63),r=i(64);e.exports=function PutTileAtWorldXY(e,t,i,o,s,l){var d=n(t,!0,s,l),p=r(i,!0,s,l);return a(e,d,p,o,l)}},function(e,t,i){var a=i(51),n=i(218);e.exports=function PutTilesAt(e,t,i,r,o){if(!Array.isArray(e)){return null}if(r===void 0){r=!0}if(!Array.isArray(e[0])){e=[e]}for(var s=e.length,l=e[0].length,d=0;d<s;d++){for(var p=0,c;p<l;p++){c=e[d][p];n(c,t+p,i+d,!1,o)}}if(r){a(t-1,i-1,l+2,s+2,o)}}},function(e,t,i){var a=i(24),n=i(183);e.exports=function Randomize(e,t,r,o,s,l){var d,p=a(e,t,r,o,null,l);if(s===void 0){s=[];for(d=0;d<p.length;d++){if(-1===s.indexOf(p[d].index)){s.push(p[d].index)}}}for(d=0;d<p.length;d++){p[d].index=n(s)}}},function(e,t,i){var a=i(471),n=i(63),r=i(64);e.exports=function RemoveTileAtWorldXY(e,t,i,o,s,l){var d=n(e,!0,s,l),p=r(t,!0,s,l);return a(d,p,i,o,l)}},function(e,t,i){var a=i(24),n=i(348),r=new n(105,210,231,150),o=new n(243,134,48,200),s=new n(40,39,37,150);e.exports=function RenderDebug(e,t,n){if(t===void 0){t={}}var l=t.tileColor!==void 0?t.tileColor:r,d=t.collidingTileColor!==void 0?t.collidingTileColor:o,p=t.faceColor!==void 0?t.faceColor:s,c=a(0,0,n.width,n.height,null,n);e.translateCanvas(n.tilemapLayer.x,n.tilemapLayer.y);e.scaleCanvas(n.tilemapLayer.scaleX,n.tilemapLayer.scaleY);for(var u=0;u<c.length;u++){var g=c[u],h=g.width,m=g.height,f=g.pixelX,T=g.pixelY,v=g.collides?d:l;if(null!==v){e.fillStyle(v.color,v.alpha/255);e.fillRect(f,T,h,m)}f+=1;T+=1;h-=2;m-=2;if(null!==p){e.lineStyle(1,p.color,p.alpha/255);if(g.faceTop){e.lineBetween(f,T,f+h,T)}if(g.faceRight){e.lineBetween(f+h,T,f+h,T+m)}if(g.faceBottom){e.lineBetween(f,T+m,f+h,T+m)}if(g.faceLeft){e.lineBetween(f,T,f,T+m)}}}}},function(e,t,i){var a=i(73),n=i(51),r=i(219);e.exports=function SetCollision(e,t,o,s,l){if(t===void 0){t=!0}if(o===void 0){o=!0}if(!Array.isArray(e)){e=[e]}if(l===void 0){l=!0}for(var d=0;d<e.length;d++){r(e[d],t,s)}if(l){for(var p=0;p<s.height;p++){for(var c=0,u;c<s.width;c++){u=s.data[p][c];if(u&&-1!==e.indexOf(u.index)){a(u,t)}}}}if(o){n(0,0,s.width,s.height,s)}}},function(e,t,i){var a=i(73),n=i(51),r=i(219);e.exports=function SetCollisionBetween(e,t,i,o,s,l){if(i===void 0){i=!0}if(o===void 0){o=!0}if(l===void 0){l=!0}if(e>t){return}for(var d=e;d<=t;d++){r(d,i,s)}if(l){for(var p=0;p<s.height;p++){for(var c=0,u;c<s.width;c++){u=s.data[p][c];if(u){if(u.index>=e&&u.index<=t){a(u,i)}}}}}if(o){n(0,0,s.width,s.height,s)}}},function(e,t,i){var a=i(73),n=i(51),r=i(219);e.exports=function SetCollisionByExclusion(e,t,i,o){if(t===void 0){t=!0}if(i===void 0){i=!0}if(!Array.isArray(e)){e=[e]}for(var s=0;s<o.height;s++){for(var l=0,d;l<o.width;l++){d=o.data[s][l];if(d&&-1===e.indexOf(d.index)){a(d,t);r(d.index,t,o)}}}if(i){n(0,0,o.width,o.height,o)}}},function(e,t,i){var a=i(73),n=i(51),r=i(99);e.exports=function SetCollisionByProperty(e,t,o,s){if(t===void 0){t=!0}if(o===void 0){o=!0}for(var l=0;l<s.height;l++){for(var d=0,p;d<s.width;d++){p=s.data[l][d];if(!p){continue}for(var c in e){if(!r(p.properties,c)){continue}var u=e[c];if(!Array.isArray(u)){u=[u]}for(var g=0;g<u.length;g++){if(p.properties[c]===u[g]){a(p,t)}}}}}if(o){n(0,0,s.width,s.height,s)}}},function(e,t,i){var a=i(73),n=i(51);e.exports=function SetCollisionFromCollisionGroup(e,t,i){if(e===void 0){e=!0}if(t===void 0){t=!0}for(var r=0;r<i.height;r++){for(var o=0,s;o<i.width;o++){s=i.data[r][o];if(!s){continue}var l=s.getCollisionGroup();if(l&&l.objects&&0<l.objects.length){a(s,e)}}}if(t){n(0,0,i.width,i.height,i)}}},function(e){e.exports=function SetTileIndexCallback(e,t,a,n){if("number"==typeof e){n.callbacks[e]=null!==t?{callback:t,callbackContext:a}:void 0}else{for(var r=0,o=e.length;r<o;r++){n.callbacks[e[r]]=null!==t?{callback:t,callbackContext:a}:void 0}}}},function(e,t,i){var a=i(24);e.exports=function SetTileLocationCallback(e,t,n,r,o,s,l){for(var d=a(e,t,n,r,null,l),p=0;p<d.length;p++){d[p].setCollisionCallback(o,s)}}},function(e,t,i){var a=i(24),n=i(114);e.exports=function Shuffle(e,t,r,o,s){var l=a(e,t,r,o,null,s),d=l.map(function(e){return e.index});n(d);for(var p=0;p<l.length;p++){l[p].index=d[p]}}},function(e,t,i){var a=i(24);e.exports=function SwapByIndex(e,t,n,r,o,s,l){for(var d=a(n,r,o,s,null,l),p=0;p<d.length;p++){if(d[p]){if(d[p].index===e){d[p].index=t}else if(d[p].index===t){d[p].index=e}}}}},function(e,t,i){var a=i(139),n=i(140),r=i(3);e.exports=function TileToWorldXY(e,t,i,o,s){if(i===void 0){i=new r(0,0)}i.x=a(e,o,s);i.y=n(t,o,s);return i}},function(e,t,i){var a=i(24);e.exports=function WeightedRandomize(e,t,n,r,o,s){if(o===void 0){return}var l,d=a(e,t,n,r,null,s),p=0;for(l=0;l<o.length;l++){p+=o[l].weight}if(0>=p){return}for(l=0;l<d.length;l++){for(var c=Math.random()*p,u=0,g=-1,h=0;h<o.length;h++){u+=o[h].weight;if(c<=u){var m=o[h].index;g=Array.isArray(m)?m[Math.floor(Math.random()*m.length)]:m;break}}d[l].index=g}}},function(e,t,i){var a=i(63),n=i(64),r=i(3);e.exports=function WorldToTileXY(e,t,i,o,s,l){if(o===void 0){o=new r(0,0)}o.x=a(e,i,s,l);o.y=n(t,i,s,l);return o}},function(e,t,i){e.exports={Parse:i(472),Parse2DArray:i(220),ParseCSV:i(473),Impact:i(1331),Tiled:i(1332)}},function(e,t,i){e.exports={ParseTileLayers:i(486),ParseTilesets:i(487),ParseWeltmeister:i(485)}},function(e,t,i){e.exports={AssignTileProperties:i(484),Base64Decode:i(476),BuildTilesetIndex:i(483),ParseGID:i(221),ParseImageLayers:i(477),ParseJSONTiled:i(474),ParseObject:i(223),ParseObjectLayers:i(481),ParseTileLayers:i(475),ParseTilesets:i(478)}},function(e,t,i){var a=i(1),n=i(1);a=i(1334);n=i(1335);e.exports={renderWebGL:a,renderCanvas:n}},function(e,t,i){var a=i(10);e.exports=function DynamicTilemapLayerWebGLRenderer(e,t,n,r){t.cull(r);var o=t.culledTiles,s=o.length,l=r.alpha*t.alpha;if(0===s||0>=l){return}for(var d=t.gidMap,p=t.pipeline,u=a.getTintAppendFloatAlphaAndSwap,g=t.scrollFactorX,h=t.scrollFactorY,m=t.x,x=t.y,y=t.scaleX,f=t.scaleY,T=t.tileset,v=0;v<T.length;v++){for(var b=T[v],E=b.glTexture,S=0;S<s;S++){var _=o[S],A=d[_.index];if(A!==b){continue}var C=A.getTileTextureCoordinates(_.index);if(null===C){continue}var w=_.width,P=_.height,O=C.x,R=C.y,L=.5*_.width,k=.5*_.height,D=u(_.tint,l*_.alpha);p.batchTexture(t,E,E.width,E.height,m+(L+_.pixelX)*y,x+(k+_.pixelY)*f,_.width,_.height,y,f,_.rotation,_.flipX,_.flipY,g,h,L,k,O,R,w,P,D,D,D,D,!1,0,0,r,null,!0)}}}},function(e){e.exports=function DynamicTilemapLayerCanvasRenderer(e,t,a,n,r){t.cull(n);var o=t.culledTiles,s=o.length;if(0===s){return}var l=e._tempMatrix1,d=e._tempMatrix2,p=e._tempMatrix3;d.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.copyFrom(n.matrix);var c=e.currentContext,u=t.gidMap;c.save();if(r){l.multiplyWithOffset(r,-n.scrollX*t.scrollFactorX,-n.scrollY*t.scrollFactorY);d.e=t.x;d.f=t.y;l.multiply(d,p);p.copyToContext(c)}else{d.e-=n.scrollX*t.scrollFactorX;d.f-=n.scrollY*t.scrollFactorY;d.copyToContext(c)}var g=n.alpha*t.alpha;if(!e.antialias||1<t.scaleX||1<t.scaleY){c.imageSmoothingEnabled=!1}for(var h=0;h<s;h++){var m=o[h],y=u[m.index];if(!y){continue}var x=y.image.getSourceImage(),f=y.getTileTextureCoordinates(m.index);if(f){var T=m.width/2,v=m.height/2;c.save();c.translate(m.pixelX+T,m.pixelY+v);if(0!==m.rotation){c.rotate(m.rotation)}if(m.flipX||m.flipY){c.scale(m.flipX?-1:1,m.flipY?-1:1)}c.globalAlpha=g*m.alpha;c.drawImage(x,f.x,f.y,m.width,m.height,-T,-v,m.width,m.height);c.restore()}}c.restore()}},function(e,t,i){var a=i(1),n=i(1);a=i(1337);n=i(1338);e.exports={renderWebGL:a,renderCanvas:n}},function(e){e.exports=function StaticTilemapLayerWebGLRenderer(e,t,a,n){var r=t.tileset,o=t.pipeline,s=o.vertexBuffer;e.setPipeline(o);o.modelIdentity();o.modelTranslate(t.x-n.scrollX*t.scrollFactorX,t.y-n.scrollY*t.scrollFactorY,0);o.modelScale(t.scaleX,t.scaleY,1);o.viewLoad2D(n.matrix.matrix);for(var l=0;l<r.length;l++){t.upload(n,l);if(0<t.vertexCount[l]){if(e.currentPipeline&&0<e.currentPipeline.vertexCount){e.flush()}o.vertexBuffer=t.vertexBuffer[l];e.setPipeline(o);e.setTexture2D(r[l].glTexture,0);e.gl.drawArrays(o.topology,0,t.vertexCount[l])}}o.vertexBuffer=s;o.viewIdentity();o.modelIdentity()}},function(e){e.exports=function StaticTilemapLayerCanvasRenderer(e,t,a,n,r){t.cull(n);var o=t.culledTiles,s=o.length;if(0===s){return}var l=e._tempMatrix1,d=e._tempMatrix2,p=e._tempMatrix3;d.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY);l.copyFrom(n.matrix);var c=e.currentContext,u=t.gidMap;c.save();if(r){l.multiplyWithOffset(r,-n.scrollX*t.scrollFactorX,-n.scrollY*t.scrollFactorY);d.e=t.x;d.f=t.y;l.multiply(d,p);p.copyToContext(c)}else{d.e-=n.scrollX*t.scrollFactorX;d.f-=n.scrollY*t.scrollFactorY;d.copyToContext(c)}var g=n.alpha*t.alpha;if(!e.antialias||1<t.scaleX||1<t.scaleY){c.imageSmoothingEnabled=!1}for(var h=0;h<s;h++){var m=o[h],y=u[m.index];if(!y){continue}var x=y.image.getSourceImage(),f=y.getTileTextureCoordinates(m.index);if(f){var T=y.tileWidth,v=y.tileHeight,b=T/2,E=v/2;c.save();c.translate(m.pixelX+b,m.pixelY+E);if(0!==m.rotation){c.rotate(m.rotation)}if(m.flipX||m.flipY){c.scale(m.flipX?-1:1,m.flipY?-1:1)}c.globalAlpha=g*m.alpha;c.drawImage(x,f.x,f.y,T,v,-b,-E,T,v);c.restore()}}c.restore()}},function(e,t,i){var a=i(16),n=i(224);a.register("tilemap",function(e){var t=e!==void 0?e:{};return n(this.scene,t.key,t.tileWidth,t.tileHeight,t.width,t.height,t.data,t.insertNull)})},function(e,t,i){var a=i(5),n=i(224);a.register("tilemap",function(e,t,i,a,r,o,s){if(null===e){e=void 0}if(null===t){t=void 0}if(null===i){i=void 0}if(null===a){a=void 0}if(null===r){r=void 0}return n(this.scene,e,t,i,a,r,o,s)})},function(e,t,i){e.exports={Clock:i(1342),TimerEvent:i(491)}},function(e,t,i){var a=i(0),n=i(23),r=i(19),o=i(491),s=new a({initialize:function(e){this.scene=e;this.systems=e.sys;this.now=0;this.timeScale=1;this.paused=!1;this._active=[];this._pendingInsertion=[];this._pendingRemoval=[];e.sys.events.once(r.BOOT,this.boot,this);e.sys.events.on(r.START,this.start,this)},boot:function boot(){this.now=this.systems.game.loop.time;this.systems.events.once(r.DESTROY,this.destroy,this)},start:function start(){var e=this.systems.events;e.on(r.PRE_UPDATE,this.preUpdate,this);e.on(r.UPDATE,this.update,this);e.once(r.SHUTDOWN,this.shutdown,this)},addEvent:function addEvent(e){var t=new o(e);this._pendingInsertion.push(t);return t},delayedCall:function delayedCall(e,t,i,a){return this.addEvent({delay:e,callback:t,args:i,callbackScope:a})},clearPendingEvents:function clearPendingEvents(){this._pendingInsertion=[];return this},removeAllEvents:function removeAllEvents(){this._pendingRemoval=this._pendingRemoval.concat(this._active);return this},preUpdate:function preUpdate(){var e=this._pendingRemoval.length,t=this._pendingInsertion.length;if(0===e&&0===t){return}var a,n;for(a=0;a<e;a++){n=this._pendingRemoval[a];var r=this._active.indexOf(n);if(-1<r){this._active.splice(r,1)}n.destroy()}for(a=0;a<t;a++){n=this._pendingInsertion[a];this._active.push(n)}this._pendingRemoval.length=0;this._pendingInsertion.length=0},update:function update(e,t){this.now=e;if(this.paused){return}t*=this.timeScale;for(var a=0,n;a<this._active.length;a++){n=this._active[a];if(n.paused){continue}n.elapsed+=t*n.timeScale;if(n.elapsed>=n.delay){var r=n.elapsed-n.delay;n.elapsed=n.delay;if(!n.hasDispatched&&n.callback){n.hasDispatched=!0;n.callback.apply(n.callbackScope,n.args)}if(0<n.repeatCount){n.repeatCount--;n.elapsed=r;n.hasDispatched=!1}else{this._pendingRemoval.push(n)}}}},shutdown:function shutdown(){var e;for(e=0;e<this._pendingInsertion.length;e++){this._pendingInsertion[e].destroy()}for(e=0;e<this._active.length;e++){this._active[e].destroy()}for(e=0;e<this._pendingRemoval.length;e++){this._pendingRemoval[e].destroy()}this._active.length=0;this._pendingRemoval.length=0;this._pendingInsertion.length=0;var t=this.systems.events;t.off(r.PRE_UPDATE,this.preUpdate,this);t.off(r.UPDATE,this.update,this);t.off(r.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown();this.scene.sys.events.off(r.START,this.start,this);this.scene=null;this.systems=null}});n.register("Clock",s,"time");e.exports=s},function(e,t,i){var a=i(89),n=i(17),r={Builders:i(1344),Events:i(229),TweenManager:i(1359),Tween:i(228),TweenData:i(230),Timeline:i(497)};r=n(!1,r,a);e.exports=r},function(e,t,i){e.exports={GetBoolean:i(88),GetEaseFunction:i(82),GetNewValue:i(142),GetProps:i(492),GetTargets:i(225),GetTweens:i(493),GetValueOp:i(226),NumberTweenBuilder:i(494),StaggerBuilder:i(495),TimelineBuilder:i(496),TweenBuilder:i(143)}},function(e){e.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(e){e.exports="complete"},function(e){e.exports="loop"},function(e){e.exports="pause"},function(e){e.exports="resume"},function(e){e.exports="start"},function(e){e.exports="update"},function(e){e.exports="active"},function(e){e.exports="complete"},function(e){e.exports="loop"},function(e){e.exports="repeat"},function(e){e.exports="start"},function(e){e.exports="update"},function(e){e.exports="yoyo"},function(e,t,i){var a=i(121),n=i(0),r=i(494),o=i(23),s=i(19),l=i(495),d=i(496),p=i(89),c=i(143),u=new n({initialize:function(e){this.scene=e;this.systems=e.sys;this.timeScale=1;this._add=[];this._pending=[];this._active=[];this._destroy=[];this._toProcess=0;e.sys.events.once(s.BOOT,this.boot,this);e.sys.events.on(s.START,this.start,this)},boot:function boot(){this.systems.events.once(s.DESTROY,this.destroy,this)},start:function start(){var e=this.systems.events;e.on(s.PRE_UPDATE,this.preUpdate,this);e.on(s.UPDATE,this.update,this);e.once(s.SHUTDOWN,this.shutdown,this);this.timeScale=1},createTimeline:function createTimeline(e){return d(this,e)},timeline:function(e){var t=d(this,e);if(!t.paused){this._add.push(t);this._toProcess++}return t},create:function create(e){return c(this,e)},add:function add(e){var t=c(this,e);this._add.push(t);this._toProcess++;return t},existing:function existing(e){this._add.push(e);this._toProcess++;return this},addCounter:function addCounter(e){var t=r(this,e);this._add.push(t);this._toProcess++;return t},stagger:function stagger(e,t){return l(e,t)},preUpdate:function preUpdate(){if(0===this._toProcess){return}var e=this._destroy,t=this._active,a=this._pending,n,r;for(n=0;n<e.length;n++){r=e[n];var o=t.indexOf(r);if(-1===o){o=a.indexOf(r);if(-1<o){r.state=p.REMOVED;a.splice(o,1)}}else{r.state=p.REMOVED;t.splice(o,1)}}e.length=0;e=this._add;for(n=0;n<e.length;n++){r=e[n];if(r.state===p.PENDING_ADD){if(r.init()){r.play();this._active.push(r)}else{this._pending.push(r)}}}e.length=0;this._toProcess=0},update:function update(e,t){var a=this._active,n;t*=this.timeScale;for(var r=0;r<a.length;r++){n=a[r];if(n.update(e,t)){this._destroy.push(n);this._toProcess++}}},remove:function remove(e){a(this._add,e);a(this._pending,e);a(this._active,e);a(this._destroy,e);e.state=p.REMOVED;return this},makeActive:function makeActive(e){if(-1!==this._add.indexOf(e)||-1!==this._active.indexOf(e)){return this}var t=this._pending.indexOf(e);if(-1!==t){this._pending.splice(t,1)}this._add.push(e);e.state=p.PENDING_ADD;this._toProcess++;return this},each:function each(e,t){for(var a=[null],n=1;n<arguments.length;n++){a.push(arguments[n])}for(var r in this.list){a[0]=this.list[r];e.apply(t,a)}},getAllTweens:function getAllTweens(){for(var e=this._active,t=[],a=0;a<e.length;a++){t.push(e[a])}return t},getGlobalTimeScale:function getGlobalTimeScale(){return this.timeScale},getTweensOf:function getTweensOf(e){var a=this._active,n,r=[],o;if(Array.isArray(e)){for(o=0;o<a.length;o++){n=a[o];for(var s=0;s<e.length;s++){if(n.hasTarget(e[s])){r.push(n)}}}}else{for(o=0;o<a.length;o++){n=a[o];if(n.hasTarget(e)){r.push(n)}}}return r},isTweening:function isTweening(e){for(var t=this._active,a,n=0;n<t.length;n++){a=t[n];if(a.hasTarget(e)&&a.isPlaying()){return!0}}return!1},killAll:function killAll(){for(var e=this.getAllTweens(),t=0;t<e.length;t++){e[t].stop()}return this},killTweensOf:function killTweensOf(e){for(var t=this.getTweensOf(e),a=0;a<t.length;a++){t[a].stop()}return this},pauseAll:function pauseAll(){for(var e=this._active,t=0;t<e.length;t++){e[t].pause()}return this},resumeAll:function resumeAll(){for(var e=this._active,t=0;t<e.length;t++){e[t].resume()}return this},setGlobalTimeScale:function setGlobalTimeScale(e){this.timeScale=e;return this},shutdown:function shutdown(){this.killAll();this._add=[];this._pending=[];this._active=[];this._destroy=[];this._toProcess=0;var e=this.systems.events;e.off(s.PRE_UPDATE,this.preUpdate,this);e.off(s.UPDATE,this.update,this);e.off(s.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown();this.scene.sys.events.off(s.START,this.start,this);this.scene=null;this.systems=null}});o.register("TweenManager",u,"tweens");e.exports=u},function(e,t,i){e.exports={Array:i(181),Base64:i(1361),Objects:i(1363),String:i(1367)}},function(e,t,i){e.exports={ArrayBufferToBase64:i(1362),Base64ToArrayBuffer:i(380)}},function(e){e.exports=function ArrayBufferToBase64(e,t){for(var a=new Uint8Array(e),n=a.length,r=t?"data:"+t+";base64,":"",o=0;o<n;o+=3){r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a[o]>>2];r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&a[o])<<4|a[o+1]>>4];r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&a[o+1])<<2|a[o+2]>>6];r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&a[o+2]]}if(2==n%3){r=r.substring(0,r.length-1)+"="}else if(1==n%3){r=r.substring(0,r.length-2)+"=="}return r}},function(e,t,i){e.exports={Clone:i(67),Extend:i(17),GetAdvancedValue:i(15),GetFastValue:i(2),GetMinMaxValue:i(1364),GetValue:i(6),HasAll:i(1365),HasAny:i(399),HasValue:i(99),IsPlainObject:i(7),Merge:i(107),MergeRight:i(1366),Pick:i(480),SetValue:i(419)}},function(e,t,i){var a=i(6),n=i(22);e.exports=function GetMinMaxValue(e,t,i,r,o){if(o===void 0){o=i}var s=a(e,t,o);return n(s,i,r)}},function(e){e.exports=function HasAll(e,t){for(var a=0;a<t.length;a++){if(!e.hasOwnProperty(t[a])){return!1}}return!0}},function(e,t,i){var a=i(67);e.exports=function MergeRight(e,t){var i=a(e);for(var n in t){if(i.hasOwnProperty(n)){i[n]=t[n]}}return i}},function(e,t,i){e.exports={Format:i(1368),Pad:i(160),Reverse:i(1369),UppercaseFirst:i(179),UUID:i(194)}},function(e){e.exports=function Format(e,t){return e.replace(/%([0-9]+)/g,function(e,i){return t[+i-1]})}},function(e){e.exports=function Reverse(e){return e.split("").reverse().join("")}},function(e,t,i){e.exports={SoundManagerCreator:i(374),Events:i(59),BaseSound:i(125),BaseSoundManager:i(124),WebAudioSound:i(381),WebAudioSoundManager:i(379),HTML5AudioSound:i(376),HTML5AudioSoundManager:i(375),NoAudioSound:i(378),NoAudioSoundManager:i(377)}},function(e,t,i){var a=i(0),n=i(465),r=i(1390),o=i(466),s=i(1391),l=new a({initialize:function(e,t,i,a,r){if(a===void 0){a=16}if(r===void 0){r=a}this.world=e;this.gameObject=null;this.enabled=!0;this.parent;this.id=e.getNextID();this.name="";this.size={x:a,y:r};this.offset={x:0,y:0};this.pos={x:t,y:i};this.last={x:t,y:i};this.vel={x:0,y:0};this.accel={x:0,y:0};this.friction={x:0,y:0};this.maxVel={x:e.defaults.maxVelocityX,y:e.defaults.maxVelocityY};this.standing=!1;this.gravityFactor=e.defaults.gravityFactor;this.bounciness=e.defaults.bounciness;this.minBounceVelocity=e.defaults.minBounceVelocity;this.accelGround=0;this.accelAir=0;this.jumpSpeed=0;this.type=o.NONE;this.checkAgainst=o.NONE;this.collides=n.NEVER;this.debugShowBody=e.defaults.debugShowBody;this.debugShowVelocity=e.defaults.debugShowVelocity;this.debugBodyColor=e.defaults.bodyDebugColor;this.updateCallback;this.slopeStanding={min:.767944870877505,max:2.3736477827122884}},reset:function reset(e,t){this.pos={x:e,y:t};this.last={x:e,y:t};this.vel={x:0,y:0};this.accel={x:0,y:0};this.friction={x:0,y:0};this.maxVel={x:100,y:100};this.standing=!1;this.gravityFactor=1;this.bounciness=0;this.minBounceVelocity=40;this.accelGround=0;this.accelAir=0;this.jumpSpeed=0;this.type=o.NONE;this.checkAgainst=o.NONE;this.collides=n.NEVER},update:function update(e){var t=this.pos;this.last.x=t.x;this.last.y=t.y;this.vel.y+=this.world.gravity*e*this.gravityFactor;this.vel.x=r(e,this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=r(e,this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var i=this.vel.x*e,a=this.vel.y*e,n=this.world.collisionMap.trace(t.x,t.y,i,a,this.size.x,this.size.y);if(this.handleMovementTrace(n)){s(this,n)}var o=this.gameObject;if(o){o.x=t.x-this.offset.x+o.displayOriginX*o.scaleX;o.y=t.y-this.offset.y+o.displayOriginY*o.scaleY}if(this.updateCallback){this.updateCallback(this)}},drawDebug:function drawDebug(e){var t=this.pos;if(this.debugShowBody){e.lineStyle(1,this.debugBodyColor,1);e.strokeRect(t.x,t.y,this.size.x,this.size.y)}if(this.debugShowVelocity){var i=t.x+this.size.x/2,a=t.y+this.size.y/2;e.lineStyle(1,this.world.defaults.velocityDebugColor,1);e.lineBetween(i,a,i+this.vel.x,a+this.vel.y)}},willDrawDebug:function willDrawDebug(){return this.debugShowBody||this.debugShowVelocity},skipHash:function skipHash(){return!this.enabled||0===this.type&&0===this.checkAgainst&&0===this.collides},touches:function touches(e){return!(this.pos.x>=e.pos.x+e.size.x||this.pos.x+this.size.x<=e.pos.x||this.pos.y>=e.pos.y+e.size.y||this.pos.y+this.size.y<=e.pos.y)},resetSize:function resetSize(e,t,i,a){this.pos.x=e;this.pos.y=t;this.size.x=i;this.size.y=a;return this},toJSON:function toJSON(){var e={name:this.name,size:{x:this.size.x,y:this.size.y},pos:{x:this.pos.x,y:this.pos.y},vel:{x:this.vel.x,y:this.vel.y},accel:{x:this.accel.x,y:this.accel.y},friction:{x:this.friction.x,y:this.friction.y},maxVel:{x:this.maxVel.x,y:this.maxVel.y},gravityFactor:this.gravityFactor,bounciness:this.bounciness,minBounceVelocity:this.minBounceVelocity,type:this.type,checkAgainst:this.checkAgainst,collides:this.collides};return e},fromJSON:function fromJSON(){},check:function check(){},collideWith:function collideWith(e,t){if(this.parent&&this.parent._collideCallback){this.parent._collideCallback.call(this.parent._callbackScope,this,e,t)}},handleMovementTrace:function handleMovementTrace(){return!0},destroy:function destroy(){this.world.remove(this);this.enabled=!1;this.world=null;this.gameObject=null;this.parent=null}});e.exports=l},function(e,t,i){var a=i(0),n=i(1395),r=new a({initialize:function(e,t){if(e===void 0){e=32}this.tilesize=e;this.data=Array.isArray(t)?t:[];this.width=Array.isArray(t)?t[0].length:0;this.height=Array.isArray(t)?t.length:0;this.lastSlope=55;this.tiledef=n},trace:function trace(e,t,a,n,r,o){var s={collision:{x:!1,y:!1,slope:!1},pos:{x:e+a,y:t+n},tile:{x:0,y:0}};if(!this.data){return s}var l=Math.ceil(Math.max(Math.abs(a),Math.abs(n))/this.tilesize);if(1<l){for(var d=a/l,p=n/l,c=0;c<l&&(d||p);c++){this.step(s,e,t,d,p,r,o,a,n,c);e=s.pos.x;t=s.pos.y;if(s.collision.x){d=0;a=0}if(s.collision.y){p=0;n=0}if(s.collision.slope){break}}}else{this.step(s,e,t,a,n,r,o,a,n,0)}return s},step:function step(e,i,a,n,r,o,s,l,d,p){var c=0,u,g,h=this.tilesize,m=this.width,y=this.height;if(n){var f=0<n?o:0,T=0>n?h:0,v=Math.max(Math.floor(a/h),0),b=Math.min(Math.ceil((a+s)/h),y);u=Math.floor((e.pos.x+f)/h);var E=Math.floor((i+f)/h);if(0<p||u===E||0>E||E>=m){E=-1}if(0<=u&&u<m){for(g=v;g<b;g++){if(-1!==E){c=this.data[g][E];if(1<c&&c<=this.lastSlope&&this.checkDef(e,c,i,a,l,d,o,s,E,g)){break}}c=this.data[g][u];if(1===c||c>this.lastSlope||1<c&&this.checkDef(e,c,i,a,l,d,o,s,u,g)){if(1<c&&c<=this.lastSlope&&e.collision.slope){break}e.collision.x=!0;e.tile.x=c;e.pos.x=u*h-f+T;i=e.pos.x;l=0;break}}}}if(r){var S=0<r?s:0,_=0>r?h:0,A=Math.max(Math.floor(e.pos.x/h),0),C=Math.min(Math.ceil((e.pos.x+o)/h),m);g=Math.floor((e.pos.y+S)/h);var w=Math.floor((a+S)/h);if(0<p||g===w||0>w||w>=y){w=-1}if(0<=g&&g<y){for(u=A;u<C;u++){if(-1!==w){c=this.data[w][u];if(1<c&&c<=this.lastSlope&&this.checkDef(e,c,i,a,l,d,o,s,u,w)){break}}c=this.data[g][u];if(1===c||c>this.lastSlope||1<c&&this.checkDef(e,c,i,a,l,d,o,s,u,g)){if(1<c&&c<=this.lastSlope&&e.collision.slope){break}e.collision.y=!0;e.tile.y=c;e.pos.y=g*h-S+_;break}}}}},checkDef:function checkDef(e,i,t,a,n,r,o,s,l,d){var p=this.tiledef[i];if(!p){return!1}var c=this.tilesize,u=(l+p[0])*c,g=(d+p[1])*c,h=(p[2]-p[0])*c,m=(p[3]-p[1])*c,y=p[4],x=t+n+(0>m?o:0)-u,f=a+r+(0<h?s:0)-g;if(0<h*f-m*x){if(0>n*-m+r*h){return y}var T=Math.sqrt(h*h+m*m),v=m/T,b=-h/T,E=x*v+f*b,S=v*E,_=b*E;if(S*S+_*_>=n*n+r*r){return y||.5>h*(f-r)-m*(x-n)}e.pos.x=t+n-S;e.pos.y=a+r-_;e.collision.slope={x:h,y:m,nx:v,ny:b};return!0}return!1}});e.exports=r},function(e,t,i){var a=i(0),n=i(1374),r=i(1375),o=i(1376),s=new a({initialize:function(e){this.world=e;this.sys=e.scene.sys},body:function body(e,t,i,a){return new n(this.world,e,t,i,a)},existing:function existing(e){var t=e.x-e.frame.centerX,i=e.y-e.frame.centerY,a=e.width,n=e.height;e.body=this.world.create(t,i,a,n);e.body.parent=e;e.body.gameObject=e;return e},image:function(e,t,i,a){var n=new r(this.world,e,t,i,a);this.sys.displayList.add(n);return n},sprite:function(e,t,i,a){var n=new o(this.world,e,t,i,a);this.sys.displayList.add(n);this.sys.updateList.add(n);return n},destroy:function destroy(){this.world=null;this.sys=null}});e.exports=s},function(e,t,i){var a=i(0),n=i(1279),r=new a({Mixins:[n.Acceleration,n.BodyScale,n.BodyType,n.Bounce,n.CheckAgainst,n.Collides,n.Debug,n.Friction,n.Gravity,n.Offset,n.SetGameObject,n.Velocity],initialize:function(e,t,i,a,n){this.body=e.create(t,i,a,n);this.body.parent=this;this.size=this.body.size;this.offset=this.body.offset;this.vel=this.body.vel;this.accel=this.body.accel;this.friction=this.body.friction;this.maxVel=this.body.maxVel}});e.exports=r},function(e,t,i){var a=i(0),n=i(1279),r=i(98),o=new a({Extends:r,Mixins:[n.Acceleration,n.BodyScale,n.BodyType,n.Bounce,n.CheckAgainst,n.Collides,n.Debug,n.Friction,n.Gravity,n.Offset,n.SetGameObject,n.Velocity],initialize:function(e,t,i,a,n){r.call(this,e.scene,t,i,a,n);this.body=e.create(t-this.frame.centerX,i-this.frame.centerY,this.width,this.height);this.body.parent=this;this.body.gameObject=this;this.size=this.body.size;this.offset=this.body.offset;this.vel=this.body.vel;this.accel=this.body.accel;this.friction=this.body.friction;this.maxVel=this.body.maxVel}});e.exports=o},function(e,t,i){var a=i(0),n=i(1279),r=i(69),o=new a({Extends:r,Mixins:[n.Acceleration,n.BodyScale,n.BodyType,n.Bounce,n.CheckAgainst,n.Collides,n.Debug,n.Friction,n.Gravity,n.Offset,n.SetGameObject,n.Velocity],initialize:function(e,t,i,a,n){r.call(this,e.scene,t,i,a,n);this.body=e.create(t-this.frame.centerX,i-this.frame.centerY,this.width,this.height);this.body.parent=this;this.body.gameObject=this;this.size=this.body.size;this.offset=this.body.offset;this.vel=this.body.vel;this.accel=this.body.accel;this.friction=this.body.friction;this.maxVel=this.body.maxVel}});e.exports=o},function(e,t,i){var a=i(1371),n=i(0),r=i(465),o=i(1372),s=i(9),l=i(1278),d=i(2),p=i(99),c=i(108),u=i(1409),g=i(31),h=i(466),m=new n({Extends:s,initialize:function(e,t){s.call(this);this.scene=e;this.bodies=new c;this.gravity=d(t,"gravity",0);this.cellSize=d(t,"cellSize",64);this.collisionMap=new o;this.timeScale=d(t,"timeScale",1);this.maxStep=d(t,"maxStep",.05);this.enabled=!0;this.drawDebug=d(t,"debug",!1);this.debugGraphic;var i=d(t,"maxVelocity",100);this.defaults={debugShowBody:d(t,"debugShowBody",!0),debugShowVelocity:d(t,"debugShowVelocity",!0),bodyDebugColor:d(t,"debugBodyColor",16711935),velocityDebugColor:d(t,"debugVelocityColor",65280),maxVelocityX:d(t,"maxVelocityX",i),maxVelocityY:d(t,"maxVelocityY",i),minBounceVelocity:d(t,"minBounceVelocity",40),gravityFactor:d(t,"gravityFactor",1),bounciness:d(t,"bounciness",0)};this.walls={left:null,right:null,top:null,bottom:null};this.delta=0;this._lastId=0;if(d(t,"setBounds",!1)){var a=t.setBounds;if("boolean"==typeof a){this.setBounds()}else{var n=d(a,"x",0),r=d(a,"y",0),l=d(a,"width",e.sys.scale.width),p=d(a,"height",e.sys.scale.height),u=d(a,"thickness",64),g=d(a,"left",!0),h=d(a,"right",!0),m=d(a,"top",!0),y=d(a,"bottom",!0);this.setBounds(n,r,l,p,u,g,h,m,y)}}if(this.drawDebug){this.createDebugGraphic()}},setCollisionMap:function setCollisionMap(e,t){if("string"==typeof e){var a=this.scene.cache.tilemap.get(e);if(!a||a.format!==g.WELTMEISTER){console.warn("The specified key does not correspond to a Weltmeister tilemap: "+e);return null}for(var n=a.data.layer,r,s=0;s<n.length;s++){if("collision"===n[s].name){r=n[s];break}}if(t===void 0){t=r.tilesize}this.collisionMap=new o(t,r.data)}else if(Array.isArray(e)){this.collisionMap=new o(t,e)}else{console.warn("Invalid Weltmeister collision map data: "+e)}return this.collisionMap},setCollisionMapFromTilemapLayer:function setCollisionMapFromTilemapLayer(e,t){if(t===void 0){t={}}for(var i=d(t,"slopeProperty",null),a=d(t,"slopeMap",null),n=d(t,"defaultCollidingSlope",null),r=d(t,"defaultNonCollidingSlope",0),s=e.layer,l=s.baseTileWidth,c=[],u=0;u<s.height;u++){c[u]=[];for(var g=0,h;g<s.width;g++){h=s.data[u][g];if(h&&h.collides){if(null!==i&&p(h.properties,i)){c[u][g]=parseInt(h.properties[i],10)}else if(null!==a&&p(a,h.index)){c[u][g]=a[h.index]}else if(null!==n){c[u][g]=n}else{c[u][g]=h.index}}else{c[u][g]=r}}}this.collisionMap=new o(l,c);return this.collisionMap},setBounds:function setBounds(e,t,i,a,n,r,o,s,l){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=this.scene.sys.scale.width}if(a===void 0){a=this.scene.sys.scale.height}if(n===void 0){n=64}if(r===void 0){r=!0}if(o===void 0){o=!0}if(s===void 0){s=!0}if(l===void 0){l=!0}this.updateWall(r,"left",e-n,t,n,a);this.updateWall(o,"right",e+i,t,n,a);this.updateWall(s,"top",e,t-n,i,n);this.updateWall(l,"bottom",e,t+a,i,n);return this},updateWall:function updateWall(e,t,i,a,n,o){var s=this.walls[t];if(e){if(s){s.resetSize(i,a,n,o)}else{this.walls[t]=this.create(i,a,n,o);this.walls[t].name=t;this.walls[t].gravityFactor=0;this.walls[t].collides=r.FIXED}}else{if(s){this.bodies.remove(s)}this.walls[t]=null}},createDebugGraphic:function createDebugGraphic(){var e=this.scene.sys.add.graphics({x:0,y:0});e.setDepth(Number.MAX_VALUE);this.debugGraphic=e;this.drawDebug=!0;return e},getNextID:function getNextID(){return this._lastId++},create:function create(e,t,i,n){var r=new a(this,e,t,i,n);this.bodies.set(r);return r},remove:function remove(e){this.bodies.delete(e)},pause:function pause(){this.enabled=!1;this.emit(l.PAUSE);return this},resume:function resume(){this.enabled=!0;this.emit(l.RESUME);return this},update:function update(e,t){if(!this.enabled||0===this.bodies.size){return}var a=Math.min(t/1e3,this.maxStep)*this.timeScale;this.delta=a;var n,r,o=this.bodies.entries,s=o.length,l={},d=this.cellSize;for(n=0;n<s;n++){r=o[n];if(r.enabled){r.update(a)}}for(n=0;n<s;n++){r=o[n];if(r&&!r.skipHash()){this.checkHash(r,l,d)}}if(this.drawDebug){var p=this.debugGraphic;p.clear();for(n=0;n<s;n++){r=o[n];if(r&&r.willDrawDebug()){r.drawDebug(p)}}}},checkHash:function checkHash(e,t,i){for(var a={},n=Math.floor(e.pos.x/i),r=Math.floor(e.pos.y/i),o=Math.floor((e.pos.x+e.size.x)/i)+1,s=Math.floor((e.pos.y+e.size.y)/i)+1,l=n;l<o;l++){for(var d=r;d<s;d++){if(!t[l]){t[l]={};t[l][d]=[e]}else if(!t[l][d]){t[l][d]=[e]}else{for(var p=t[l][d],u=0;u<p.length;u++){if(e.touches(p[u])&&!a[p[u].id]){a[p[u].id]=!0;this.checkBodies(e,p[u])}}p.push(e)}}}},checkBodies:function checkBodies(e,t){if(e.collides===r.FIXED&&t.collides===r.FIXED){return}if(e.checkAgainst&t.type){e.check(t)}if(t.checkAgainst&e.type){t.check(e)}if(e.collides&&t.collides&&e.collides+t.collides>r.ACTIVE){u(this,e,t)}},setCollidesNever:function setCollidesNever(e){for(var t=0;t<e.length;t++){e[t].collides=r.NEVER}return this},setLite:function setLite(e){for(var t=0;t<e.length;t++){e[t].collides=r.LITE}return this},setPassive:function setPassive(e){for(var t=0;t<e.length;t++){e[t].collides=r.PASSIVE}return this},setActive:function setActive(e){for(var t=0;t<e.length;t++){e[t].collides=r.ACTIVE}return this},setFixed:function setFixed(e){for(var t=0;t<e.length;t++){e[t].collides=r.FIXED}return this},setTypeNone:function setTypeNone(e){for(var t=0;t<e.length;t++){e[t].type=h.NONE}return this},setTypeA:function setTypeA(e){for(var t=0;t<e.length;t++){e[t].type=h.A}return this},setTypeB:function setTypeB(e){for(var t=0;t<e.length;t++){e[t].type=h.B}return this},setAvsB:function setAvsB(e){for(var t=0;t<e.length;t++){e[t].type=h.A;e[t].checkAgainst=h.B}return this},setBvsA:function setBvsA(e){for(var t=0;t<e.length;t++){e[t].type=h.B;e[t].checkAgainst=h.A}return this},setCheckAgainstNone:function setCheckAgainstNone(e){for(var t=0;t<e.length;t++){e[t].checkAgainst=h.NONE}return this},setCheckAgainstA:function setCheckAgainstA(e){for(var t=0;t<e.length;t++){e[t].checkAgainst=h.A}return this},setCheckAgainstB:function setCheckAgainstB(e){for(var t=0;t<e.length;t++){e[t].checkAgainst=h.B}return this},shutdown:function shutdown(){this.removeAllListeners()},destroy:function destroy(){this.removeAllListeners();this.scene=null;this.bodies.clear();this.bodies=null;this.collisionMap=null}});e.exports=m},function(e,t,i){var a=i(0),n=i(3),r=new a({initialize:function(){this.boundsCenter=new n;this.centerDiff=new n},parseBody:function parseBody(e){e=e.hasOwnProperty("body")?e.body:e;if(!e.hasOwnProperty("bounds")||!e.hasOwnProperty("centerOfMass")){return!1}var t=this.boundsCenter,i=this.centerDiff,a=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,r=a*e.centerOfMass.x,o=n*e.centerOfMass.y;t.set(a/2,n/2);i.set(r-t.x,o-t.y);return!0},getTopLeft:function getTopLeft(e,t,i){if(t===void 0){t=0}if(i===void 0){i=0}if(this.parseBody(e)){var a=this.boundsCenter,r=this.centerDiff;return new n(t+a.x+r.x,i+a.y+r.y)}return!1},getTopCenter:function getTopCenter(e,t,i){if(t===void 0){t=0}if(i===void 0){i=0}if(this.parseBody(e)){var a=this.boundsCenter,r=this.centerDiff;return new n(t+r.x,i+a.y+r.y)}return!1},getTopRight:function getTopRight(e,t,i){if(t===void 0){t=0}if(i===void 0){i=0}if(this.parseBody(e)){var a=this.boundsCenter,r=this.centerDiff;return new n(t-(a.x-r.x),i+a.y+r.y)}return!1},getLeftCenter:function getLeftCenter(e,t,i){if(t===void 0){t=0}if(i===void 0){i=0}if(this.parseBody(e)){var a=this.boundsCenter,r=this.centerDiff;return new n(t+a.x+r.x,i+r.y)}return!1},getCenter:function getCenter(e,t,i){if(t===void 0){t=0}if(i===void 0){i=0}if(this.parseBody(e)){var a=this.centerDiff;return new n(t+a.x,i+a.y)}return!1},getRightCenter:function getRightCenter(e,t,i){if(t===void 0){t=0}if(i===void 0){i=0}if(this.parseBody(e)){var a=this.boundsCenter,r=this.centerDiff;return new n(t-(a.x-r.x),i+r.y)}return!1},getBottomLeft:function getBottomLeft(e,t,i){if(t===void 0){t=0}if(i===void 0){i=0}if(this.parseBody(e)){var a=this.boundsCenter,r=this.centerDiff;return new n(t+a.x+r.x,i-(a.y-r.y))}return!1},getBottomCenter:function getBottomCenter(e,t,i){if(t===void 0){t=0}if(i===void 0){i=0}if(this.parseBody(e)){var a=this.boundsCenter,r=this.centerDiff;return new n(t+r.x,i-(a.y-r.y))}return!1},getBottomRight:function getBottomRight(e,t,i){if(t===void 0){t=0}if(i===void 0){i=0}if(this.parseBody(e)){var a=this.boundsCenter,r=this.centerDiff;return new n(t-(a.x-r.x),i-(a.y-r.y))}return!1}});e.exports=r},function(e,t,i){var a=i(109),n=i(0),r=i(1280),o=i(216),s=i(1281),l=i(1413),d=i(1381),p=i(1382),c=i(1285),u=i(1282),g=i(1283),h=i(1442),m=i(86),y=new n({initialize:function(e){this.world=e;this.scene=e.scene;this.sys=e.scene.sys},rectangle:function rectangle(e,t,i,n,r){var o=a.rectangle(e,t,i,n,r);this.world.add(o);return o},trapezoid:function trapezoid(e,t,i,n,r,o){var s=a.trapezoid(e,t,i,n,r,o);this.world.add(s);return s},circle:function circle(e,t,i,n,r){var o=a.circle(e,t,i,n,r);this.world.add(o);return o},polygon:function polygon(e,t,i,n,r){var o=a.polygon(e,t,i,n,r);this.world.add(o);return o},fromVertices:function fromVertices(e,t,i,n,r,o,s){if("string"==typeof i){i=m.fromPath(i)}var l=a.fromVertices(e,t,i,n,r,o,s);this.world.add(l);return l},fromPhysicsEditor:function fromPhysicsEditor(e,t,i,a,n){if(n===void 0){n=!0}var r=u.parseBody(e,t,i,a);if(n&&!this.world.has(r)){this.world.add(r)}return r},fromSVG:function fromSVG(e,t,n,r,o,l){if(r===void 0){r=1}if(o===void 0){o={}}if(l===void 0){l=!0}for(var d=n.getElementsByTagName("path"),p=[],c=0,u;c<d.length;c++){u=s.pathToVertices(d[c],30);if(1!==r){m.scale(u,r,r)}p.push(u)}var g=a.fromVertices(e,t,p,o);if(l){this.world.add(g)}return g},fromJSON:function fromJSON(e,t,i,a,n){if(a===void 0){a={}}if(n===void 0){n=!0}var r=g.parseBody(e,t,i,a);if(r&&n){this.world.add(r)}return r},imageStack:function imageStack(e,t,i,a,n,o,s,l,p){if(s===void 0){s=0}if(l===void 0){l=0}if(p===void 0){p={}}var c=this.world,u=this.sys.displayList;p.addToWorld=!1;var g=r.stack(i,a,n,o,s,l,function(i,a){var n=new d(c,i,a,e,t,p);u.add(n);return n.body});c.add(g);return g},stack:function(e,t,i,a,n,o,s){var l=r.stack(e,t,i,a,n,o,s);this.world.add(l);return l},pyramid:function pyramid(e,t,i,a,n,o,s){var l=r.pyramid(e,t,i,a,n,o,s);this.world.add(l);return l},chain:function chain(e,t,i,a,n,o){return r.chain(e,t,i,a,n,o)},mesh:function mesh(e,t,i,a,n){return r.mesh(e,t,i,a,n)},newtonsCradle:function newtonsCradle(e,t,i,a,n){var o=r.newtonsCradle(e,t,i,a,n);this.world.add(o);return o},car:function car(e,t,i,a,n){var o=r.car(e,t,i,a,n);this.world.add(o);return o},softBody:function softBody(e,t,i,a,n,o,s,l,d,p){var c=r.softBody(e,t,i,a,n,o,s,l,d,p);this.world.add(c);return c},joint:function joint(e,t,i,a,n){return this.constraint(e,t,i,a,n)},spring:function spring(e,t,i,a,n){return this.constraint(e,t,i,a,n)},constraint:function(e,t,i,a,n){if(a===void 0){a=1}if(n===void 0){n={}}n.bodyA="body"===e.type?e:e.body;n.bodyB="body"===t.type?t:t.body;if(!isNaN(i)){n.length=i}n.stiffness=a;var r=o.create(n);this.world.add(r);return r},worldConstraint:function worldConstraint(e,t,i,a){if(i===void 0){i=1}if(a===void 0){a={}}a.bodyB="body"===e.type?e:e.body;if(!isNaN(t)){a.length=t}a.stiffness=i;var n=o.create(a);this.world.add(n);return n},mouseSpring:function mouseSpring(e){return this.pointerConstraint(e)},pointerConstraint:function(e){if(e===void 0){e={}}if(!e.hasOwnProperty("render")){e.render={visible:!1}}var t=new h(this.scene,this.world,e);this.world.add(t.constraint);return t},image:function(e,t,i,a,n){var r=new d(this.world,e,t,i,a,n);this.sys.displayList.add(r);return r},tileBody:function tileBody(e,t){return new c(this.world,e,t)},sprite:function(e,t,i,a,n){var r=new p(this.world,e,t,i,a,n);this.sys.displayList.add(r);this.sys.updateList.add(r);return r},gameObject:function gameObject(e,t,i){return l(this.world,e,t,i)},destroy:function destroy(){this.world=null;this.scene=null;this.sys=null}});e.exports=y},function(e){e.exports={decomp:function(e){var t=E(e);if(0<t.length){return S(e,t)}else{return[e]}},quickDecomp:A,isSimple:function(e){var t=e,a;for(a=0;a<t.length-1;a++){for(var r=0;r<a-1;r++){if(n(t[a],t[a+1],t[r],t[r+1])){return!1}}}for(a=1;a<t.length-2;a++){if(n(t[0],t[t.length-1],t[a],t[a+1])){return!1}}return!0},removeCollinearPoints:function(e,t){for(var a=0,n=e.length-1;3<e.length&&0<=n;--n){if(u(h(e,n-1),h(e,n),h(e,n+1),t)){e.splice(n%e.length,1);a++}}return a},removeDuplicatePoints:function(e,t){for(var a=e.length-1,n;1<=a;--a){n=e[a];for(var r=a-1;0<=r;--r){if(w(n,e[r],t)){e.splice(a,1);continue}}}},makeCCW:function(e){for(var t=0,a=e,n=1;n<e.length;++n){if(a[n][1]<a[t][1]||a[n][1]===a[t][1]&&a[n][0]>a[t][0]){t=n}}if(!o(h(e,t-1),h(e,t),h(e,t+1))){x(e);return!0}else{return!1}}};function t(e,t,a){a=a||0;var n=[0,0],i,r,o,s,l,d,p;i=e[1][1]-e[0][1];r=e[0][0]-e[1][0];o=i*e[0][0]+r*e[0][1];s=t[1][1]-t[0][1];l=t[0][0]-t[1][0];d=s*t[0][0]+l*t[0][1];p=i*l-s*r;if(!C(p,0,a)){n[0]=(l*o-r*d)/p;n[1]=(i*d-s*o)/p}return n}function n(e,i,a,n){var r=i[0]-e[0],o=i[1]-e[1],l=n[0]-a[0],d=n[1]-a[1];if(0==l*o-d*r){return!1}var p=(r*(a[1]-e[1])+o*(e[0]-a[0]))/(l*o-d*r),s=(l*(e[1]-a[1])+d*(a[0]-e[0]))/(d*r-l*o);return 0<=p&&1>=p&&0<=s&&1>=s}function r(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1])}function o(e,t,i){return 0<r(e,t,i)}function s(e,t,i){return 0<=r(e,t,i)}function l(e,t,i){return 0>r(e,t,i)}function c(e,t,i){return 0>=r(e,t,i)}var P=[],O=[];function u(e,t,i,a){if(!a){return 0===r(e,t,i)}else{var n=P,o=O;n[0]=t[0]-e[0];n[1]=t[1]-e[1];o[0]=i[0]-t[0];o[1]=i[1]-t[1];var s=n[0]*o[0]+n[1]*o[1],l=Math.sqrt(n[0]*n[0]+n[1]*n[1]),d=Math.sqrt(o[0]*o[0]+o[1]*o[1]),p=Math.acos(s/(l*d));return p<a}}function g(e,t){var i=t[0]-e[0],a=t[1]-e[1];return i*i+a*a}function h(e,t){var i=e.length;return e[0>t?t%i+i:t%i]}function m(e){e.length=0}function y(e,t,a,n){for(var r=a;r<n;r++){e.push(t[r])}}function x(e){for(var t=[],a=e.length,n=0;n!==a;n++){t.push(e.pop())}for(var n=0;n!==a;n++){e[n]=t[n]}}function f(e,t){return l(h(e,t-1),h(e,t),h(e,t+1))}var R=[],L=[];function T(e,n,a){var r,o,l=R,d=L;if(s(h(e,n+1),h(e,n),h(e,a))&&c(h(e,n-1),h(e,n),h(e,a))){return!1}o=g(h(e,n),h(e,a));for(var u=0;u!==e.length;++u){if((u+1)%e.length===n||u===n){continue}if(s(h(e,n),h(e,a),h(e,u+1))&&c(h(e,n),h(e,a),h(e,u))){l[0]=h(e,n);l[1]=h(e,a);d[0]=h(e,u);d[1]=h(e,u+1);r=t(l,d);if(g(h(e,n),r)<o){return!1}}}return!0}function v(e,t,a){for(var r=0;r!==e.length;++r){if(r===t||r===a||(r+1)%e.length===t||(r+1)%e.length===a){continue}if(n(h(e,t),h(e,a),h(e,r),h(e,r+1))){return!1}}return!0}function b(e,t,i,a){var n=a||[];m(n);if(t<i){for(var r=t;r<=i;r++){n.push(e[r])}}else{for(var r=0;r<=i;r++){n.push(e[r])}for(var r=t;r<e.length;r++){n.push(e[r])}}return n}function E(e){for(var t=[],a=[],n=[],r=[],o=Number.MAX_VALUE,s=0;s<e.length;++s){if(f(e,s)){for(var l=0;l<e.length;++l){if(T(e,s,l)){a=E(b(e,s,l,r));n=E(b(e,l,s,r));for(var d=0;d<n.length;d++){a.push(n[d])}if(a.length<o){t=a;o=a.length;t.push([h(e,s),h(e,l)])}}}}}return t}function S(e,t){if(0===t.length){return[e]}if(t instanceof Array&&t.length&&t[0]instanceof Array&&2===t[0].length&&t[0][0]instanceof Array){for(var a=[e],n=0,r;n<t.length;n++){r=t[n];for(var o=0;o<a.length;o++){var s=a[o],l=S(s,r);if(l){a.splice(o,1);a.push(l[0],l[1]);break}}}return a}else{var r=t,n=e.indexOf(r[0]),o=e.indexOf(r[1]);if(-1!==n&&-1!==o){return[b(e,n,o),b(e,o,n)]}else{return!1}}}function _(e,t,i,a,n){n=n||0;var r=t[1]-e[1],o=e[0]-t[0],s=r*e[0]+o*e[1],l=a[1]-i[1],d=i[0]-a[0],p=l*i[0]+d*i[1],c=r*d-l*o;if(!C(c,0,n)){return[(d*s-o*p)/c,(r*p-l*s)/c]}else{return[0,0]}}function A(e,t,a,n,r,u,m){u=u||100;m=m||0;r=r||25;t="undefined"!=typeof t?t:[];a=a||[];n=n||[];var x=[0,0],T=[0,0],b=[0,0],E=0,S=0,C=0,w=0,P=0,O=0,R=0,L=[],k=[],D=e,F=e;if(3>F.length){return t}m++;if(m>u){console.warn("quickDecomp: max level ("+u+") reached.");return t}for(var I=0;I<e.length;++I){if(f(D,I)){a.push(D[I]);E=S=Number.MAX_VALUE;for(var M=0;M<e.length;++M){if(o(h(D,I-1),h(D,I),h(D,M))&&c(h(D,I-1),h(D,I),h(D,M-1))){b=_(h(D,I-1),h(D,I),h(D,M),h(D,M-1));if(l(h(D,I+1),h(D,I),b)){C=g(D[I],b);if(C<S){S=C;T=b;O=M}}}if(o(h(D,I+1),h(D,I),h(D,M+1))&&c(h(D,I+1),h(D,I),h(D,M))){b=_(h(D,I+1),h(D,I),h(D,M),h(D,M+1));if(o(h(D,I-1),h(D,I),b)){C=g(D[I],b);if(C<E){E=C;x=b;P=M}}}}if(O===(P+1)%e.length){b[0]=(T[0]+x[0])/2;b[1]=(T[1]+x[1])/2;n.push(b);if(I<P){y(L,D,I,P+1);L.push(b);k.push(b);if(0!==O){y(k,D,O,D.length)}y(k,D,0,I+1)}else{if(0!=I){y(L,D,I,D.length)}y(L,D,0,P+1);L.push(b);k.push(b);y(k,D,O,I+1)}}else{if(O>P){P+=e.length}w=Number.MAX_VALUE;if(P<O){return t}for(var M=O;M<=P;++M){if(s(h(D,I-1),h(D,I),h(D,M))&&c(h(D,I+1),h(D,I),h(D,M))){C=g(h(D,I),h(D,M));if(C<w&&v(D,I,M)){w=C;R=M%e.length}}}if(I<R){y(L,D,I,R+1);if(0!==R){y(k,D,R,F.length)}y(k,D,0,I+1)}else{if(0!=I){y(L,D,I,F.length)}y(L,D,0,R+1);y(k,D,R,I+1)}}if(L.length<k.length){A(L,t,a,n,r,u,m);A(k,t,a,n,r,u,m)}else{A(k,t,a,n,r,u,m);A(L,t,a,n,r,u,m)}return t}}t.push(e);return t}function C(e,t,i){i=i||0;return Math.abs(e-t)<=i}function w(e,t,i){return C(e[0],t[0],i)&&C(e[1],t[1],i)}},function(e,t,i){var a=i(0),n=i(508),r=i(14),o=i(2),s=i(98),l=i(153),d=i(3),p=new a({Extends:s,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,l],initialize:function(e,t,i,a,n,s){r.call(this,e.scene,"Image");this.setTexture(a,n);this.setSizeToFrame();this.setOrigin();this.world=e;this._tempVec2=new d(t,i);var l=o(s,"shape",null);if(l){this.setBody(l,s)}else{this.setRectangle(this.width,this.height,s)}this.setPosition(t,i);this.initPipeline("TextureTintPipeline")}});e.exports=p},function(e,t,i){var a=i(498),n=i(0),r=i(508),o=i(14),s=i(2),l=i(153),d=i(69),p=i(3),c=new n({Extends:d,Mixins:[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity,l],initialize:function(e,t,i,n,r,l){o.call(this,e.scene,"Sprite");this.anims=new a(this);this.setTexture(n,r);this.setSizeToFrame();this.setOrigin();this.world=e;this._tempVec2=new p(t,i);var d=s(l,"shape",null);if(d){this.setBody(d,l)}else{this.setRectangle(this.width,this.height,l)}this.setPosition(t,i);this.initPipeline("TextureTintPipeline")}});e.exports=c},function(e,t,i){var a={};e.exports=a;var n=i(1287),r=i(37);(function(){a.name="matter-js";a.version="0.14.2";a.uses=[];a.used=[];a.use=function(){n.use(a,Array.prototype.slice.call(arguments))};a.before=function(e,t){e=e.replace(/^Matter./,"");return r.chainPathBefore(a,e,t)};a.after=function(e,t){e=e.replace(/^Matter./,"");return r.chainPathAfter(a,e,t)}})()},function(e,t,i){var a={};e.exports=a;var n=i(101),r=i(510),o=i(102),s=i(109),l=i(86);(function(){a.collides=function(e,t){for(var a=[],n=0,s;n<t.length;n++){s=t[n];if(e===s){continue}if(o.overlaps(s.bounds,e.bounds)){for(var l=1===s.parts.length?0:1,d;l<s.parts.length;l++){d=s.parts[l];if(o.overlaps(d.bounds,e.bounds)){var p=r.collides(d,e);if(p.collided){a.push(p);break}}}}}return a};a.ray=function(e,t,r,o){o=o||1e-100;for(var l=n.angle(t,r),d=n.magnitude(n.sub(t,r)),p=.5*(r.x+t.x),c=.5*(r.y+t.y),u=s.rectangle(p,c,d,o,{angle:l}),g=a.collides(u,e),h=0,m;h<g.length;h+=1){m=g[h];m.body=m.bodyB=m.bodyA}return g};a.region=function(e,t,a){for(var n=[],r=0;r<e.length;r++){var s=e[r],l=o.overlaps(s.bounds,t);if(l&&!a||!l&&a)n.push(s)}return n};a.point=function(e,t){for(var a=[],n=0,r;n<e.length;n++){r=e[n];if(o.contains(r.bounds,t)){for(var s=1===r.parts.length?0:1,d;s<r.parts.length;s++){d=r.parts[s];if(o.contains(d.bounds,t)&&l.contains(d.vertices,t)){a.push(r);break}}}}return a}})()},function(e,t,i){var a={};e.exports=a;var n=i(1288),r=i(236),o=i(1291),s=i(1290),l=i(1443),d=i(1289),p=i(237),c=i(145),u=i(216),g=i(37),h=i(62);(function(){a.create=function(e,t){t=g.isElement(e)?t:e;e=g.isElement(e)?e:null;t=t||{};if(e||t.render){g.warn("Engine.create: engine.render is deprecated (see docs)")}var i=g.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:d}},t);i.world=t.world||n.create(i.world);i.pairs=s.create();i.broadphase=i.broadphase.controller.create(i.broadphase);i.metrics=i.metrics||{extended:!1};i.metrics=l.create(i.metrics);return i};a.update=function(e,t,n){t=t||1e3/60;n=n||1;var d=e.world,g=e.timing,h=e.broadphase,m=[],y;g.timestamp+=t*g.timeScale;var x={timestamp:g.timestamp};p.trigger(e,"beforeUpdate",x);var f=c.allBodies(d),T=c.allConstraints(d);l.reset(e.metrics);if(e.enableSleeping)r.update(f,g.timeScale);a._bodiesApplyGravity(f,d.gravity);a._bodiesUpdate(f,t,g.timeScale,n,d.bounds);u.preSolveAll(f);for(y=0;y<e.constraintIterations;y++){u.solveAll(T,g.timeScale)}u.postSolveAll(f);if(h.controller){if(d.isModified)h.controller.clear(h);h.controller.update(h,f,e,d.isModified);m=h.pairsList}else{m=f}if(d.isModified){c.setModified(d,!1,!1,!0)}var v=h.detector(m,e),b=e.pairs,E=g.timestamp;s.update(b,v,E);s.removeOld(b,E);if(e.enableSleeping)r.afterCollisions(b.list,g.timeScale);if(0<b.collisionStart.length)p.trigger(e,"collisionStart",{pairs:b.collisionStart});o.preSolvePosition(b.list);for(y=0;y<e.positionIterations;y++){o.solvePosition(b.list,f,g.timeScale)}o.postSolvePosition(f);u.preSolveAll(f);for(y=0;y<e.constraintIterations;y++){u.solveAll(T,g.timeScale)}u.postSolveAll(f);o.preSolveVelocity(b.list);for(y=0;y<e.velocityIterations;y++){o.solveVelocity(b.list,g.timeScale)}if(0<b.collisionActive.length)p.trigger(e,"collisionActive",{pairs:b.collisionActive});if(0<b.collisionEnd.length)p.trigger(e,"collisionEnd",{pairs:b.collisionEnd});l.update(e.metrics,e);a._bodiesClearForces(f);p.trigger(e,"afterUpdate",x);return e};a.merge=function(e,t){g.extend(e,t);if(t.world){e.world=t.world;a.clear(e);for(var n=c.allBodies(e.world),o=0,s;o<n.length;o++){s=n[o];r.set(s,!1);s.id=g.nextId()}}};a.clear=function(e){var t=e.world;s.clear(e.pairs);var i=e.broadphase;if(i.controller){var a=c.allBodies(t);i.controller.clear(i);i.controller.update(i,a,e,!0)}};a._bodiesClearForces=function(e){for(var t=0,a;t<e.length;t++){a=e[t];a.force.x=0;a.force.y=0;a.torque=0}};a._bodiesApplyGravity=function(e,t){var a="undefined"!=typeof t.scale?t.scale:.001;if(0===t.x&&0===t.y||0===a){return}for(var n=0,r;n<e.length;n++){r=e[n];if(r.ignoreGravity||r.isStatic||r.isSleeping)continue;r.force.x+=r.mass*t.x*a*r.gravityScale.x;r.force.y+=r.mass*t.y*a*r.gravityScale.y}};a._bodiesUpdate=function(e,t,a,n){for(var r=0,o;r<e.length;r++){o=e[r];if(o.isStatic||o.isSleeping)continue;h.update(o,t,a,n)}}})()},function(e,t,i){var a=i(109),n=i(62),r=i(0),o=i(37),s=i(145),l=i(1385),d=i(9),p=i(1284),c=i(2),u=i(6),g=i(62),h=i(237),m=i(1285),f=i(1288),T=i(101),v=new r({Extends:d,initialize:function(e,t){d.call(this);this.scene=e;this.engine=l.create(t);this.localWorld=this.engine.world;var i=u(t,"gravity",null);if(i){this.setGravity(i.x,i.y,i.scale)}else if(!1===i){this.setGravity(0,0,0)}this.walls={left:null,right:null,top:null,bottom:null};this.enabled=u(t,"enabled",!0);this.correction=u(t,"correction",1);this.getDelta=u(t,"getDelta",this.update60Hz);var a=c(t,"runner",{}),n=c(a,"fps",!1),r=c(a,"fps",60),o=c(a,"delta",1e3/r),s=c(a,"deltaMin",1e3/r),p=c(a,"deltaMax",1e3/(.5*r));if(!n){r=1e3/o}this.runner={fps:r,correction:c(a,"correction",1),deltaSampleSize:c(a,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:c(a,"isFixed",!1),delta:o,deltaMin:s,deltaMax:p};this.autoUpdate=u(t,"autoUpdate",!0);var g=u(t,"debug",!1);this.drawDebug="object"===_typeof(g)?!0:g;this.debugGraphic;this.debugConfig={showAxes:c(g,"showAxes",!1),showAngleIndicator:c(g,"showAngleIndicator",!1),angleColor:c(g,"angleColor",15208787),showBroadphase:c(g,"showBroadphase",!1),broadphaseColor:c(g,"broadphaseColor",16757760),showBounds:c(g,"showBounds",!1),boundsColor:c(g,"boundsColor",16777215),showVelocity:c(g,"showVelocity",!1),velocityColor:c(g,"velocityColor",44783),showCollisions:c(g,"showCollisions",!1),collisionColor:c(g,"collisionColor",16094476),showSeparations:c(g,"showSeparations",!1),separationColor:c(g,"separationColor",16753920),showBody:c(g,"showBody",!0),showStaticBody:c(g,"showStaticBody",!0),showInternalEdges:c(g,"showInternalEdges",!1),renderFill:c(g,"renderFill",!1),renderLine:c(g,"renderLine",!0),fillColor:c(g,"fillColor",1075465),fillOpacity:c(g,"fillOpacity",1),lineColor:c(g,"lineColor",2678297),lineOpacity:c(g,"lineOpacity",1),lineThickness:c(g,"lineThickness",1),staticFillColor:c(g,"staticFillColor",857979),staticLineColor:c(g,"staticLineColor",1255396),showSleeping:c(g,"showSleeping",!1),staticBodySleepOpacity:c(g,"staticBodySleepOpacity",.7),sleepFillColor:c(g,"sleepFillColor",4605510),sleepLineColor:c(g,"sleepLineColor",10066585),showSensors:c(g,"showSensors",!0),sensorFillColor:c(g,"sensorFillColor",857979),sensorLineColor:c(g,"sensorLineColor",1255396),showPositions:c(g,"showPositions",!0),positionSize:c(g,"positionSize",4),positionColor:c(g,"positionColor",14697178),showJoint:c(g,"showJoint",!0),jointColor:c(g,"jointColor",14737474),jointLineOpacity:c(g,"jointLineOpacity",1),jointLineThickness:c(g,"jointLineThickness",2),pinSize:c(g,"pinSize",4),pinColor:c(g,"pinColor",4382944),springColor:c(g,"springColor",14697184),anchorColor:c(g,"anchorColor",15724527),anchorSize:c(g,"anchorSize",4),showConvexHulls:c(g,"showConvexHulls",!1),hullColor:c(g,"hullColor",14091216)};if(this.drawDebug){this.createDebugGraphic()}this.setEventsProxy();if(c(t,"setBounds",!1)){var h=t.setBounds;if("boolean"==typeof h){this.setBounds()}else{var m=c(h,"x",0),x=c(h,"y",0),y=c(h,"width",e.sys.scale.width),f=c(h,"height",e.sys.scale.height),T=c(h,"thickness",64),v=c(h,"left",!0),b=c(h,"right",!0),E=c(h,"top",!0),S=c(h,"bottom",!0);this.setBounds(m,x,y,f,T,v,b,E,S)}}},setCompositeRenderStyle:function setCompositeRenderStyle(e){var t=e.bodies,a=e.constraints,n=e.composites,r,o,s;for(r=0;r<t.length;r++){o=t[r];s=o.render;this.setBodyRenderStyle(o,s.lineColor,s.lineOpacity,s.lineThickness,s.fillColor,s.fillOpacity)}for(r=0;r<a.length;r++){o=a[r];s=o.render;this.setConstraintRenderStyle(o,s.lineColor,s.lineOpacity,s.lineThickness,s.pinSize,s.anchorColor,s.anchorSize)}for(r=0;r<n.length;r++){o=n[r];this.setCompositeRenderStyle(o)}return this},setBodyRenderStyle:function setBodyRenderStyle(e,t,i,a,n,r){var o=e.render,s=this.debugConfig;if(!o){return this}if(t===void 0||null===t){t=e.isStatic?s.staticLineColor:s.lineColor}if(i===void 0||null===i){i=s.lineOpacity}if(a===void 0||null===a){a=s.lineThickness}if(n===void 0||null===n){n=e.isStatic?s.staticFillColor:s.fillColor}if(r===void 0||null===r){r=s.fillOpacity}if(!1!==t){o.lineColor=t}if(!1!==i){o.lineOpacity=i}if(!1!==a){o.lineThickness=a}if(!1!==n){o.fillColor=n}if(!1!==r){o.fillOpacity=r}return this},setConstraintRenderStyle:function setConstraintRenderStyle(e,t,i,a,n,r,o){var s=e.render,l=this.debugConfig;if(!s){return this}if(t===void 0||null===t){var d=s.type;if("line"===d){t=l.jointColor}else if("pin"===d){t=l.pinColor}else if("spring"===d){t=l.springColor}}if(i===void 0||null===i){i=l.jointLineOpacity}if(a===void 0||null===a){a=l.jointLineThickness}if(n===void 0||null===n){n=l.pinSize}if(r===void 0||null===r){r=l.anchorColor}if(o===void 0||null===o){o=l.anchorSize}if(!1!==t){s.lineColor=t}if(!1!==i){s.lineOpacity=i}if(!1!==a){s.lineThickness=a}if(!1!==n){s.pinSize=n}if(!1!==r){s.anchorColor=r}if(!1!==o){s.anchorSize=o}return this},setEventsProxy:function setEventsProxy(){var e=this,t=this.engine,i=this.localWorld;if(this.drawDebug){h.on(i,"compositeModified",function(t){e.setCompositeRenderStyle(t)});h.on(i,"beforeAdd",function(t){for(var a=[].concat(t.object),n=0;n<a.length;n++){var r=a[n],o=r.render;if("body"===r.type){e.setBodyRenderStyle(r,o.lineColor,o.lineOpacity,o.lineThickness,o.fillColor,o.fillOpacity)}else if("composite"===r.type){e.setCompositeRenderStyle(r)}else if("constraint"===r.type){e.setConstraintRenderStyle(r,o.lineColor,o.lineOpacity,o.lineThickness,o.pinSize,o.anchorColor,o.anchorSize)}}})}h.on(i,"beforeAdd",function(t){e.emit(p.BEFORE_ADD,t)});h.on(i,"afterAdd",function(t){e.emit(p.AFTER_ADD,t)});h.on(i,"beforeRemove",function(t){e.emit(p.BEFORE_REMOVE,t)});h.on(i,"afterRemove",function(t){e.emit(p.AFTER_REMOVE,t)});h.on(t,"beforeUpdate",function(t){e.emit(p.BEFORE_UPDATE,t)});h.on(t,"afterUpdate",function(t){e.emit(p.AFTER_UPDATE,t)});h.on(t,"collisionStart",function(t){var i=t.pairs,a,n;if(0<i.length){a=i[0].bodyA;n=i[0].bodyB}e.emit(p.COLLISION_START,t,a,n)});h.on(t,"collisionActive",function(t){var i=t.pairs,a,n;if(0<i.length){a=i[0].bodyA;n=i[0].bodyB}e.emit(p.COLLISION_ACTIVE,t,a,n)});h.on(t,"collisionEnd",function(t){var i=t.pairs,a,n;if(0<i.length){a=i[0].bodyA;n=i[0].bodyB}e.emit(p.COLLISION_END,t,a,n)})},setBounds:function setBounds(e,t,i,a,n,r,o,s,l){if(e===void 0){e=0}if(t===void 0){t=0}if(i===void 0){i=this.scene.sys.scale.width}if(a===void 0){a=this.scene.sys.scale.height}if(n===void 0){n=64}if(r===void 0){r=!0}if(o===void 0){o=!0}if(s===void 0){s=!0}if(l===void 0){l=!0}this.updateWall(r,"left",e-n,t-n,n,a+2*n);this.updateWall(o,"right",e+i,t-n,n,a+2*n);this.updateWall(s,"top",e,t-n,i,n);this.updateWall(l,"bottom",e,t+a,i,n);return this},updateWall:function updateWall(e,t,i,a,n,r){var o=this.walls[t];if(e){if(o){f.remove(this.localWorld,o)}i+=n/2;a+=r/2;this.walls[t]=this.create(i,a,n,r,{isStatic:!0,friction:0,frictionStatic:0})}else{if(o){f.remove(this.localWorld,o)}this.walls[t]=null}},createDebugGraphic:function createDebugGraphic(){var e=this.scene.sys.add.graphics({x:0,y:0});e.setDepth(Number.MAX_VALUE);this.debugGraphic=e;this.drawDebug=!0;return e},disableGravity:function disableGravity(){this.localWorld.gravity.x=0;this.localWorld.gravity.y=0;this.localWorld.gravity.scale=0;return this},setGravity:function setGravity(e,t,i){if(e===void 0){e=0}if(t===void 0){t=1}this.localWorld.gravity.x=e;this.localWorld.gravity.y=t;if(i!==void 0){this.localWorld.gravity.scale=i}return this},create:function create(e,t,i,n,r){var o=a.rectangle(e,t,i,n,r);f.add(this.localWorld,o);return o},add:function add(e){f.add(this.localWorld,e);return this},remove:function remove(e,t){if(!Array.isArray(e)){e=[e]}for(var a=0;a<e.length;a++){var n=e[a],r=n.body?n.body:n;s.remove(this.localWorld,r,t)}return this},removeConstraint:function removeConstraint(e,t){s.remove(this.localWorld,e,t);return this},convertTilemapLayer:function convertTilemapLayer(e,t){var i=e.layer,a=e.getTilesWithin(0,0,i.width,i.height,{isColliding:!0});this.convertTiles(a,t);return this},convertTiles:function convertTiles(e,t){if(0===e.length){return this}for(var a=0;a<e.length;a++){new m(this,e[a],t)}return this},nextGroup:function nextGroup(e){return g.nextGroup(e)},nextCategory:function nextCategory(){return g.nextCategory()},pause:function pause(){this.enabled=!1;this.emit(p.PAUSE);return this},resume:function resume(){this.enabled=!0;this.emit(p.RESUME);return this},update:function update(e,t){if(!this.enabled||!this.autoUpdate){return}var i=this.engine,a=this.runner,n=i.timing,r=this.correction;if(a.isFixed){t=this.getDelta(e,t)}else{t=e-a.timePrev||a.delta;a.timePrev=e;a.deltaHistory.push(t);a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize);t=Math.min.apply(null,a.deltaHistory);t=t<a.deltaMin?a.deltaMin:t;t=t>a.deltaMax?a.deltaMax:t;r=t/a.delta;a.delta=t}if(0!==a.timeScalePrev){r*=n.timeScale/a.timeScalePrev}if(0===n.timeScale){r=0}a.timeScalePrev=n.timeScale;a.correction=r;a.frameCounter+=1;if(1e3<=e-a.counterTimestamp){a.fps=a.frameCounter*((e-a.counterTimestamp)/1e3);a.counterTimestamp=e;a.frameCounter=0}l.update(i,t,r)},step:function step(e,t){l.update(this.engine,e,t)},update60Hz:function update60Hz(){return 1e3/60},update30Hz:function update30Hz(){return 1e3/30},has:function has(e){var t=e.hasOwnProperty("body")?e.body:e;return null!==s.get(this.localWorld,t.id,t.type)},getAllBodies:function getAllBodies(){return s.allBodies(this.localWorld)},getAllConstraints:function getAllConstraints(){return s.allConstraints(this.localWorld)},getAllComposites:function getAllComposites(){return s.allComposites(this.localWorld)},postUpdate:function postUpdate(){if(!this.drawDebug){return}var e=this.debugConfig,t=this.engine,i=this.debugGraphic,a=s.allBodies(this.localWorld);this.debugGraphic.clear();if(e.showBroadphase&&t.broadphase.controller){this.renderGrid(t.broadphase,i,e.broadphaseColor,.5)}if(e.showBounds){this.renderBodyBounds(a,i,e.boundsColor,.5)}if(e.showBody||e.showStaticBody){this.renderBodies(a)}if(e.showJoint){this.renderJoints()}if(e.showAxes||e.showAngleIndicator){this.renderBodyAxes(a,i,e.showAxes,e.angleColor,.5)}if(e.showVelocity){this.renderBodyVelocity(a,i,e.velocityColor,1,2)}if(e.showSeparations){this.renderSeparations(t.pairs.list,i,e.separationColor)}if(e.showCollisions){this.renderCollisions(t.pairs.list,i,e.collisionColor)}},renderGrid:function renderGrid(e,t,a,n){t.lineStyle(1,a,n);for(var r=o.keys(e.buckets),s=0,l;s<r.length;s++){l=r[s];if(2>e.buckets[l].length){continue}var d=l.split(/C|R/);t.strokeRect(parseInt(d[1],10)*e.bucketWidth,parseInt(d[2],10)*e.bucketHeight,e.bucketWidth,e.bucketHeight)}return this},renderSeparations:function renderSeparations(e,t,a){t.lineStyle(1,a,1);for(var n=0,r;n<e.length;n++){r=e[n];if(!r.isActive){continue}var o=r.collision,s=o.bodyA,l=o.bodyB,d=s.position,p=l.position,c=o.penetration,u=!s.isStatic&&!l.isStatic?4:1;if(l.isStatic){u=0}t.lineBetween(p.x,p.y,p.x-c.x*u,p.y-c.y*u);u=!s.isStatic&&!l.isStatic?4:1;if(s.isStatic){u=0}t.lineBetween(d.x,d.y,d.x-c.x*u,d.y-c.y*u)}return this},renderCollisions:function renderCollisions(e,t,a){t.lineStyle(1,a,.5);t.fillStyle(a,1);var n,r;for(n=0;n<e.length;n++){r=e[n];if(!r.isActive){continue}for(var o=0;o<r.activeContacts.length;o++){var s=r.activeContacts[o],l=s.vertex;t.fillRect(l.x-2,l.y-2,5,5)}}for(n=0;n<e.length;n++){r=e[n];if(!r.isActive){continue}var d=r.collision,p=r.activeContacts;if(0<p.length){var c=p[0].vertex.x,u=p[0].vertex.y;if(2===p.length){c=(p[0].vertex.x+p[1].vertex.x)/2;u=(p[0].vertex.y+p[1].vertex.y)/2}if(d.bodyB===d.supports[0].body||d.bodyA.isStatic){t.lineBetween(c-8*d.normal.x,u-8*d.normal.y,c,u)}else{t.lineBetween(c+8*d.normal.x,u+8*d.normal.y,c,u)}}}return this},renderBodyBounds:function renderBodyBounds(e,t,a,n){t.lineStyle(1,a,n);for(var r=0,o;r<e.length;r++){o=e[r];if(!o.render.visible){continue}var s=o.bounds;if(s){t.strokeRect(s.min.x,s.min.y,s.max.x-s.min.x,s.max.y-s.min.y)}else{for(var l=o.parts,d=1<l.length?1:0,p;d<l.length;d++){p=l[d];t.strokeRect(p.bounds.min.x,p.bounds.min.y,p.bounds.max.x-p.bounds.min.x,p.bounds.max.y-p.bounds.min.y)}}}return this},renderBodyAxes:function renderBodyAxes(e,t,a,n,r){t.lineStyle(1,n,r);for(var o=0;o<e.length;o++){var s=e[o],l=s.parts;if(!s.render.visible){continue}var d,p,c;if(a){for(p=1<l.length?1:0;p<l.length;p++){d=l[p];for(c=0;c<d.axes.length;c++){var u=d.axes[c];t.lineBetween(d.position.x,d.position.y,d.position.x+20*u.x,d.position.y+20*u.y)}}}else{for(p=1<l.length?1:0;p<l.length;p++){d=l[p];for(c=0;c<d.axes.length;c++){t.lineBetween(d.position.x,d.position.y,(d.vertices[0].x+d.vertices[d.vertices.length-1].x)/2,(d.vertices[0].y+d.vertices[d.vertices.length-1].y)/2)}}}}return this},renderBodyVelocity:function renderBodyVelocity(e,t,a,n,r){t.lineStyle(r,a,n);for(var o=0,s;o<e.length;o++){s=e[o];if(!s.render.visible){continue}t.lineBetween(s.position.x,s.position.y,s.position.x+2*(s.position.x-s.positionPrev.x),s.position.y+2*(s.position.y-s.positionPrev.y))}return this},renderBodies:function renderBodies(e){for(var t=this.debugGraphic,a=this.debugConfig,n=a.showBody,r=a.showStaticBody,o=a.showSleeping,s=a.showInternalEdges,l=a.showConvexHulls,d=a.renderFill,p=a.renderLine,c=a.staticBodySleepOpacity,u=a.sleepFillColor,g=a.sleepLineColor,h=a.hullColor,m=0,y;m<e.length;m++){y=e[m];if(!y.render.visible){continue}if(!r&&y.isStatic||!n&&!y.isStatic){continue}var x=y.render.lineColor,f=y.render.lineOpacity,T=y.render.lineThickness,v=y.render.fillColor,b=y.render.fillOpacity;if(o&&y.isSleeping){if(y.isStatic){f*=c;b*=c}else{x=g;v=u}}if(!d){v=null}if(!p){x=null}this.renderBody(y,t,s,x,f,T,v,b);var E=y.parts.length;if(l&&1<E){this.renderConvexHull(y,t,h,T)}}},renderBody:function renderBody(e,t,i,a,n,r,o,s){if(a===void 0){a=null}if(n===void 0){n=null}if(r===void 0){r=1}if(o===void 0){o=null}if(s===void 0){s=null}for(var l=this.debugConfig,d=l.sensorFillColor,p=l.sensorLineColor,c=e.parts,u=c.length,g=1<u?1:0;g<u;g++){var h=c[g],m=h.render,y=m.opacity;if(!m.visible||0===y||h.isSensor&&!l.showSensors){continue}var x=h.circleRadius;t.beginPath();if(h.isSensor){if(null!==o){t.fillStyle(d,s*y)}if(null!==a){t.lineStyle(r,p,n*y)}}else{if(null!==o){t.fillStyle(o,s*y)}if(null!==a){t.lineStyle(r,a,n*y)}}if(x){t.arc(h.position.x,h.position.y,x,0,2*Math.PI)}else{var f=h.vertices,T=f.length;t.moveTo(f[0].x,f[0].y);for(var v=1,b;v<T;v++){b=f[v];if(!f[v-1].isInternal||i){t.lineTo(b.x,b.y)}else{t.moveTo(b.x,b.y)}if(v<T&&b.isInternal&&!i){var E=(v+1)%T;t.moveTo(f[E].x,f[E].y)}}t.closePath()}if(null!==o){t.fillPath()}if(null!==a){t.strokePath()}}if(l.showPositions&&!e.isStatic){var S=e.position.x,_=e.position.y,A=Math.ceil(l.positionSize/2);t.fillStyle(l.positionColor,1);t.fillRect(S-A,_-A,l.positionSize,l.positionSize)}return this},renderConvexHull:function renderConvexHull(e,t,i,a){if(a===void 0){a=1}var n=e.parts,r=n.length;if(1<r){var o=e.vertices;t.lineStyle(a,i);t.beginPath();t.moveTo(o[0].x,o[0].y);for(var s=1;s<o.length;s++){t.lineTo(o[s].x,o[s].y)}t.lineTo(o[0].x,o[0].y);t.strokePath()}return this},renderJoints:function renderJoints(){for(var e=this.debugGraphic,t=s.allConstraints(this.localWorld),a=0;a<t.length;a++){var n=t[a].render,r=n.lineColor,o=n.lineOpacity,l=n.lineThickness,d=n.pinSize,p=n.anchorColor,c=n.anchorSize;this.renderConstraint(t[a],e,r,o,l,d,p,c)}},renderConstraint:function renderConstraint(e,t,i,a,n,r,s,l){var d=e.render;if(!d.visible||!e.pointA||!e.pointB){return this}t.lineStyle(n,i,a);var p=e.bodyA,c=e.bodyB,u,g;if(p){u=T.add(p.position,e.pointA)}else{u=e.pointA}if("pin"===d.type){t.strokeCircle(u.x,u.y,r)}else{if(c){g=T.add(c.position,e.pointB)}else{g=e.pointB}t.beginPath();t.moveTo(u.x,u.y);if("spring"===d.type){for(var h=T.sub(g,u),m=T.perp(T.normalise(h)),y=Math.ceil(o.clamp(e.length/5,12,20)),x,f=1;f<y;f+=1){x=0==f%2?1:-1;t.lineTo(u.x+h.x*(f/y)+4*(m.x*x),u.y+h.y*(f/y)+4*(m.y*x))}}t.lineTo(g.x,g.y)}t.strokePath();if(d.anchors&&0<l){t.fillStyle(s);t.fillCircle(u.x,u.y,l);t.fillCircle(g.x,g.y,l)}return this},resetCollisionIDs:function resetCollisionIDs(){n._nextCollidingGroupId=1;n._nextNonCollidingGroupId=-1;n._nextCategory=1;return this},shutdown:function shutdown(){h.off(this.engine);this.removeAllListeners();f.clear(this.localWorld,!1);l.clear(this.engine);if(this.drawDebug){this.debugGraphic.destroy()}},destroy:function destroy(){this.shutdown()}});e.exports=v},function(e,t,i){(function(t){i(512);var a=i(29),n=i(17),r={Actions:i(238),Animations:i(632),BlendModes:i(52),Cache:i(633),Cameras:i(636),Core:i(719),Class:i(0),Create:i(781),Curves:i(787),Data:i(790),Display:i(792),DOM:i(809),Events:i(810),Game:i(812),GameObjects:i(905),Geom:i(422),Input:i(1187),Loader:i(1221),Math:i(168),Physics:i(1388),Plugins:i(1292),Renderer:i(1448),Scale:i(1294),ScaleModes:i(231),Scene:i(368),Scenes:i(1295),Structs:i(1297),Textures:i(1298),Tilemaps:i(1300),Time:i(1341),Tweens:i(1343),Utils:i(1360)};r.Sound=i(1370);r=n(!1,r,a);e.exports=r;t.Phaser=r}).call(this,i(511))},function(e,t,i){e.exports={Arcade:i(1247),Impact:i(1389),Matter:i(1412)}},function(e,t,i){e.exports={Body:i(1371),Events:i(1278),COLLIDES:i(465),CollisionMap:i(1372),Factory:i(1373),Image:i(1375),ImpactBody:i(1374),ImpactPhysics:i(1408),Sprite:i(1376),TYPE:i(466),World:i(1377)}},function(e,t,i){var a=i(22);e.exports=function GetVelocity(e,t,i,n,r){if(i){return a(t+i*e,-r,r)}else if(n){var o=n*e;if(0<t-o){return t-o}else if(0>t+o){return t+o}else{return 0}}return a(t,-r,r)}},function(e){e.exports=function UpdateMotion(e,t){e.standing=!1;if(t.collision.y){if(0<e.bounciness&&Math.abs(e.vel.y)>e.minBounceVelocity){e.vel.y*=-e.bounciness}else{if(0<e.vel.y){e.standing=!0}e.vel.y=0}}if(t.collision.x){if(0<e.bounciness&&Math.abs(e.vel.x)>e.minBounceVelocity){e.vel.x*=-e.bounciness}else{e.vel.x=0}}if(t.collision.slope){var i=t.collision.slope;if(0<e.bounciness){var a=e.vel.x*i.nx+e.vel.y*i.ny;e.vel.x=(e.vel.x-2*(i.nx*a))*e.bounciness;e.vel.y=(e.vel.y-2*(i.ny*a))*e.bounciness}else{var n=i.x*i.x+i.y*i.y,r=(e.vel.x*i.x+e.vel.y*i.y)/n;e.vel.x=i.x*r;e.vel.y=i.y*r;var o=Math.atan2(i.x,i.y);if(o>e.slopeStanding.min&&o<e.slopeStanding.max){e.standing=!0}}}e.pos.x=t.pos.x;e.pos.y=t.pos.y}},function(e){e.exports="collide"},function(e){e.exports="pause"},function(e){e.exports="resume"},function(e){var t=.5,i=1/3,a=2/3;e.exports={2:[0,1,1,0,!0],3:[0,1,1,t,!0],4:[0,t,1,0,!0],5:[0,1,1,a,!0],6:[0,a,1,i,!0],7:[0,i,1,0,!0],8:[t,1,0,0,!0],9:[1,0,t,1,!0],10:[t,1,1,0,!0],11:[0,0,t,1,!0],12:[0,0,1,0,!1],13:[1,1,0,0,!0],14:[1,t,0,0,!0],15:[1,1,0,t,!0],16:[1,i,0,0,!0],17:[1,a,0,i,!0],18:[1,1,0,a,!0],19:[1,1,t,0,!0],20:[t,0,0,1,!0],21:[0,1,t,0,!0],22:[t,0,1,1,!0],23:[1,1,0,1,!1],24:[0,0,1,1,!0],25:[0,0,1,t,!0],26:[0,t,1,1,!0],27:[0,0,1,i,!0],28:[0,i,1,a,!0],29:[0,a,1,1,!0],30:[i,1,0,0,!0],31:[1,0,a,1,!0],32:[a,1,1,0,!0],33:[0,0,i,1,!0],34:[1,0,1,1,!1],35:[1,0,0,1,!0],36:[1,t,0,1,!0],37:[1,0,0,t,!0],38:[1,a,0,1,!0],39:[1,i,0,a,!0],40:[1,0,0,i,!0],41:[a,1,i,0,!0],42:[a,0,i,1,!0],43:[i,1,a,0,!0],44:[i,0,a,1,!0],45:[0,1,0,0,!1],52:[1,1,a,0,!0],53:[i,0,0,1,!0],54:[0,1,i,0,!0],55:[a,0,1,1,!0]}},function(e){e.exports={setAccelerationX:function setAccelerationX(e){this.accel.x=e;return this},setAccelerationY:function setAccelerationY(e){this.accel.y=e;return this},setAcceleration:function setAcceleration(e,t){this.accel.x=e;this.accel.y=t;return this}}},function(e){e.exports={setBodySize:function setBodySize(e,t){if(t===void 0){t=e}this.body.size.x=Math.round(e);this.body.size.y=Math.round(t);return this},setBodyScale:function setBodyScale(e,t){if(t===void 0){t=e}var i=this.body.gameObject;if(i){i.setScale(e,t);return this.setBodySize(i.width*i.scaleX,i.height*i.scaleY)}else{return this.setBodySize(this.body.size.x*e,this.body.size.y*t)}}}},function(e,t,i){var a=i(466);e.exports={getBodyType:function getBodyType(){return this.body.type},setTypeNone:function setTypeNone(){this.body.type=a.NONE;return this},setTypeA:function setTypeA(){this.body.type=a.A;return this},setTypeB:function setTypeB(){this.body.type=a.B;return this}}},function(e){e.exports={setBounce:function setBounce(e){this.body.bounciness=e;return this},setMinBounceVelocity:function setMinBounceVelocity(e){this.body.minBounceVelocity=e;return this},bounce:{get:function get(){return this.body.bounciness},set:function set(e){this.body.bounciness=e}}}},function(e,t,i){var a=i(466);e.exports={setAvsB:function setAvsB(){this.setTypeA();return this.setCheckAgainstB()},setBvsA:function setBvsA(){this.setTypeB();return this.setCheckAgainstA()},setCheckAgainstNone:function setCheckAgainstNone(){this.body.checkAgainst=a.NONE;return this},setCheckAgainstA:function setCheckAgainstA(){this.body.checkAgainst=a.A;return this},setCheckAgainstB:function setCheckAgainstB(){this.body.checkAgainst=a.B;return this},checkAgainst:{get:function get(){return this.body.checkAgainst},set:function set(e){this.body.checkAgainst=e}}}},function(e,t,i){var a=i(465);e.exports={_collideCallback:null,_callbackScope:null,setCollideCallback:function setCollideCallback(e,t){this._collideCallback=e;if(t){this._callbackScope=t}return this},setCollidesNever:function setCollidesNever(){this.body.collides=a.NEVER;return this},setLiteCollision:function setLiteCollision(){this.body.collides=a.LITE;return this},setPassiveCollision:function setPassiveCollision(){this.body.collides=a.PASSIVE;return this},setActiveCollision:function setActiveCollision(){this.body.collides=a.ACTIVE;return this},setFixedCollision:function setFixedCollision(){this.body.collides=a.FIXED;return this},collides:{get:function get(){return this.body.collides},set:function set(e){this.body.collides=e}}}},function(e){e.exports={setDebug:function setDebug(e,t,i){this.debugShowBody=e;this.debugShowVelocity=t;this.debugBodyColor=i;return this},setDebugBodyColor:function setDebugBodyColor(e){this.body.debugBodyColor=e;return this},debugShowBody:{get:function get(){return this.body.debugShowBody},set:function set(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function get(){return this.body.debugShowVelocity},set:function set(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function get(){return this.body.debugBodyColor},set:function set(e){this.body.debugBodyColor=e}}}},function(e){e.exports={setFrictionX:function setFrictionX(e){this.friction.x=e;return this},setFrictionY:function setFrictionY(e){this.friction.y=e;return this},setFriction:function setFriction(e,t){this.friction.x=e;this.friction.y=t;return this}}},function(e){e.exports={setGravity:function setGravity(e){this.body.gravityFactor=e;return this},gravity:{get:function get(){return this.body.gravityFactor},set:function set(e){this.body.gravityFactor=e}}}},function(e){e.exports={setOffset:function setOffset(e,t,i,a){this.body.offset.x=e;this.body.offset.y=t;if(i){this.setBodySize(i,a)}return this}}},function(e){e.exports={setGameObject:function setGameObject(e,t){if(t===void 0){t=!0}if(e){this.body.gameObject=e;if(t){this.syncGameObject()}}else{this.body.gameObject=null}return this},syncGameObject:function syncGameObject(){var e=this.body.gameObject;if(e){this.setBodySize(e.width*e.scaleX,e.height*e.scaleY)}return this}}},function(e){e.exports={setVelocityX:function setVelocityX(e){this.vel.x=e;return this},setVelocityY:function setVelocityY(e){this.vel.y=e;return this},setVelocity:function setVelocity(e,t){if(t===void 0){t=e}this.vel.x=e;this.vel.y=t;return this},setMaxVelocity:function setMaxVelocity(e,t){if(t===void 0){t=e}this.maxVel.x=e;this.maxVel.y=t;return this}}},function(e,t,i){var a=i(0),n=i(1373),r=i(2),o=i(107),s=i(23),l=i(19),d=i(1377),p=new a({initialize:function(e){this.scene=e;this.systems=e.sys;this.config=this.getConfig();this.world;this.add;e.sys.events.once(l.BOOT,this.boot,this);e.sys.events.on(l.START,this.start,this)},boot:function boot(){this.world=new d(this.scene,this.config);this.add=new n(this.world);this.systems.events.once(l.DESTROY,this.destroy,this)},start:function start(){if(!this.world){this.world=new d(this.scene,this.config);this.add=new n(this.world)}var e=this.systems.events;e.on(l.UPDATE,this.world.update,this.world);e.once(l.SHUTDOWN,this.shutdown,this)},getConfig:function getConfig(){var e=this.systems.game.config.physics,t=this.systems.settings.physics,i=o(r(t,"impact",{}),r(e,"impact",{}));return i},pause:function pause(){return this.world.pause()},resume:function resume(){return this.world.resume()},shutdown:function shutdown(){var e=this.systems.events;e.off(l.UPDATE,this.world.update,this.world);e.off(l.SHUTDOWN,this.shutdown,this);this.add.destroy();this.world.destroy();this.add=null;this.world=null},destroy:function destroy(){this.shutdown();this.scene.sys.events.off(l.START,this.start,this);this.scene=null;this.systems=null}});s.register("ImpactPhysics",p,"impactPhysics");e.exports=p},function(e,t,i){var a=i(465),n=i(1278),r=i(1410),o=i(1411);e.exports=function Solver(e,t,i){var s=null;if(t.collides===a.LITE||i.collides===a.FIXED){s=t}else if(i.collides===a.LITE||t.collides===a.FIXED){s=i}if(t.last.x+t.size.x>i.last.x&&t.last.x<i.last.x+i.size.x){if(t.last.y<i.last.y){o(e,t,i,s)}else{o(e,i,t,s)}t.collideWith(i,"y");i.collideWith(t,"y");e.emit(n.COLLIDE,t,i,"y")}else if(t.last.y+t.size.y>i.last.y&&t.last.y<i.last.y+i.size.y){if(t.last.x<i.last.x){r(e,t,i,s)}else{r(e,i,t,s)}t.collideWith(i,"x");i.collideWith(t,"x");e.emit(n.COLLIDE,t,i,"x")}}},function(e){e.exports=function SeparateX(e,t,i,a){var n=t.pos.x+t.size.x-i.pos.x;if(a){var r=t===a?i:t;a.vel.x=-a.vel.x*a.bounciness+r.vel.x;var o=e.collisionMap.trace(a.pos.x,a.pos.y,a===t?-n:n,0,a.size.x,a.size.y);a.pos.x=o.pos.x}else{var s=(t.vel.x-i.vel.x)/2;t.vel.x=-s;i.vel.x=s;var l=e.collisionMap.trace(t.pos.x,t.pos.y,-n/2,0,t.size.x,t.size.y);t.pos.x=Math.floor(l.pos.x);var d=e.collisionMap.trace(i.pos.x,i.pos.y,n/2,0,i.size.x,i.size.y);i.pos.x=Math.ceil(d.pos.x)}}},function(e){e.exports=function SeparateY(e,t,i,a){var n=t.pos.y+t.size.y-i.pos.y,r,o;if(a){var s=t===a?i:t;a.vel.y=-a.vel.y*a.bounciness+s.vel.y;r=0;if(a===t&&Math.abs(a.vel.y-s.vel.y)<a.minBounceVelocity){a.standing=!0;r=s.vel.x*e.delta}var l=e.collisionMap.trace(a.pos.x,a.pos.y,r,a===t?-n:n,a.size.x,a.size.y);a.pos.y=l.pos.y;a.pos.x=l.pos.x}else if(e.gravity&&(i.standing||0<t.vel.y)){o=e.collisionMap.trace(t.pos.x,t.pos.y,0,-(t.pos.y+t.size.y-i.pos.y),t.size.x,t.size.y);t.pos.y=o.pos.y;if(0<t.bounciness&&t.vel.y>t.minBounceVelocity){t.vel.y*=-t.bounciness}else{t.standing=!0;t.vel.y=0}}else{var d=(t.vel.y-i.vel.y)/2;t.vel.y=-d;i.vel.y=d;r=i.vel.x*e.delta;o=e.collisionMap.trace(t.pos.x,t.pos.y,r,-n/2,t.size.x,t.size.y);t.pos.y=o.pos.y;var p=e.collisionMap.trace(i.pos.x,i.pos.y,0,n/2,i.size.x,i.size.y);i.pos.y=p.pos.y}}},function(e,t,i){e.exports={BodyBounds:i(1378),Factory:i(1379),Image:i(1381),Matter:i(1286),MatterPhysics:i(1444),PolyDecomp:i(1380),Sprite:i(1382),TileBody:i(1285),PhysicsEditorParser:i(1282),PhysicsJSONParser:i(1283),World:i(1386)}},function(e,t,i){var n=i(508),r=i(2),o=i(3);function a(e){return!!e.get&&"function"==typeof e.get||!!e.set&&"function"==typeof e.set}e.exports=function MatterGameObject(e,t,i,s){if(i===void 0){i={}}if(s===void 0){s=!0}var l=t.x,d=t.y;t.body={temp:!0,position:{x:l,y:d}};var p=[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity];p.forEach(function(e){for(var i in e){if(a(e[i])){Object.defineProperty(t,i,{get:e[i].get,set:e[i].set})}else{Object.defineProperty(t,i,{value:e[i]})}}});t.world=e;t._tempVec2=new o(l,d);if(i.hasOwnProperty("type")&&"body"===i.type){t.setExistingBody(i,s)}else{var c=r(i,"shape",null);if(!c){c="rectangle"}i.addToWorld=s;t.setBody(c,i)}return t}},function(e){e.exports={setBounce:function setBounce(e){this.body.restitution=e;return this}}},function(e){e.exports={setCollisionCategory:function setCollisionCategory(e){this.body.collisionFilter.category=e;return this},setCollisionGroup:function setCollisionGroup(e){this.body.collisionFilter.group=e;return this},setCollidesWith:function setCollidesWith(e){var t=0;if(!Array.isArray(e)){t=e}else{for(var a=0;a<e.length;a++){t|=e[a]}}this.body.collisionFilter.mask=t;return this},setOnCollide:function setOnCollide(e){this.body.onCollideCallback=e;return this},setOnCollideEnd:function setOnCollideEnd(e){this.body.onCollideEndCallback=e;return this},setOnCollideActive:function setOnCollideActive(e){this.body.onCollideActiveCallback=e;return this},setOnCollideWith:function setOnCollideWith(e,t){if(!Array.isArray(e)){e=[e]}for(var a=0,n;a<e.length;a++){n=e[a].hasOwnProperty("body")?e[a].body:e[a];this.body.setOnCollideWith(n,t)}return this}}},function(e,t,i){var a=i(62);e.exports={applyForce:function applyForce(e){this._tempVec2.set(this.body.position.x,this.body.position.y);a.applyForce(this.body,this._tempVec2,e);return this},applyForceFrom:function applyForceFrom(e,t){a.applyForce(this.body,e,t);return this},thrust:function thrust(e){var t=this.body.angle;this._tempVec2.set(e*Math.cos(t),e*Math.sin(t));a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2);return this},thrustLeft:function thrustLeft(e){var t=this.body.angle-Math.PI/2;this._tempVec2.set(e*Math.cos(t),e*Math.sin(t));a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2);return this},thrustRight:function thrustRight(e){var t=this.body.angle+Math.PI/2;this._tempVec2.set(e*Math.cos(t),e*Math.sin(t));a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2);return this},thrustBack:function thrustBack(e){var t=this.body.angle-Math.PI;this._tempVec2.set(e*Math.cos(t),e*Math.sin(t));a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2);return this}}},function(e){e.exports={setFriction:function setFriction(e,t,i){this.body.friction=e;if(t!==void 0){this.body.frictionAir=t}if(i!==void 0){this.body.frictionStatic=i}return this},setFrictionAir:function setFrictionAir(e){this.body.frictionAir=e;return this},setFrictionStatic:function setFrictionStatic(e){this.body.frictionStatic=e;return this}}},function(e){e.exports={setIgnoreGravity:function setIgnoreGravity(e){this.body.ignoreGravity=e;return this}}},function(e,t,i){var a=i(62),n=i(3);e.exports={setMass:function setMass(e){a.setMass(this.body,e);return this},setDensity:function setDensity(e){a.setDensity(this.body,e);return this},centerOfMass:{get:function get(){return new n(this.body.centerOfMass.x,this.body.centerOfMass.y)}}}},function(e,t,i){var a=i(62);e.exports={setStatic:function setStatic(e){a.setStatic(this.body,e);return this},isStatic:function isStatic(){return this.body.isStatic}}},function(e){e.exports={setSensor:function setSensor(e){this.body.isSensor=e;return this},isSensor:function isSensor(){return this.body.isSensor}}},function(e,t,i){var a=i(109),n=i(62),r=i(144),o=i(2),s=i(1282),l=i(1283),d=i(86);e.exports={setRectangle:function setRectangle(e,t,i){return this.setBody({type:"rectangle",width:e,height:t},i)},setCircle:function setCircle(e,t){return this.setBody({type:"circle",radius:e},t)},setPolygon:function setPolygon(e,t,i){return this.setBody({type:"polygon",sides:t,radius:e},i)},setTrapezoid:function setTrapezoid(e,t,i,a){return this.setBody({type:"trapezoid",width:e,height:t,slope:i},a)},setExistingBody:function setExistingBody(e,t){if(t===void 0){t=!0}if(this.body){this.world.remove(this.body,!0)}this.body=e;for(var a=0;a<e.parts.length;a++){e.parts[a].gameObject=this}var n=this;e.destroy=function(){n.world.remove(n.body,!0);n.body.gameObject=null};if(t){if(this.world.has(e)){this.world.remove(e,!0)}this.world.add(e)}if(this._originComponent){var o=e.render.sprite.xOffset,s=e.render.sprite.yOffset,l=e.centerOfMass.x,d=e.centerOfMass.y;if(r(l,.5)&&r(d,.5)){this.setOrigin(o+.5,s+.5)}else{var p=e.centerOffset.x,c=e.centerOffset.y;this.setOrigin(o+p/this.displayWidth,s+c/this.displayHeight)}}return this},setBody:function setBody(e,t){if(!e){return this}var i;if("string"==typeof e){e={type:e}}var r=o(e,"type","rectangle"),p=o(e,"x",this._tempVec2.x),c=o(e,"y",this._tempVec2.y),u=o(e,"width",this.width),g=o(e,"height",this.height);switch(r){case"rectangle":i=a.rectangle(p,c,u,g,t);break;case"circle":var h=o(e,"radius",Math.max(u,g)/2),m=o(e,"maxSides",25);i=a.circle(p,c,h,t,m);break;case"trapezoid":var y=o(e,"slope",.5);i=a.trapezoid(p,c,u,g,y,t);break;case"polygon":var x=o(e,"sides",5),f=o(e,"radius",Math.max(u,g)/2);i=a.polygon(p,c,x,f,t);break;case"fromVertices":case"fromVerts":var T=o(e,"verts",null);if(T){if("string"==typeof T){T=d.fromPath(T)}if(this.body&&!this.body.hasOwnProperty("temp")){n.setVertices(this.body,T);i=this.body}else{var v=o(e,"flagInternal",!1),b=o(e,"removeCollinear",.01),E=o(e,"minimumArea",10);i=a.fromVertices(p,c,T,t,v,b,E)}}break;case"fromPhysicsEditor":i=s.parseBody(p,c,e,t);break;case"fromPhysicsTracer":i=l.parseBody(p,c,e,t);break;}if(i){this.setExistingBody(i,e.addToWorld)}return this}}},function(e,t,i){var a=i(1284),n=i(236),r=i(237);e.exports={setToSleep:function setToSleep(){n.set(this.body,!0)},setAwake:function setAwake(){n.set(this.body,!1)},setSleepThreshold:function setSleepThreshold(e){if(e===void 0){e=60}this.body.sleepThreshold=e;return this},setSleepEvents:function setSleepEvents(e,t){this.setSleepStartEvent(e);this.setSleepEndEvent(t);return this},setSleepStartEvent:function setSleepStartEvent(e){if(e){var t=this.world;r.on(this.body,"sleepStart",function(e){t.emit(a.SLEEP_START,e,this)})}else{r.off(this.body,"sleepStart")}return this},setSleepEndEvent:function setSleepEndEvent(e){if(e){var t=this.world;r.on(this.body,"sleepEnd",function(e){t.emit(a.SLEEP_END,e,this)})}else{r.off(this.body,"sleepEnd")}return this}}},function(e){e.exports="afteradd"},function(e){e.exports="afterremove"},function(e){e.exports="afterupdate"},function(e){e.exports="beforeadd"},function(e){e.exports="beforeremove"},function(e){e.exports="beforeupdate"},function(e){e.exports="collisionactive"},function(e){e.exports="collisionend"},function(e){e.exports="collisionstart"},function(e){e.exports="dragend"},function(e){e.exports="drag"},function(e){e.exports="dragstart"},function(e){e.exports="pause"},function(e){e.exports="resume"},function(e){e.exports="sleepend"},function(e){e.exports="sleepstart"},function(e,t,i){var a=i(62),n=i(13),r=i(232),o=i(233),s=4;e.exports={x:{get:function get(){return this.body.position.x},set:function set(e){this._tempVec2.set(e,this.y);a.setPosition(this.body,this._tempVec2)}},y:{get:function get(){return this.body.position.y},set:function set(e){this._tempVec2.set(this.x,e);a.setPosition(this.body,this._tempVec2)}},scaleX:{get:function get(){return this._scaleX},set:function set(e){var t=1/this._scaleX,i=1/this._scaleY;this._scaleX=e;if(0===this._scaleX){this.renderFlags&=~s}else{this.renderFlags|=s}a.scale(this.body,t,i);a.scale(this.body,e,this._scaleY)}},scaleY:{get:function get(){return this._scaleY},set:function set(e){var t=1/this._scaleX,i=1/this._scaleY;this._scaleY=e;if(0===this._scaleY){this.renderFlags&=~s}else{this.renderFlags|=s}a.scale(this.body,t,i);a.scale(this.body,this._scaleX,e)}},angle:{get:function get(){return o(this.body.angle*n.RAD_TO_DEG)},set:function set(e){this.rotation=o(e)*n.DEG_TO_RAD}},rotation:{get:function get(){return this.body.angle},set:function set(e){this._rotation=r(e);a.setAngle(this.body,this._rotation)}},setPosition:function setPosition(e,t){if(e===void 0){e=0}if(t===void 0){t=e}this._tempVec2.set(e,t);a.setPosition(this.body,this._tempVec2);return this},setRotation:function setRotation(e){if(e===void 0){e=0}this._rotation=r(e);a.setAngle(this.body,e);return this},setFixedRotation:function setFixedRotation(){a.setInertia(this.body,1/0);return this},setAngle:function setAngle(e){if(e===void 0){e=0}this.angle=e;a.setAngle(this.body,this.rotation);return this},setScale:function setScale(e,t,i){if(e===void 0){e=1}if(t===void 0){t=e}var n=1/this._scaleX,r=1/this._scaleY;this._scaleX=e;this._scaleY=t;a.scale(this.body,n,r,i);a.scale(this.body,e,t,i);return this}}},function(e,t,i){var a=i(62);e.exports={setAngularVelocity:function setAngularVelocity(e){a.setAngularVelocity(this.body,e);return this},setVelocityX:function setVelocityX(e){this._tempVec2.set(e,this.body.velocity.y);a.setVelocity(this.body,this._tempVec2);return this},setVelocityY:function setVelocityY(e){this._tempVec2.set(this.body.velocity.x,e);a.setVelocity(this.body,this._tempVec2);return this},setVelocity:function setVelocity(e,t){this._tempVec2.set(e,t);a.setVelocity(this.body,this._tempVec2);return this}}},function(e,t,i){var a=i(102),n=i(0),r=i(145),o=i(216),s=i(509),l=i(1284),d=i(54),p=i(107),c=i(236),u=i(3),g=i(86),h=new n({initialize:function(e,t,i){if(i===void 0){i={}}this.scene=e;this.world=t;this.camera=null;this.pointer=null;this.active=!0;this.position=new u;this.body=null;this.part=null;this.constraint=o.create(p(i,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}}));this.world.on(l.BEFORE_UPDATE,this.update,this);e.sys.input.on(d.POINTER_DOWN,this.onDown,this);e.sys.input.on(d.POINTER_UP,this.onUp,this)},onDown:function onDown(e){if(!this.pointer){this.pointer=e;this.camera=e.camera}},onUp:function onUp(e){if(e===this.pointer){this.pointer=null}},getBody:function getBody(e){var t=this.position,n=this.constraint;this.camera.getWorldPoint(e.x,e.y,t);for(var o=r.allBodies(this.world.localWorld),d=0,p;d<o.length;d++){p=o[d];if(!p.ignorePointer&&a.contains(p.bounds,t)&&s.canCollide(p.collisionFilter,n.collisionFilter)){if(this.hitTestBody(p,t)){this.world.emit(l.DRAG_START,p,this.part,this);return!0}}}return!1},hitTestBody:function hitTestBody(e,t){for(var a=this.constraint,n=e.parts.length,r=1<n?1:0,o=r,s;o<n;o++){s=e.parts[o];if(g.contains(s.vertices,t)){a.pointA=t;a.pointB={x:t.x-e.position.x,y:t.y-e.position.y};a.bodyB=e;a.angleB=e.angle;c.set(e,!1);this.part=s;this.body=e;return!0}}return!1},update:function update(){var e=this.pointer,t=this.body;if(!this.active||!e){if(t){this.stopDrag()}return}if(!e.isDown&&t){this.stopDrag()}else if(e.isDown){if(!t&&!this.getBody(e)){return}t=this.body;var i=this.position,a=this.constraint;this.camera.getWorldPoint(e.x,e.y,i);a.pointA.x=i.x;a.pointA.y=i.y;c.set(t,!1);this.world.emit(l.DRAG,t,this)}},stopDrag:function stopDrag(){var e=this.body,t=this.constraint;t.bodyB=null;t.pointB=null;this.pointer=null;this.body=null;this.part=null;if(e){this.world.emit(l.DRAG_END,e,this)}},destroy:function destroy(){this.world.removeConstraint(this.constraint);this.pointer=null;this.constraint=null;this.body=null;this.part=null;this.world.off(l.BEFORE_UPDATE,this.update);this.scene.sys.input.off(d.POINTER_DOWN,this.onDown,this);this.scene.sys.input.off(d.POINTER_UP,this.onUp,this)}});e.exports=h},function(e,t,i){var a={};e.exports=a;var n=i(145),r=i(37);(function(){a.create=function(e){return r.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,e)};a.reset=function(e){if(e.extended){e.narrowDetections=0;e.narrowphaseTests=0;e.narrowReuse=0;e.narrowReuseCount=0;e.midphaseTests=0;e.broadphaseTests=0;e.narrowEff=0;e.midEff=0;e.broadEff=0;e.collisions=0;e.buckets=0;e.pairs=0;e.bodies=0}};a.update=function(e,t){if(e.extended){var i=t.world,a=n.allBodies(i);e.collisions=e.narrowDetections;e.pairs=t.pairs.list.length;e.bodies=a.length;e.midEff=(e.narrowDetections/(e.midphaseTests||1)).toFixed(2);e.narrowEff=(e.narrowDetections/(e.narrowphaseTests||1)).toFixed(2);e.broadEff=(1-e.broadphaseTests/(a.length||1)).toFixed(2);e.narrowReuse=(e.narrowReuseCount/(e.narrowphaseTests||1)).toFixed(2)}}})()},function(e,t,i){var a=i(106),n=i(507),r=i(109),o=i(62),s=i(1378),l=i(102),d=i(0),p=i(145),c=i(1280),u=i(216),g=i(509),h=i(53),m=i(1379),y=i(2),x=i(6),f=i(1289),T=i(1445),v=i(1446),b=i(1383),E=i(1447),S=i(107),_=i(467),A=i(1290),C=i(1287),w=i(23),P=i(1384),O=i(1291),R=i(510),L=i(19),k=i(1281),D=i(101),F=i(86),I=i(1386),M=new d({initialize:function(e){this.scene=e;this.systems=e.sys;this.config=this.getConfig();this.world;this.add;this.bodyBounds;this.body=o;this.composite=p;this.detector=g;this.grid=f;this.pair=_;this.pairs=A;this.query=P;this.resolver=O;this.sat=R;this.constraint=u;this.bodies=r;this.composites=c;this.axes=n;this.bounds=l;this.svg=k;this.vector=D;this.vertices=F;this.verts=F;this._tempVec2=D.create();if(x(this.config,"plugins.collisionevents",!0)){this.enableCollisionEventsPlugin()}if(x(this.config,"plugins.attractors",!1)){this.enableAttractorPlugin()}if(x(this.config,"plugins.wrap",!1)){this.enableWrapPlugin()}O._restingThresh=x(this.config,"restingThresh",4);O._restingThreshTangent=x(this.config,"restingThreshTangent",6);O._positionDampen=x(this.config,"positionDampen",.9);O._positionWarming=x(this.config,"positionWarming",.8);O._frictionNormalMultiplier=x(this.config,"frictionNormalMultiplier",5);e.sys.events.once(L.BOOT,this.boot,this);e.sys.events.on(L.START,this.start,this)},boot:function boot(){this.world=new I(this.scene,this.config);this.add=new m(this.world);this.bodyBounds=new s;this.systems.events.once(L.DESTROY,this.destroy,this)},start:function start(){if(!this.world){this.world=new I(this.scene,this.config);this.add=new m(this.world)}var e=this.systems.events;e.on(L.UPDATE,this.world.update,this.world);e.on(L.POST_UPDATE,this.world.postUpdate,this.world);e.once(L.SHUTDOWN,this.shutdown,this)},getConfig:function getConfig(){var e=this.systems.game.config.physics,t=this.systems.settings.physics,i=S(y(t,"matter",{}),y(e,"matter",{}));return i},enableAttractorPlugin:function enableAttractorPlugin(){C.register(T);C.use(b,T);return this},enableWrapPlugin:function enableWrapPlugin(){C.register(E);C.use(b,E);return this},enableCollisionEventsPlugin:function enableCollisionEventsPlugin(){C.register(v);C.use(b,v);return this},pause:function pause(){return this.world.pause()},resume:function resume(){return this.world.resume()},set60Hz:function set60Hz(){this.world.getDelta=this.world.update60Hz;this.world.autoUpdate=!0;return this},set30Hz:function set30Hz(){this.world.getDelta=this.world.update30Hz;this.world.autoUpdate=!0;return this},step:function step(e,t){this.world.step(e,t)},containsPoint:function containsPoint(e,t,i){e=this.getMatterBodies(e);var a=D.create(t,i),n=P.point(e,a);return 0<n.length?!0:!1},intersectPoint:function intersectPoint(e,t,i){i=this.getMatterBodies(i);var a=D.create(e,t),n=[],r=P.point(i,a);r.forEach(function(e){if(-1===n.indexOf(e)){n.push(e)}});return n},intersectRect:function intersectRect(e,t,i,a,n,r){if(n===void 0){n=!1}r=this.getMatterBodies(r);var o=[],s=P.region(r,{min:{x:e,y:t},max:{x:e+i,y:t+a}},n);s.forEach(function(e){if(-1===o.indexOf(e)){o.push(e)}});return o},intersectRay:function intersectRay(e,t,a,n,r,o){if(r===void 0){r=1}o=this.getMatterBodies(o);for(var s=[],l=P.ray(o,D.create(e,t),D.create(a,n),r),d=0;d<l.length;d++){s.push(l[d].body)}return s},intersectBody:function intersectBody(e,t){t=this.getMatterBodies(t);for(var a=[],n=P.collides(e,t),r=0,o;r<n.length;r++){o=n[r];if(o.bodyA===e){a.push(o.bodyB)}else{a.push(o.bodyA)}}return a},overlap:function overlap(e,t,a,n,r){if(a===void 0){a=null}if(n===void 0){n=null}if(r===void 0){r=a}if(!Array.isArray(e)){e=[e]}e=this.getMatterBodies(e);t=this.getMatterBodies(t);for(var o=!1,s=0;s<e.length;s++){for(var l=e[s],d=P.collides(l,t),p=0;p<d.length;p++){var u=d[p],g=u.bodyA.id===l.id?u.bodyB:u.bodyA;if(!n||n.call(r,l,g,u)){o=!0;if(a){a.call(r,l,g,u)}else if(!n){return!0}}}}return o},setCollisionCategory:function setCollisionCategory(e,t){e=this.getMatterBodies(e);e.forEach(function(e){e.collisionFilter.category=t});return this},setCollisionGroup:function setCollisionGroup(e,t){e=this.getMatterBodies(e);e.forEach(function(e){e.collisionFilter.group=t});return this},setCollidesWith:function setCollidesWith(e,t){e=this.getMatterBodies(e);var a=0;if(!Array.isArray(t)){a=t}else{for(var n=0;n<t.length;n++){a|=t[n]}}e.forEach(function(e){e.collisionFilter.mask=a});return this},getMatterBodies:function getMatterBodies(e){if(!e){return this.world.getAllBodies()}if(!Array.isArray(e)){e=[e]}for(var t=[],a=0,n;a<e.length;a++){n=e[a].hasOwnProperty("body")?e[a].body:e[a];t.push(n)}return t},setVelocity:function setVelocity(e,t,i){e=this.getMatterBodies(e);var a=this._tempVec2;a.x=t;a.y=i;e.forEach(function(e){o.setVelocity(e,a)});return this},setVelocityX:function setVelocityX(e,t){e=this.getMatterBodies(e);var i=this._tempVec2;i.x=t;e.forEach(function(e){i.y=e.velocity.y;o.setVelocity(e,i)});return this},setVelocityY:function setVelocityY(e,t){e=this.getMatterBodies(e);var i=this._tempVec2;i.y=t;e.forEach(function(e){i.x=e.velocity.x;o.setVelocity(e,i)});return this},setAngularVelocity:function setAngularVelocity(e,t){e=this.getMatterBodies(e);e.forEach(function(e){o.setAngularVelocity(e,t)});return this},applyForce:function applyForce(e,t){e=this.getMatterBodies(e);var i=this._tempVec2;e.forEach(function(e){i.x=e.position.x;i.y=e.position.y;o.applyForce(e,i,t)});return this},applyForceFromPosition:function applyForceFromPosition(e,t,i,a){e=this.getMatterBodies(e);var n=this._tempVec2;e.forEach(function(e){if(a===void 0){a=e.angle}n.x=i*Math.cos(a);n.y=i*Math.sin(a);o.applyForce(e,t,n)});return this},applyForceFromAngle:function applyForceFromAngle(e,t,i){e=this.getMatterBodies(e);var a=this._tempVec2;e.forEach(function(e){if(i===void 0){i=e.angle}a.x=t*Math.cos(i);a.y=t*Math.sin(i);o.applyForce(e,{x:e.position.x,y:e.position.y},a)});return this},getConstraintLength:function getConstraintLength(e){var t=e.pointA.x,i=e.pointA.y,a=e.pointB.x,n=e.pointB.y;if(e.bodyA){t+=e.bodyA.position.x;i+=e.bodyA.position.y}if(e.bodyB){a+=e.bodyB.position.x;n+=e.bodyB.position.y}return h(t,i,a,n)},alignBody:function alignBody(e,t,i,n){e=e.hasOwnProperty("body")?e.body:e;var r;switch(n){case a.TOP_LEFT:case a.LEFT_TOP:r=this.bodyBounds.getTopLeft(e,t,i);break;case a.TOP_CENTER:r=this.bodyBounds.getTopCenter(e,t,i);break;case a.TOP_RIGHT:case a.RIGHT_TOP:r=this.bodyBounds.getTopRight(e,t,i);break;case a.LEFT_CENTER:r=this.bodyBounds.getLeftCenter(e,t,i);break;case a.CENTER:r=this.bodyBounds.getCenter(e,t,i);break;case a.RIGHT_CENTER:r=this.bodyBounds.getRightCenter(e,t,i);break;case a.LEFT_BOTTOM:case a.BOTTOM_LEFT:r=this.bodyBounds.getBottomLeft(e,t,i);break;case a.BOTTOM_CENTER:r=this.bodyBounds.getBottomCenter(e,t,i);break;case a.BOTTOM_RIGHT:case a.RIGHT_BOTTOM:r=this.bodyBounds.getBottomRight(e,t,i);break;}if(r){o.setPosition(e,r)}return this},shutdown:function shutdown(){var e=this.systems.events;if(this.world){e.off(L.UPDATE,this.world.update,this.world);e.off(L.POST_UPDATE,this.world.postUpdate,this.world)}e.off(L.SHUTDOWN,this.shutdown,this);if(this.add){this.add.destroy()}if(this.world){this.world.destroy()}this.add=null;this.world=null},destroy:function destroy(){this.shutdown();this.scene.sys.events.off(L.START,this.start,this);this.scene=null;this.systems=null}});w.register("MatterPhysics",M,"matterPhysics");e.exports=M},function(e,t,i){var a=i(1286),n={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function install(e){e.after("Body.create",function(){n.Body.init(this)});e.before("Engine.update",function(e){n.Engine.update(e)})},Body:{init:function init(e){e.plugin.attractors=e.plugin.attractors||[]}},Engine:{update:function update(e){for(var t=e.world,n=a.Composite.allBodies(t),r=0;r<n.length;r+=1){var o=n[r],s=o.plugin.attractors;if(s&&0<s.length){for(var l=r+1,d;l<n.length;l+=1){d=n[l];for(var p=0;p<s.length;p+=1){var c=s[p],u=c;if(a.Common.isFunction(c)){u=c(o,d)}if(u){a.Body.applyForce(d,d.position,u)}}}}}}},Attractors:{gravityConstant:.001,gravity:function gravity(e,t){var i=a.Vector.sub(t.position,e.position),r=a.Vector.magnitudeSquared(i)||1e-4,o=a.Vector.normalise(i),s=-n.Attractors.gravityConstant*(e.mass*t.mass/r),l=a.Vector.mult(o,s);a.Body.applyForce(e,e.position,a.Vector.neg(l));a.Body.applyForce(t,t.position,l)}}};e.exports=n},function(e){e.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function install(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(t){t.pairs.map(function(t){var i=t.bodyA,a=t.bodyB;if(i.gameObject){i.gameObject.emit("collide",i,a,t)}if(a.gameObject){a.gameObject.emit("collide",a,i,t)}e.Events.trigger(i,"onCollide",{pair:t});e.Events.trigger(a,"onCollide",{pair:t});if(i.onCollideCallback){i.onCollideCallback(t)}if(a.onCollideCallback){a.onCollideCallback(t)}if(i.onCollideWith[a.id]){i.onCollideWith[a.id](a,t)}if(a.onCollideWith[i.id]){a.onCollideWith[i.id](i,t)}})});e.Events.on(this,"collisionActive",function(t){t.pairs.map(function(t){var i=t.bodyA,a=t.bodyB;if(i.gameObject){i.gameObject.emit("collideActive",i,a,t)}if(a.gameObject){a.gameObject.emit("collideActive",a,i,t)}e.Events.trigger(i,"onCollideActive",{pair:t});e.Events.trigger(a,"onCollideActive",{pair:t});if(i.onCollideActiveCallback){i.onCollideActiveCallback(t)}if(a.onCollideActiveCallback){a.onCollideActiveCallback(t)}})});e.Events.on(this,"collisionEnd",function(t){t.pairs.map(function(t){var i=t.bodyA,a=t.bodyB;if(i.gameObject){i.gameObject.emit("collideEnd",i,a,t)}if(a.gameObject){a.gameObject.emit("collideEnd",a,i,t)}e.Events.trigger(i,"onCollideEnd",{pair:t});e.Events.trigger(a,"onCollideEnd",{pair:t});if(i.onCollideEndCallback){i.onCollideEndCallback(t)}if(a.onCollideEndCallback){a.onCollideEndCallback(t)}})})})}}},function(e,t,i){var a=i(1286),n={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function install(e){e.after("Engine.update",function(){n.Engine.update(this)})},Engine:{update:function update(e){for(var t=e.world,r=a.Composite.allBodies(t),o=a.Composite.allComposites(t),s=0,l;s<r.length;s+=1){l=r[s];if(l.plugin.wrap){n.Body.wrap(l,l.plugin.wrap)}}for(s=0;s<o.length;s+=1){var d=o[s];if(d.plugin.wrap){n.Composite.wrap(d,d.plugin.wrap)}}}},Bounds:{wrap:function wrap(e,t){var i=null,a=null;if("undefined"!=typeof t.min.x&&"undefined"!=typeof t.max.x){if(e.min.x>t.max.x){i=t.min.x-e.max.x}else if(e.max.x<t.min.x){i=t.max.x-e.min.x}}if("undefined"!=typeof t.min.y&&"undefined"!=typeof t.max.y){if(e.min.y>t.max.y){a=t.min.y-e.max.y}else if(e.max.y<t.min.y){a=t.max.y-e.min.y}}if(null!==i||null!==a){return{x:i||0,y:a||0}}}},Body:{wrap:function wrap(e,t){var i=n.Bounds.wrap(e.bounds,t);if(i){a.Body.translate(e,i)}return i}},Composite:{bounds:function bounds(e){for(var t=a.Composite.allBodies(e),n=[],r=0,o;r<t.length;r+=1){o=t[r];n.push(o.bounds.min,o.bounds.max)}return a.Bounds.create(n)},wrap:function wrap(e,t){var i=n.Bounds.wrap(n.Composite.bounds(e),t);if(i){a.Composite.translate(e,i)}return i}}};e.exports=n},function(e,t,i){e.exports={Canvas:i(1449),Snapshot:i(1450),WebGL:i(1451)}},function(e,t,i){e.exports={CanvasRenderer:i(499),GetBlendModes:i(501),SetTransform:i(27)}},function(e,t,i){e.exports={Canvas:i(500),WebGL:i(503)}},function(e,t,i){e.exports={Utils:i(10),WebGLPipeline:i(234),WebGLRenderer:i(502),Pipelines:i(1452),BYTE:0,SHORT:1,UNSIGNED_BYTE:2,UNSIGNED_SHORT:3,FLOAT:4}},function(e,t,i){e.exports={BitmapMaskPipeline:i(504),ForwardDiffuseLightPipeline:i(505),TextureTintPipeline:i(235),ModelViewProjection:i(506)}}])});
//# sourceMappingURL=phaser.min.js.map
