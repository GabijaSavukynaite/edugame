function _typeof(a){if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}function _defineProperties(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function _createClass(a,b,c){if(b)_defineProperties(a.prototype,b);if(c)_defineProperties(a,c);return a}function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(a,b){if(b&&("object"===_typeof(b)||"function"==typeof b)){return b}return _assertThisInitialized(a)}function _getPrototypeOf(a){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return _getPrototypeOf(a)}function _assertThisInitialized(a){if(void 0===a){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return a}function _inherits(a,b){if("function"!=typeof b&&null!==b){throw new TypeError("Super expression must either be null or a function")}a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});if(b)_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){_setPrototypeOf=Object.setPrototypeOf||function(a,b){a.__proto__=b;return a};return _setPrototypeOf(a,b)}require.config({paths:{Phaser:"https://cdnjs.cloudflare.com/ajax/libs/phaser/3.22.0/phaser.min"}});define ("mod_edugame/game",["Phaser","jquery","core/yui","core/notification","core/ajax"],function(a,b,c,d,e){return{init:function init(b,c){var f=function(a){_inherits(b,a);function b(a,c,d,e,f){var g;_classCallCheck(this,b);g=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,a,c,d,e,f));g.fraction=e;g.index=f;g.setTexture("cloud");g.setPosition(c,d);a.add.existing(_assertThisInitialized(g));a.physics.add.existing(_assertThisInitialized(g),!0);return g}return b}(a.Physics.Arcade.Sprite),g=function(a){_inherits(b,a);function b(){var a;_classCallCheck(this,b);a=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,"GameScreen"));a.questions;a.edugameId;a.clouds;a.ground;a.player;a.cursors;a.score=0;a.scoreText;a.questionText;a.answersText=[];a.level=1;a.corretMultipleAnswers=[];a.showNewQuestion=!1;a.collider;return a}_createClass(b,[{key:"init",value:function init(a){this.questions=a.questions;this.edugameId=a.edugameId}},{key:"preload",value:function preload(){}},{key:"create",value:function create(){this.score=0;this.answersText=[];this.level=1;this.corretMultipleAnswers=[];this.showNewQuestion=!1;this.add.image(400,300,"sky");this.clouds=this.add.group();this.ground=this.add.sprite(400,555,"dirt");this.physics.add.existing(this.ground,!0);this.player=this.physics.add.sprite(100,400,"player","character/idle.png");this.player.setBounce(.2);this.player.setCollideWorldBounds(!0);var a=this.anims.generateFrameNames("player",{start:0,end:17,prefix:"character/",suffix:".png"});this.anims.create({key:"walk",frames:a,frameRate:20});this.anims.create({key:"idle",frames:[{key:"player",frame:"character/idle.png"}],frameRate:20});this.anims.create({key:"jump",frames:[{key:"player",frame:"character/jump.png"}],frameRate:20});console.log(JSON.stringify(this.questions));this.physics.add.collider(this.player,this.ground);this.questionText=this.add.text(16,530,this.questions[this.level-1].question,{fontSize:"25px",fontFamily:"Georgia, \"Goudy Bookletter 1911\", Times, serif"});this.scoreText=this.add.text(16,580,"Rezultatas: 0",{fontSize:"20px",fill:"#fff"});var b=800/this.questions[this.level-1].answers.length,c=b/2;if("truefalse"==this.questions[this.level-1].type){this.clouds.add(new f(this,c,50,this.questions[0].answers[0].fraction,0));this.answersText.push(this.add.text(c,50,"True"==this.questions[0].answers[0].text?"Tiesa":"Netiesa",{fontSize:25,fontFamily:"Georgia, \"Goudy Bookletter 1911\", Times, serif"}).setOrigin(.5));c+=b;this.clouds.add(new f(this,c,50,this.questions[0].answers[1].fraction,1));this.answersText.push(this.add.text(c,50,"True"==this.questions[0].answers[1].text?"Tiesa":"Netiesa",{fontSize:25,fontFamily:"Georgia, \"Goudy Bookletter 1911\", Times, serif"}).setOrigin(.5))}else{var d;for(d=0;d<this.questions[this.level-1].answers.length;d++){this.clouds.add(new f(this,c,50,this.questions[this.level-1].answers[d].fraction,d));var e=this.add.text(c,50,this.questions[this.level-1].answers[d].text,{fontSize:"25px",fontFamily:"Georgia, \"Goudy Bookletter 1911\", Times, serif"});e.setOrigin(.5);this.answersText.push(e);if(0<this.questions[this.level-1].answers[d].fraction){this.corretMultipleAnswers.push(d)}c+=b}}}},{key:"update",value:function update(){var a=this;this.cursors=this.input.keyboard.createCursorKeys();if(this.cursors.left.isDown){this.player.setFlipX(!0);this.player.setVelocityX(-200);this.player.anims.play("walk",!0)}else if(this.cursors.right.isDown){this.player.setFlipX(!1);this.player.setVelocityX(200);this.player.anims.play("walk",!0)}else if(this.cursors.up.isDown){this.player.anims.play("jump",!0);if(this.player.body.blocked.down){this.player.setVelocityY(-600)}}else{this.player.setVelocityX(0);this.player.anims.play("idle",!0)}if(this.showNewQuestion){this.showNewQuestion=!1;this.time.addEvent({delay:1e3,callback:function callback(){a.clouds.clear(!0,!0);a.questionText.setText(a.questions[a.level-1].question);for(var b in a.answersText){a.answersText[b].destroy()}a.answersText=[];a.corretMultipleAnswers=[];var c=800/a.questions[a.level-1].answers.length,d=c/2;if("truefalse"==a.questions[a.level-1].type){a.clouds.add(new f(a,d,50,a.questions[0].answers[0].fraction,0));a.answersText.push(a.add.text(d,50,"True"==a.questions[0].answers[0].text?"Tiesa":"Netiesa",{fontSize:25,fontFamily:"Georgia, \"Goudy Bookletter 1911\", Times, serif"}).setOrigin(.5));d+=c;a.clouds.add(new f(a,d,50,a.questions[0].answers[1].fraction,1));a.answersText.push(a.add.text(d,50,"True"==a.questions[0].answers[1].text?"Tiesa":"Netiesa",{fontSize:25,fontFamily:"Georgia, \"Goudy Bookletter 1911\", Times, serif"}).setOrigin(.5))}else{var b;for(b=0;b<a.questions[a.level-1].answers.length;b++){a.clouds.add(new f(a,d,50,a.questions[a.level-1].answers[b].fraction,b));var e=a.add.text(d,50,a.questions[a.level-1].answers[b].text,{fontSize:"25px",fontFamily:"Georgia, \"Goudy Bookletter 1911\", Times, serif"});e.setOrigin(.5);a.answersText.push(e);if(!a.questions[a.level-1].single){if(0<a.questions[a.level-1].answers[b].fraction){a.corretMultipleAnswers.push(b)}}d+=c}}a.clouds.enableBody=!0},loop:!1})}this.collider=this.physics.add.overlap(this.player,this.clouds,function(a,b){var c=parseFloat(b.fraction);this.answersText[b.index].destroy();this.score=(parseFloat(this.score)+c).toFixed(2);b.destroy(!0,!0);this.scoreText.setText("Rezultatas: "+this.score);if(0<c){if("multichoice"==this.questions[this.level-1].type&&1<this.corretMultipleAnswers.length){var d=this.corretMultipleAnswers.findIndex(function(a){return a==b.index});this.corretMultipleAnswers=this.corretMultipleAnswers.splice(d,1)}else{if(this.level>=this.questions.length){this.endGame()}else{this.level++;this.showNewQuestion=!0}}}},null,this)}},{key:"endGame",value:function endGame(){var a;if(0<this.score){a=10*this.score/this.questions.length;a=Math.round(a)}e.call([{methodname:"mod_edugame_add_score",args:{edugameid:this.edugameId,score:Math.trunc(a)},fail:d.exception}]);this.scene.start("ResultScreen",{questions:this.questions,edugameId:this.edugameId,score:a})}}]);return b}(a.Scene),h=function(a){_inherits(b,a);function b(){_classCallCheck(this,b);return _possibleConstructorReturn(this,_getPrototypeOf(b).call(this,"StartScreen"))}_createClass(b,[{key:"preload",value:function preload(){this.load.image("startGameButton","pix/gui/startGameIcon.png");this.load.image("sky","pix/background.png");this.load.image("cloud","pix/cloud.png");this.load.multiatlas("player","pix/character.json","pix");this.load.image("dirt","pix/dirt.png")}},{key:"create",value:function create(a){var b=this.add.image(400,300,"startGameButton");b.setInteractive();this.input.on("pointerup",function(){this.scene.start("GameScreen",a)},this)}},{key:"update",value:function update(){}}]);return b}(a.Scene),i=function(a){_inherits(b,a);function b(){var a;_classCallCheck(this,b);a=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,"ResultScreen"));a.score;a.questions;a.edugameId;return a}_createClass(b,[{key:"init",value:function init(a){this.score=a.score;this.questions=a.questions;this.edugameId=a.edugameId}},{key:"preload",value:function preload(){}},{key:"create",value:function create(){var a=this.add.text(400,250,"Rezultatas: "+this.score,{fontSize:"25px",fontFamily:"Georgia, \"Goudy Bookletter 1911\", Times, serif"});a.setOrigin(.5);var b=this.add.image(400,300,"startGameButton");b.setInteractive();this.input.on("pointerup",function(){this.scene.start("GameScreen",{questions:this.questions,edugameId:this.edugameId})},this)}},{key:"update",value:function update(){}}]);return b}(a.Scene),j={type:a.AUTO,width:800,height:600,physics:{default:"arcade",arcade:{gravity:{y:300},debug:!1}},scene:[h,g,i],parent:"mod_edugame_game"},k=new a.Game(j);k.scene.start("StartScreen",{questions:b,edugameId:c})}}});
//# sourceMappingURL=game.min.js.map
